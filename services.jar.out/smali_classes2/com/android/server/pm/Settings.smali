.class public final Lcom/android/server/pm/Settings;
.super Ljava/lang/Object;
.source "Settings.java"

# interfaces
.implements Lcom/android/server/utils/Watchable;
.implements Lcom/android/server/utils/Snappable;
.implements Lcom/android/server/pm/ResilientAtomicFile$ReadEventLogger;


# annotations
.annotation system Ldalvik/annotation/MemberClasses;
    value = {
        Lcom/android/server/pm/Settings$DatabaseVersion;,
        Lcom/android/server/pm/Settings$RuntimePermissionPersistence;,
        Lcom/android/server/pm/Settings$KeySetToValueMap;,
        Lcom/android/server/pm/Settings$VersionInfo;,
        Lcom/android/server/pm/Settings$KernelPackageState;
    }
.end annotation


# static fields
.field private static final ATTR_APP_LINK_GENERATION:Ljava/lang/String; = "app-link-generation"

.field private static final ATTR_ARCHIVE_ACTIVITY_TITLE:Ljava/lang/String; = "activity-title"

.field private static final ATTR_ARCHIVE_ICON_PATH:Ljava/lang/String; = "icon-path"

.field private static final ATTR_ARCHIVE_INSTALLER_TITLE:Ljava/lang/String; = "installer-title"

.field private static final ATTR_ARCHIVE_MONOCHROME_ICON_PATH:Ljava/lang/String; = "monochrome-icon-path"

.field private static final ATTR_ARCHIVE_ORIGINAL_COMPONENT_NAME:Ljava/lang/String; = "original-component-name"

.field private static final ATTR_ARCHIVE_TIME:Ljava/lang/String; = "archive-time"

.field private static final ATTR_BLOCKED:Ljava/lang/String; = "blocked"

.field private static final ATTR_BLOCK_UNINSTALL:Ljava/lang/String; = "blockUninstall"
    .annotation runtime Ljava/lang/Deprecated;
    .end annotation
.end field

.field private static final ATTR_BUILD_FINGERPRINT:Ljava/lang/String; = "buildFingerprint"

.field private static final ATTR_CE_DATA_INODE:Ljava/lang/String; = "ceDataInode"

.field private static final ATTR_DATABASE_VERSION:Ljava/lang/String; = "databaseVersion"

.field private static final ATTR_DE_DATA_INODE:Ljava/lang/String; = "deDataInode"

.field private static final ATTR_DISTRACTION_FLAGS:Ljava/lang/String; = "distraction_flags"

.field private static final ATTR_DOMAIN_VERIFICATION_STATE:Ljava/lang/String; = "domainVerificationStatus"

.field private static final ATTR_ENABLED:Ljava/lang/String; = "enabled"

.field private static final ATTR_ENABLED_CALLER:Ljava/lang/String; = "enabledCaller"

.field private static final ATTR_ENFORCEMENT:Ljava/lang/String; = "enforcement"

.field private static final ATTR_FINGERPRINT:Ljava/lang/String; = "fingerprint"

.field private static final ATTR_FIRST_INSTALL_TIME:Ljava/lang/String; = "first-install-time"

.field private static final ATTR_FLAGS:Ljava/lang/String; = "flags"

.field private static final ATTR_GRANTED:Ljava/lang/String; = "granted"

.field private static final ATTR_HARMFUL_APP_WARNING:Ljava/lang/String; = "harmful-app-warning"

.field private static final ATTR_HIDDEN:Ljava/lang/String; = "hidden"

.field private static final ATTR_INSTALLED:Ljava/lang/String; = "inst"

.field private static final ATTR_INSTALL_REASON:Ljava/lang/String; = "install-reason"

.field private static final ATTR_INSTANT_APP:Ljava/lang/String; = "instant-app"

.field private static final ATTR_MIN_ASPECT_RATIO:Ljava/lang/String; = "min-aspect-ratio"

.field public static final ATTR_NAME:Ljava/lang/String; = "name"

.field private static final ATTR_NOT_LAUNCHED:Ljava/lang/String; = "nl"

.field private static final ATTR_OPTIONAL:Ljava/lang/String; = "optional"

.field public static final ATTR_PACKAGE:Ljava/lang/String; = "package"

.field private static final ATTR_PACKAGE_NAME:Ljava/lang/String; = "packageName"

.field private static final ATTR_SDK_VERSION:Ljava/lang/String; = "sdkVersion"

.field private static final ATTR_SPLASH_SCREEN_THEME:Ljava/lang/String; = "splash-screen-theme"

.field private static final ATTR_STOPPED:Ljava/lang/String; = "stopped"

.field private static final ATTR_SUSPENDED:Ljava/lang/String; = "suspended"

.field private static final ATTR_SUSPENDING_PACKAGE:Ljava/lang/String; = "suspending-package"

.field private static final ATTR_SUSPENDING_USER:Ljava/lang/String; = "suspending-user"

.field private static final ATTR_SUSPEND_DIALOG_MESSAGE:Ljava/lang/String; = "suspend_dialog_message"
    .annotation runtime Ljava/lang/Deprecated;
    .end annotation
.end field

.field private static final ATTR_UNINSTALL_REASON:Ljava/lang/String; = "uninstall-reason"

.field private static final ATTR_VALUE:Ljava/lang/String; = "value"

.field private static final ATTR_VERSION:Ljava/lang/String; = "version"

.field private static final ATTR_VIRTUAL_PRELOAD:Ljava/lang/String; = "virtual-preload"

.field private static final ATTR_VOLUME_UUID:Ljava/lang/String; = "volumeUuid"

.field public static final CURRENT_DATABASE_VERSION:I = 0x3

.field private static final DEBUG_KERNEL:Z = false

.field private static final DEBUG_MU:Z = false

.field private static final DEBUG_PARSER:Z = false

.field static final DEBUG_STOPPED:Z = false

.field static final FLAG_DUMP_SPEC:[Ljava/lang/Object;

.field private static final PRE_M_APP_INFO_FLAG_CANT_SAVE_STATE:I = 0x10000000

.field private static final PRE_M_APP_INFO_FLAG_HIDDEN:I = 0x8000000

.field private static final PRE_M_APP_INFO_FLAG_PRIVILEGED:I = 0x40000000

.field private static final PRIVATE_FLAG_DUMP_SPEC:[Ljava/lang/Object;

.field private static final RUNTIME_PERMISSIONS_FILE_NAME:Ljava/lang/String; = "runtime-permissions.xml"

.field private static final TAG:Ljava/lang/String; = "PackageSettings"

.field public static final TAG_ALL_INTENT_FILTER_VERIFICATION:Ljava/lang/String; = "all-intent-filter-verifications"

.field private static final TAG_ARCHIVE_ACTIVITY_INFO:Ljava/lang/String; = "archive-activity-info"

.field private static final TAG_ARCHIVE_STATE:Ljava/lang/String; = "archive-state"

.field private static final TAG_BLOCK_UNINSTALL:Ljava/lang/String; = "block-uninstall"

.field private static final TAG_BLOCK_UNINSTALL_PACKAGES:Ljava/lang/String; = "block-uninstall-packages"

.field private static final TAG_CHILD_PACKAGE:Ljava/lang/String; = "child-package"

.field static final TAG_CROSS_PROFILE_INTENT_FILTERS:Ljava/lang/String; = "crossProfile-intent-filters"

.field private static final TAG_DEFAULT_APPS:Ljava/lang/String; = "default-apps"

.field private static final TAG_DEFAULT_BROWSER:Ljava/lang/String; = "default-browser"

.field private static final TAG_DEFAULT_DIALER:Ljava/lang/String; = "default-dialer"

.field private static final TAG_DISABLED_COMPONENTS:Ljava/lang/String; = "disabled-components"

.field public static final TAG_DOMAIN_VERIFICATION:Ljava/lang/String; = "domain-verification"

.field private static final TAG_ENABLED_COMPONENTS:Ljava/lang/String; = "enabled-components"

.field public static final TAG_ITEM:Ljava/lang/String; = "item"

.field private static final TAG_MIME_GROUP:Ljava/lang/String; = "mime-group"

.field private static final TAG_MIME_TYPE:Ljava/lang/String; = "mime-type"

.field protected static final TAG_PACKAGE:Ljava/lang/String; = "pkg"

.field private static final TAG_PACKAGE_RESTRICTIONS:Ljava/lang/String; = "package-restrictions"

.field private static final TAG_PERMISSIONS:Ljava/lang/String; = "perms"

.field private static final TAG_PERSISTENT_PREFERRED_ACTIVITIES:Ljava/lang/String; = "persistent-preferred-activities"

.field private static final TAG_READ_EXTERNAL_STORAGE:Ljava/lang/String; = "read-external-storage"

.field private static final TAG_RUNTIME_PERMISSIONS:Ljava/lang/String; = "runtime-permissions"

.field private static final TAG_SHARED_USER:Ljava/lang/String; = "shared-user"

.field private static final TAG_SUSPENDED_APP_EXTRAS:Ljava/lang/String; = "suspended-app-extras"
    .annotation runtime Ljava/lang/Deprecated;
    .end annotation
.end field

.field private static final TAG_SUSPENDED_DIALOG_INFO:Ljava/lang/String; = "suspended-dialog-info"
    .annotation runtime Ljava/lang/Deprecated;
    .end annotation
.end field

.field private static final TAG_SUSPENDED_LAUNCHER_EXTRAS:Ljava/lang/String; = "suspended-launcher-extras"
    .annotation runtime Ljava/lang/Deprecated;
    .end annotation
.end field

.field private static final TAG_SUSPEND_PARAMS:Ljava/lang/String; = "suspend-params"

.field private static final TAG_USES_SDK_LIB:Ljava/lang/String; = "uses-sdk-lib"

.field private static final TAG_USES_STATIC_LIB:Ljava/lang/String; = "uses-static-lib"

.field private static final TAG_VERSION:Ljava/lang/String; = "version"


# instance fields
.field private final mAppIds:Lcom/android/server/pm/AppIdSettingMap;
    .annotation runtime Lcom/android/server/utils/Watched;
        manual = true
    .end annotation
.end field

.field private final mBackupStoppedPackagesFilename:Ljava/io/File;

.field private final mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;
    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedSparseArray<",
            "Landroid/util/ArraySet<",
            "Ljava/lang/String;",
            ">;>;"
        }
    .end annotation
.end field

.field private final mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;
    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedSparseArray<",
            "Lcom/android/server/pm/CrossProfileIntentResolver;",
            ">;"
        }
    .end annotation
.end field

.field private final mCrossProfileIntentResolversSnapshot:Lcom/android/server/utils/SnapshotCache;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/SnapshotCache<",
            "Lcom/android/server/utils/WatchedSparseArray<",
            "Lcom/android/server/pm/CrossProfileIntentResolver;",
            ">;>;"
        }
    .end annotation
.end field

.field final mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;
    .annotation build Lcom/android/internal/annotations/VisibleForTesting;
        visibility = .enum Lcom/android/internal/annotations/VisibleForTesting$Visibility;->PRIVATE:Lcom/android/internal/annotations/VisibleForTesting$Visibility;
    .end annotation

    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedArrayMap<",
            "Ljava/lang/String;",
            "Lcom/android/server/pm/PackageSetting;",
            ">;"
        }
    .end annotation
.end field

.field private final mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;
    .annotation runtime Lcom/android/server/utils/Watched;
        manual = true
    .end annotation
.end field

.field private final mHandler:Landroid/os/Handler;

.field private final mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;
    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedArraySet<",
            "Ljava/lang/String;",
            ">;"
        }
    .end annotation
.end field

.field private final mInstallerPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/SnapshotCache<",
            "Lcom/android/server/utils/WatchedArraySet<",
            "Ljava/lang/String;",
            ">;>;"
        }
    .end annotation
.end field

.field private final mKernelMapping:Lcom/android/server/utils/WatchedArrayMap;
    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedArrayMap<",
            "Ljava/lang/String;",
            "Lcom/android/server/pm/Settings$KernelPackageState;",
            ">;"
        }
    .end annotation
.end field

.field private final mKernelMappingFilename:Ljava/io/File;

.field private final mKernelMappingSnapshot:Lcom/android/server/utils/SnapshotCache;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/SnapshotCache<",
            "Lcom/android/server/utils/WatchedArrayMap<",
            "Ljava/lang/String;",
            "Lcom/android/server/pm/Settings$KernelPackageState;",
            ">;>;"
        }
    .end annotation
.end field

.field private final mKeySetManagerService:Lcom/android/server/pm/KeySetManagerService;

.field private final mLock:Lcom/android/server/pm/PackageManagerTracedLock;

.field private final mNextAppLinkGeneration:Lcom/android/server/utils/WatchedSparseIntArray;
    .annotation build Landroid/annotation/NonNull;
    .end annotation

    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation
.end field

.field private final mObserver:Lcom/android/server/utils/Watcher;

.field private final mPackageListFilename:Ljava/io/File;

.field private final mPackageRestrictionsLock:Ljava/lang/Object;

.field final mPackages:Lcom/android/server/utils/WatchedArrayMap;
    .annotation build Lcom/android/internal/annotations/VisibleForTesting;
        visibility = .enum Lcom/android/internal/annotations/VisibleForTesting$Visibility;->PRIVATE:Lcom/android/internal/annotations/VisibleForTesting$Visibility;
    .end annotation

    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedArrayMap<",
            "Ljava/lang/String;",
            "Lcom/android/server/pm/PackageSetting;",
            ">;"
        }
    .end annotation
.end field

.field private final mPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/SnapshotCache<",
            "Lcom/android/server/utils/WatchedArrayMap<",
            "Ljava/lang/String;",
            "Lcom/android/server/pm/PackageSetting;",
            ">;>;"
        }
    .end annotation
.end field

.field private final mPendingAsyncPackageRestrictionsWrites:Landroid/util/SparseIntArray;
    .annotation build Lcom/android/internal/annotations/GuardedBy;
        value = {
            "mPackageRestrictionsLock"
        }
    .end annotation
.end field

.field final mPendingDefaultBrowser:Lcom/android/server/utils/WatchedSparseArray;
    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedSparseArray<",
            "Ljava/lang/String;",
            ">;"
        }
    .end annotation
.end field

.field private final mPendingPackages:Lcom/android/server/utils/WatchedArrayList;
    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedArrayList<",
            "Lcom/android/server/pm/PackageSetting;",
            ">;"
        }
    .end annotation
.end field

.field private final mPendingPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/SnapshotCache<",
            "Lcom/android/server/utils/WatchedArrayList<",
            "Lcom/android/server/pm/PackageSetting;",
            ">;>;"
        }
    .end annotation
.end field

.field private final mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;
    .annotation runtime Lcom/android/server/utils/Watched;
        manual = true
    .end annotation
.end field

.field final mPermissions:Lcom/android/server/pm/permission/LegacyPermissionSettings;
    .annotation runtime Lcom/android/server/utils/Watched;
        manual = true
    .end annotation
.end field

.field private final mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;
    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedSparseArray<",
            "Lcom/android/server/pm/PersistentPreferredIntentResolver;",
            ">;"
        }
    .end annotation
.end field

.field private final mPersistentPreferredActivitiesSnapshot:Lcom/android/server/utils/SnapshotCache;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/SnapshotCache<",
            "Lcom/android/server/utils/WatchedSparseArray<",
            "Lcom/android/server/pm/PersistentPreferredIntentResolver;",
            ">;>;"
        }
    .end annotation
.end field

.field final mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;
    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedSparseArray<",
            "Lcom/android/server/pm/PreferredIntentResolver;",
            ">;"
        }
    .end annotation
.end field

.field private final mPreferredActivitiesSnapshot:Lcom/android/server/utils/SnapshotCache;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/SnapshotCache<",
            "Lcom/android/server/utils/WatchedSparseArray<",
            "Lcom/android/server/pm/PreferredIntentResolver;",
            ">;>;"
        }
    .end annotation
.end field

.field private final mPreviousSettingsFilename:Ljava/io/File;

.field final mReadMessages:Ljava/lang/StringBuilder;

.field private final mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;
    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedArrayMap<",
            "Ljava/lang/String;",
            "Ljava/lang/String;",
            ">;"
        }
    .end annotation
.end field

.field private final mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;
    .annotation runtime Lcom/android/server/utils/Watched;
        manual = true
    .end annotation
.end field

.field private final mSettingsFilename:Ljava/io/File;

.field private final mSettingsReserveCopyFilename:Ljava/io/File;

.field final mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;
    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedArrayMap<",
            "Ljava/lang/String;",
            "Lcom/android/server/pm/SharedUserSetting;",
            ">;"
        }
    .end annotation
.end field

.field private final mSmtEx:Lcom/android/server/pm/SettingsSmtEx;

.field private final mSnapshot:Lcom/android/server/utils/SnapshotCache;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/SnapshotCache<",
            "Lcom/android/server/pm/Settings;",
            ">;"
        }
    .end annotation
.end field

.field private final mStoppedPackagesFilename:Ljava/io/File;

.field protected final mSystemDir:Ljava/io/File;

.field private mVerifierDeviceIdentity:Landroid/content/pm/VerifierDeviceIdentity;
    .annotation runtime Lcom/android/server/utils/Watched;
        manual = true
    .end annotation
.end field

.field private final mVersion:Lcom/android/server/utils/WatchedArrayMap;
    .annotation runtime Lcom/android/server/utils/Watched;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Lcom/android/server/utils/WatchedArrayMap<",
            "Ljava/lang/String;",
            "Lcom/android/server/pm/Settings$VersionInfo;",
            ">;"
        }
    .end annotation
.end field

.field private final mWatchable:Lcom/android/server/utils/WatchableImpl;


# direct methods
.method public static synthetic $r8$lambda$53NmgrwLNm2y5xSEATqhfDNuHBU(Lcom/android/server/pm/Settings;Lcom/android/server/pm/SharedUserSetting;)V
    .locals 0

    .line 0
    invoke-direct {p0, p1}, Lcom/android/server/pm/Settings;->lambda$pruneSharedUsersLPw$0(Lcom/android/server/pm/SharedUserSetting;)V

    return-void
.end method

.method public static synthetic $r8$lambda$xF8vBosZYCuleRIdy4wr1C_PPCw(Lcom/android/server/pm/Settings;IJZ)V
    .locals 0

    .line 0
    invoke-direct {p0, p1, p2, p3, p4}, Lcom/android/server/pm/Settings;->lambda$writePackageRestrictionsLPr$1(IJZ)V

    return-void
.end method

.method static bridge synthetic -$$Nest$fgetmHandler(Lcom/android/server/pm/Settings;)Landroid/os/Handler;
    .locals 0

    .line 0
    iget-object p0, p0, Lcom/android/server/pm/Settings;->mHandler:Landroid/os/Handler;

    return-object p0
.end method

.method static bridge synthetic -$$Nest$fgetmLock(Lcom/android/server/pm/Settings;)Lcom/android/server/pm/PackageManagerTracedLock;
    .locals 0

    .line 0
    iget-object p0, p0, Lcom/android/server/pm/Settings;->mLock:Lcom/android/server/pm/PackageManagerTracedLock;

    return-object p0
.end method

.method static bridge synthetic -$$Nest$fgetmPermissionDataProvider(Lcom/android/server/pm/Settings;)Lcom/android/server/pm/permission/LegacyPermissionDataProvider;
    .locals 0

    .line 0
    iget-object p0, p0, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    return-object p0
.end method

.method static bridge synthetic -$$Nest$fgetmRuntimePermissionsPersistence(Lcom/android/server/pm/Settings;)Lcom/android/server/pm/Settings$RuntimePermissionPersistence;
    .locals 0

    .line 0
    iget-object p0, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    return-object p0
.end method

.method static bridge synthetic -$$Nest$fgetmWatchable(Lcom/android/server/pm/Settings;)Lcom/android/server/utils/WatchableImpl;
    .locals 0

    .line 0
    iget-object p0, p0, Lcom/android/server/pm/Settings;->mWatchable:Lcom/android/server/utils/WatchableImpl;

    return-object p0
.end method

.method static constructor <clinit>()V
    .locals 81

    .line 4922
    nop

    .line 4923
    const/4 v0, 0x1

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v1

    move-object/from16 v51, v1

    .line 4924
    const/4 v0, 0x2

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v3

    move-object/from16 v43, v3

    .line 4925
    const/4 v0, 0x4

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v5

    .line 4926
    const/16 v0, 0x8

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v7

    move-object/from16 v61, v7

    .line 4927
    const/16 v0, 0x10

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v9

    move-object/from16 v49, v9

    .line 4928
    const/16 v0, 0x20

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v11

    move-object/from16 v45, v11

    .line 4929
    const/16 v0, 0x40

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v13

    move-object/from16 v47, v13

    .line 4930
    const/16 v0, 0x80

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v15

    move-object/from16 v53, v15

    .line 4931
    const/16 v0, 0x100

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v17

    move-object/from16 v59, v17

    .line 4932
    const/16 v0, 0x4000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v19

    move-object/from16 v65, v19

    .line 4933
    const v0, 0x8000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v21

    move-object/from16 v55, v21

    .line 4934
    const/high16 v0, 0x10000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v23

    move-object/from16 v73, v23

    .line 4935
    const/high16 v0, 0x20000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v25

    move-object/from16 v57, v25

    .line 4936
    const/high16 v0, 0x40000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v27

    move-object/from16 v67, v27

    .line 4937
    const/high16 v0, 0x100000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v29

    const-string v30, "LARGE_HEAP"

    const-string v2, "SYSTEM"

    const-string v4, "DEBUGGABLE"

    const-string v6, "HAS_CODE"

    const-string v8, "PERSISTENT"

    const-string v10, "FACTORY_TEST"

    const-string v12, "ALLOW_TASK_REPARENTING"

    const-string v14, "ALLOW_CLEAR_USER_DATA"

    const-string v16, "UPDATED_SYSTEM_APP"

    const-string v18, "TEST_ONLY"

    const-string v20, "VM_SAFE_MODE"

    const-string v22, "ALLOW_BACKUP"

    const-string v24, "KILL_AFTER_RESTORE"

    const-string v26, "RESTORE_ANY_VERSION"

    const-string v28, "EXTERNAL_STORAGE"

    filled-new-array/range {v1 .. v30}, [Ljava/lang/Object;

    move-result-object v0

    sput-object v0, Lcom/android/server/pm/Settings;->FLAG_DUMP_SPEC:[Ljava/lang/Object;

    .line 4940
    nop

    .line 4941
    const/16 v0, 0x400

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v31

    .line 4942
    const/16 v0, 0x1000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v33

    .line 4943
    const/16 v0, 0x800

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v35

    .line 4944
    const/high16 v0, 0x8000000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v37

    .line 4945
    const/high16 v0, 0x20000000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v39

    .line 4946
    const/16 v0, 0x2000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v41

    .line 4947
    nop

    .line 4948
    nop

    .line 4949
    nop

    .line 4950
    nop

    .line 4951
    nop

    .line 4952
    nop

    .line 4953
    nop

    .line 4954
    nop

    .line 4955
    nop

    .line 4956
    nop

    .line 4957
    const/16 v0, 0x200

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v63

    .line 4958
    nop

    .line 4959
    nop

    .line 4960
    const/high16 v0, 0x80000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v69

    .line 4961
    const/high16 v0, 0x200000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v71

    .line 4962
    nop

    .line 4963
    const/high16 v0, 0x40000000    # 2.0f

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v75

    .line 4964
    const/high16 v0, -0x80000000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v77

    .line 4965
    const/high16 v0, 0x1000000

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v79

    const-string v80, "PRIVATE_FLAG_HAS_FRAGILE_USER_DATA"

    const-string v32, "PRIVATE_FLAG_ACTIVITIES_RESIZE_MODE_RESIZEABLE"

    const-string v34, "PRIVATE_FLAG_ACTIVITIES_RESIZE_MODE_RESIZEABLE_VIA_SDK_VERSION"

    const-string v36, "PRIVATE_FLAG_ACTIVITIES_RESIZE_MODE_UNRESIZEABLE"

    const-string v38, "ALLOW_AUDIO_PLAYBACK_CAPTURE"

    const-string v40, "PRIVATE_FLAG_REQUEST_LEGACY_EXTERNAL_STORAGE"

    const-string v42, "BACKUP_IN_FOREGROUND"

    const-string v44, "CANT_SAVE_STATE"

    const-string v46, "DEFAULT_TO_DEVICE_PROTECTED_STORAGE"

    const-string v48, "DIRECT_BOOT_AWARE"

    const-string v50, "HAS_DOMAIN_URLS"

    const-string v52, "HIDDEN"

    const-string v54, "EPHEMERAL"

    const-string v56, "ISOLATED_SPLIT_LOADING"

    const-string v58, "OEM"

    const-string v60, "PARTIALLY_DIRECT_BOOT_AWARE"

    const-string v62, "PRIVILEGED"

    const-string v64, "REQUIRED_FOR_SYSTEM_USER"

    const-string v66, "STATIC_SHARED_LIBRARY"

    const-string v68, "VENDOR"

    const-string v70, "PRODUCT"

    const-string v72, "SYSTEM_EXT"

    const-string v74, "VIRTUAL_PRELOAD"

    const-string v76, "ODM"

    const-string v78, "PRIVATE_FLAG_ALLOW_NATIVE_HEAP_POINTER_TAGGING"

    filled-new-array/range {v31 .. v80}, [Ljava/lang/Object;

    move-result-object v0

    sput-object v0, Lcom/android/server/pm/Settings;->PRIVATE_FLAG_DUMP_SPEC:[Ljava/lang/Object;

    .line 4940
    return-void
.end method

.method private constructor <init>(Lcom/android/server/pm/Settings;)V
    .locals 3
    .param p1, "r"    # Lcom/android/server/pm/Settings;

    .line 764
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    .line 191
    new-instance v0, Lcom/android/server/utils/WatchableImpl;

    invoke-direct {v0}, Lcom/android/server/utils/WatchableImpl;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mWatchable:Lcom/android/server/utils/WatchableImpl;

    .line 416
    new-instance v0, Ljava/lang/Object;

    invoke-direct {v0}, Ljava/lang/Object;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPackageRestrictionsLock:Ljava/lang/Object;

    .line 419
    new-instance v0, Landroid/util/SparseIntArray;

    invoke-direct {v0}, Landroid/util/SparseIntArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPendingAsyncPackageRestrictionsWrites:Landroid/util/SparseIntArray;

    .line 442
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    .line 447
    new-instance v0, Lcom/android/server/utils/WatchedSparseArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    .line 457
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    .line 530
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    .line 539
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    .line 546
    new-instance v0, Lcom/android/server/utils/WatchedSparseArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPendingDefaultBrowser:Lcom/android/server/utils/WatchedSparseArray;

    .line 552
    new-instance v0, Lcom/android/server/utils/WatchedSparseIntArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseIntArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mNextAppLinkGeneration:Lcom/android/server/utils/WatchedSparseIntArray;

    .line 556
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    .line 590
    new-instance v0, Lcom/android/server/pm/Settings$1;

    invoke-direct {v0, p0}, Lcom/android/server/pm/Settings$1;-><init>(Lcom/android/server/pm/Settings;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    .line 765
    iget-object v0, p1, Lcom/android/server/pm/Settings;->mPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;

    invoke-virtual {v0}, Lcom/android/server/utils/SnapshotCache;->snapshot()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/utils/WatchedArrayMap;

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    .line 766
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Sealed;

    invoke-direct {v0}, Lcom/android/server/utils/SnapshotCache$Sealed;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 767
    iget-object v0, p1, Lcom/android/server/pm/Settings;->mKernelMappingSnapshot:Lcom/android/server/utils/SnapshotCache;

    invoke-virtual {v0}, Lcom/android/server/utils/SnapshotCache;->snapshot()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/utils/WatchedArrayMap;

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMapping:Lcom/android/server/utils/WatchedArrayMap;

    .line 768
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Sealed;

    invoke-direct {v0}, Lcom/android/server/utils/SnapshotCache$Sealed;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMappingSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 769
    iget-object v0, p1, Lcom/android/server/pm/Settings;->mInstallerPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;

    invoke-virtual {v0}, Lcom/android/server/utils/SnapshotCache;->snapshot()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/utils/WatchedArraySet;

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    .line 770
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Sealed;

    invoke-direct {v0}, Lcom/android/server/utils/SnapshotCache$Sealed;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 771
    new-instance v0, Lcom/android/server/pm/KeySetManagerService;

    iget-object v1, p1, Lcom/android/server/pm/Settings;->mKeySetManagerService:Lcom/android/server/pm/KeySetManagerService;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0, v1, v2}, Lcom/android/server/pm/KeySetManagerService;-><init>(Lcom/android/server/pm/KeySetManagerService;Lcom/android/server/utils/WatchedArrayMap;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mKeySetManagerService:Lcom/android/server/pm/KeySetManagerService;

    .line 777
    const/4 v0, 0x0

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mHandler:Landroid/os/Handler;

    .line 778
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mLock:Lcom/android/server/pm/PackageManagerTracedLock;

    .line 779
    iget-object v1, p1, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    .line 780
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSettingsFilename:Ljava/io/File;

    .line 781
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSettingsReserveCopyFilename:Ljava/io/File;

    .line 782
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPreviousSettingsFilename:Ljava/io/File;

    .line 783
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPackageListFilename:Ljava/io/File;

    .line 784
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mStoppedPackagesFilename:Ljava/io/File;

    .line 785
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mBackupStoppedPackagesFilename:Ljava/io/File;

    .line 786
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMappingFilename:Ljava/io/File;

    .line 788
    iget-object v1, p1, Lcom/android/server/pm/Settings;->mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;

    .line 790
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v2, p1, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedArrayMap;->snapshot(Lcom/android/server/utils/WatchedArrayMap;)V

    .line 791
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v2, p1, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedSparseArray;->snapshot(Lcom/android/server/utils/WatchedSparseArray;)V

    .line 792
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v2, p1, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedArrayMap;->putAll(Ljava/util/Map;)V

    .line 793
    iget-object v1, p1, Lcom/android/server/pm/Settings;->mVerifierDeviceIdentity:Landroid/content/pm/VerifierDeviceIdentity;

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mVerifierDeviceIdentity:Landroid/content/pm/VerifierDeviceIdentity;

    .line 794
    iget-object v1, p1, Lcom/android/server/pm/Settings;->mPreferredActivitiesSnapshot:Lcom/android/server/utils/SnapshotCache;

    invoke-virtual {v1}, Lcom/android/server/utils/SnapshotCache;->snapshot()Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/android/server/utils/WatchedSparseArray;

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    .line 795
    new-instance v1, Lcom/android/server/utils/SnapshotCache$Sealed;

    invoke-direct {v1}, Lcom/android/server/utils/SnapshotCache$Sealed;-><init>()V

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mPreferredActivitiesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 796
    iget-object v1, p1, Lcom/android/server/pm/Settings;->mPersistentPreferredActivitiesSnapshot:Lcom/android/server/utils/SnapshotCache;

    invoke-virtual {v1}, Lcom/android/server/utils/SnapshotCache;->snapshot()Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/android/server/utils/WatchedSparseArray;

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    .line 797
    new-instance v1, Lcom/android/server/utils/SnapshotCache$Sealed;

    invoke-direct {v1}, Lcom/android/server/utils/SnapshotCache$Sealed;-><init>()V

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivitiesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 798
    iget-object v1, p1, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolversSnapshot:Lcom/android/server/utils/SnapshotCache;

    invoke-virtual {v1}, Lcom/android/server/utils/SnapshotCache;->snapshot()Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/android/server/utils/WatchedSparseArray;

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    .line 799
    new-instance v1, Lcom/android/server/utils/SnapshotCache$Sealed;

    invoke-direct {v1}, Lcom/android/server/utils/SnapshotCache$Sealed;-><init>()V

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolversSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 801
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v2, p1, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedArrayMap;->snapshot(Lcom/android/server/utils/WatchedArrayMap;)V

    .line 802
    iget-object v1, p1, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    invoke-virtual {v1}, Lcom/android/server/pm/AppIdSettingMap;->snapshot()Lcom/android/server/pm/AppIdSettingMap;

    move-result-object v1

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    .line 804
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v2, p1, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedArrayMap;->snapshot(Lcom/android/server/utils/WatchedArrayMap;)V

    .line 805
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mNextAppLinkGeneration:Lcom/android/server/utils/WatchedSparseIntArray;

    iget-object v2, p1, Lcom/android/server/pm/Settings;->mNextAppLinkGeneration:Lcom/android/server/utils/WatchedSparseIntArray;

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedSparseIntArray;->snapshot(Lcom/android/server/utils/WatchedSparseIntArray;)V

    .line 806
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPendingDefaultBrowser:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v2, p1, Lcom/android/server/pm/Settings;->mPendingDefaultBrowser:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedSparseArray;->snapshot(Lcom/android/server/utils/WatchedSparseArray;)V

    .line 808
    iget-object v1, p1, Lcom/android/server/pm/Settings;->mPendingPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;

    invoke-virtual {v1}, Lcom/android/server/utils/SnapshotCache;->snapshot()Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/android/server/utils/WatchedArrayList;

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;

    .line 809
    new-instance v1, Lcom/android/server/utils/SnapshotCache$Sealed;

    invoke-direct {v1}, Lcom/android/server/utils/SnapshotCache$Sealed;-><init>()V

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mPendingPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 810
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSystemDir:Ljava/io/File;

    .line 812
    iget-object v0, p1, Lcom/android/server/pm/Settings;->mPermissions:Lcom/android/server/pm/permission/LegacyPermissionSettings;

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPermissions:Lcom/android/server/pm/permission/LegacyPermissionSettings;

    .line 813
    iget-object v0, p1, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    .line 816
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Sealed;

    invoke-direct {v0}, Lcom/android/server/utils/SnapshotCache$Sealed;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 819
    invoke-virtual {p1}, Lcom/android/server/pm/Settings;->getSmtEx()Lcom/android/server/pm/SettingsSmtEx;

    move-result-object v0

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSmtEx:Lcom/android/server/pm/SettingsSmtEx;

    .line 821
    return-void
.end method

.method synthetic constructor <init>(Lcom/android/server/pm/Settings;Lcom/android/server/pm/Settings-IA;)V
    .locals 0

    .line 0
    invoke-direct {p0, p1}, Lcom/android/server/pm/Settings;-><init>(Lcom/android/server/pm/Settings;)V

    return-void
.end method

.method constructor <init>(Ljava/io/File;Lcom/android/permission/persistence/RuntimePermissionsPersistence;Lcom/android/server/pm/permission/LegacyPermissionDataProvider;Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;Landroid/os/Handler;Lcom/android/server/pm/PackageManagerTracedLock;)V
    .locals 4
    .param p1, "dataDir"    # Ljava/io/File;
    .param p2, "runtimePermissionsPersistence"    # Lcom/android/permission/persistence/RuntimePermissionsPersistence;
    .param p3, "permissionDataProvider"    # Lcom/android/server/pm/permission/LegacyPermissionDataProvider;
    .param p4, "domainVerificationManager"    # Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p5, "handler"    # Landroid/os/Handler;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p6, "lock"    # Lcom/android/server/pm/PackageManagerTracedLock;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param

    .line 688
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    .line 191
    new-instance v0, Lcom/android/server/utils/WatchableImpl;

    invoke-direct {v0}, Lcom/android/server/utils/WatchableImpl;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mWatchable:Lcom/android/server/utils/WatchableImpl;

    .line 416
    new-instance v0, Ljava/lang/Object;

    invoke-direct {v0}, Ljava/lang/Object;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPackageRestrictionsLock:Ljava/lang/Object;

    .line 419
    new-instance v0, Landroid/util/SparseIntArray;

    invoke-direct {v0}, Landroid/util/SparseIntArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPendingAsyncPackageRestrictionsWrites:Landroid/util/SparseIntArray;

    .line 442
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    .line 447
    new-instance v0, Lcom/android/server/utils/WatchedSparseArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    .line 457
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    .line 530
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    .line 539
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    .line 546
    new-instance v0, Lcom/android/server/utils/WatchedSparseArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPendingDefaultBrowser:Lcom/android/server/utils/WatchedSparseArray;

    .line 552
    new-instance v0, Lcom/android/server/utils/WatchedSparseIntArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseIntArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mNextAppLinkGeneration:Lcom/android/server/utils/WatchedSparseIntArray;

    .line 556
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    .line 590
    new-instance v0, Lcom/android/server/pm/Settings$1;

    invoke-direct {v0, p0}, Lcom/android/server/pm/Settings$1;-><init>(Lcom/android/server/pm/Settings;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    .line 689
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    .line 690
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    const-string v3, "Settings.mPackages"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 692
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMapping:Lcom/android/server/utils/WatchedArrayMap;

    .line 693
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mKernelMapping:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mKernelMapping:Lcom/android/server/utils/WatchedArrayMap;

    const-string v3, "Settings.mKernelMapping"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMappingSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 695
    new-instance v0, Lcom/android/server/utils/WatchedArraySet;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArraySet;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    .line 696
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    const-string v3, "Settings.mInstallerPackages"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 699
    new-instance v0, Lcom/android/server/utils/WatchedSparseArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    .line 700
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    const-string v3, "Settings.mPreferredActivities"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPreferredActivitiesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 702
    new-instance v0, Lcom/android/server/utils/WatchedSparseArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    .line 703
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    const-string v3, "Settings.mPersistentPreferredActivities"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivitiesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 706
    new-instance v0, Lcom/android/server/utils/WatchedSparseArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    .line 707
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    const-string v3, "Settings.mCrossProfileIntentResolvers"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolversSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 710
    new-instance v0, Lcom/android/server/utils/WatchedArrayList;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayList;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;

    .line 711
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;

    const-string v3, "Settings.mPendingPackages"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPendingPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 713
    new-instance v0, Lcom/android/server/pm/KeySetManagerService;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0, v1}, Lcom/android/server/pm/KeySetManagerService;-><init>(Lcom/android/server/utils/WatchedArrayMap;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mKeySetManagerService:Lcom/android/server/pm/KeySetManagerService;

    .line 715
    iput-object p5, p0, Lcom/android/server/pm/Settings;->mHandler:Landroid/os/Handler;

    .line 716
    iput-object p6, p0, Lcom/android/server/pm/Settings;->mLock:Lcom/android/server/pm/PackageManagerTracedLock;

    .line 717
    new-instance v0, Lcom/android/server/pm/AppIdSettingMap;

    invoke-direct {v0}, Lcom/android/server/pm/AppIdSettingMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    .line 718
    new-instance v0, Lcom/android/server/pm/permission/LegacyPermissionSettings;

    invoke-direct {v0}, Lcom/android/server/pm/permission/LegacyPermissionSettings;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPermissions:Lcom/android/server/pm/permission/LegacyPermissionSettings;

    .line 719
    new-instance v0, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    new-instance v1, Lcom/android/server/pm/Settings$3;

    invoke-direct {v1, p0}, Lcom/android/server/pm/Settings$3;-><init>(Lcom/android/server/pm/Settings;)V

    invoke-direct {v0, p2, v1}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;-><init>(Lcom/android/permission/persistence/RuntimePermissionsPersistence;Ljava/util/function/Consumer;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    .line 727
    iput-object p3, p0, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    .line 729
    new-instance v0, Ljava/io/File;

    const-string/jumbo v1, "system"

    invoke-direct {v0, p1, v1}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSystemDir:Ljava/io/File;

    .line 730
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mSystemDir:Ljava/io/File;

    invoke-virtual {v0}, Ljava/io/File;->mkdirs()Z

    .line 731
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mSystemDir:Ljava/io/File;

    invoke-virtual {v0}, Ljava/lang/Object;->toString()Ljava/lang/String;

    move-result-object v0

    const/16 v1, 0x1fd

    const/4 v2, -0x1

    invoke-static {v0, v1, v2, v2}, Landroid/os/FileUtils;->setPermissions(Ljava/lang/String;III)I

    .line 735
    new-instance v0, Ljava/io/File;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mSystemDir:Ljava/io/File;

    const-string/jumbo v2, "packages.xml"

    invoke-direct {v0, v1, v2}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSettingsFilename:Ljava/io/File;

    .line 736
    new-instance v0, Ljava/io/File;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mSystemDir:Ljava/io/File;

    const-string/jumbo v2, "packages.xml.reservecopy"

    invoke-direct {v0, v1, v2}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSettingsReserveCopyFilename:Ljava/io/File;

    .line 737
    new-instance v0, Ljava/io/File;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mSystemDir:Ljava/io/File;

    const-string/jumbo v2, "packages-backup.xml"

    invoke-direct {v0, v1, v2}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPreviousSettingsFilename:Ljava/io/File;

    .line 738
    new-instance v0, Ljava/io/File;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mSystemDir:Ljava/io/File;

    const-string/jumbo v2, "packages.list"

    invoke-direct {v0, v1, v2}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPackageListFilename:Ljava/io/File;

    .line 739
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackageListFilename:Ljava/io/File;

    const/16 v1, 0x3e8

    const/16 v2, 0x408

    const/16 v3, 0x1a0

    invoke-static {v0, v3, v1, v2}, Landroid/os/FileUtils;->setPermissions(Ljava/io/File;III)I

    .line 741
    new-instance v0, Ljava/io/File;

    const-string v1, "/config/sdcardfs"

    invoke-direct {v0, v1}, Ljava/io/File;-><init>(Ljava/lang/String;)V

    .line 742
    .local v0, "kernelDir":Ljava/io/File;
    invoke-virtual {v0}, Ljava/io/File;->exists()Z

    move-result v1

    if-eqz v1, :cond_0

    move-object v1, v0

    goto :goto_0

    :cond_0
    const/4 v1, 0x0

    :goto_0
    iput-object v1, p0, Lcom/android/server/pm/Settings;->mKernelMappingFilename:Ljava/io/File;

    .line 745
    new-instance v1, Ljava/io/File;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mSystemDir:Ljava/io/File;

    const-string/jumbo v3, "packages-stopped.xml"

    invoke-direct {v1, v2, v3}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mStoppedPackagesFilename:Ljava/io/File;

    .line 746
    new-instance v1, Ljava/io/File;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mSystemDir:Ljava/io/File;

    const-string/jumbo v3, "packages-stopped-backup.xml"

    invoke-direct {v1, v2, v3}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mBackupStoppedPackagesFilename:Ljava/io/File;

    .line 748
    iput-object p4, p0, Lcom/android/server/pm/Settings;->mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;

    .line 750
    invoke-direct {p0}, Lcom/android/server/pm/Settings;->registerObservers()V

    .line 751
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-static {p0, v1}, Lcom/android/server/utils/Watchable;->verifyWatchedAttributes(Ljava/lang/Object;Lcom/android/server/utils/Watcher;)V

    .line 753
    invoke-direct {p0}, Lcom/android/server/pm/Settings;->makeCache()Lcom/android/server/utils/SnapshotCache;

    move-result-object v1

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 755
    new-instance v1, Lcom/android/server/pm/SettingsSmtEx;

    invoke-direct {v1, p0}, Lcom/android/server/pm/SettingsSmtEx;-><init>(Lcom/android/server/pm/Settings;)V

    iput-object v1, p0, Lcom/android/server/pm/Settings;->mSmtEx:Lcom/android/server/pm/SettingsSmtEx;

    .line 757
    return-void
.end method

.method public constructor <init>(Ljava/util/Map;)V
    .locals 4
    .annotation build Lcom/android/internal/annotations/VisibleForTesting;
        visibility = .enum Lcom/android/internal/annotations/VisibleForTesting$Visibility;->PRIVATE:Lcom/android/internal/annotations/VisibleForTesting$Visibility;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/util/Map<",
            "Ljava/lang/String;",
            "Lcom/android/server/pm/PackageSetting;",
            ">;)V"
        }
    .end annotation

    .line 630
    .local p1, "pkgSettings":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/server/pm/PackageSetting;>;"
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    .line 191
    new-instance v0, Lcom/android/server/utils/WatchableImpl;

    invoke-direct {v0}, Lcom/android/server/utils/WatchableImpl;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mWatchable:Lcom/android/server/utils/WatchableImpl;

    .line 416
    new-instance v0, Ljava/lang/Object;

    invoke-direct {v0}, Ljava/lang/Object;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPackageRestrictionsLock:Ljava/lang/Object;

    .line 419
    new-instance v0, Landroid/util/SparseIntArray;

    invoke-direct {v0}, Landroid/util/SparseIntArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPendingAsyncPackageRestrictionsWrites:Landroid/util/SparseIntArray;

    .line 442
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    .line 447
    new-instance v0, Lcom/android/server/utils/WatchedSparseArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    .line 457
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    .line 530
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    .line 539
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    .line 546
    new-instance v0, Lcom/android/server/utils/WatchedSparseArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPendingDefaultBrowser:Lcom/android/server/utils/WatchedSparseArray;

    .line 552
    new-instance v0, Lcom/android/server/utils/WatchedSparseIntArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseIntArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mNextAppLinkGeneration:Lcom/android/server/utils/WatchedSparseIntArray;

    .line 556
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    .line 590
    new-instance v0, Lcom/android/server/pm/Settings$1;

    invoke-direct {v0, p0}, Lcom/android/server/pm/Settings$1;-><init>(Lcom/android/server/pm/Settings;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    .line 631
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    .line 632
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    const-string v3, "Settings.mPackages"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 634
    new-instance v0, Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMapping:Lcom/android/server/utils/WatchedArrayMap;

    .line 635
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mKernelMapping:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mKernelMapping:Lcom/android/server/utils/WatchedArrayMap;

    const-string v3, "Settings.mKernelMapping"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMappingSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 637
    new-instance v0, Lcom/android/server/utils/WatchedArraySet;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArraySet;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    .line 638
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    const-string v3, "Settings.mInstallerPackages"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 641
    new-instance v0, Lcom/android/server/utils/WatchedSparseArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    .line 642
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    const-string v3, "Settings.mPreferredActivities"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPreferredActivitiesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 644
    new-instance v0, Lcom/android/server/utils/WatchedSparseArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    .line 645
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    const-string v3, "Settings.mPersistentPreferredActivities"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivitiesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 648
    new-instance v0, Lcom/android/server/utils/WatchedSparseArray;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedSparseArray;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    .line 649
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    const-string v3, "Settings.mCrossProfileIntentResolvers"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolversSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 652
    new-instance v0, Lcom/android/server/utils/WatchedArrayList;

    invoke-direct {v0}, Lcom/android/server/utils/WatchedArrayList;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;

    .line 653
    new-instance v0, Lcom/android/server/utils/SnapshotCache$Auto;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;

    const-string v3, "Settings.mPendingPackages"

    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/utils/SnapshotCache$Auto;-><init>(Lcom/android/server/utils/Snappable;Lcom/android/server/utils/Watchable;Ljava/lang/String;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPendingPackagesSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 655
    new-instance v0, Lcom/android/server/pm/KeySetManagerService;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-direct {v0, v1}, Lcom/android/server/pm/KeySetManagerService;-><init>(Lcom/android/server/utils/WatchedArrayMap;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mKeySetManagerService:Lcom/android/server/pm/KeySetManagerService;

    .line 658
    new-instance v0, Landroid/os/Handler;

    invoke-static {}, Lcom/android/internal/os/BackgroundThread;->getHandler()Landroid/os/Handler;

    move-result-object v1

    invoke-virtual {v1}, Landroid/os/Handler;->getLooper()Landroid/os/Looper;

    move-result-object v1

    invoke-direct {v0, v1}, Landroid/os/Handler;-><init>(Landroid/os/Looper;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mHandler:Landroid/os/Handler;

    .line 659
    new-instance v0, Lcom/android/server/pm/PackageManagerTracedLock;

    invoke-direct {v0}, Lcom/android/server/pm/PackageManagerTracedLock;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mLock:Lcom/android/server/pm/PackageManagerTracedLock;

    .line 660
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->putAll(Ljava/util/Map;)V

    .line 661
    new-instance v0, Lcom/android/server/pm/AppIdSettingMap;

    invoke-direct {v0}, Lcom/android/server/pm/AppIdSettingMap;-><init>()V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    .line 662
    const/4 v0, 0x0

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSystemDir:Ljava/io/File;

    .line 663
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPermissions:Lcom/android/server/pm/permission/LegacyPermissionSettings;

    .line 664
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    .line 665
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    .line 666
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSettingsFilename:Ljava/io/File;

    .line 667
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSettingsReserveCopyFilename:Ljava/io/File;

    .line 668
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPreviousSettingsFilename:Ljava/io/File;

    .line 669
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mPackageListFilename:Ljava/io/File;

    .line 670
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mStoppedPackagesFilename:Ljava/io/File;

    .line 671
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mBackupStoppedPackagesFilename:Ljava/io/File;

    .line 672
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMappingFilename:Ljava/io/File;

    .line 673
    iput-object v0, p0, Lcom/android/server/pm/Settings;->mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;

    .line 675
    invoke-direct {p0}, Lcom/android/server/pm/Settings;->registerObservers()V

    .line 676
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-static {p0, v0}, Lcom/android/server/utils/Watchable;->verifyWatchedAttributes(Ljava/lang/Object;Lcom/android/server/utils/Watcher;)V

    .line 678
    invoke-direct {p0}, Lcom/android/server/pm/Settings;->makeCache()Lcom/android/server/utils/SnapshotCache;

    move-result-object v0

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSnapshot:Lcom/android/server/utils/SnapshotCache;

    .line 680
    new-instance v0, Lcom/android/server/pm/SettingsSmtEx;

    invoke-direct {v0, p0}, Lcom/android/server/pm/SettingsSmtEx;-><init>(Lcom/android/server/pm/Settings;)V

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mSmtEx:Lcom/android/server/pm/SettingsSmtEx;

    .line 682
    return-void
.end method

.method private applyDefaultPreferredActivityLPw(Landroid/content/pm/PackageManagerInternal;Landroid/content/Intent;ILandroid/content/ComponentName;Ljava/lang/String;Landroid/os/PatternMatcher;Landroid/content/IntentFilter$AuthorityEntry;Landroid/os/PatternMatcher;I)V
    .locals 24
    .param p1, "pmInternal"    # Landroid/content/pm/PackageManagerInternal;
    .param p2, "intent"    # Landroid/content/Intent;
    .param p3, "flags"    # I
    .param p4, "cn"    # Landroid/content/ComponentName;
    .param p5, "scheme"    # Ljava/lang/String;
    .param p6, "ssp"    # Landroid/os/PatternMatcher;
    .param p7, "auth"    # Landroid/content/IntentFilter$AuthorityEntry;
    .param p8, "path"    # Landroid/os/PatternMatcher;
    .param p9, "userId"    # I

    .line 3826
    move-object/from16 v8, p2

    move/from16 v9, p3

    move-object/from16 v10, p5

    move-object/from16 v11, p7

    move-object/from16 v12, p8

    .line 3828
    invoke-virtual/range {p2 .. p2}, Landroid/content/Intent;->getType()Ljava/lang/String;

    move-result-object v3

    int-to-long v4, v9

    invoke-static {}, Landroid/os/Binder;->getCallingUid()I

    move-result v6

    .line 3827
    move-object/from16 v1, p1

    move-object/from16 v2, p2

    move/from16 v7, p9

    invoke-virtual/range {v1 .. v7}, Landroid/content/pm/PackageManagerInternal;->queryIntentActivities(Landroid/content/Intent;Ljava/lang/String;JII)Ljava/util/List;

    move-result-object v1

    .line 3832
    .local v1, "ri":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/ResolveInfo;>;"
    const/4 v0, 0x0

    .line 3833
    .local v0, "systemMatch":I
    const/4 v2, 0x0

    .line 3834
    .local v2, "thirdPartyMatch":I
    if-nez v1, :cond_0

    const/4 v3, 0x0

    goto :goto_0

    :cond_0
    invoke-interface {v1}, Ljava/util/List;->size()I

    move-result v3

    .line 3835
    .local v3, "numMatches":I
    :goto_0
    const-string v4, "PackageSettings"

    const/4 v5, 0x1

    if-ge v3, v5, :cond_1

    .line 3836
    new-instance v5, Ljava/lang/StringBuilder;

    invoke-direct {v5}, Ljava/lang/StringBuilder;-><init>()V

    const-string v6, "No potential matches found for "

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v5, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v6, " while setting preferred "

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3837
    invoke-virtual/range {p4 .. p4}, Landroid/content/ComponentName;->flattenToShortString()Ljava/lang/String;

    move-result-object v6

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v5}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v5

    .line 3836
    invoke-static {v4, v5}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 3838
    return-void

    .line 3840
    :cond_1
    const/4 v6, 0x0

    .line 3841
    .local v6, "haveAct":Z
    const/4 v7, 0x0

    .line 3842
    .local v7, "haveNonSys":Landroid/content/ComponentName;
    invoke-interface {v1}, Ljava/util/List;->size()I

    move-result v13

    new-array v13, v13, [Landroid/content/ComponentName;

    .line 3843
    .local v13, "set":[Landroid/content/ComponentName;
    const/4 v14, 0x0

    move/from16 v20, v6

    move v6, v0

    .end local v0    # "systemMatch":I
    .local v6, "systemMatch":I
    .local v14, "i":I
    .local v20, "haveAct":Z
    :goto_1
    if-ge v14, v3, :cond_4

    .line 3844
    invoke-interface {v1, v14}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Landroid/content/pm/ResolveInfo;

    iget-object v0, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;

    .line 3845
    .local v0, "ai":Landroid/content/pm/ActivityInfo;
    new-instance v15, Landroid/content/ComponentName;

    iget-object v5, v0, Landroid/content/pm/ActivityInfo;->packageName:Ljava/lang/String;

    move/from16 v21, v3

    .end local v3    # "numMatches":I
    .local v21, "numMatches":I
    iget-object v3, v0, Landroid/content/pm/ActivityInfo;->name:Ljava/lang/String;

    invoke-direct {v15, v5, v3}, Landroid/content/ComponentName;-><init>(Ljava/lang/String;Ljava/lang/String;)V

    aput-object v15, v13, v14

    .line 3846
    iget-object v3, v0, Landroid/content/pm/ActivityInfo;->applicationInfo:Landroid/content/pm/ApplicationInfo;

    iget v3, v3, Landroid/content/pm/ApplicationInfo;->flags:I

    const/4 v5, 0x1

    and-int/2addr v3, v5

    if-nez v3, :cond_2

    .line 3847
    invoke-interface {v1, v14}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Landroid/content/pm/ResolveInfo;

    iget v3, v3, Landroid/content/pm/ResolveInfo;->match:I

    if-lt v3, v2, :cond_3

    .line 3854
    aget-object v7, v13, v14

    .line 3855
    goto :goto_2

    .line 3857
    :cond_2
    invoke-virtual/range {p4 .. p4}, Landroid/content/ComponentName;->getPackageName()Ljava/lang/String;

    move-result-object v3

    iget-object v15, v0, Landroid/content/pm/ActivityInfo;->packageName:Ljava/lang/String;

    invoke-virtual {v3, v15}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v3

    if-eqz v3, :cond_3

    .line 3858
    invoke-virtual/range {p4 .. p4}, Landroid/content/ComponentName;->getClassName()Ljava/lang/String;

    move-result-object v3

    iget-object v15, v0, Landroid/content/pm/ActivityInfo;->name:Ljava/lang/String;

    invoke-virtual {v3, v15}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v3

    if-eqz v3, :cond_3

    .line 3862
    const/4 v3, 0x1

    .line 3863
    .end local v20    # "haveAct":Z
    .local v3, "haveAct":Z
    invoke-interface {v1, v14}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v15

    check-cast v15, Landroid/content/pm/ResolveInfo;

    iget v6, v15, Landroid/content/pm/ResolveInfo;->match:I

    move/from16 v20, v3

    .line 3843
    .end local v0    # "ai":Landroid/content/pm/ActivityInfo;
    .end local v3    # "haveAct":Z
    .restart local v20    # "haveAct":Z
    :cond_3
    add-int/lit8 v14, v14, 0x1

    move/from16 v3, v21

    goto :goto_1

    .end local v21    # "numMatches":I
    .local v3, "numMatches":I
    :cond_4
    move/from16 v21, v3

    .line 3870
    .end local v3    # "numMatches":I
    .end local v14    # "i":I
    .restart local v21    # "numMatches":I
    :goto_2
    if-eqz v7, :cond_5

    if-ge v2, v6, :cond_5

    .line 3875
    const/4 v7, 0x0

    .line 3877
    :cond_5
    if-eqz v20, :cond_f

    if-nez v7, :cond_f

    .line 3878
    new-instance v0, Lcom/android/server/pm/WatchedIntentFilter;

    invoke-direct {v0}, Lcom/android/server/pm/WatchedIntentFilter;-><init>()V

    move-object v3, v0

    .line 3879
    .local v3, "filter":Lcom/android/server/pm/WatchedIntentFilter;
    invoke-virtual/range {p2 .. p2}, Landroid/content/Intent;->getAction()Ljava/lang/String;

    move-result-object v0

    if-eqz v0, :cond_6

    .line 3880
    invoke-virtual/range {p2 .. p2}, Landroid/content/Intent;->getAction()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v3, v0}, Lcom/android/server/pm/WatchedIntentFilter;->addAction(Ljava/lang/String;)V

    .line 3882
    :cond_6
    invoke-virtual/range {p2 .. p2}, Landroid/content/Intent;->getCategories()Ljava/util/Set;

    move-result-object v0

    if-eqz v0, :cond_7

    .line 3883
    invoke-virtual/range {p2 .. p2}, Landroid/content/Intent;->getCategories()Ljava/util/Set;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v0

    :goto_3
    invoke-interface {v0}, Ljava/util/Iterator;->hasNext()Z

    move-result v5

    nop

    if-eqz v5, :cond_7

    invoke-interface {v0}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Ljava/lang/String;

    .line 3884
    .local v5, "cat":Ljava/lang/String;
    invoke-virtual {v3, v5}, Lcom/android/server/pm/WatchedIntentFilter;->addCategory(Ljava/lang/String;)V

    .line 3885
    .end local v5    # "cat":Ljava/lang/String;
    goto :goto_3

    .line 3887
    :cond_7
    const/high16 v0, 0x10000

    and-int/2addr v0, v9

    if-eqz v0, :cond_8

    .line 3888
    const-string v0, "android.intent.category.DEFAULT"

    invoke-virtual {v3, v0}, Lcom/android/server/pm/WatchedIntentFilter;->addCategory(Ljava/lang/String;)V

    .line 3890
    :cond_8
    if-eqz v10, :cond_9

    .line 3891
    invoke-virtual {v3, v10}, Lcom/android/server/pm/WatchedIntentFilter;->addDataScheme(Ljava/lang/String;)V

    .line 3893
    :cond_9
    if-eqz p6, :cond_a

    .line 3894
    invoke-virtual/range {p6 .. p6}, Landroid/os/PatternMatcher;->getPath()Ljava/lang/String;

    move-result-object v0

    invoke-virtual/range {p6 .. p6}, Landroid/os/PatternMatcher;->getType()I

    move-result v5

    invoke-virtual {v3, v0, v5}, Lcom/android/server/pm/WatchedIntentFilter;->addDataSchemeSpecificPart(Ljava/lang/String;I)V

    .line 3896
    :cond_a
    if-eqz v11, :cond_b

    .line 3897
    invoke-virtual {v3, v11}, Lcom/android/server/pm/WatchedIntentFilter;->addDataAuthority(Landroid/content/IntentFilter$AuthorityEntry;)V

    .line 3899
    :cond_b
    if-eqz v12, :cond_c

    .line 3900
    invoke-virtual {v3, v12}, Lcom/android/server/pm/WatchedIntentFilter;->addDataPath(Landroid/os/PatternMatcher;)V

    .line 3902
    :cond_c
    invoke-virtual/range {p2 .. p2}, Landroid/content/Intent;->getType()Ljava/lang/String;

    move-result-object v0

    if-eqz v0, :cond_d

    .line 3904
    :try_start_0
    invoke-virtual/range {p2 .. p2}, Landroid/content/Intent;->getType()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v3, v0}, Lcom/android/server/pm/WatchedIntentFilter;->addDataType(Ljava/lang/String;)V
    :try_end_0
    .catch Landroid/content/IntentFilter$MalformedMimeTypeException; {:try_start_0 .. :try_end_0} :catch_0

    .line 3907
    move-object/from16 v15, p4

    goto :goto_4

    .line 3905
    :catch_0
    move-exception v0

    .line 3906
    .local v0, "ex":Landroid/content/IntentFilter$MalformedMimeTypeException;
    new-instance v5, Ljava/lang/StringBuilder;

    invoke-direct {v5}, Ljava/lang/StringBuilder;-><init>()V

    const-string v14, "Malformed mimetype "

    invoke-virtual {v5, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual/range {p2 .. p2}, Landroid/content/Intent;->getType()Ljava/lang/String;

    move-result-object v14

    invoke-virtual {v5, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v14, " for "

    invoke-virtual {v5, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-object/from16 v15, p4

    invoke-virtual {v5, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v5}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v5

    invoke-static {v4, v5}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    goto :goto_4

    .line 3902
    .end local v0    # "ex":Landroid/content/IntentFilter$MalformedMimeTypeException;
    :cond_d
    move-object/from16 v15, p4

    .line 3909
    :goto_4
    move-object/from16 v5, p0

    move/from16 v4, p9

    invoke-virtual {v5, v4}, Lcom/android/server/pm/Settings;->editPreferredActivitiesLPw(I)Lcom/android/server/pm/PreferredIntentResolver;

    move-result-object v0

    .line 3910
    .local v0, "pir":Lcom/android/server/pm/PreferredIntentResolver;
    invoke-virtual {v0, v3}, Lcom/android/server/pm/WatchedIntentResolver;->findFilters(Lcom/android/server/pm/WatchedIntentFilter;)Ljava/util/ArrayList;

    move-result-object v14

    .line 3911
    .local v14, "existing":Ljava/util/List;, "Ljava/util/List<Lcom/android/server/pm/PreferredActivity;>;"
    if-eqz v14, :cond_e

    .line 3912
    invoke-static {v0, v3, v14}, Lcom/android/server/pm/Settings;->removeFilters(Lcom/android/server/pm/PreferredIntentResolver;Lcom/android/server/pm/WatchedIntentFilter;Ljava/util/List;)V

    .line 3914
    :cond_e
    new-instance v22, Lcom/android/server/pm/PreferredActivity;

    const/16 v19, 0x1

    move-object/from16 v23, v14

    .end local v14    # "existing":Ljava/util/List;, "Ljava/util/List<Lcom/android/server/pm/PreferredActivity;>;"
    .local v23, "existing":Ljava/util/List;, "Ljava/util/List<Lcom/android/server/pm/PreferredActivity;>;"
    move-object/from16 v14, v22

    move-object v15, v3

    move/from16 v16, v6

    move-object/from16 v17, v13

    move-object/from16 v18, p4

    invoke-direct/range {v14 .. v19}, Lcom/android/server/pm/PreferredActivity;-><init>(Lcom/android/server/pm/WatchedIntentFilter;I[Landroid/content/ComponentName;Landroid/content/ComponentName;Z)V

    .line 3915
    .local v14, "pa":Lcom/android/server/pm/PreferredActivity;
    const/4 v15, 0x0

    invoke-virtual {v0, v15, v14}, Lcom/android/server/pm/WatchedIntentResolver;->addFilter(Lcom/android/server/pm/snapshot/PackageDataSnapshot;Lcom/android/server/pm/WatchedIntentFilter;)V

    .line 3916
    .end local v0    # "pir":Lcom/android/server/pm/PreferredIntentResolver;
    .end local v3    # "filter":Lcom/android/server/pm/WatchedIntentFilter;
    .end local v14    # "pa":Lcom/android/server/pm/PreferredActivity;
    .end local v23    # "existing":Ljava/util/List;, "Ljava/util/List<Lcom/android/server/pm/PreferredActivity;>;"
    goto :goto_6

    .line 3877
    :cond_f
    move-object/from16 v5, p0

    .line 3916
    if-nez v7, :cond_12

    .line 3917
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    .line 3918
    .local v0, "sb":Ljava/lang/StringBuilder;
    const-string v3, "No component "

    invoke-virtual {v0, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3919
    invoke-virtual/range {p4 .. p4}, Landroid/content/ComponentName;->flattenToShortString()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {v0, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3920
    const-string v3, " found setting preferred "

    invoke-virtual {v0, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3921
    invoke-virtual {v0, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    .line 3922
    const-string v3, "; possible matches are "

    invoke-virtual {v0, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3923
    const/4 v3, 0x0

    .local v3, "i":I
    :goto_5
    array-length v14, v13

    if-ge v3, v14, :cond_11

    .line 3924
    if-lez v3, :cond_10

    const-string v14, ", "

    invoke-virtual {v0, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3925
    :cond_10
    aget-object v14, v13, v3

    invoke-virtual {v14}, Landroid/content/ComponentName;->flattenToShortString()Ljava/lang/String;

    move-result-object v14

    invoke-virtual {v0, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3923
    add-int/lit8 v3, v3, 0x1

    goto :goto_5

    :cond_11
    nop

    .line 3927
    .end local v3    # "i":I
    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    invoke-static {v4, v3}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 3928
    .end local v0    # "sb":Ljava/lang/StringBuilder;
    goto :goto_6

    .line 3929
    :cond_12
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string v3, "Not setting preferred "

    invoke-virtual {v0, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v3, "; found third party match "

    invoke-virtual {v0, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3930
    invoke-virtual {v7}, Landroid/content/ComponentName;->flattenToShortString()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {v0, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 3929
    invoke-static {v4, v0}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I

    .line 3932
    :goto_6
    return-void
.end method

.method private applyDefaultPreferredActivityLPw(Landroid/content/pm/PackageManagerInternal;Landroid/content/IntentFilter;Landroid/content/ComponentName;I)V
    .locals 30
    .param p1, "pmInternal"    # Landroid/content/pm/PackageManagerInternal;
    .param p2, "tmpPa"    # Landroid/content/IntentFilter;
    .param p3, "cn"    # Landroid/content/ComponentName;
    .param p4, "userId"    # I

    .line 3716
    move-object/from16 v0, p2

    new-instance v1, Landroid/content/Intent;

    invoke-direct {v1}, Landroid/content/Intent;-><init>()V

    .line 3717
    .local v1, "intent":Landroid/content/Intent;
    const/high16 v2, 0xc0000

    .line 3719
    .local v2, "flags":I
    const/4 v3, 0x0

    invoke-virtual {v0, v3}, Landroid/content/IntentFilter;->getAction(I)Ljava/lang/String;

    move-result-object v4

    invoke-virtual {v1, v4}, Landroid/content/Intent;->setAction(Ljava/lang/String;)Landroid/content/Intent;

    .line 3720
    const/4 v4, 0x0

    move v15, v2

    .end local v2    # "flags":I
    .local v4, "i":I
    .local v15, "flags":I
    :goto_0
    invoke-virtual/range {p2 .. p2}, Landroid/content/IntentFilter;->countCategories()I

    move-result v2

    if-ge v4, v2, :cond_1

    .line 3721
    invoke-virtual {v0, v4}, Landroid/content/IntentFilter;->getCategory(I)Ljava/lang/String;

    move-result-object v2

    .line 3722
    .local v2, "cat":Ljava/lang/String;
    const-string v5, "android.intent.category.DEFAULT"

    invoke-virtual {v2, v5}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v5

    if-eqz v5, :cond_0

    .line 3723
    const/high16 v5, 0x10000

    or-int/2addr v5, v15

    move v15, v5

    .end local v15    # "flags":I
    .local v5, "flags":I
    goto :goto_1

    .line 3725
    .end local v5    # "flags":I
    .restart local v15    # "flags":I
    :cond_0
    invoke-virtual {v1, v2}, Landroid/content/Intent;->addCategory(Ljava/lang/String;)Landroid/content/Intent;

    .line 3720
    .end local v2    # "cat":Ljava/lang/String;
    :goto_1
    add-int/lit8 v4, v4, 0x1

    goto :goto_0

    :cond_1
    nop

    .line 3729
    .end local v4    # "i":I
    const/4 v2, 0x1

    .line 3730
    .local v2, "doNonData":Z
    const/4 v4, 0x0

    .line 3732
    .local v4, "hasSchemes":Z
    invoke-virtual/range {p2 .. p2}, Landroid/content/IntentFilter;->countDataSchemes()I

    move-result v14

    .line 3733
    .local v14, "dataSchemesCount":I
    const/4 v5, 0x0

    move/from16 v16, v4

    move v4, v5

    .local v4, "ischeme":I
    .local v16, "hasSchemes":Z
    :goto_2
    if-ge v4, v14, :cond_a

    .line 3734
    const/4 v5, 0x1

    .line 3735
    .local v5, "doScheme":Z
    invoke-virtual {v0, v4}, Landroid/content/IntentFilter;->getDataScheme(I)Ljava/lang/String;

    move-result-object v13

    .line 3736
    .local v13, "scheme":Ljava/lang/String;
    if-eqz v13, :cond_2

    invoke-virtual {v13}, Ljava/lang/String;->isEmpty()Z

    move-result v6

    if-nez v6, :cond_2

    .line 3737
    const/4 v6, 0x1

    move/from16 v16, v6

    .line 3739
    :cond_2
    invoke-virtual/range {p2 .. p2}, Landroid/content/IntentFilter;->countDataSchemeSpecificParts()I

    move-result v12

    .line 3740
    .local v12, "dataSchemeSpecificPartsCount":I
    const/4 v6, 0x0

    move/from16 v17, v5

    move v11, v6

    .end local v5    # "doScheme":Z
    .local v11, "issp":I
    .local v17, "doScheme":Z
    :goto_3
    if-ge v11, v12, :cond_3

    .line 3741
    new-instance v5, Landroid/net/Uri$Builder;

    invoke-direct {v5}, Landroid/net/Uri$Builder;-><init>()V

    move-object v10, v5

    .line 3742
    .local v10, "builder":Landroid/net/Uri$Builder;
    invoke-virtual {v10, v13}, Landroid/net/Uri$Builder;->scheme(Ljava/lang/String;)Landroid/net/Uri$Builder;

    .line 3743
    invoke-virtual {v0, v11}, Landroid/content/IntentFilter;->getDataSchemeSpecificPart(I)Landroid/os/PatternMatcher;

    move-result-object v18

    .line 3744
    .local v18, "ssp":Landroid/os/PatternMatcher;
    invoke-virtual/range {v18 .. v18}, Landroid/os/PatternMatcher;->getPath()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v10, v5}, Landroid/net/Uri$Builder;->opaquePart(Ljava/lang/String;)Landroid/net/Uri$Builder;

    .line 3745
    new-instance v5, Landroid/content/Intent;

    invoke-direct {v5, v1}, Landroid/content/Intent;-><init>(Landroid/content/Intent;)V

    move-object v9, v5

    .line 3746
    .local v9, "finalIntent":Landroid/content/Intent;
    invoke-virtual {v10}, Landroid/net/Uri$Builder;->build()Landroid/net/Uri;

    move-result-object v5

    invoke-virtual {v9, v5}, Landroid/content/Intent;->setData(Landroid/net/Uri;)Landroid/content/Intent;

    .line 3747
    const/16 v19, 0x0

    const/16 v20, 0x0

    move-object/from16 v5, p0

    move-object/from16 v6, p1

    move-object v7, v9

    move v8, v15

    move-object/from16 v21, v9

    .end local v9    # "finalIntent":Landroid/content/Intent;
    .local v21, "finalIntent":Landroid/content/Intent;
    move-object/from16 v9, p3

    move-object/from16 v22, v10

    .end local v10    # "builder":Landroid/net/Uri$Builder;
    .local v22, "builder":Landroid/net/Uri$Builder;
    move-object v10, v13

    move/from16 v23, v11

    .end local v11    # "issp":I
    .local v23, "issp":I
    move-object/from16 v11, v18

    move/from16 v24, v12

    .end local v12    # "dataSchemeSpecificPartsCount":I
    .local v24, "dataSchemeSpecificPartsCount":I
    move-object/from16 v12, v19

    move-object v3, v13

    .end local v13    # "scheme":Ljava/lang/String;
    .local v3, "scheme":Ljava/lang/String;
    move-object/from16 v13, v20

    move/from16 v20, v14

    .end local v14    # "dataSchemesCount":I
    .local v20, "dataSchemesCount":I
    move/from16 v14, p4

    invoke-direct/range {v5 .. v14}, Lcom/android/server/pm/Settings;->applyDefaultPreferredActivityLPw(Landroid/content/pm/PackageManagerInternal;Landroid/content/Intent;ILandroid/content/ComponentName;Ljava/lang/String;Landroid/os/PatternMatcher;Landroid/content/IntentFilter$AuthorityEntry;Landroid/os/PatternMatcher;I)V

    .line 3749
    const/16 v17, 0x0

    .line 3740
    .end local v18    # "ssp":Landroid/os/PatternMatcher;
    .end local v21    # "finalIntent":Landroid/content/Intent;
    .end local v22    # "builder":Landroid/net/Uri$Builder;
    add-int/lit8 v11, v23, 0x1

    move-object v13, v3

    move/from16 v14, v20

    move/from16 v12, v24

    const/4 v3, 0x0

    .end local v23    # "issp":I
    .restart local v11    # "issp":I
    goto :goto_3

    .end local v3    # "scheme":Ljava/lang/String;
    .end local v20    # "dataSchemesCount":I
    .end local v24    # "dataSchemeSpecificPartsCount":I
    .restart local v12    # "dataSchemeSpecificPartsCount":I
    .restart local v13    # "scheme":Ljava/lang/String;
    .restart local v14    # "dataSchemesCount":I
    :cond_3
    move/from16 v23, v11

    move/from16 v24, v12

    move-object v3, v13

    move/from16 v20, v14

    .line 3751
    .end local v11    # "issp":I
    .end local v12    # "dataSchemeSpecificPartsCount":I
    .end local v13    # "scheme":Ljava/lang/String;
    .end local v14    # "dataSchemesCount":I
    .restart local v3    # "scheme":Ljava/lang/String;
    .restart local v20    # "dataSchemesCount":I
    .restart local v24    # "dataSchemeSpecificPartsCount":I
    invoke-virtual/range {p2 .. p2}, Landroid/content/IntentFilter;->countDataAuthorities()I

    move-result v14

    .line 3752
    .local v14, "dataAuthoritiesCount":I
    const/4 v5, 0x0

    move v13, v5

    .local v13, "iauth":I
    :goto_4
    if-ge v13, v14, :cond_8

    .line 3753
    const/4 v5, 0x1

    .line 3754
    .local v5, "doAuth":Z
    invoke-virtual {v0, v13}, Landroid/content/IntentFilter;->getDataAuthority(I)Landroid/content/IntentFilter$AuthorityEntry;

    move-result-object v18

    .line 3755
    .local v18, "auth":Landroid/content/IntentFilter$AuthorityEntry;
    invoke-virtual/range {p2 .. p2}, Landroid/content/IntentFilter;->countDataPaths()I

    move-result v12

    .line 3756
    .local v12, "dataPathsCount":I
    const/4 v6, 0x0

    move v11, v6

    move/from16 v21, v17

    move/from16 v17, v5

    .end local v5    # "doAuth":Z
    .local v11, "ipath":I
    .local v17, "doAuth":Z
    .local v21, "doScheme":Z
    :goto_5
    if-ge v11, v12, :cond_5

    .line 3757
    new-instance v5, Landroid/net/Uri$Builder;

    invoke-direct {v5}, Landroid/net/Uri$Builder;-><init>()V

    move-object v10, v5

    .line 3758
    .restart local v10    # "builder":Landroid/net/Uri$Builder;
    invoke-virtual {v10, v3}, Landroid/net/Uri$Builder;->scheme(Ljava/lang/String;)Landroid/net/Uri$Builder;

    .line 3759
    invoke-virtual/range {v18 .. v18}, Landroid/content/IntentFilter$AuthorityEntry;->getHost()Ljava/lang/String;

    move-result-object v5

    if-eqz v5, :cond_4

    .line 3760
    invoke-virtual/range {v18 .. v18}, Landroid/content/IntentFilter$AuthorityEntry;->getHost()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v10, v5}, Landroid/net/Uri$Builder;->authority(Ljava/lang/String;)Landroid/net/Uri$Builder;

    .line 3762
    :cond_4
    invoke-virtual {v0, v11}, Landroid/content/IntentFilter;->getDataPath(I)Landroid/os/PatternMatcher;

    move-result-object v22

    .line 3763
    .local v22, "path":Landroid/os/PatternMatcher;
    invoke-virtual/range {v22 .. v22}, Landroid/os/PatternMatcher;->getPath()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v10, v5}, Landroid/net/Uri$Builder;->path(Ljava/lang/String;)Landroid/net/Uri$Builder;

    .line 3764
    new-instance v5, Landroid/content/Intent;

    invoke-direct {v5, v1}, Landroid/content/Intent;-><init>(Landroid/content/Intent;)V

    move-object v9, v5

    .line 3765
    .restart local v9    # "finalIntent":Landroid/content/Intent;
    invoke-virtual {v10}, Landroid/net/Uri$Builder;->build()Landroid/net/Uri;

    move-result-object v5

    invoke-virtual {v9, v5}, Landroid/content/Intent;->setData(Landroid/net/Uri;)Landroid/content/Intent;

    .line 3766
    const/16 v23, 0x0

    move-object/from16 v5, p0

    move-object/from16 v6, p1

    move-object v7, v9

    move v8, v15

    move-object/from16 v25, v9

    .end local v9    # "finalIntent":Landroid/content/Intent;
    .local v25, "finalIntent":Landroid/content/Intent;
    move-object/from16 v9, p3

    move-object/from16 v26, v10

    .end local v10    # "builder":Landroid/net/Uri$Builder;
    .local v26, "builder":Landroid/net/Uri$Builder;
    move-object v10, v3

    move/from16 v27, v11

    .end local v11    # "ipath":I
    .local v27, "ipath":I
    move-object/from16 v11, v23

    move/from16 v23, v12

    .end local v12    # "dataPathsCount":I
    .local v23, "dataPathsCount":I
    move-object/from16 v12, v18

    move/from16 v28, v13

    .end local v13    # "iauth":I
    .local v28, "iauth":I
    move-object/from16 v13, v22

    move/from16 v29, v14

    .end local v14    # "dataAuthoritiesCount":I
    .local v29, "dataAuthoritiesCount":I
    move/from16 v14, p4

    invoke-direct/range {v5 .. v14}, Lcom/android/server/pm/Settings;->applyDefaultPreferredActivityLPw(Landroid/content/pm/PackageManagerInternal;Landroid/content/Intent;ILandroid/content/ComponentName;Ljava/lang/String;Landroid/os/PatternMatcher;Landroid/content/IntentFilter$AuthorityEntry;Landroid/os/PatternMatcher;I)V

    .line 3768
    const/16 v19, 0x0

    move/from16 v21, v19

    move/from16 v17, v19

    .line 3756
    .end local v22    # "path":Landroid/os/PatternMatcher;
    .end local v25    # "finalIntent":Landroid/content/Intent;
    .end local v26    # "builder":Landroid/net/Uri$Builder;
    add-int/lit8 v11, v27, 0x1

    move/from16 v12, v23

    move/from16 v13, v28

    move/from16 v14, v29

    .end local v27    # "ipath":I
    .restart local v11    # "ipath":I
    goto :goto_5

    .end local v23    # "dataPathsCount":I
    .end local v28    # "iauth":I
    .end local v29    # "dataAuthoritiesCount":I
    .restart local v12    # "dataPathsCount":I
    .restart local v13    # "iauth":I
    .restart local v14    # "dataAuthoritiesCount":I
    :cond_5
    move/from16 v27, v11

    move/from16 v23, v12

    move/from16 v28, v13

    move/from16 v29, v14

    const/16 v19, 0x0

    .line 3770
    .end local v11    # "ipath":I
    .end local v12    # "dataPathsCount":I
    .end local v13    # "iauth":I
    .end local v14    # "dataAuthoritiesCount":I
    .restart local v23    # "dataPathsCount":I
    .restart local v28    # "iauth":I
    .restart local v29    # "dataAuthoritiesCount":I
    if-eqz v17, :cond_7

    .line 3771
    new-instance v5, Landroid/net/Uri$Builder;

    invoke-direct {v5}, Landroid/net/Uri$Builder;-><init>()V

    move-object v14, v5

    .line 3772
    .local v14, "builder":Landroid/net/Uri$Builder;
    invoke-virtual {v14, v3}, Landroid/net/Uri$Builder;->scheme(Ljava/lang/String;)Landroid/net/Uri$Builder;

    .line 3773
    invoke-virtual/range {v18 .. v18}, Landroid/content/IntentFilter$AuthorityEntry;->getHost()Ljava/lang/String;

    move-result-object v5

    if-eqz v5, :cond_6

    .line 3774
    invoke-virtual/range {v18 .. v18}, Landroid/content/IntentFilter$AuthorityEntry;->getHost()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v14, v5}, Landroid/net/Uri$Builder;->authority(Ljava/lang/String;)Landroid/net/Uri$Builder;

    .line 3776
    :cond_6
    new-instance v5, Landroid/content/Intent;

    invoke-direct {v5, v1}, Landroid/content/Intent;-><init>(Landroid/content/Intent;)V

    move-object v13, v5

    .line 3777
    .local v13, "finalIntent":Landroid/content/Intent;
    invoke-virtual {v14}, Landroid/net/Uri$Builder;->build()Landroid/net/Uri;

    move-result-object v5

    invoke-virtual {v13, v5}, Landroid/content/Intent;->setData(Landroid/net/Uri;)Landroid/content/Intent;

    .line 3778
    const/4 v11, 0x0

    const/16 v22, 0x0

    move-object/from16 v5, p0

    move-object/from16 v6, p1

    move-object v7, v13

    move v8, v15

    move-object/from16 v9, p3

    move-object v10, v3

    move-object/from16 v12, v18

    move-object/from16 v25, v13

    .end local v13    # "finalIntent":Landroid/content/Intent;
    .restart local v25    # "finalIntent":Landroid/content/Intent;
    move-object/from16 v13, v22

    move-object/from16 v22, v14

    .end local v14    # "builder":Landroid/net/Uri$Builder;
    .local v22, "builder":Landroid/net/Uri$Builder;
    move/from16 v14, p4

    invoke-direct/range {v5 .. v14}, Lcom/android/server/pm/Settings;->applyDefaultPreferredActivityLPw(Landroid/content/pm/PackageManagerInternal;Landroid/content/Intent;ILandroid/content/ComponentName;Ljava/lang/String;Landroid/os/PatternMatcher;Landroid/content/IntentFilter$AuthorityEntry;Landroid/os/PatternMatcher;I)V

    .line 3780
    const/4 v5, 0x0

    move/from16 v17, v5

    .end local v21    # "doScheme":Z
    .local v5, "doScheme":Z
    goto :goto_6

    .line 3770
    .end local v5    # "doScheme":Z
    .end local v22    # "builder":Landroid/net/Uri$Builder;
    .end local v25    # "finalIntent":Landroid/content/Intent;
    .restart local v21    # "doScheme":Z
    :cond_7
    move/from16 v17, v21

    .line 3752
    .end local v18    # "auth":Landroid/content/IntentFilter$AuthorityEntry;
    .end local v21    # "doScheme":Z
    .end local v23    # "dataPathsCount":I
    .local v17, "doScheme":Z
    :goto_6
    add-int/lit8 v13, v28, 0x1

    move/from16 v14, v29

    .end local v28    # "iauth":I
    .local v13, "iauth":I
    goto/16 :goto_4

    .end local v29    # "dataAuthoritiesCount":I
    .local v14, "dataAuthoritiesCount":I
    :cond_8
    move/from16 v28, v13

    move/from16 v29, v14

    const/16 v19, 0x0

    .line 3783
    .end local v13    # "iauth":I
    .end local v14    # "dataAuthoritiesCount":I
    .restart local v29    # "dataAuthoritiesCount":I
    if-eqz v17, :cond_9

    .line 3784
    new-instance v5, Landroid/net/Uri$Builder;

    invoke-direct {v5}, Landroid/net/Uri$Builder;-><init>()V

    move-object v14, v5

    .line 3785
    .local v14, "builder":Landroid/net/Uri$Builder;
    invoke-virtual {v14, v3}, Landroid/net/Uri$Builder;->scheme(Ljava/lang/String;)Landroid/net/Uri$Builder;

    .line 3786
    new-instance v5, Landroid/content/Intent;

    invoke-direct {v5, v1}, Landroid/content/Intent;-><init>(Landroid/content/Intent;)V

    move-object v13, v5

    .line 3787
    .local v13, "finalIntent":Landroid/content/Intent;
    invoke-virtual {v14}, Landroid/net/Uri$Builder;->build()Landroid/net/Uri;

    move-result-object v5

    invoke-virtual {v13, v5}, Landroid/content/Intent;->setData(Landroid/net/Uri;)Landroid/content/Intent;

    .line 3788
    const/4 v12, 0x0

    const/16 v18, 0x0

    const/4 v11, 0x0

    move-object/from16 v5, p0

    move-object/from16 v6, p1

    move-object v7, v13

    move v8, v15

    move-object/from16 v9, p3

    move-object v10, v3

    move-object/from16 v21, v13

    .end local v13    # "finalIntent":Landroid/content/Intent;
    .local v21, "finalIntent":Landroid/content/Intent;
    move-object/from16 v13, v18

    move-object/from16 v18, v14

    .end local v14    # "builder":Landroid/net/Uri$Builder;
    .local v18, "builder":Landroid/net/Uri$Builder;
    move/from16 v14, p4

    invoke-direct/range {v5 .. v14}, Lcom/android/server/pm/Settings;->applyDefaultPreferredActivityLPw(Landroid/content/pm/PackageManagerInternal;Landroid/content/Intent;ILandroid/content/ComponentName;Ljava/lang/String;Landroid/os/PatternMatcher;Landroid/content/IntentFilter$AuthorityEntry;Landroid/os/PatternMatcher;I)V

    .line 3791
    .end local v18    # "builder":Landroid/net/Uri$Builder;
    .end local v21    # "finalIntent":Landroid/content/Intent;
    :cond_9
    const/4 v2, 0x0

    .line 3733
    .end local v3    # "scheme":Ljava/lang/String;
    .end local v17    # "doScheme":Z
    .end local v24    # "dataSchemeSpecificPartsCount":I
    .end local v29    # "dataAuthoritiesCount":I
    add-int/lit8 v4, v4, 0x1

    move/from16 v3, v19

    move/from16 v14, v20

    goto/16 :goto_2

    .end local v20    # "dataSchemesCount":I
    .local v14, "dataSchemesCount":I
    :cond_a
    move/from16 v20, v14

    .line 3794
    .end local v4    # "ischeme":I
    .end local v14    # "dataSchemesCount":I
    .restart local v20    # "dataSchemesCount":I
    const/4 v3, 0x0

    move/from16 v17, v2

    .end local v2    # "doNonData":Z
    .local v3, "idata":I
    .local v17, "doNonData":Z
    :goto_7
    invoke-virtual/range {p2 .. p2}, Landroid/content/IntentFilter;->countDataTypes()I

    move-result v2

    if-ge v3, v2, :cond_e

    .line 3795
    invoke-virtual {v0, v3}, Landroid/content/IntentFilter;->getDataType(I)Ljava/lang/String;

    move-result-object v2

    .line 3796
    .local v2, "mimeType":Ljava/lang/String;
    if-eqz v16, :cond_d

    .line 3797
    new-instance v4, Landroid/net/Uri$Builder;

    invoke-direct {v4}, Landroid/net/Uri$Builder;-><init>()V

    .line 3798
    .local v4, "builder":Landroid/net/Uri$Builder;
    const/4 v5, 0x0

    move v14, v5

    .local v14, "ischeme":I
    :goto_8
    invoke-virtual/range {p2 .. p2}, Landroid/content/IntentFilter;->countDataSchemes()I

    move-result v5

    if-ge v14, v5, :cond_c

    .line 3799
    invoke-virtual {v0, v14}, Landroid/content/IntentFilter;->getDataScheme(I)Ljava/lang/String;

    move-result-object v13

    .line 3800
    .local v13, "scheme":Ljava/lang/String;
    if-eqz v13, :cond_b

    invoke-virtual {v13}, Ljava/lang/String;->isEmpty()Z

    move-result v5

    if-nez v5, :cond_b

    .line 3801
    new-instance v5, Landroid/content/Intent;

    invoke-direct {v5, v1}, Landroid/content/Intent;-><init>(Landroid/content/Intent;)V

    move-object v12, v5

    .line 3802
    .local v12, "finalIntent":Landroid/content/Intent;
    invoke-virtual {v4, v13}, Landroid/net/Uri$Builder;->scheme(Ljava/lang/String;)Landroid/net/Uri$Builder;

    .line 3803
    invoke-virtual {v4}, Landroid/net/Uri$Builder;->build()Landroid/net/Uri;

    move-result-object v5

    invoke-virtual {v12, v5, v2}, Landroid/content/Intent;->setDataAndType(Landroid/net/Uri;Ljava/lang/String;)Landroid/content/Intent;

    .line 3804
    const/16 v18, 0x0

    const/16 v19, 0x0

    const/4 v11, 0x0

    move-object/from16 v5, p0

    move-object/from16 v6, p1

    move-object v7, v12

    move v8, v15

    move-object/from16 v9, p3

    move-object v10, v13

    move-object/from16 v21, v12

    .end local v12    # "finalIntent":Landroid/content/Intent;
    .restart local v21    # "finalIntent":Landroid/content/Intent;
    move-object/from16 v12, v18

    move-object/from16 v18, v13

    .end local v13    # "scheme":Ljava/lang/String;
    .local v18, "scheme":Ljava/lang/String;
    move-object/from16 v13, v19

    move/from16 v19, v14

    .end local v14    # "ischeme":I
    .local v19, "ischeme":I
    move/from16 v14, p4

    invoke-direct/range {v5 .. v14}, Lcom/android/server/pm/Settings;->applyDefaultPreferredActivityLPw(Landroid/content/pm/PackageManagerInternal;Landroid/content/Intent;ILandroid/content/ComponentName;Ljava/lang/String;Landroid/os/PatternMatcher;Landroid/content/IntentFilter$AuthorityEntry;Landroid/os/PatternMatcher;I)V

    goto :goto_9

    .line 3800
    .end local v18    # "scheme":Ljava/lang/String;
    .end local v19    # "ischeme":I
    .end local v21    # "finalIntent":Landroid/content/Intent;
    .restart local v13    # "scheme":Ljava/lang/String;
    .restart local v14    # "ischeme":I
    :cond_b
    move-object/from16 v18, v13

    move/from16 v19, v14

    .line 3798
    .end local v13    # "scheme":Ljava/lang/String;
    .end local v14    # "ischeme":I
    .restart local v19    # "ischeme":I
    :goto_9
    add-int/lit8 v14, v19, 0x1

    .end local v19    # "ischeme":I
    .restart local v14    # "ischeme":I
    goto :goto_8

    :cond_c
    move/from16 v19, v14

    .line 3808
    .end local v4    # "builder":Landroid/net/Uri$Builder;
    .end local v14    # "ischeme":I
    goto :goto_a

    .line 3809
    :cond_d
    new-instance v4, Landroid/content/Intent;

    invoke-direct {v4, v1}, Landroid/content/Intent;-><init>(Landroid/content/Intent;)V

    .line 3810
    .local v4, "finalIntent":Landroid/content/Intent;
    invoke-virtual {v4, v2}, Landroid/content/Intent;->setType(Ljava/lang/String;)Landroid/content/Intent;

    .line 3811
    const/4 v12, 0x0

    const/4 v13, 0x0

    const/4 v10, 0x0

    const/4 v11, 0x0

    move-object/from16 v5, p0

    move-object/from16 v6, p1

    move-object v7, v4

    move v8, v15

    move-object/from16 v9, p3

    move/from16 v14, p4

    invoke-direct/range {v5 .. v14}, Lcom/android/server/pm/Settings;->applyDefaultPreferredActivityLPw(Landroid/content/pm/PackageManagerInternal;Landroid/content/Intent;ILandroid/content/ComponentName;Ljava/lang/String;Landroid/os/PatternMatcher;Landroid/content/IntentFilter$AuthorityEntry;Landroid/os/PatternMatcher;I)V

    .line 3814
    .end local v4    # "finalIntent":Landroid/content/Intent;
    :goto_a
    const/16 v17, 0x0

    .line 3794
    .end local v2    # "mimeType":Ljava/lang/String;
    add-int/lit8 v3, v3, 0x1

    goto :goto_7

    :cond_e
    nop

    .line 3817
    .end local v3    # "idata":I
    if-eqz v17, :cond_f

    .line 3818
    const/4 v9, 0x0

    const/4 v10, 0x0

    const/4 v7, 0x0

    const/4 v8, 0x0

    move-object/from16 v2, p0

    move-object/from16 v3, p1

    move-object v4, v1

    move v5, v15

    move-object/from16 v6, p3

    move/from16 v11, p4

    invoke-direct/range {v2 .. v11}, Lcom/android/server/pm/Settings;->applyDefaultPreferredActivityLPw(Landroid/content/pm/PackageManagerInternal;Landroid/content/Intent;ILandroid/content/ComponentName;Ljava/lang/String;Landroid/os/PatternMatcher;Landroid/content/IntentFilter$AuthorityEntry;Landroid/os/PatternMatcher;I)V

    .line 3821
    :cond_f
    return-void
.end method

.method private static createMimeGroups(Ljava/util/Set;)Ljava/util/Map;
    .locals 2
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/util/Set<",
            "Ljava/lang/String;",
            ">;)",
            "Ljava/util/Map<",
            "Ljava/lang/String;",
            "Ljava/util/Set<",
            "Ljava/lang/String;",
            ">;>;"
        }
    .end annotation

    .line 1224
    .local p0, "mimeGroupNames":Ljava/util/Set;, "Ljava/util/Set<Ljava/lang/String;>;"
    if-nez p0, :cond_0

    .line 1225
    const/4 v0, 0x0

    return-object v0

    .line 1228
    :cond_0
    new-instance v0, Lcom/android/server/pm/Settings$KeySetToValueMap;

    new-instance v1, Landroid/util/ArraySet;

    invoke-direct {v1}, Landroid/util/ArraySet;-><init>()V

    invoke-direct {v0, p0, v1}, Lcom/android/server/pm/Settings$KeySetToValueMap;-><init>(Ljava/util/Set;Ljava/lang/Object;)V

    return-object v0
.end method

.method static createNewSetting(Ljava/lang/String;Lcom/android/server/pm/PackageSetting;Lcom/android/server/pm/PackageSetting;Ljava/lang/String;Lcom/android/server/pm/SharedUserSetting;Ljava/io/File;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;JIILandroid/os/UserHandle;ZZZZLcom/android/server/pm/UserManagerService;[Ljava/lang/String;[J[Z[Ljava/lang/String;[JLjava/util/Set;Ljava/util/UUID;I[B)Lcom/android/server/pm/PackageSetting;
    .locals 44
    .param p0, "pkgName"    # Ljava/lang/String;
    .param p1, "originalPkg"    # Lcom/android/server/pm/PackageSetting;
    .param p2, "disabledPkg"    # Lcom/android/server/pm/PackageSetting;
    .param p3, "realPkgName"    # Ljava/lang/String;
    .param p4, "sharedUser"    # Lcom/android/server/pm/SharedUserSetting;
    .param p5, "codePath"    # Ljava/io/File;
    .param p6, "legacyNativeLibraryPath"    # Ljava/lang/String;
    .param p7, "primaryCpuAbi"    # Ljava/lang/String;
    .param p8, "secondaryCpuAbi"    # Ljava/lang/String;
    .param p9, "versionCode"    # J
    .param p11, "pkgFlags"    # I
    .param p12, "pkgPrivateFlags"    # I
    .param p13, "installUser"    # Landroid/os/UserHandle;
    .param p14, "allowInstall"    # Z
    .param p15, "instantApp"    # Z
    .param p16, "virtualPreload"    # Z
    .param p17, "isStoppedSystemApp"    # Z
    .param p18, "userManager"    # Lcom/android/server/pm/UserManagerService;
    .param p19, "usesSdkLibraries"    # [Ljava/lang/String;
    .param p20, "usesSdkLibrariesVersions"    # [J
    .param p21, "usesSdkLibrariesOptional"    # [Z
    .param p22, "usesStaticLibraries"    # [Ljava/lang/String;
    .param p23, "usesStaticLibrariesVersions"    # [J
    .param p25, "domainSetId"    # Ljava/util/UUID;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p26, "targetSdkVersion"    # I
    .param p27, "restrictUpdatedHash"    # [B
    .annotation build Landroid/annotation/NonNull;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/lang/String;",
            "Lcom/android/server/pm/PackageSetting;",
            "Lcom/android/server/pm/PackageSetting;",
            "Ljava/lang/String;",
            "Lcom/android/server/pm/SharedUserSetting;",
            "Ljava/io/File;",
            "Ljava/lang/String;",
            "Ljava/lang/String;",
            "Ljava/lang/String;",
            "JII",
            "Landroid/os/UserHandle;",
            "ZZZZ",
            "Lcom/android/server/pm/UserManagerService;",
            "[",
            "Ljava/lang/String;",
            "[J[Z[",
            "Ljava/lang/String;",
            "[J",
            "Ljava/util/Set<",
            "Ljava/lang/String;",
            ">;",
            "Ljava/util/UUID;",
            "I[B)",
            "Lcom/android/server/pm/PackageSetting;"
        }
    .end annotation

    .line 1080
    .local p24, "mimeGroupNames":Ljava/util/Set;, "Ljava/util/Set<Ljava/lang/String;>;"
    move-object/from16 v0, p1

    move-object/from16 v1, p2

    move-object/from16 v2, p4

    move-object/from16 v3, p6

    move-object/from16 v4, p7

    move-object/from16 v5, p8

    move-wide/from16 v6, p9

    move/from16 v15, p11

    move-object/from16 v14, p19

    move-object/from16 v13, p20

    move-object/from16 v12, p21

    move-object/from16 v11, p22

    move-object/from16 v10, p23

    move/from16 v9, p26

    move-object/from16 v8, p27

    if-eqz v0, :cond_0

    .line 1083
    new-instance v1, Lcom/android/server/pm/PackageSetting;

    move-object/from16 v2, p0

    invoke-direct {v1, v0, v2}, Lcom/android/server/pm/PackageSetting;-><init>(Lcom/android/server/pm/PackageSetting;Ljava/lang/String;)V

    .line 1084
    move-object/from16 v0, p5

    invoke-virtual {v1, v0}, Lcom/android/server/pm/PackageSetting;->setPath(Ljava/io/File;)Lcom/android/server/pm/PackageSetting;

    move-result-object v1

    .line 1085
    invoke-virtual {v1, v3}, Lcom/android/server/pm/PackageSetting;->setLegacyNativeLibraryPath(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v1

    .line 1086
    invoke-virtual {v1, v4}, Lcom/android/server/pm/PackageSetting;->setPrimaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v1

    .line 1087
    invoke-virtual {v1, v5}, Lcom/android/server/pm/PackageSetting;->setSecondaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v1

    new-instance v0, Lcom/android/server/pm/PackageSignatures;

    invoke-direct {v0}, Lcom/android/server/pm/PackageSignatures;-><init>()V

    .line 1090
    invoke-virtual {v1, v0}, Lcom/android/server/pm/PackageSetting;->setSignatures(Lcom/android/server/pm/PackageSignatures;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 1091
    invoke-virtual {v0, v6, v7}, Lcom/android/server/pm/PackageSetting;->setLongVersionCode(J)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 1092
    invoke-virtual {v0, v14}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibraries([Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 1093
    invoke-virtual {v0, v13}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibrariesVersionsMajor([J)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 1094
    invoke-virtual {v0, v12}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibrariesOptional([Z)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 1095
    invoke-virtual {v0, v11}, Lcom/android/server/pm/PackageSetting;->setUsesStaticLibraries([Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 1096
    invoke-virtual {v0, v10}, Lcom/android/server/pm/PackageSetting;->setUsesStaticLibrariesVersions([J)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 1098
    invoke-virtual/range {p5 .. p5}, Ljava/io/File;->lastModified()J

    move-result-wide v1

    invoke-virtual {v0, v1, v2}, Lcom/android/server/pm/PackageSetting;->setLastModifiedTime(J)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 1099
    move-object/from16 v1, p25

    invoke-virtual {v0, v1}, Lcom/android/server/pm/PackageSetting;->setDomainSetId(Ljava/util/UUID;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 1100
    invoke-virtual {v0, v9}, Lcom/android/server/pm/PackageSetting;->setTargetSdkVersion(I)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 1101
    invoke-virtual {v0, v8}, Lcom/android/server/pm/PackageSetting;->setRestrictUpdateHash([B)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 1102
    .local v0, "pkgSetting":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v0, v15}, Lcom/android/server/pm/SettingBase;->setFlags(I)Lcom/android/server/pm/SettingBase;

    move-result-object v2

    .line 1103
    move-object/from16 v16, v0

    move/from16 v0, p12

    .end local v0    # "pkgSetting":Lcom/android/server/pm/PackageSetting;
    .local v16, "pkgSetting":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v2, v0}, Lcom/android/server/pm/SettingBase;->setPrivateFlags(I)Lcom/android/server/pm/SettingBase;

    move-object/from16 v0, p2

    move-object/from16 v11, p18

    move-wide v8, v6

    move-object v7, v14

    move-object/from16 v6, p4

    goto/16 :goto_9

    .line 1105
    .end local v16    # "pkgSetting":Lcom/android/server/pm/PackageSetting;
    :cond_0
    move/from16 v0, p12

    move-object/from16 v1, p25

    if-eqz p13, :cond_1

    invoke-virtual/range {p13 .. p13}, Landroid/os/UserHandle;->getIdentifier()I

    move-result v16

    goto :goto_0

    .line 1106
    :cond_1
    const/16 v16, 0x0

    :goto_0
    move/from16 v17, v16

    .line 1108
    .local v17, "installUserId":I
    new-instance v2, Lcom/android/server/pm/PackageSetting;

    move-object v0, v8

    move-object v8, v2

    move v1, v9

    move-object/from16 v9, p0

    move-object v15, v10

    move-object/from16 v10, p3

    move-object v0, v11

    move-object/from16 v11, p5

    move-object v1, v12

    move/from16 v12, p11

    move-object v6, v13

    move/from16 v13, p12

    move-object v7, v14

    move-object/from16 v14, p25

    invoke-direct/range {v8 .. v14}, Lcom/android/server/pm/PackageSetting;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/io/File;IILjava/util/UUID;)V

    .line 1110
    invoke-virtual {v2, v7}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibraries([Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1111
    invoke-virtual {v2, v6}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibrariesVersionsMajor([J)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1112
    invoke-virtual {v2, v1}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibrariesOptional([Z)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1113
    invoke-virtual {v2, v0}, Lcom/android/server/pm/PackageSetting;->setUsesStaticLibraries([Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1114
    invoke-virtual {v2, v15}, Lcom/android/server/pm/PackageSetting;->setUsesStaticLibrariesVersions([J)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1115
    invoke-virtual {v2, v3}, Lcom/android/server/pm/PackageSetting;->setLegacyNativeLibraryPath(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1116
    invoke-virtual {v2, v4}, Lcom/android/server/pm/PackageSetting;->setPrimaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1117
    invoke-virtual {v2, v5}, Lcom/android/server/pm/PackageSetting;->setSecondaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1118
    move-wide/from16 v8, p9

    invoke-virtual {v2, v8, v9}, Lcom/android/server/pm/PackageSetting;->setLongVersionCode(J)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1119
    invoke-static/range {p24 .. p24}, Lcom/android/server/pm/Settings;->createMimeGroups(Ljava/util/Set;)Ljava/util/Map;

    move-result-object v6

    invoke-virtual {v2, v6}, Lcom/android/server/pm/PackageSetting;->setMimeGroups(Ljava/util/Map;)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1120
    move/from16 v1, p26

    invoke-virtual {v2, v1}, Lcom/android/server/pm/PackageSetting;->setTargetSdkVersion(I)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1121
    move-object/from16 v0, p27

    invoke-virtual {v2, v0}, Lcom/android/server/pm/PackageSetting;->setRestrictUpdateHash([B)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1122
    invoke-virtual/range {p5 .. p5}, Ljava/io/File;->lastModified()J

    move-result-wide v10

    invoke-virtual {v2, v10, v11}, Lcom/android/server/pm/PackageSetting;->setLastModifiedTime(J)Lcom/android/server/pm/PackageSetting;

    move-result-object v2

    .line 1123
    .local v2, "pkgSetting":Lcom/android/server/pm/PackageSetting;
    move-object/from16 v6, p4

    if-eqz v6, :cond_2

    .line 1124
    iget v10, v6, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-virtual {v2, v10}, Lcom/android/server/pm/PackageSetting;->setSharedUserAppId(I)Lcom/android/server/pm/PackageSetting;

    .line 1127
    :cond_2
    and-int/lit8 v10, p11, 0x1

    if-nez v10, :cond_c

    .line 1133
    invoke-static/range {p18 .. p18}, Lcom/android/server/pm/Settings;->getAllUsers(Lcom/android/server/pm/UserManagerService;)Ljava/util/List;

    move-result-object v10

    .line 1134
    .local v10, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    if-eqz v10, :cond_a

    if-eqz p14, :cond_a

    .line 1135
    invoke-interface {v10}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v12

    :goto_1
    invoke-interface {v12}, Ljava/util/Iterator;->hasNext()Z

    move-result v13

    if-eqz v13, :cond_9

    invoke-interface {v12}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v13

    check-cast v13, Landroid/content/pm/UserInfo;

    .line 1146
    .local v13, "user":Landroid/content/pm/UserInfo;
    if-eqz p13, :cond_6

    const/4 v14, -0x1

    move/from16 v15, v17

    .end local v17    # "installUserId":I
    .local v15, "installUserId":I
    if-ne v15, v14, :cond_4

    iget v14, v13, Landroid/content/pm/UserInfo;->id:I

    .line 1148
    move-object/from16 v11, p18

    invoke-static {v11, v14}, Lcom/android/server/pm/Settings;->isAdbInstallDisallowed(Lcom/android/server/pm/UserManagerService;I)Z

    move-result v14

    if-nez v14, :cond_3

    iget-boolean v14, v13, Landroid/content/pm/UserInfo;->preCreated:Z

    if-eqz v14, :cond_7

    :cond_3
    goto :goto_2

    .line 1146
    :cond_4
    move-object/from16 v11, p18

    .line 1148
    :goto_2
    iget v14, v13, Landroid/content/pm/UserInfo;->id:I

    if-ne v15, v14, :cond_5

    goto :goto_3

    :cond_5
    const/4 v14, 0x0

    goto :goto_4

    .line 1146
    .end local v15    # "installUserId":I
    .restart local v17    # "installUserId":I
    :cond_6
    move-object/from16 v11, p18

    move/from16 v15, v17

    .line 1148
    .end local v17    # "installUserId":I
    .restart local v15    # "installUserId":I
    :cond_7
    :goto_3
    const/4 v14, 0x1

    :goto_4
    nop

    .line 1151
    .local v14, "installed":Z
    iget v0, v13, Landroid/content/pm/UserInfo;->id:I

    const/16 v1, 0xa

    if-ne v0, v1, :cond_8

    iget v0, v13, Landroid/content/pm/UserInfo;->id:I

    if-eq v15, v0, :cond_8

    .line 1153
    const/4 v14, 0x0

    .line 1161
    :cond_8
    iget v0, v13, Landroid/content/pm/UserInfo;->id:I

    move/from16 v19, v0

    const/16 v42, 0x0

    const/16 v43, 0x0

    const-wide/16 v20, 0x0

    const-wide/16 v22, 0x0

    const/16 v24, 0x0

    const/16 v26, 0x1

    const/16 v27, 0x1

    const/16 v28, 0x0

    const/16 v29, 0x0

    const/16 v30, 0x0

    const/16 v33, 0x0

    const/16 v34, 0x0

    const/16 v35, 0x0

    const/16 v36, 0x0

    const/16 v37, 0x0

    const/16 v38, 0x0

    const/16 v39, 0x0

    const-wide/16 v40, 0x0

    move-object/from16 v18, v2

    move/from16 v25, v14

    move/from16 v31, p15

    move/from16 v32, p16

    invoke-virtual/range {v18 .. v43}, Lcom/android/server/pm/PackageSetting;->setUserState(IJJIZZZZILandroid/util/ArrayMap;ZZLjava/lang/String;Landroid/util/ArraySet;Landroid/util/ArraySet;IILjava/lang/String;Ljava/lang/String;JILcom/android/server/pm/pkg/ArchiveState;)V

    .line 1181
    .end local v13    # "user":Landroid/content/pm/UserInfo;
    .end local v14    # "installed":Z
    move/from16 v1, p26

    move-object/from16 v0, p27

    move/from16 v17, v15

    goto :goto_1

    .line 1135
    .end local v15    # "installUserId":I
    .restart local v17    # "installUserId":I
    :cond_9
    move-object/from16 v11, p18

    move/from16 v15, v17

    .end local v17    # "installUserId":I
    .restart local v15    # "installUserId":I
    goto :goto_5

    .line 1134
    .end local v15    # "installUserId":I
    .restart local v17    # "installUserId":I
    :cond_a
    move-object/from16 v11, p18

    move/from16 v15, v17

    .line 1183
    .end local v10    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .end local v17    # "installUserId":I
    .restart local v15    # "installUserId":I
    :cond_b
    :goto_5
    goto :goto_6

    .end local v15    # "installUserId":I
    .restart local v17    # "installUserId":I
    :cond_c
    move-object/from16 v11, p18

    move/from16 v15, v17

    .end local v17    # "installUserId":I
    .restart local v15    # "installUserId":I
    if-eqz p17, :cond_b

    .line 1189
    const/4 v0, 0x1

    invoke-virtual {v2, v0, v15}, Lcom/android/server/pm/PackageSetting;->setStopped(ZI)V

    .line 1190
    invoke-virtual {v2, v0}, Lcom/android/server/pm/PackageSetting;->setScannedAsStoppedSystemApp(Z)Lcom/android/server/pm/PackageSetting;

    .line 1192
    :goto_6
    if-eqz v6, :cond_d

    .line 1193
    iget v0, v6, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-virtual {v2, v0}, Lcom/android/server/pm/PackageSetting;->setAppId(I)Lcom/android/server/pm/PackageSetting;

    move-object/from16 v0, p2

    goto :goto_8

    .line 1196
    :cond_d
    move-object/from16 v0, p2

    if-eqz v0, :cond_e

    .line 1201
    new-instance v1, Lcom/android/server/pm/PackageSignatures;

    invoke-virtual/range {p2 .. p2}, Lcom/android/server/pm/PackageSetting;->getSignatures()Lcom/android/server/pm/PackageSignatures;

    move-result-object v10

    invoke-direct {v1, v10}, Lcom/android/server/pm/PackageSignatures;-><init>(Lcom/android/server/pm/PackageSignatures;)V

    invoke-virtual {v2, v1}, Lcom/android/server/pm/PackageSetting;->setSignatures(Lcom/android/server/pm/PackageSignatures;)Lcom/android/server/pm/PackageSetting;

    .line 1202
    invoke-virtual/range {p2 .. p2}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v1

    invoke-virtual {v2, v1}, Lcom/android/server/pm/PackageSetting;->setAppId(I)Lcom/android/server/pm/PackageSetting;

    .line 1204
    invoke-virtual {v2}, Lcom/android/server/pm/PackageSetting;->getLegacyPermissionState()Lcom/android/server/pm/permission/LegacyPermissionState;

    move-result-object v1

    .line 1205
    invoke-virtual/range {p2 .. p2}, Lcom/android/server/pm/PackageSetting;->getLegacyPermissionState()Lcom/android/server/pm/permission/LegacyPermissionState;

    move-result-object v10

    invoke-virtual {v1, v10}, Lcom/android/server/pm/permission/LegacyPermissionState;->copyFrom(Lcom/android/server/pm/permission/LegacyPermissionState;)V

    .line 1207
    invoke-static/range {p18 .. p18}, Lcom/android/server/pm/Settings;->getAllUsers(Lcom/android/server/pm/UserManagerService;)Ljava/util/List;

    move-result-object v1

    .line 1208
    .local v1, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    if-eqz v1, :cond_e

    .line 1209
    invoke-interface {v1}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v10

    :goto_7
    invoke-interface {v10}, Ljava/util/Iterator;->hasNext()Z

    move-result v12

    nop

    if-eqz v12, :cond_e

    invoke-interface {v10}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v12

    check-cast v12, Landroid/content/pm/UserInfo;

    .line 1210
    .local v12, "user":Landroid/content/pm/UserInfo;
    iget v13, v12, Landroid/content/pm/UserInfo;->id:I

    .line 1211
    .local v13, "userId":I
    nop

    .line 1212
    invoke-virtual {v0, v13}, Lcom/android/server/pm/PackageSetting;->getDisabledComponents(I)Lcom/android/server/utils/WatchedArraySet;

    move-result-object v14

    .line 1211
    invoke-virtual {v2, v14, v13}, Lcom/android/server/pm/PackageSetting;->setDisabledComponentsCopy(Lcom/android/server/utils/WatchedArraySet;I)V

    .line 1213
    nop

    .line 1214
    invoke-virtual {v0, v13}, Lcom/android/server/pm/PackageSetting;->getEnabledComponents(I)Lcom/android/server/utils/WatchedArraySet;

    move-result-object v14

    .line 1213
    invoke-virtual {v2, v14, v13}, Lcom/android/server/pm/PackageSetting;->setEnabledComponentsCopy(Lcom/android/server/utils/WatchedArraySet;I)V

    .line 1215
    .end local v12    # "user":Landroid/content/pm/UserInfo;
    .end local v13    # "userId":I
    goto :goto_7

    .line 1220
    .end local v1    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .end local v15    # "installUserId":I
    :cond_e
    :goto_8
    move-object/from16 v16, v2

    .end local v2    # "pkgSetting":Lcom/android/server/pm/PackageSetting;
    .restart local v16    # "pkgSetting":Lcom/android/server/pm/PackageSetting;
    :goto_9
    return-object v16
.end method

.method private static dumpSplitNames(Ljava/io/PrintWriter;Lcom/android/server/pm/pkg/AndroidPackage;)V
    .locals 5
    .param p0, "pw"    # Ljava/io/PrintWriter;
    .param p1, "pkg"    # Lcom/android/server/pm/pkg/AndroidPackage;

    .line 5771
    if-nez p1, :cond_0

    .line 5772
    const-string/jumbo v0, "unknown"

    invoke-virtual {p0, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    goto :goto_1

    .line 5775
    :cond_0
    const-string v0, "["

    invoke-virtual {p0, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5776
    const-string v0, "base"

    invoke-virtual {p0, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5777
    invoke-interface {p1}, Lcom/android/server/pm/pkg/AndroidPackage;->getBaseRevisionCode()I

    move-result v0

    const-string v1, ":"

    if-eqz v0, :cond_1

    .line 5778
    invoke-virtual {p0, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-interface {p1}, Lcom/android/server/pm/pkg/AndroidPackage;->getBaseRevisionCode()I

    move-result v0

    invoke-virtual {p0, v0}, Ljava/io/PrintWriter;->print(I)V

    .line 5780
    :cond_1
    invoke-interface {p1}, Lcom/android/server/pm/pkg/AndroidPackage;->getSplitNames()[Ljava/lang/String;

    move-result-object v0

    .line 5781
    .local v0, "splitNames":[Ljava/lang/String;
    invoke-interface {p1}, Lcom/android/server/pm/pkg/AndroidPackage;->getSplitRevisionCodes()[I

    move-result-object v2

    .line 5782
    .local v2, "splitRevisionCodes":[I
    const/4 v3, 0x0

    .local v3, "i":I
    :goto_0
    array-length v4, v0

    if-ge v3, v4, :cond_3

    .line 5783
    const-string v4, ", "

    invoke-virtual {p0, v4}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5784
    aget-object v4, v0, v3

    invoke-virtual {p0, v4}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5785
    aget v4, v2, v3

    if-eqz v4, :cond_2

    .line 5786
    invoke-virtual {p0, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    aget v4, v2, v3

    invoke-virtual {p0, v4}, Ljava/io/PrintWriter;->print(I)V

    .line 5782
    :cond_2
    add-int/lit8 v3, v3, 0x1

    goto :goto_0

    :cond_3
    nop

    .line 5789
    .end local v3    # "i":I
    const-string v1, "]"

    invoke-virtual {p0, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5791
    .end local v0    # "splitNames":[Ljava/lang/String;
    .end local v2    # "splitRevisionCodes":[I
    :goto_1
    return-void
.end method

.method private static getActiveUsers(Lcom/android/server/pm/UserManagerService;Z)Ljava/util/List;
    .locals 1
    .param p0, "userManager"    # Lcom/android/server/pm/UserManagerService;
    .param p1, "excludeDying"    # Z
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/server/pm/UserManagerService;",
            "Z)",
            "Ljava/util/List<",
            "Landroid/content/pm/UserInfo;",
            ">;"
        }
    .end annotation

    .line 4869
    const/4 v0, 0x1

    invoke-static {p0, p1, v0}, Lcom/android/server/pm/Settings;->getUsers(Lcom/android/server/pm/UserManagerService;ZZ)Ljava/util/List;

    move-result-object v0

    return-object v0
.end method

.method protected static getAllUsers(Lcom/android/server/pm/UserManagerService;)Ljava/util/List;
    .locals 1
    .param p0, "userManager"    # Lcom/android/server/pm/UserManagerService;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/server/pm/UserManagerService;",
            ")",
            "Ljava/util/List<",
            "Landroid/content/pm/UserInfo;",
            ">;"
        }
    .end annotation

    .line 4856
    const/4 v0, 0x0

    invoke-static {p0, v0, v0}, Lcom/android/server/pm/Settings;->getUsers(Lcom/android/server/pm/UserManagerService;ZZ)Ljava/util/List;

    move-result-object v0

    return-object v0
.end method

.method private getSettingsFile()Lcom/android/server/pm/ResilientAtomicFile;
    .locals 8

    .line 1610
    new-instance v7, Lcom/android/server/pm/ResilientAtomicFile;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mSettingsFilename:Ljava/io/File;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPreviousSettingsFilename:Ljava/io/File;

    iget-object v3, p0, Lcom/android/server/pm/Settings;->mSettingsReserveCopyFilename:Ljava/io/File;

    const/16 v4, 0x1b0

    const-string/jumbo v5, "package manager settings"

    move-object v0, v7

    move-object v6, p0

    invoke-direct/range {v0 .. v6}, Lcom/android/server/pm/ResilientAtomicFile;-><init>(Ljava/io/File;Ljava/io/File;Ljava/io/File;ILjava/lang/String;Lcom/android/server/pm/ResilientAtomicFile$ReadEventLogger;)V

    return-object v7
.end method

.method private getUserPackagesStateFile(I)Lcom/android/server/pm/ResilientAtomicFile;
    .locals 8
    .param p1, "userId"    # I

    .line 1599
    new-instance v1, Ljava/io/File;

    invoke-direct {p0, p1}, Lcom/android/server/pm/Settings;->getUserSystemDirectory(I)Ljava/io/File;

    move-result-object v0

    const-string/jumbo v2, "package-restrictions.xml"

    invoke-direct {v1, v0, v2}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    .line 1600
    .local v1, "mainFile":Ljava/io/File;
    new-instance v2, Ljava/io/File;

    invoke-direct {p0, p1}, Lcom/android/server/pm/Settings;->getUserSystemDirectory(I)Ljava/io/File;

    move-result-object v0

    const-string/jumbo v3, "package-restrictions-backup.xml"

    invoke-direct {v2, v0, v3}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    .line 1602
    .local v2, "temporaryBackup":Ljava/io/File;
    new-instance v3, Ljava/io/File;

    invoke-direct {p0, p1}, Lcom/android/server/pm/Settings;->getUserSystemDirectory(I)Ljava/io/File;

    move-result-object v0

    const-string/jumbo v4, "package-restrictions.xml.reservecopy"

    invoke-direct {v3, v0, v4}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    .line 1604
    .local v3, "reserveCopy":Ljava/io/File;
    new-instance v7, Lcom/android/server/pm/ResilientAtomicFile;

    const/16 v4, 0x1b0

    const-string/jumbo v5, "package restrictions"

    move-object v0, v7

    move-object v6, p0

    invoke-direct/range {v0 .. v6}, Lcom/android/server/pm/ResilientAtomicFile;-><init>(Ljava/io/File;Ljava/io/File;Ljava/io/File;ILjava/lang/String;Lcom/android/server/pm/ResilientAtomicFile$ReadEventLogger;)V

    return-object v7
.end method

.method private getUserRuntimePermissionsFile(I)Ljava/io/File;
    .locals 3
    .param p1, "userId"    # I

    .line 1617
    new-instance v0, Ljava/io/File;

    invoke-direct {p0, p1}, Lcom/android/server/pm/Settings;->getUserSystemDirectory(I)Ljava/io/File;

    move-result-object v1

    const-string/jumbo v2, "runtime-permissions.xml"

    invoke-direct {v0, v1, v2}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    return-object v0
.end method

.method private getUserSystemDirectory(I)Ljava/io/File;
    .locals 4
    .param p1, "userId"    # I

    .line 1595
    new-instance v0, Ljava/io/File;

    new-instance v1, Ljava/io/File;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mSystemDir:Ljava/io/File;

    const-string/jumbo v3, "users"

    invoke-direct {v1, v2, v3}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    invoke-static {p1}, Ljava/lang/Integer;->toString(I)Ljava/lang/String;

    move-result-object v2

    invoke-direct {v0, v1, v2}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    return-object v0
.end method

.method private static getUsers(Lcom/android/server/pm/UserManagerService;ZZ)Ljava/util/List;
    .locals 3
    .param p0, "userManager"    # Lcom/android/server/pm/UserManagerService;
    .param p1, "excludeDying"    # Z
    .param p2, "excludePreCreated"    # Z
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/server/pm/UserManagerService;",
            "ZZ)",
            "Ljava/util/List<",
            "Landroid/content/pm/UserInfo;",
            ">;"
        }
    .end annotation

    .line 4883
    invoke-static {}, Landroid/os/Binder;->clearCallingIdentity()J

    move-result-wide v0

    .line 4885
    .local v0, "id":J
    const/4 v2, 0x1

    :try_start_0
    invoke-virtual {p0, v2, p1, p2}, Lcom/android/server/pm/UserManagerService;->getUsers(ZZZ)Ljava/util/List;

    move-result-object v2
    :try_end_0
    .catch Ljava/lang/NullPointerException; {:try_start_0 .. :try_end_0} :catch_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    .line 4890
    invoke-static {v0, v1}, Landroid/os/Binder;->restoreCallingIdentity(J)V

    .line 4885
    return-object v2

    .line 4890
    :catchall_0
    move-exception v2

    invoke-static {v0, v1}, Landroid/os/Binder;->restoreCallingIdentity(J)V

    .line 4891
    throw v2

    .line 4887
    :catch_0
    move-exception v2

    .line 4890
    invoke-static {v0, v1}, Landroid/os/Binder;->restoreCallingIdentity(J)V

    .line 4891
    nop

    .line 4892
    const/4 v2, 0x0

    return-object v2
.end method

.method private invalidatePackageCache()V
    .locals 0

    .line 831
    invoke-static {}, Lcom/android/server/pm/PackageManagerService;->invalidatePackageInfoCache()V

    .line 832
    invoke-static {}, Landroid/app/compat/ChangeIdStateCache;->invalidate()V

    .line 833
    invoke-virtual {p0}, Lcom/android/server/pm/Settings;->onChanged()V

    .line 834
    return-void
.end method

.method static isAdbInstallDisallowed(Lcom/android/server/pm/UserManagerService;I)Z
    .locals 1
    .param p0, "userManager"    # Lcom/android/server/pm/UserManagerService;
    .param p1, "userId"    # I

    .line 1403
    const-string/jumbo v0, "no_debugging_features"

    invoke-virtual {p0, v0, p1}, Lcom/android/server/pm/UserManagerService;->hasUserRestriction(Ljava/lang/String;I)Z

    move-result v0

    return v0
.end method

.method private synthetic lambda$pruneSharedUsersLPw$0(Lcom/android/server/pm/SharedUserSetting;)V
    .locals 1
    .param p1, "sus"    # Lcom/android/server/pm/SharedUserSetting;

    .line 1061
    const/4 v0, 0x1

    invoke-virtual {p0, p1, v0}, Lcom/android/server/pm/Settings;->checkAndPruneSharedUserLPw(Lcom/android/server/pm/SharedUserSetting;Z)Z

    return-void
.end method

.method private synthetic lambda$writePackageRestrictionsLPr$1(IJZ)V
    .locals 0
    .param p1, "userId"    # I
    .param p2, "startTime"    # J
    .param p4, "sync"    # Z

    .line 2353
    invoke-virtual {p0, p1, p2, p3, p4}, Lcom/android/server/pm/Settings;->writePackageRestrictions(IJZ)V

    return-void
.end method

.method private makeCache()Lcom/android/server/utils/SnapshotCache;
    .locals 1
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "()",
            "Lcom/android/server/utils/SnapshotCache<",
            "Lcom/android/server/pm/Settings;",
            ">;"
        }
    .end annotation

    .line 601
    new-instance v0, Lcom/android/server/pm/Settings$2;

    invoke-direct {v0, p0, p0, p0}, Lcom/android/server/pm/Settings$2;-><init>(Lcom/android/server/pm/Settings;Lcom/android/server/pm/Settings;Lcom/android/server/utils/Watchable;)V

    return-object v0
.end method

.method private static parseAppId(Lcom/android/modules/utils/TypedXmlPullParser;)I
    .locals 3
    .param p0, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;

    .line 4432
    const-string/jumbo v0, "userId"

    const/4 v1, 0x0

    const/4 v2, 0x0

    invoke-interface {p0, v2, v0, v1}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v0

    return v0
.end method

.method private static parseArchiveActivityInfos(Lcom/android/modules/utils/TypedXmlPullParser;)Ljava/util/List;
    .locals 18
    .param p0, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/modules/utils/TypedXmlPullParser;",
            ")",
            "Ljava/util/List<",
            "Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;",
            ">;"
        }
    .end annotation

    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 2141
    move-object/from16 v0, p0

    new-instance v1, Ljava/util/ArrayList;

    invoke-direct {v1}, Ljava/util/ArrayList;-><init>()V

    .line 2143
    .local v1, "activityInfos":Ljava/util/List;, "Ljava/util/List<Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;>;"
    invoke-interface/range {p0 .. p0}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v2

    .line 2145
    .local v2, "outerDepth":I
    :goto_0
    invoke-interface/range {p0 .. p0}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v3

    move v4, v3

    .local v4, "type":I
    const/4 v5, 0x1

    nop

    if-eq v3, v5, :cond_9

    const/4 v3, 0x3

    if-ne v4, v3, :cond_0

    .line 2147
    invoke-interface/range {p0 .. p0}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v5

    if-le v5, v2, :cond_9

    .line 2148
    :cond_0
    nop

    nop

    if-eq v4, v3, :cond_8

    const/4 v3, 0x4

    if-ne v4, v3, :cond_1

    .line 2150
    goto :goto_0

    .line 2152
    :cond_1
    invoke-interface/range {p0 .. p0}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v3

    .line 2153
    .local v3, "tagName":Ljava/lang/String;
    const-string v5, "archive-activity-info"

    invoke-virtual {v3, v5}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v5

    if-eqz v5, :cond_7

    .line 2154
    const-string v5, "activity-title"

    const/4 v6, 0x0

    invoke-interface {v0, v6, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v5

    .line 2156
    .local v5, "title":Ljava/lang/String;
    nop

    .line 2157
    const-string/jumbo v7, "original-component-name"

    invoke-interface {v0, v6, v7}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v14

    .line 2158
    .local v14, "originalComponentName":Ljava/lang/String;
    const-string/jumbo v7, "icon-path"

    invoke-interface {v0, v6, v7}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v15

    .line 2160
    .local v15, "iconAttribute":Ljava/lang/String;
    const/4 v7, 0x0

    if-nez v15, :cond_2

    move-object v8, v6

    goto :goto_1

    :cond_2
    new-array v8, v7, [Ljava/lang/String;

    invoke-static {v15, v8}, Ljava/nio/file/Path;->of(Ljava/lang/String;[Ljava/lang/String;)Ljava/nio/file/Path;

    move-result-object v8

    :goto_1
    move-object v13, v8

    .line 2161
    .local v13, "iconPath":Ljava/nio/file/Path;
    const-string/jumbo v8, "monochrome-icon-path"

    invoke-interface {v0, v6, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v12

    .line 2163
    .local v12, "monochromeAttribute":Ljava/lang/String;
    if-nez v12, :cond_3

    goto :goto_2

    :cond_3
    new-array v6, v7, [Ljava/lang/String;

    invoke-static {v12, v6}, Ljava/nio/file/Path;->of(Ljava/lang/String;[Ljava/lang/String;)Ljava/nio/file/Path;

    move-result-object v6

    .line 2166
    .local v6, "monochromeIconPath":Ljava/nio/file/Path;
    :goto_2
    const-string v11, "PackageSettings"

    if-eqz v5, :cond_4

    if-eqz v14, :cond_4

    if-nez v13, :cond_5

    :cond_4
    goto :goto_3

    .line 2181
    :cond_5
    invoke-static {v14}, Landroid/content/ComponentName;->unflattenFromString(Ljava/lang/String;)Landroid/content/ComponentName;

    move-result-object v7

    .line 2183
    .local v7, "unflattenOriginalComponentName":Landroid/content/ComponentName;
    if-nez v7, :cond_6

    .line 2184
    new-instance v8, Ljava/lang/StringBuilder;

    invoke-direct {v8}, Ljava/lang/StringBuilder;-><init>()V

    const-string v9, "Incorrect component name: "

    invoke-virtual {v8, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v8, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v9, " from the attributes"

    invoke-virtual {v8, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v8}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v8

    invoke-static {v11, v8}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 2186
    goto :goto_0

    .line 2189
    :cond_6
    new-instance v8, Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;

    invoke-direct {v8, v5, v7, v13, v6}, Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;-><init>(Ljava/lang/String;Landroid/content/ComponentName;Ljava/nio/file/Path;Ljava/nio/file/Path;)V

    invoke-interface {v1, v8}, Ljava/util/List;->add(Ljava/lang/Object;)Z

    .line 2195
    .end local v5    # "title":Ljava/lang/String;
    .end local v6    # "monochromeIconPath":Ljava/nio/file/Path;
    .end local v7    # "unflattenOriginalComponentName":Landroid/content/ComponentName;
    .end local v12    # "monochromeAttribute":Ljava/lang/String;
    .end local v13    # "iconPath":Ljava/nio/file/Path;
    .end local v14    # "originalComponentName":Ljava/lang/String;
    .end local v15    # "iconAttribute":Ljava/lang/String;
    goto/16 :goto_0

    .line 2167
    .restart local v5    # "title":Ljava/lang/String;
    .restart local v6    # "monochromeIconPath":Ljava/nio/file/Path;
    .restart local v12    # "monochromeAttribute":Ljava/lang/String;
    .restart local v13    # "iconPath":Ljava/nio/file/Path;
    .restart local v14    # "originalComponentName":Ljava/lang/String;
    .restart local v15    # "iconAttribute":Ljava/lang/String;
    :goto_3
    const-string/jumbo v10, "original-component-name"

    const-string/jumbo v16, "icon-path"

    const-string v7, "archive-activity-info"

    const-string v8, "activity-title"

    move-object v9, v5

    move-object v0, v11

    move-object v11, v14

    move-object/from16 v17, v12

    .end local v12    # "monochromeAttribute":Ljava/lang/String;
    .local v17, "monochromeAttribute":Ljava/lang/String;
    move-object/from16 v12, v16

    move-object/from16 v16, v13

    .end local v13    # "iconPath":Ljava/nio/file/Path;
    .local v16, "iconPath":Ljava/nio/file/Path;
    filled-new-array/range {v7 .. v13}, [Ljava/lang/Object;

    move-result-object v7

    .line 2169
    const-string v8, "Missing attributes in tag %s. %s: %s, %s: %s, %s: %s"

    invoke-static {v8, v7}, Landroid/text/TextUtils;->formatSimple(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;

    move-result-object v7

    .line 2167
    invoke-static {v0, v7}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 2178
    move-object/from16 v0, p0

    goto/16 :goto_0

    .line 2153
    .end local v5    # "title":Ljava/lang/String;
    .end local v6    # "monochromeIconPath":Ljava/nio/file/Path;
    .end local v14    # "originalComponentName":Ljava/lang/String;
    .end local v15    # "iconAttribute":Ljava/lang/String;
    .end local v16    # "iconPath":Ljava/nio/file/Path;
    .end local v17    # "monochromeAttribute":Ljava/lang/String;
    :cond_7
    move-object/from16 v0, p0

    goto/16 :goto_0

    .line 2148
    .end local v3    # "tagName":Ljava/lang/String;
    :cond_8
    move-object/from16 v0, p0

    goto/16 :goto_0

    .line 2197
    :cond_9
    return-object v1
.end method

.method private static parseArchiveState(Lcom/android/modules/utils/TypedXmlPullParser;)Lcom/android/server/pm/pkg/ArchiveState;
    .locals 8
    .param p0, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 2120
    const-string/jumbo v0, "installer-title"

    const/4 v1, 0x0

    invoke-interface {p0, v1, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    .line 2122
    .local v0, "installerTitle":Ljava/lang/String;
    const-string v2, "archive-time"

    const-wide/16 v3, 0x0

    invoke-interface {p0, v1, v2, v3, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLongHex(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v2

    .line 2123
    .local v2, "archiveTimeMillis":J
    nop

    .line 2124
    invoke-static {p0}, Lcom/android/server/pm/Settings;->parseArchiveActivityInfos(Lcom/android/modules/utils/TypedXmlPullParser;)Ljava/util/List;

    move-result-object v4

    .line 2126
    .local v4, "activityInfos":Ljava/util/List;, "Ljava/util/List<Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;>;"
    const-string v5, "PackageSettings"

    if-nez v0, :cond_0

    .line 2127
    const-string/jumbo v6, "parseArchiveState: installerTitle is null"

    invoke-static {v5, v6}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 2128
    return-object v1

    .line 2131
    :cond_0
    invoke-interface {v4}, Ljava/util/List;->size()I

    move-result v6

    const/4 v7, 0x1

    if-ge v6, v7, :cond_1

    .line 2132
    const-string/jumbo v6, "parseArchiveState: activityInfos is empty"

    invoke-static {v5, v6}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 2133
    return-object v1

    .line 2136
    :cond_1
    new-instance v1, Lcom/android/server/pm/pkg/ArchiveState;

    invoke-direct {v1, v4, v0, v2, v3}, Lcom/android/server/pm/pkg/ArchiveState;-><init>(Ljava/util/List;Ljava/lang/String;J)V

    return-object v1
.end method

.method private static parseSharedUserAppId(Lcom/android/modules/utils/TypedXmlPullParser;)I
    .locals 3
    .param p0, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;

    .line 4440
    const-string/jumbo v0, "sharedUserId"

    const/4 v1, 0x0

    const/4 v2, 0x0

    invoke-interface {p0, v2, v0, v1}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v0

    return v0
.end method

.method private static permissionFlagsToString(Ljava/lang/String;I)Ljava/lang/String;
    .locals 3
    .param p0, "prefix"    # Ljava/lang/String;
    .param p1, "flags"    # I

    .line 5829
    const/4 v0, 0x0

    .line 5830
    .local v0, "flagsString":Ljava/lang/StringBuilder;
    :goto_0
    if-eqz p1, :cond_2

    .line 5831
    if-nez v0, :cond_0

    .line 5832
    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    move-object v0, v1

    .line 5833
    invoke-virtual {v0, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 5834
    const-string v1, "[ "

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 5836
    :cond_0
    const/4 v1, 0x1

    invoke-static {p1}, Ljava/lang/Integer;->numberOfTrailingZeros(I)I

    move-result v2

    shl-int/2addr v1, v2

    .line 5837
    .local v1, "flag":I
    not-int v2, v1

    and-int/2addr p1, v2

    .line 5838
    invoke-static {v1}, Landroid/content/pm/PackageManager;->permissionFlagToString(I)Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 5839
    if-eqz p1, :cond_1

    .line 5840
    const/16 v2, 0x7c

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(C)Ljava/lang/StringBuilder;

    .line 5843
    .end local v1    # "flag":I
    :cond_1
    goto :goto_0

    .line 5844
    :cond_2
    if-eqz v0, :cond_3

    .line 5845
    const/16 v1, 0x5d

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(C)Ljava/lang/StringBuilder;

    .line 5846
    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    return-object v1

    .line 5848
    :cond_3
    const-string v1, ""

    return-object v1
.end method

.method static printFlags(Ljava/io/PrintWriter;I[Ljava/lang/Object;)V
    .locals 3
    .param p0, "pw"    # Ljava/io/PrintWriter;
    .param p1, "val"    # I
    .param p2, "spec"    # [Ljava/lang/Object;

    .line 4911
    const-string v0, "[ "

    invoke-virtual {p0, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 4912
    const/4 v0, 0x0

    .local v0, "i":I
    :goto_0
    array-length v1, p2

    if-ge v0, v1, :cond_1

    .line 4913
    aget-object v1, p2, v0

    check-cast v1, Ljava/lang/Integer;

    invoke-virtual {v1}, Ljava/lang/Integer;->intValue()I

    move-result v1

    .line 4914
    .local v1, "mask":I
    and-int v2, p1, v1

    if-eqz v2, :cond_0

    .line 4915
    add-int/lit8 v2, v0, 0x1

    aget-object v2, p2, v2

    invoke-virtual {p0, v2}, Ljava/io/PrintWriter;->print(Ljava/lang/Object;)V

    .line 4916
    const-string v2, " "

    invoke-virtual {p0, v2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 4912
    .end local v1    # "mask":I
    :cond_0
    add-int/lit8 v0, v0, 0x2

    goto :goto_0

    :cond_1
    nop

    .line 4919
    .end local v0    # "i":I
    const-string v0, "]"

    invoke-virtual {p0, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 4920
    return-void
.end method

.method private readComponentsLPr(Lcom/android/modules/utils/TypedXmlPullParser;)Landroid/util/ArraySet;
    .locals 6
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/modules/utils/TypedXmlPullParser;",
            ")",
            "Landroid/util/ArraySet<",
            "Ljava/lang/String;",
            ">;"
        }
    .end annotation

    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;,
            Lorg/xmlpull/v1/XmlPullParserException;
        }
    .end annotation

    .line 2230
    const/4 v0, 0x0

    .line 2232
    .local v0, "components":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v1

    .line 2234
    .local v1, "outerDepth":I
    :cond_0
    :goto_0
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v2

    move v3, v2

    .local v3, "type":I
    const/4 v4, 0x1

    nop

    if-eq v2, v4, :cond_5

    const/4 v2, 0x3

    if-ne v3, v2, :cond_1

    .line 2236
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v4

    if-le v4, v1, :cond_5

    .line 2237
    :cond_1
    nop

    nop

    if-eq v3, v2, :cond_0

    const/4 v2, 0x4

    if-ne v3, v2, :cond_2

    .line 2239
    goto :goto_0

    .line 2241
    :cond_2
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v2

    .line 2242
    .local v2, "tagName":Ljava/lang/String;
    const-string/jumbo v4, "item"

    invoke-virtual {v2, v4}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v4

    if-eqz v4, :cond_0

    .line 2243
    const/4 v4, 0x0

    const-string/jumbo v5, "name"

    invoke-interface {p1, v4, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v4

    .line 2244
    .local v4, "componentName":Ljava/lang/String;
    if-eqz v4, :cond_4

    .line 2245
    if-nez v0, :cond_3

    .line 2246
    new-instance v5, Landroid/util/ArraySet;

    invoke-direct {v5}, Landroid/util/ArraySet;-><init>()V

    move-object v0, v5

    .line 2248
    :cond_3
    invoke-virtual {v0, v4}, Landroid/util/ArraySet;->add(Ljava/lang/Object;)Z

    .line 2250
    .end local v4    # "componentName":Ljava/lang/String;
    :cond_4
    goto :goto_0

    .line 2252
    .end local v2    # "tagName":Ljava/lang/String;
    :cond_5
    return-object v0
.end method

.method private readCrossProfileIntentFiltersLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V
    .locals 6
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .param p2, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 1751
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v0

    .line 1753
    .local v0, "outerDepth":I
    :cond_0
    :goto_0
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v1

    move v2, v1

    .local v2, "type":I
    const/4 v3, 0x1

    nop

    if-eq v1, v3, :cond_4

    const/4 v1, 0x3

    if-ne v2, v1, :cond_1

    .line 1754
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v3

    if-le v3, v0, :cond_4

    .line 1755
    :cond_1
    nop

    nop

    if-eq v2, v1, :cond_0

    const/4 v1, 0x4

    if-ne v2, v1, :cond_2

    .line 1756
    goto :goto_0

    .line 1758
    :cond_2
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v1

    .line 1759
    .local v1, "tagName":Ljava/lang/String;
    const-string/jumbo v3, "item"

    invoke-virtual {v1, v3}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v3

    if-eqz v3, :cond_3

    .line 1760
    new-instance v3, Lcom/android/server/pm/CrossProfileIntentFilter;

    invoke-direct {v3, p1}, Lcom/android/server/pm/CrossProfileIntentFilter;-><init>(Lcom/android/modules/utils/TypedXmlPullParser;)V

    .line 1761
    .local v3, "cpif":Lcom/android/server/pm/CrossProfileIntentFilter;
    invoke-virtual {p0, p2}, Lcom/android/server/pm/Settings;->editCrossProfileIntentResolverLPw(I)Lcom/android/server/pm/CrossProfileIntentResolver;

    move-result-object v4

    const/4 v5, 0x0

    invoke-virtual {v4, v5, v3}, Lcom/android/server/pm/WatchedIntentResolver;->addFilter(Lcom/android/server/pm/snapshot/PackageDataSnapshot;Lcom/android/server/pm/WatchedIntentFilter;)V

    .line 1762
    .end local v3    # "cpif":Lcom/android/server/pm/CrossProfileIntentFilter;
    goto :goto_1

    .line 1763
    :cond_3
    new-instance v3, Ljava/lang/StringBuilder;

    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V

    const-string v4, "Unknown element under crossProfile-intent-filters: "

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    .line 1765
    .local v3, "msg":Ljava/lang/String;
    const/4 v4, 0x5

    invoke-static {v4, v3}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 1766
    invoke-static {p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 1768
    .end local v1    # "tagName":Ljava/lang/String;
    .end local v3    # "msg":Ljava/lang/String;
    :goto_1
    goto :goto_0

    .line 1769
    :cond_4
    return-void
.end method

.method static readDefaultApps(Lorg/xmlpull/v1/XmlPullParser;)Ljava/lang/String;
    .locals 6
    .param p0, "parser"    # Lorg/xmlpull/v1/XmlPullParser;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .annotation build Landroid/annotation/Nullable;
    .end annotation

    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 1785
    const/4 v0, 0x0

    .line 1786
    .local v0, "defaultBrowser":Ljava/lang/String;
    invoke-interface {p0}, Lorg/xmlpull/v1/XmlPullParser;->getDepth()I

    move-result v1

    .line 1788
    .local v1, "outerDepth":I
    :cond_0
    :goto_0
    invoke-interface {p0}, Lorg/xmlpull/v1/XmlPullParser;->next()I

    move-result v2

    move v3, v2

    .local v3, "type":I
    const/4 v4, 0x1

    nop

    if-eq v2, v4, :cond_5

    const/4 v2, 0x3

    if-ne v3, v2, :cond_1

    .line 1789
    invoke-interface {p0}, Lorg/xmlpull/v1/XmlPullParser;->getDepth()I

    move-result v4

    if-le v4, v1, :cond_5

    .line 1790
    :cond_1
    nop

    nop

    if-eq v3, v2, :cond_0

    const/4 v2, 0x4

    if-ne v3, v2, :cond_2

    .line 1791
    goto :goto_0

    .line 1793
    :cond_2
    invoke-interface {p0}, Lorg/xmlpull/v1/XmlPullParser;->getName()Ljava/lang/String;

    move-result-object v2

    .line 1794
    .local v2, "tagName":Ljava/lang/String;
    const-string v4, "default-browser"

    invoke-virtual {v2, v4}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v4

    if-eqz v4, :cond_3

    .line 1795
    const/4 v4, 0x0

    const-string/jumbo v5, "packageName"

    invoke-interface {p0, v4, v5}, Lorg/xmlpull/v1/XmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    goto :goto_1

    .line 1796
    :cond_3
    const-string v4, "default-dialer"

    invoke-virtual {v2, v4}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v4

    if-eqz v4, :cond_4

    goto :goto_1

    .line 1799
    :cond_4
    new-instance v4, Ljava/lang/StringBuilder;

    invoke-direct {v4}, Ljava/lang/StringBuilder;-><init>()V

    const-string v5, "Unknown element under default-apps: "

    invoke-virtual {v4, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1800
    invoke-interface {p0}, Lorg/xmlpull/v1/XmlPullParser;->getName()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v4, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v4

    .line 1801
    .local v4, "msg":Ljava/lang/String;
    const/4 v5, 0x5

    invoke-static {v5, v4}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 1802
    invoke-static {p0}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 1804
    .end local v2    # "tagName":Ljava/lang/String;
    .end local v4    # "msg":Ljava/lang/String;
    :goto_1
    goto :goto_0

    .line 1805
    :cond_5
    return-object v0
.end method

.method private readDefaultPreferredActivitiesLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V
    .locals 8
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .param p2, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 3936
    nop

    .line 3937
    const-class v0, Landroid/content/pm/PackageManagerInternal;

    invoke-static {v0}, Lcom/android/server/LocalServices;->getService(Ljava/lang/Class;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Landroid/content/pm/PackageManagerInternal;

    .line 3938
    .local v0, "pmInternal":Landroid/content/pm/PackageManagerInternal;
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v1

    .line 3940
    .local v1, "outerDepth":I
    :cond_0
    :goto_0
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v2

    move v3, v2

    .local v3, "type":I
    const/4 v4, 0x1

    nop

    if-eq v2, v4, :cond_5

    const/4 v2, 0x3

    if-ne v3, v2, :cond_1

    .line 3941
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v4

    if-le v4, v1, :cond_5

    .line 3942
    :cond_1
    nop

    nop

    if-eq v3, v2, :cond_0

    const/4 v2, 0x4

    if-ne v3, v2, :cond_2

    .line 3943
    goto :goto_0

    .line 3946
    :cond_2
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v2

    .line 3947
    .local v2, "tagName":Ljava/lang/String;
    const-string/jumbo v4, "item"

    invoke-virtual {v2, v4}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v4

    const/4 v5, 0x5

    if-eqz v4, :cond_4

    .line 3948
    new-instance v4, Lcom/android/server/pm/PreferredActivity;

    invoke-direct {v4, p1}, Lcom/android/server/pm/PreferredActivity;-><init>(Lcom/android/modules/utils/TypedXmlPullParser;)V

    .line 3949
    .local v4, "tmpPa":Lcom/android/server/pm/PreferredActivity;
    iget-object v6, v4, Lcom/android/server/pm/PreferredActivity;->mPref:Lcom/android/server/pm/PreferredComponent;

    invoke-virtual {v6}, Lcom/android/server/pm/PreferredComponent;->getParseError()Ljava/lang/String;

    move-result-object v6

    if-nez v6, :cond_3

    .line 3950
    nop

    .line 3951
    invoke-virtual {v4}, Lcom/android/server/pm/WatchedIntentFilter;->getIntentFilter()Landroid/content/IntentFilter;

    move-result-object v5

    iget-object v6, v4, Lcom/android/server/pm/PreferredActivity;->mPref:Lcom/android/server/pm/PreferredComponent;

    iget-object v6, v6, Lcom/android/server/pm/PreferredComponent;->mComponent:Landroid/content/ComponentName;

    .line 3950
    invoke-direct {p0, v0, v5, v6, p2}, Lcom/android/server/pm/Settings;->applyDefaultPreferredActivityLPw(Landroid/content/pm/PackageManagerInternal;Landroid/content/IntentFilter;Landroid/content/ComponentName;I)V

    goto :goto_1

    .line 3953
    :cond_3
    new-instance v6, Ljava/lang/StringBuilder;

    invoke-direct {v6}, Ljava/lang/StringBuilder;-><init>()V

    const-string v7, "Error in package manager settings: <preferred-activity> "

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object v7, v4, Lcom/android/server/pm/PreferredActivity;->mPref:Lcom/android/server/pm/PreferredComponent;

    .line 3955
    invoke-virtual {v7}, Lcom/android/server/pm/PreferredComponent;->getParseError()Ljava/lang/String;

    move-result-object v7

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v7, " at "

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3956
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v7

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v6

    .line 3953
    invoke-static {v5, v6}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 3958
    .end local v4    # "tmpPa":Lcom/android/server/pm/PreferredActivity;
    :goto_1
    goto :goto_2

    .line 3959
    :cond_4
    new-instance v4, Ljava/lang/StringBuilder;

    invoke-direct {v4}, Ljava/lang/StringBuilder;-><init>()V

    const-string v6, "Unknown element under <preferred-activities>: "

    invoke-virtual {v4, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3960
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v6

    invoke-virtual {v4, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v4

    .line 3959
    invoke-static {v5, v4}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 3961
    invoke-static {p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 3963
    .end local v2    # "tagName":Ljava/lang/String;
    :goto_2
    goto/16 :goto_0

    .line 3964
    :cond_5
    return-void
.end method

.method private readDisabledComponentsLPw(Lcom/android/server/pm/PackageSetting;Lcom/android/modules/utils/TypedXmlPullParser;I)V
    .locals 7
    .param p1, "packageSetting"    # Lcom/android/server/pm/PackageSetting;
    .param p2, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .param p3, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;,
            Lorg/xmlpull/v1/XmlPullParserException;
        }
    .end annotation

    .line 4511
    invoke-interface {p2}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v0

    .line 4513
    .local v0, "outerDepth":I
    :cond_0
    :goto_0
    invoke-interface {p2}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v1

    move v2, v1

    .local v2, "type":I
    const/4 v3, 0x1

    nop

    if-eq v1, v3, :cond_5

    const/4 v1, 0x3

    if-ne v2, v1, :cond_1

    .line 4514
    invoke-interface {p2}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v3

    if-le v3, v0, :cond_5

    .line 4515
    :cond_1
    nop

    nop

    if-eq v2, v1, :cond_0

    const/4 v1, 0x4

    if-ne v2, v1, :cond_2

    .line 4516
    goto :goto_0

    .line 4519
    :cond_2
    invoke-interface {p2}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v1

    .line 4520
    .local v1, "tagName":Ljava/lang/String;
    const-string/jumbo v3, "item"

    invoke-virtual {v1, v3}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v3

    const/4 v4, 0x5

    if-eqz v3, :cond_4

    .line 4521
    const/4 v3, 0x0

    const-string/jumbo v5, "name"

    invoke-interface {p2, v3, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v3

    .line 4522
    .local v3, "name":Ljava/lang/String;
    if-eqz v3, :cond_3

    .line 4523
    invoke-virtual {v3}, Ljava/lang/String;->intern()Ljava/lang/String;

    move-result-object v4

    invoke-virtual {p1, v4, p3}, Lcom/android/server/pm/PackageSetting;->addDisabledComponent(Ljava/lang/String;I)V

    goto :goto_1

    .line 4525
    :cond_3
    new-instance v5, Ljava/lang/StringBuilder;

    invoke-direct {v5}, Ljava/lang/StringBuilder;-><init>()V

    const-string v6, "Error in package manager settings: <disabled-components> has no name at "

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4527
    invoke-interface {p2}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v6

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v5}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v5

    .line 4525
    invoke-static {v4, v5}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 4529
    .end local v3    # "name":Ljava/lang/String;
    :goto_1
    goto :goto_2

    .line 4530
    :cond_4
    new-instance v3, Ljava/lang/StringBuilder;

    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V

    const-string v5, "Unknown element under <disabled-components>: "

    invoke-virtual {v3, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4531
    invoke-interface {p2}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v3, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    .line 4530
    invoke-static {v4, v3}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 4533
    :goto_2
    invoke-static {p2}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 4534
    .end local v1    # "tagName":Ljava/lang/String;
    goto :goto_0

    .line 4535
    :cond_5
    return-void
.end method

.method private readDisabledSysPackageLPw(Lcom/android/modules/utils/TypedXmlPullParser;Ljava/util/List;)V
    .locals 27
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/modules/utils/TypedXmlPullParser;",
            "Ljava/util/List<",
            "Landroid/content/pm/UserInfo;",
            ">;)V"
        }
    .end annotation

    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 3968
    .local p2, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    move-object/from16 v0, p0

    move-object/from16 v1, p1

    const-string/jumbo v2, "name"

    const/4 v3, 0x0

    invoke-interface {v1, v3, v2}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v2

    .line 3969
    .local v2, "name":Ljava/lang/String;
    const-string/jumbo v4, "realName"

    invoke-interface {v1, v3, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v11

    .line 3970
    .local v11, "realName":Ljava/lang/String;
    const-string v4, "codePath"

    invoke-interface {v1, v3, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v12

    .line 3972
    .local v12, "codePathStr":Ljava/lang/String;
    const-string/jumbo v4, "requiredCpuAbi"

    invoke-interface {v1, v3, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v13

    .line 3973
    .local v13, "legacyCpuAbiStr":Ljava/lang/String;
    const-string/jumbo v4, "nativeLibraryPath"

    invoke-interface {v1, v3, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v14

    .line 3975
    .local v14, "legacyNativeLibraryPathStr":Ljava/lang/String;
    const-string/jumbo v4, "primaryCpuAbi"

    invoke-interface {v1, v3, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v4

    .line 3976
    .local v4, "primaryCpuAbiStr":Ljava/lang/String;
    const-string/jumbo v5, "secondaryCpuAbi"

    invoke-interface {v1, v3, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v15

    .line 3977
    .local v15, "secondaryCpuAbiStr":Ljava/lang/String;
    const-string v5, "cpuAbiOverride"

    invoke-interface {v1, v3, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v10

    .line 3979
    .local v10, "cpuAbiOverrideStr":Ljava/lang/String;
    if-nez v4, :cond_0

    if-eqz v13, :cond_0

    .line 3980
    move-object v4, v13

    move-object v9, v4

    goto :goto_0

    .line 3983
    :cond_0
    move-object v9, v4

    .end local v4    # "primaryCpuAbiStr":Ljava/lang/String;
    .local v9, "primaryCpuAbiStr":Ljava/lang/String;
    :goto_0
    const-string/jumbo v4, "version"

    const-wide/16 v7, 0x0

    invoke-interface {v1, v3, v4, v7, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLong(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v5

    .line 3984
    .local v5, "versionCode":J
    const-string/jumbo v4, "targetSdkVersion"

    move-object/from16 v16, v13

    .end local v13    # "legacyCpuAbiStr":Ljava/lang/String;
    .local v16, "legacyCpuAbiStr":Ljava/lang/String;
    const/4 v13, 0x0

    invoke-interface {v1, v3, v4, v13}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v4

    .line 3985
    .local v4, "targetSdkVersion":I
    const-string/jumbo v7, "restrictUpdateHash"

    invoke-interface {v1, v3, v7, v3}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBytesBase64(Ljava/lang/String;Ljava/lang/String;[B)[B

    move-result-object v8

    .line 3987
    .local v8, "restrictUpdateHash":[B
    const-string/jumbo v7, "scannedAsStoppedSystemApp"

    invoke-interface {v1, v3, v7, v13}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v7

    .line 3990
    .local v7, "isScannedAsStoppedSystemApp":Z
    const/16 v19, 0x0

    .line 3991
    .local v19, "pkgFlags":I
    const/16 v20, 0x0

    .line 3992
    .local v20, "pkgPrivateFlags":I
    const/4 v13, 0x1

    or-int/lit8 v19, v19, 0x1

    .line 3993
    const-string v13, "/priv-app/"

    invoke-virtual {v12, v13}, Ljava/lang/String;->contains(Ljava/lang/CharSequence;)Z

    move-result v13

    if-eqz v13, :cond_1

    .line 3994
    or-int/lit8 v20, v20, 0x8

    .line 4000
    :cond_1
    sget-object v13, Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;->DISABLED_ID:Ljava/util/UUID;

    .line 4001
    .local v13, "domainSetId":Ljava/util/UUID;
    new-instance v3, Lcom/android/server/pm/PackageSetting;

    move/from16 v23, v7

    .end local v7    # "isScannedAsStoppedSystemApp":Z
    .local v23, "isScannedAsStoppedSystemApp":Z
    new-instance v7, Ljava/io/File;

    invoke-direct {v7, v12}, Ljava/io/File;-><init>(Ljava/lang/String;)V

    move-object/from16 v24, v12

    move v12, v4

    .end local v4    # "targetSdkVersion":I
    .local v12, "targetSdkVersion":I
    .local v24, "codePathStr":Ljava/lang/String;
    move-object v4, v3

    move-wide v0, v5

    .end local v5    # "versionCode":J
    .local v0, "versionCode":J
    move-object v5, v2

    move-object v6, v11

    move-object/from16 v17, v11

    move/from16 v11, v23

    .end local v23    # "isScannedAsStoppedSystemApp":Z
    .local v11, "isScannedAsStoppedSystemApp":Z
    .local v17, "realName":Ljava/lang/String;
    move-object/from16 v18, v2

    move-object v2, v8

    .end local v8    # "restrictUpdateHash":[B
    .local v2, "restrictUpdateHash":[B
    .local v18, "name":Ljava/lang/String;
    move/from16 v8, v19

    move-object v11, v9

    .end local v9    # "primaryCpuAbiStr":Ljava/lang/String;
    .local v11, "primaryCpuAbiStr":Ljava/lang/String;
    .restart local v23    # "isScannedAsStoppedSystemApp":Z
    move/from16 v9, v20

    move-object/from16 v26, v2

    move-object v2, v10

    .end local v10    # "cpuAbiOverrideStr":Ljava/lang/String;
    .local v2, "cpuAbiOverrideStr":Ljava/lang/String;
    .local v26, "restrictUpdateHash":[B
    move-object v10, v13

    invoke-direct/range {v4 .. v10}, Lcom/android/server/pm/PackageSetting;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/io/File;IILjava/util/UUID;)V

    .line 4003
    invoke-virtual {v3, v14}, Lcom/android/server/pm/PackageSetting;->setLegacyNativeLibraryPath(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v3

    .line 4004
    invoke-virtual {v3, v11}, Lcom/android/server/pm/PackageSetting;->setPrimaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v3

    .line 4005
    invoke-virtual {v3, v15}, Lcom/android/server/pm/PackageSetting;->setSecondaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v3

    .line 4006
    invoke-virtual {v3, v2}, Lcom/android/server/pm/PackageSetting;->setCpuAbiOverride(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v3

    .line 4007
    invoke-virtual {v3, v0, v1}, Lcom/android/server/pm/PackageSetting;->setLongVersionCode(J)Lcom/android/server/pm/PackageSetting;

    move-result-object v3

    .line 4008
    invoke-virtual {v3, v12}, Lcom/android/server/pm/PackageSetting;->setTargetSdkVersion(I)Lcom/android/server/pm/PackageSetting;

    move-result-object v3

    .line 4009
    move-object/from16 v4, v26

    .end local v26    # "restrictUpdateHash":[B
    .local v4, "restrictUpdateHash":[B
    invoke-virtual {v3, v4}, Lcom/android/server/pm/PackageSetting;->setRestrictUpdateHash([B)Lcom/android/server/pm/PackageSetting;

    move-result-object v3

    .line 4010
    move/from16 v5, v23

    .end local v23    # "isScannedAsStoppedSystemApp":Z
    .local v5, "isScannedAsStoppedSystemApp":Z
    invoke-virtual {v3, v5}, Lcom/android/server/pm/PackageSetting;->setScannedAsStoppedSystemApp(Z)Lcom/android/server/pm/PackageSetting;

    move-result-object v3

    .line 4011
    .local v3, "ps":Lcom/android/server/pm/PackageSetting;
    const-string v6, "ft"

    move-wide v9, v0

    const/4 v1, 0x0

    const-wide/16 v7, 0x0

    move-object/from16 v0, p1

    .end local v0    # "versionCode":J
    .local v9, "versionCode":J
    invoke-interface {v0, v1, v6, v7, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLongHex(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v22

    .line 4012
    .local v22, "timeStamp":J
    cmp-long v6, v22, v7

    if-nez v6, :cond_2

    .line 4013
    const-string/jumbo v6, "ts"

    invoke-interface {v0, v1, v6, v7, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLong(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v22

    move-object v6, v2

    move-wide/from16 v1, v22

    goto :goto_1

    .line 4012
    :cond_2
    move-object v6, v2

    move-wide/from16 v1, v22

    .line 4015
    .end local v2    # "cpuAbiOverrideStr":Ljava/lang/String;
    .end local v22    # "timeStamp":J
    .local v1, "timeStamp":J
    .local v6, "cpuAbiOverrideStr":Ljava/lang/String;
    :goto_1
    invoke-virtual {v3, v1, v2}, Lcom/android/server/pm/PackageSetting;->setLastModifiedTime(J)Lcom/android/server/pm/PackageSetting;

    .line 4016
    move-wide/from16 v25, v1

    .end local v1    # "timeStamp":J
    .local v25, "timeStamp":J
    const-string/jumbo v1, "ut"

    const/4 v2, 0x0

    invoke-interface {v0, v2, v1, v7, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLongHex(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v7

    invoke-virtual {v3, v7, v8}, Lcom/android/server/pm/PackageSetting;->setLastUpdateTime(J)Lcom/android/server/pm/PackageSetting;

    .line 4017
    invoke-static/range {p1 .. p1}, Lcom/android/server/pm/Settings;->parseAppId(Lcom/android/modules/utils/TypedXmlPullParser;)I

    move-result v1

    invoke-virtual {v3, v1}, Lcom/android/server/pm/PackageSetting;->setAppId(I)Lcom/android/server/pm/PackageSetting;

    .line 4018
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v1

    if-gtz v1, :cond_3

    .line 4019
    invoke-static/range {p1 .. p1}, Lcom/android/server/pm/Settings;->parseSharedUserAppId(Lcom/android/modules/utils/TypedXmlPullParser;)I

    move-result v1

    .line 4020
    .local v1, "sharedUserAppId":I
    invoke-virtual {v3, v1}, Lcom/android/server/pm/PackageSetting;->setAppId(I)Lcom/android/server/pm/PackageSetting;

    .line 4021
    invoke-virtual {v3, v1}, Lcom/android/server/pm/PackageSetting;->setSharedUserAppId(I)Lcom/android/server/pm/PackageSetting;

    .line 4024
    .end local v1    # "sharedUserAppId":I
    :cond_3
    const-string v1, "appMetadataFilePath"

    const/4 v2, 0x0

    invoke-interface {v0, v2, v1}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v1

    invoke-virtual {v3, v1}, Lcom/android/server/pm/PackageSetting;->setAppMetadataFilePath(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 4025
    const-string v1, "appMetadataSource"

    const/4 v7, 0x0

    invoke-interface {v0, v2, v1, v7}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v1

    invoke-virtual {v3, v1}, Lcom/android/server/pm/PackageSetting;->setAppMetadataSource(I)Lcom/android/server/pm/PackageSetting;

    .line 4028
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v1

    .line 4030
    .local v1, "outerDepth":I
    :goto_2
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v7

    move v8, v7

    const/4 v2, 0x1

    .local v8, "type":I
    if-eq v7, v2, :cond_e

    const/4 v7, 0x3

    if-ne v8, v7, :cond_5

    .line 4031
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v2

    if-le v2, v1, :cond_4

    goto :goto_3

    :cond_4
    move-object/from16 v7, p0

    move/from16 v21, v1

    goto/16 :goto_7

    .line 4032
    :cond_5
    :goto_3
    if-eq v8, v7, :cond_d

    const/4 v2, 0x4

    if-ne v8, v2, :cond_6

    .line 4033
    const/4 v2, 0x0

    goto :goto_2

    .line 4036
    :cond_6
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v2

    const-string/jumbo v7, "perms"

    invoke-virtual {v2, v7}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v2

    if-eqz v2, :cond_a

    .line 4038
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->hasSharedUser()Z

    move-result v2

    if-eqz v2, :cond_8

    .line 4039
    nop

    .line 4040
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getSharedUserAppId()I

    move-result v2

    .line 4039
    move-object/from16 v7, p0

    invoke-virtual {v7, v2}, Lcom/android/server/pm/Settings;->getSettingLPr(I)Lcom/android/server/pm/SettingBase;

    move-result-object v2

    .line 4041
    .local v2, "sharedUserSettings":Lcom/android/server/pm/SettingBase;
    if-eqz v2, :cond_7

    .line 4042
    invoke-virtual {v2}, Lcom/android/server/pm/SettingBase;->getLegacyPermissionState()Lcom/android/server/pm/permission/LegacyPermissionState;

    move-result-object v21

    goto :goto_4

    :cond_7
    const/16 v21, 0x0

    :goto_4
    move-object/from16 v2, v21

    .line 4043
    .local v2, "legacyState":Lcom/android/server/pm/permission/LegacyPermissionState;
    goto :goto_5

    .line 4044
    .end local v2    # "legacyState":Lcom/android/server/pm/permission/LegacyPermissionState;
    :cond_8
    move-object/from16 v7, p0

    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getLegacyPermissionState()Lcom/android/server/pm/permission/LegacyPermissionState;

    move-result-object v2

    .line 4046
    .restart local v2    # "legacyState":Lcom/android/server/pm/permission/LegacyPermissionState;
    :goto_5
    if-eqz v2, :cond_9

    .line 4047
    move/from16 v21, v1

    move-object/from16 v1, p2

    .end local v1    # "outerDepth":I
    .local v21, "outerDepth":I
    invoke-virtual {v7, v0, v2, v1}, Lcom/android/server/pm/Settings;->readInstallPermissionsLPr(Lcom/android/modules/utils/TypedXmlPullParser;Lcom/android/server/pm/permission/LegacyPermissionState;Ljava/util/List;)V

    goto :goto_6

    .line 4046
    .end local v21    # "outerDepth":I
    .restart local v1    # "outerDepth":I
    :cond_9
    move/from16 v21, v1

    move-object/from16 v1, p2

    .line 4049
    .end local v1    # "outerDepth":I
    .end local v2    # "legacyState":Lcom/android/server/pm/permission/LegacyPermissionState;
    .restart local v21    # "outerDepth":I
    :goto_6
    move/from16 v1, v21

    const/4 v2, 0x0

    goto :goto_2

    .end local v21    # "outerDepth":I
    .restart local v1    # "outerDepth":I
    :cond_a
    move-object/from16 v7, p0

    move/from16 v21, v1

    move-object/from16 v1, p2

    .end local v1    # "outerDepth":I
    .restart local v21    # "outerDepth":I
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v2

    const-string/jumbo v1, "uses-static-lib"

    invoke-virtual {v2, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_b

    .line 4050
    invoke-virtual {v7, v0, v3}, Lcom/android/server/pm/Settings;->readUsesStaticLibLPw(Lcom/android/modules/utils/TypedXmlPullParser;Lcom/android/server/pm/PackageSetting;)V

    move/from16 v1, v21

    const/4 v2, 0x0

    goto :goto_2

    .line 4051
    :cond_b
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v1

    const-string/jumbo v2, "uses-sdk-lib"

    invoke-virtual {v1, v2}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_c

    .line 4052
    invoke-virtual {v7, v0, v3}, Lcom/android/server/pm/Settings;->readUsesSdkLibLPw(Lcom/android/modules/utils/TypedXmlPullParser;Lcom/android/server/pm/PackageSetting;)V

    move/from16 v1, v21

    const/4 v2, 0x0

    goto/16 :goto_2

    .line 4054
    :cond_c
    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "Unknown element under <updated-package>: "

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4055
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    .line 4054
    const/4 v2, 0x5

    invoke-static {v2, v1}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 4056
    invoke-static/range {p1 .. p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    move/from16 v1, v21

    const/4 v2, 0x0

    goto/16 :goto_2

    .line 4032
    .end local v21    # "outerDepth":I
    .restart local v1    # "outerDepth":I
    :cond_d
    move-object/from16 v7, p0

    move/from16 v21, v1

    .end local v1    # "outerDepth":I
    .restart local v21    # "outerDepth":I
    const/4 v2, 0x0

    goto/16 :goto_2

    .line 4030
    .end local v21    # "outerDepth":I
    .restart local v1    # "outerDepth":I
    :cond_e
    move-object/from16 v7, p0

    move/from16 v21, v1

    .line 4060
    .end local v1    # "outerDepth":I
    .restart local v21    # "outerDepth":I
    :goto_7
    iget-object v1, v7, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    move-object/from16 v2, v18

    .end local v18    # "name":Ljava/lang/String;
    .local v2, "name":Ljava/lang/String;
    invoke-virtual {v1, v2, v3}, Lcom/android/server/utils/WatchedArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 4061
    return-void
.end method

.method private readEnabledComponentsLPw(Lcom/android/server/pm/PackageSetting;Lcom/android/modules/utils/TypedXmlPullParser;I)V
    .locals 7
    .param p1, "packageSetting"    # Lcom/android/server/pm/PackageSetting;
    .param p2, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .param p3, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;,
            Lorg/xmlpull/v1/XmlPullParserException;
        }
    .end annotation

    .line 4539
    invoke-interface {p2}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v0

    .line 4541
    .local v0, "outerDepth":I
    :cond_0
    :goto_0
    invoke-interface {p2}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v1

    move v2, v1

    .local v2, "type":I
    const/4 v3, 0x1

    nop

    if-eq v1, v3, :cond_5

    const/4 v1, 0x3

    if-ne v2, v1, :cond_1

    .line 4542
    invoke-interface {p2}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v3

    if-le v3, v0, :cond_5

    .line 4543
    :cond_1
    nop

    nop

    if-eq v2, v1, :cond_0

    const/4 v1, 0x4

    if-ne v2, v1, :cond_2

    .line 4544
    goto :goto_0

    .line 4547
    :cond_2
    invoke-interface {p2}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v1

    .line 4548
    .local v1, "tagName":Ljava/lang/String;
    const-string/jumbo v3, "item"

    invoke-virtual {v1, v3}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v3

    const/4 v4, 0x5

    if-eqz v3, :cond_4

    .line 4549
    const/4 v3, 0x0

    const-string/jumbo v5, "name"

    invoke-interface {p2, v3, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v3

    .line 4550
    .local v3, "name":Ljava/lang/String;
    if-eqz v3, :cond_3

    .line 4551
    invoke-virtual {v3}, Ljava/lang/String;->intern()Ljava/lang/String;

    move-result-object v4

    invoke-virtual {p1, v4, p3}, Lcom/android/server/pm/PackageSetting;->addEnabledComponent(Ljava/lang/String;I)V

    goto :goto_1

    .line 4553
    :cond_3
    new-instance v5, Ljava/lang/StringBuilder;

    invoke-direct {v5}, Ljava/lang/StringBuilder;-><init>()V

    const-string v6, "Error in package manager settings: <enabled-components> has no name at "

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4555
    invoke-interface {p2}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v6

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v5}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v5

    .line 4553
    invoke-static {v4, v5}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 4557
    .end local v3    # "name":Ljava/lang/String;
    :goto_1
    goto :goto_2

    .line 4558
    :cond_4
    new-instance v3, Ljava/lang/StringBuilder;

    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V

    const-string v5, "Unknown element under <enabled-components>: "

    invoke-virtual {v3, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4559
    invoke-interface {p2}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v3, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    .line 4558
    invoke-static {v4, v3}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 4561
    :goto_2
    invoke-static {p2}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 4562
    .end local v1    # "tagName":Ljava/lang/String;
    goto :goto_0

    .line 4563
    :cond_5
    return-void
.end method

.method private readMimeGroupLPw(Lcom/android/modules/utils/TypedXmlPullParser;)Landroid/util/Pair;
    .locals 8
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .annotation build Landroid/annotation/Nullable;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/modules/utils/TypedXmlPullParser;",
            ")",
            "Landroid/util/Pair<",
            "Ljava/lang/String;",
            "Ljava/util/Set<",
            "Ljava/lang/String;",
            ">;>;"
        }
    .end annotation

    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 4458
    const-string/jumbo v0, "name"

    const/4 v1, 0x0

    invoke-interface {p1, v1, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    .line 4459
    .local v0, "groupName":Ljava/lang/String;
    if-nez v0, :cond_0

    .line 4460
    invoke-static {p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 4461
    return-object v1

    .line 4464
    :cond_0
    new-instance v2, Landroid/util/ArraySet;

    invoke-direct {v2}, Landroid/util/ArraySet;-><init>()V

    .line 4465
    .local v2, "mimeTypes":Ljava/util/Set;, "Ljava/util/Set<Ljava/lang/String;>;"
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v3

    .line 4467
    .local v3, "outerDepth":I
    :cond_1
    :goto_0
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v4

    move v5, v4

    .local v5, "type":I
    const/4 v6, 0x1

    nop

    if-eq v4, v6, :cond_6

    const/4 v4, 0x3

    if-ne v5, v4, :cond_2

    .line 4468
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v6

    if-le v6, v3, :cond_6

    .line 4469
    :cond_2
    nop

    nop

    if-eq v5, v4, :cond_1

    const/4 v4, 0x4

    if-ne v5, v4, :cond_3

    .line 4470
    goto :goto_0

    .line 4473
    :cond_3
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v4

    .line 4474
    .local v4, "tagName":Ljava/lang/String;
    const-string/jumbo v6, "mime-type"

    invoke-virtual {v4, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6

    if-eqz v6, :cond_5

    .line 4475
    const-string/jumbo v6, "value"

    invoke-interface {p1, v1, v6}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v6

    .line 4476
    .local v6, "typeName":Ljava/lang/String;
    if-eqz v6, :cond_4

    .line 4477
    invoke-interface {v2, v6}, Ljava/util/Set;->add(Ljava/lang/Object;)Z

    .line 4479
    .end local v6    # "typeName":Ljava/lang/String;
    :cond_4
    goto :goto_1

    .line 4480
    :cond_5
    new-instance v6, Ljava/lang/StringBuilder;

    invoke-direct {v6}, Ljava/lang/StringBuilder;-><init>()V

    const-string v7, "Unknown element under <mime-group>: "

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4481
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v7

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v6

    .line 4480
    const/4 v7, 0x5

    invoke-static {v7, v6}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 4482
    invoke-static {p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 4484
    .end local v4    # "tagName":Ljava/lang/String;
    :goto_1
    goto :goto_0

    .line 4486
    :cond_6
    invoke-static {v0, v2}, Landroid/util/Pair;->create(Ljava/lang/Object;Ljava/lang/Object;)Landroid/util/Pair;

    move-result-object v1

    return-object v1
.end method

.method private readPackageLPw(Lcom/android/modules/utils/TypedXmlPullParser;Ljava/util/ArrayList;Landroid/util/ArrayMap;Ljava/util/List;Landroid/util/ArrayMap;)V
    .locals 77
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/modules/utils/TypedXmlPullParser;",
            "Ljava/util/ArrayList<",
            "Landroid/content/pm/Signature;",
            ">;",
            "Landroid/util/ArrayMap<",
            "Ljava/lang/Long;",
            "Ljava/lang/Integer;",
            ">;",
            "Ljava/util/List<",
            "Landroid/content/pm/UserInfo;",
            ">;",
            "Landroid/util/ArrayMap<",
            "Ljava/lang/String;",
            "Ljava/lang/Long;",
            ">;)V"
        }
    .end annotation

    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 4071
    .local p2, "readSignatures":Ljava/util/ArrayList;, "Ljava/util/ArrayList<Landroid/content/pm/Signature;>;"
    .local p3, "keySetRefs":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Ljava/lang/Long;Ljava/lang/Integer;>;"
    .local p4, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .local p5, "originalFirstInstallTimes":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Ljava/lang/String;Ljava/lang/Long;>;"
    move-object/from16 v10, p0

    move-object/from16 v11, p1

    move-object/from16 v12, p2

    move-object/from16 v13, p3

    const-string v14, " has bad appId "

    const-string/jumbo v15, "true"

    const-string v9, " at "

    const-string v8, "Error in package manager settings: package "

    const/4 v1, 0x0

    .line 4072
    .local v1, "name":Ljava/lang/String;
    const/4 v2, 0x0

    .line 4073
    .local v2, "realName":Ljava/lang/String;
    const/4 v3, 0x0

    .line 4074
    .local v3, "appId":I
    const/4 v4, 0x0

    .line 4075
    .local v4, "sharedUserAppId":I
    const/4 v5, 0x0

    .line 4076
    .local v5, "codePathStr":Ljava/lang/String;
    const/4 v6, 0x0

    .line 4077
    .local v6, "legacyCpuAbiString":Ljava/lang/String;
    const/4 v7, 0x0

    .line 4078
    .local v7, "legacyNativeLibraryPathStr":Ljava/lang/String;
    const/16 v16, 0x0

    .line 4079
    .local v16, "primaryCpuAbiString":Ljava/lang/String;
    const/16 v17, 0x0

    .line 4080
    .local v17, "secondaryCpuAbiString":Ljava/lang/String;
    const/16 v18, 0x0

    .line 4081
    .local v18, "cpuAbiOverrideString":Ljava/lang/String;
    const/16 v19, 0x0

    .line 4082
    .local v19, "systemStr":Ljava/lang/String;
    const/16 v20, 0x0

    .line 4083
    .local v20, "installerPackageName":Ljava/lang/String;
    const/16 v21, -0x1

    .line 4084
    .local v21, "installerPackageUid":I
    const/16 v22, 0x0

    .line 4085
    .local v22, "updateOwnerPackageName":Ljava/lang/String;
    const/16 v23, 0x0

    .line 4086
    .local v23, "installerAttributionTag":Ljava/lang/String;
    const/16 v24, 0x0

    .line 4087
    .local v24, "packageSource":I
    const/16 v25, 0x0

    .line 4088
    .local v25, "isOrphaned":Z
    const/16 v26, 0x0

    .line 4089
    .local v26, "installOriginatingPackageName":Ljava/lang/String;
    const/16 v27, 0x0

    .line 4090
    .local v27, "installInitiatingPackageName":Ljava/lang/String;
    const/16 v28, 0x0

    .line 4091
    .local v28, "installInitiatorUninstalled":Z
    const/16 v29, 0x0

    .line 4092
    .local v29, "volumeUuid":Ljava/lang/String;
    const/16 v30, 0x0

    .line 4093
    .local v30, "updateAvailable":Z
    const/16 v31, -0x1

    .line 4094
    .local v31, "categoryHint":I
    const/16 v32, 0x0

    .line 4095
    .local v32, "pkgFlags":I
    const/16 v33, 0x0

    .line 4096
    .local v33, "pkgPrivateFlags":I
    const-wide/16 v34, 0x0

    .line 4097
    .local v34, "timeStamp":J
    const-wide/16 v36, 0x0

    .line 4098
    .local v36, "firstInstallTime":J
    const-wide/16 v38, 0x0

    .line 4099
    .local v38, "lastUpdateTime":J
    const/16 v40, 0x0

    .line 4100
    .local v40, "packageSetting":Lcom/android/server/pm/PackageSetting;
    const-wide/16 v41, 0x0

    .line 4101
    .local v41, "versionCode":J
    const/16 v43, 0x0

    .line 4102
    .local v43, "installedForceQueryable":Z
    const/16 v44, 0x0

    .line 4103
    .local v44, "isPendingRestore":Z
    const/16 v45, 0x0

    .line 4104
    .local v45, "loadingProgress":F
    const-wide/16 v46, 0x0

    .line 4106
    .local v46, "loadingCompletedTime":J
    const/16 v48, 0x0

    .line 4107
    .local v48, "appMetadataFilePath":Ljava/lang/String;
    const/16 v49, 0x0

    .line 4108
    .local v49, "appMetadataSource":I
    const/16 v50, 0x0

    .line 4109
    .local v50, "targetSdkVersion":I
    const/16 v51, 0x0

    .line 4110
    .local v51, "restrictUpdateHash":[B
    const/16 v52, 0x0

    .line 4111
    .local v52, "isScannedAsStoppedSystemApp":Z
    const/16 v53, 0x0

    .line 4113
    .local v53, "isSdkLibrary":Z
    move-object/from16 v54, v14

    const/4 v14, 0x0

    const/4 v13, 0x0

    :try_start_0
    const-string/jumbo v0, "name"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0
    :try_end_0
    .catch Ljava/lang/NumberFormatException; {:try_start_0 .. :try_end_0} :catch_29

    move-object v1, v0

    .line 4114
    :try_start_1
    const-string/jumbo v0, "realName"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    move-object v2, v0

    .line 4115
    invoke-static/range {p1 .. p1}, Lcom/android/server/pm/Settings;->parseAppId(Lcom/android/modules/utils/TypedXmlPullParser;)I

    move-result v0

    move v3, v0

    .line 4116
    const-string/jumbo v0, "isSdkLibrary"

    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v0

    move/from16 v53, v0

    .line 4117
    invoke-static/range {p1 .. p1}, Lcom/android/server/pm/Settings;->parseSharedUserAppId(Lcom/android/modules/utils/TypedXmlPullParser;)I

    move-result v0
    :try_end_1
    .catch Ljava/lang/NumberFormatException; {:try_start_1 .. :try_end_1} :catch_28

    move v4, v0

    .line 4118
    :try_start_2
    const-string v0, "codePath"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0
    :try_end_2
    .catch Ljava/lang/NumberFormatException; {:try_start_2 .. :try_end_2} :catch_27

    move-object v5, v0

    .line 4120
    :try_start_3
    const-string/jumbo v0, "requiredCpuAbi"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0
    :try_end_3
    .catch Ljava/lang/NumberFormatException; {:try_start_3 .. :try_end_3} :catch_26

    move-object/from16 v59, v0

    .line 4122
    .end local v6    # "legacyCpuAbiString":Ljava/lang/String;
    .local v59, "legacyCpuAbiString":Ljava/lang/String;
    :try_start_4
    const-string/jumbo v0, "nativeLibraryPath"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0
    :try_end_4
    .catch Ljava/lang/NumberFormatException; {:try_start_4 .. :try_end_4} :catch_25

    move-object v7, v0

    .line 4123
    :try_start_5
    const-string/jumbo v0, "primaryCpuAbi"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    move-object/from16 v16, v0

    .line 4124
    const-string/jumbo v0, "secondaryCpuAbi"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0
    :try_end_5
    .catch Ljava/lang/NumberFormatException; {:try_start_5 .. :try_end_5} :catch_24

    move-object v6, v0

    .line 4125
    .end local v17    # "secondaryCpuAbiString":Ljava/lang/String;
    .local v6, "secondaryCpuAbiString":Ljava/lang/String;
    :try_start_6
    const-string v0, "cpuAbiOverride"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0
    :try_end_6
    .catch Ljava/lang/NumberFormatException; {:try_start_6 .. :try_end_6} :catch_23

    move-object/from16 v17, v0

    .line 4126
    .end local v18    # "cpuAbiOverrideString":Ljava/lang/String;
    .local v17, "cpuAbiOverrideString":Ljava/lang/String;
    :try_start_7
    const-string/jumbo v0, "updateAvailable"

    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v0

    move/from16 v30, v0

    .line 4127
    const-string v0, "forceQueryable"

    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v0

    move/from16 v43, v0

    .line 4128
    const-string/jumbo v0, "pendingRestore"

    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v0

    move/from16 v44, v0

    .line 4129
    const-string/jumbo v0, "loadingProgress"

    const/4 v14, 0x0

    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeFloat(Ljava/lang/String;Ljava/lang/String;F)F

    move-result v0

    move/from16 v45, v0

    .line 4130
    const-string/jumbo v0, "loadingCompletedTime"
    :try_end_7
    .catch Ljava/lang/NumberFormatException; {:try_start_7 .. :try_end_7} :catch_22

    move-object/from16 v60, v8

    move-object v14, v9

    const-wide/16 v8, 0x0

    :try_start_8
    invoke-interface {v11, v13, v0, v8, v9}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLongHex(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v61
    :try_end_8
    .catch Ljava/lang/NumberFormatException; {:try_start_8 .. :try_end_8} :catch_21

    move-wide/from16 v46, v61

    .line 4132
    if-nez v16, :cond_0

    if-eqz v59, :cond_0

    .line 4133
    move-object/from16 v0, v59

    move-object v9, v0

    .end local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .local v0, "primaryCpuAbiString":Ljava/lang/String;
    goto :goto_0

    .line 4136
    .end local v0    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v16    # "primaryCpuAbiString":Ljava/lang/String;
    :cond_0
    move-object/from16 v9, v16

    .end local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .local v9, "primaryCpuAbiString":Ljava/lang/String;
    :goto_0
    :try_start_9
    const-string/jumbo v0, "version"
    :try_end_9
    .catch Ljava/lang/NumberFormatException; {:try_start_9 .. :try_end_9} :catch_20

    move-object/from16 v16, v9

    const-wide/16 v8, 0x0

    .end local v9    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v16    # "primaryCpuAbiString":Ljava/lang/String;
    :try_start_a
    invoke-interface {v11, v13, v0, v8, v9}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLong(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v61
    :try_end_a
    .catch Ljava/lang/NumberFormatException; {:try_start_a .. :try_end_a} :catch_1f

    move-wide/from16 v8, v61

    .line 4137
    .end local v41    # "versionCode":J
    .local v8, "versionCode":J
    :try_start_b
    const-string/jumbo v0, "targetSdkVersion"
    :try_end_b
    .catch Ljava/lang/NumberFormatException; {:try_start_b .. :try_end_b} :catch_1e

    move-object/from16 v18, v14

    const/4 v14, 0x0

    :try_start_c
    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v0

    move/from16 v50, v0

    .line 4138
    const-string/jumbo v0, "restrictUpdateHash"

    invoke-interface {v11, v13, v0, v13}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBytesBase64(Ljava/lang/String;Ljava/lang/String;[B)[B

    move-result-object v0

    move-object/from16 v51, v0

    .line 4139
    const-string/jumbo v0, "installer"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    move-object/from16 v20, v0

    .line 4140
    const-string/jumbo v0, "installerUid"

    const/4 v14, -0x1

    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v0

    move/from16 v21, v0

    .line 4141
    const-string/jumbo v0, "updateOwner"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    move-object/from16 v22, v0

    .line 4142
    const-string/jumbo v0, "installerAttributionTag"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    move-object/from16 v23, v0

    .line 4143
    const-string/jumbo v0, "packageSource"

    const/4 v14, 0x0

    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v0

    move/from16 v24, v0

    .line 4145
    const-string/jumbo v0, "isOrphaned"

    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v0

    move/from16 v25, v0

    .line 4146
    const-string/jumbo v0, "installInitiator"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    move-object/from16 v27, v0

    .line 4147
    const-string/jumbo v0, "installOriginator"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    move-object/from16 v26, v0

    .line 4148
    const-string/jumbo v0, "installInitiatorUninstalled"

    const/4 v14, 0x0

    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v0

    move/from16 v28, v0

    .line 4150
    const-string/jumbo v0, "volumeUuid"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    move-object/from16 v29, v0

    .line 4151
    const-string v0, "categoryHint"

    const/4 v14, -0x1

    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v0

    move/from16 v31, v0

    .line 4153
    const-string v0, "appMetadataFilePath"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    move-object/from16 v48, v0

    .line 4154
    const-string v0, "appMetadataSource"

    const/4 v14, 0x0

    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v0

    move/from16 v49, v0

    .line 4157
    const-string/jumbo v0, "scannedAsStoppedSystemApp"

    invoke-interface {v11, v13, v0, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v0

    move/from16 v52, v0

    .line 4160
    const-string v0, "domainSetId"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    move-object v14, v0

    .line 4162
    .local v14, "domainSetIdString":Ljava/lang/String;
    invoke-static {v14}, Landroid/text/TextUtils;->isEmpty(Ljava/lang/CharSequence;)Z

    move-result v0
    :try_end_c
    .catch Ljava/lang/NumberFormatException; {:try_start_c .. :try_end_c} :catch_1d

    if-eqz v0, :cond_1

    .line 4164
    :try_start_d
    iget-object v0, v10, Lcom/android/server/pm/Settings;->mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;

    invoke-interface {v0}, Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;->generateNewId()Ljava/util/UUID;

    move-result-object v0
    :try_end_d
    .catch Ljava/lang/NumberFormatException; {:try_start_d .. :try_end_d} :catch_0

    move-object/from16 v42, v0

    .local v0, "domainSetId":Ljava/util/UUID;
    goto :goto_1

    .line 4283
    .end local v0    # "domainSetId":Ljava/util/UUID;
    .end local v14    # "domainSetIdString":Ljava/lang/String;
    :catch_0
    move-exception v0

    move-wide/from16 v41, v8

    move-object/from16 v69, v15

    move-object/from16 v70, v18

    move-object/from16 v65, v54

    move-object/from16 v71, v60

    move-object/from16 v18, v17

    move-object/from16 v17, v6

    move-object/from16 v6, v59

    goto/16 :goto_12

    .line 4166
    .restart local v14    # "domainSetIdString":Ljava/lang/String;
    :cond_1
    :try_start_e
    invoke-static {v14}, Ljava/util/UUID;->fromString(Ljava/lang/String;)Ljava/util/UUID;

    move-result-object v0

    move-object/from16 v42, v0

    .line 4169
    .local v42, "domainSetId":Ljava/util/UUID;
    :goto_1
    const-string/jumbo v0, "publicFlags"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0
    :try_end_e
    .catch Ljava/lang/NumberFormatException; {:try_start_e .. :try_end_e} :catch_1d

    move-object/from16 v19, v0

    .line 4170
    if-eqz v19, :cond_2

    .line 4172
    :try_start_f
    invoke-static/range {v19 .. v19}, Ljava/lang/Integer;->parseInt(Ljava/lang/String;)I

    move-result v0
    :try_end_f
    .catch Ljava/lang/NumberFormatException; {:try_start_f .. :try_end_f} :catch_1

    move/from16 v32, v0

    .line 4174
    goto :goto_2

    .line 4173
    :catch_1
    move-exception v0

    .line 4175
    :goto_2
    :try_start_10
    const-string/jumbo v0, "privateFlags"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0
    :try_end_10
    .catch Ljava/lang/NumberFormatException; {:try_start_10 .. :try_end_10} :catch_0

    move-object/from16 v19, v0

    .line 4176
    if-eqz v19, :cond_9

    .line 4178
    :try_start_11
    invoke-static/range {v19 .. v19}, Ljava/lang/Integer;->parseInt(Ljava/lang/String;)I

    move-result v0
    :try_end_11
    .catch Ljava/lang/NumberFormatException; {:try_start_11 .. :try_end_11} :catch_2

    move/from16 v33, v0

    .line 4180
    :goto_3
    goto/16 :goto_6

    .line 4179
    :catch_2
    move-exception v0

    goto :goto_3

    .line 4184
    :cond_2
    :try_start_12
    const-string v0, "flags"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0
    :try_end_12
    .catch Ljava/lang/NumberFormatException; {:try_start_12 .. :try_end_12} :catch_1d

    move-object/from16 v19, v0

    .line 4185
    if-eqz v19, :cond_6

    .line 4187
    :try_start_13
    invoke-static/range {v19 .. v19}, Ljava/lang/Integer;->parseInt(Ljava/lang/String;)I

    move-result v0
    :try_end_13
    .catch Ljava/lang/NumberFormatException; {:try_start_13 .. :try_end_13} :catch_3

    move/from16 v32, v0

    .line 4189
    goto :goto_4

    .line 4188
    :catch_3
    move-exception v0

    .line 4190
    :goto_4
    const/high16 v0, 0x8000000

    and-int v0, v32, v0

    if-eqz v0, :cond_3

    .line 4191
    or-int/lit8 v33, v33, 0x1

    .line 4193
    :cond_3
    const/high16 v0, 0x10000000

    and-int v0, v32, v0

    if-eqz v0, :cond_4

    .line 4194
    or-int/lit8 v33, v33, 0x2

    .line 4196
    :cond_4
    const/high16 v0, 0x40000000    # 2.0f

    and-int v0, v32, v0

    if-eqz v0, :cond_5

    .line 4197
    or-int/lit8 v0, v33, 0x8

    move/from16 v33, v0

    .line 4199
    :cond_5
    const v0, -0x58000001

    and-int v0, v32, v0

    move/from16 v32, v0

    .end local v32    # "pkgFlags":I
    .local v0, "pkgFlags":I
    goto :goto_6

    .line 4204
    .end local v0    # "pkgFlags":I
    .restart local v32    # "pkgFlags":I
    :cond_6
    :try_start_14
    const-string/jumbo v0, "system"

    invoke-interface {v11, v13, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0
    :try_end_14
    .catch Ljava/lang/NumberFormatException; {:try_start_14 .. :try_end_14} :catch_1d

    move-object/from16 v19, v0

    .line 4205
    move-object/from16 v13, v19

    .end local v19    # "systemStr":Ljava/lang/String;
    .local v13, "systemStr":Ljava/lang/String;
    if-eqz v13, :cond_8

    .line 4206
    :try_start_15
    invoke-virtual {v15, v13}, Ljava/lang/String;->equalsIgnoreCase(Ljava/lang/String;)Z

    move-result v0
    :try_end_15
    .catch Ljava/lang/NumberFormatException; {:try_start_15 .. :try_end_15} :catch_4

    if-eqz v0, :cond_7

    const/4 v0, 0x1

    goto :goto_5

    .line 4207
    :cond_7
    const/4 v0, 0x0

    :goto_5
    or-int v0, v32, v0

    move/from16 v32, v0

    move-object/from16 v19, v13

    .end local v32    # "pkgFlags":I
    .restart local v0    # "pkgFlags":I
    goto :goto_6

    .line 4283
    .end local v0    # "pkgFlags":I
    .end local v14    # "domainSetIdString":Ljava/lang/String;
    .end local v42    # "domainSetId":Ljava/util/UUID;
    .restart local v32    # "pkgFlags":I
    :catch_4
    move-exception v0

    move-wide/from16 v41, v8

    move-object/from16 v19, v13

    move-object/from16 v69, v15

    move-object/from16 v70, v18

    move-object/from16 v65, v54

    move-object/from16 v71, v60

    move-object/from16 v18, v17

    move-object/from16 v17, v6

    move-object/from16 v6, v59

    goto/16 :goto_12

    .line 4211
    .restart local v14    # "domainSetIdString":Ljava/lang/String;
    .restart local v42    # "domainSetId":Ljava/util/UUID;
    :cond_8
    or-int/lit8 v0, v32, 0x1

    move/from16 v32, v0

    move-object/from16 v19, v13

    .line 4215
    .end local v13    # "systemStr":Ljava/lang/String;
    .restart local v19    # "systemStr":Ljava/lang/String;
    :cond_9
    :goto_6
    :try_start_16
    const-string v0, "ft"

    move-object/from16 v68, v14

    const/4 v12, 0x0

    const-wide/16 v13, 0x0

    .end local v14    # "domainSetIdString":Ljava/lang/String;
    .local v68, "domainSetIdString":Ljava/lang/String;
    invoke-interface {v11, v12, v0, v13, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLongHex(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v56
    :try_end_16
    .catch Ljava/lang/NumberFormatException; {:try_start_16 .. :try_end_16} :catch_1d

    move-wide/from16 v34, v56

    .line 4216
    cmp-long v0, v34, v13

    if-nez v0, :cond_a

    .line 4217
    :try_start_17
    const-string/jumbo v0, "ts"

    invoke-interface {v11, v12, v0, v13, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLong(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v61
    :try_end_17
    .catch Ljava/lang/NumberFormatException; {:try_start_17 .. :try_end_17} :catch_0

    move-wide/from16 v12, v61

    .end local v34    # "timeStamp":J
    .local v12, "timeStamp":J
    goto :goto_7

    .line 4216
    .end local v12    # "timeStamp":J
    .restart local v34    # "timeStamp":J
    :cond_a
    move-wide/from16 v12, v34

    .line 4219
    .end local v34    # "timeStamp":J
    .restart local v12    # "timeStamp":J
    :goto_7
    :try_start_18
    const-string/jumbo v0, "it"
    :try_end_18
    .catch Ljava/lang/NumberFormatException; {:try_start_18 .. :try_end_18} :catch_1c

    move-object/from16 v69, v15

    const/4 v10, 0x0

    const-wide/16 v14, 0x0

    :try_start_19
    invoke-interface {v11, v10, v0, v14, v15}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLongHex(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v34

    move-wide/from16 v36, v34

    .line 4220
    const-string/jumbo v0, "ut"

    invoke-interface {v11, v10, v0, v14, v15}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLongHex(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v34
    :try_end_19
    .catch Ljava/lang/NumberFormatException; {:try_start_19 .. :try_end_19} :catch_1b

    move-wide/from16 v14, v34

    .line 4224
    .end local v38    # "lastUpdateTime":J
    .local v14, "lastUpdateTime":J
    if-eqz v2, :cond_b

    .line 4225
    :try_start_1a
    invoke-virtual {v2}, Ljava/lang/String;->intern()Ljava/lang/String;

    move-result-object v0
    :try_end_1a
    .catch Ljava/lang/NumberFormatException; {:try_start_1a .. :try_end_1a} :catch_5

    move-object v10, v0

    .end local v2    # "realName":Ljava/lang/String;
    .local v0, "realName":Ljava/lang/String;
    goto :goto_8

    .line 4283
    .end local v0    # "realName":Ljava/lang/String;
    .end local v42    # "domainSetId":Ljava/util/UUID;
    .end local v68    # "domainSetIdString":Ljava/lang/String;
    .restart local v2    # "realName":Ljava/lang/String;
    :catch_5
    move-exception v0

    move-wide/from16 v41, v8

    move-wide/from16 v34, v12

    move-wide/from16 v38, v14

    move-object/from16 v70, v18

    move-object/from16 v65, v54

    move-object/from16 v71, v60

    move-object/from16 v18, v17

    move-object/from16 v17, v6

    move-object/from16 v6, v59

    goto/16 :goto_12

    .line 4224
    .restart local v42    # "domainSetId":Ljava/util/UUID;
    .restart local v68    # "domainSetIdString":Ljava/lang/String;
    :cond_b
    move-object v10, v2

    .line 4227
    .end local v2    # "realName":Ljava/lang/String;
    .local v10, "realName":Ljava/lang/String;
    :goto_8
    if-nez v1, :cond_c

    .line 4228
    :try_start_1b
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "Error in package manager settings: <package> has no name at "

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4230
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 4228
    const/4 v2, 0x5

    invoke-static {v2, v0}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    move-wide/from16 v34, v14

    move-object/from16 v11, v17

    move-object/from16 v15, v60

    move-object/from16 v14, p0

    move/from16 v60, v4

    goto/16 :goto_b

    .line 4283
    .end local v42    # "domainSetId":Ljava/util/UUID;
    .end local v68    # "domainSetIdString":Ljava/lang/String;
    :catch_6
    move-exception v0

    move-wide/from16 v41, v8

    move-object v2, v10

    move-wide/from16 v34, v12

    move-wide/from16 v38, v14

    move-object/from16 v70, v18

    move-object/from16 v65, v54

    move-object/from16 v71, v60

    move-object/from16 v18, v17

    move-object/from16 v17, v6

    move-object/from16 v6, v59

    goto/16 :goto_12

    .line 4231
    .restart local v42    # "domainSetId":Ljava/util/UUID;
    .restart local v68    # "domainSetIdString":Ljava/lang/String;
    :cond_c
    if-nez v5, :cond_d

    .line 4232
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "Error in package manager settings: <package> has no codePath at "

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4234
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 4232
    const/4 v2, 0x5

    invoke-static {v2, v0}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    move-wide/from16 v34, v14

    move-object/from16 v11, v17

    move-object/from16 v15, v60

    move-object/from16 v14, p0

    move/from16 v60, v4

    goto/16 :goto_b

    .line 4235
    :cond_d
    if-gtz v3, :cond_11

    const/4 v2, -0x1

    if-ne v3, v2, :cond_e

    if-eqz v53, :cond_e

    .line 4236
    invoke-static {}, Lcom/android/internal/hidden_from_bootclasspath/android/content/pm/Flags;->disallowSdkLibsToBeApps()Z

    move-result v0
    :try_end_1b
    .catch Ljava/lang/NumberFormatException; {:try_start_1b .. :try_end_1b} :catch_6

    if-eqz v0, :cond_e

    move-wide/from16 v34, v14

    move-object/from16 v11, v17

    move-object/from16 v15, v60

    move-object/from16 v14, p0

    move/from16 v60, v4

    move-object/from16 v4, v54

    goto/16 :goto_c

    .line 4255
    :cond_e
    if-eqz v4, :cond_10

    .line 4256
    if-lez v4, :cond_f

    .line 4257
    :try_start_1c
    new-instance v0, Lcom/android/server/pm/PackageSetting;

    invoke-virtual {v1}, Ljava/lang/String;->intern()Ljava/lang/String;

    move-result-object v62

    new-instance v2, Ljava/io/File;

    invoke-direct {v2, v5}, Ljava/io/File;-><init>(Ljava/lang/String;)V

    move-object/from16 v61, v0

    move-object/from16 v63, v10

    move-object/from16 v64, v2

    move/from16 v65, v32

    move/from16 v66, v33

    move-object/from16 v67, v42

    invoke-direct/range {v61 .. v67}, Lcom/android/server/pm/PackageSetting;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/io/File;IILjava/util/UUID;)V

    .line 4259
    invoke-virtual {v0, v7}, Lcom/android/server/pm/PackageSetting;->setLegacyNativeLibraryPath(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0
    :try_end_1c
    .catch Ljava/lang/NumberFormatException; {:try_start_1c .. :try_end_1c} :catch_b

    .line 4260
    move-object/from16 v2, v16

    .end local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .local v2, "primaryCpuAbiString":Ljava/lang/String;
    :try_start_1d
    invoke-virtual {v0, v2}, Lcom/android/server/pm/PackageSetting;->setPrimaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4261
    invoke-virtual {v0, v6}, Lcom/android/server/pm/PackageSetting;->setSecondaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0
    :try_end_1d
    .catch Ljava/lang/NumberFormatException; {:try_start_1d .. :try_end_1d} :catch_a

    .line 4262
    move-object/from16 v11, v17

    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .local v11, "cpuAbiOverrideString":Ljava/lang/String;
    :try_start_1e
    invoke-virtual {v0, v11}, Lcom/android/server/pm/PackageSetting;->setCpuAbiOverride(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4263
    invoke-virtual {v0, v8, v9}, Lcom/android/server/pm/PackageSetting;->setLongVersionCode(J)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4264
    invoke-virtual {v0, v4}, Lcom/android/server/pm/PackageSetting;->setSharedUserAppId(I)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4265
    invoke-virtual {v0, v12, v13}, Lcom/android/server/pm/PackageSetting;->setLastModifiedTime(J)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4266
    invoke-virtual {v0, v14, v15}, Lcom/android/server/pm/PackageSetting;->setLastUpdateTime(J)Lcom/android/server/pm/PackageSetting;

    move-result-object v0
    :try_end_1e
    .catch Ljava/lang/NumberFormatException; {:try_start_1e .. :try_end_1e} :catch_9

    move-object/from16 v16, v0

    .line 4267
    .end local v40    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    .local v16, "packageSetting":Lcom/android/server/pm/PackageSetting;
    move-wide/from16 v34, v14

    move-object/from16 v14, p0

    .end local v14    # "lastUpdateTime":J
    .local v34, "lastUpdateTime":J
    :try_start_1f
    iget-object v0, v14, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;
    :try_end_1f
    .catch Ljava/lang/NumberFormatException; {:try_start_1f .. :try_end_1f} :catch_8

    move-object/from16 v15, v16

    .end local v16    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    .local v15, "packageSetting":Lcom/android/server/pm/PackageSetting;
    :try_start_20
    invoke-virtual {v0, v15}, Lcom/android/server/utils/WatchedArrayList;->add(Ljava/lang/Object;)Z
    :try_end_20
    .catch Ljava/lang/NumberFormatException; {:try_start_20 .. :try_end_20} :catch_7

    move-object/from16 v54, v1

    move-object/from16 v62, v5

    move-object v14, v7

    move-object/from16 v40, v15

    move-object/from16 v70, v18

    move-object/from16 v71, v60

    move/from16 v60, v4

    move-object v15, v6

    move-object/from16 v18, v10

    move-wide v4, v12

    move-wide/from16 v6, v34

    move-object v10, v2

    move-wide v12, v8

    goto/16 :goto_e

    .line 4283
    .end local v42    # "domainSetId":Ljava/util/UUID;
    .end local v68    # "domainSetIdString":Ljava/lang/String;
    :catch_7
    move-exception v0

    move-object/from16 v16, v2

    move-object/from16 v17, v6

    move-wide/from16 v41, v8

    move-object v2, v10

    move-object/from16 v40, v15

    move-object/from16 v70, v18

    move-wide/from16 v38, v34

    move-object/from16 v65, v54

    move-object/from16 v6, v59

    move-object/from16 v71, v60

    move-object/from16 v18, v11

    move-wide/from16 v34, v12

    goto/16 :goto_12

    .end local v15    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    .restart local v16    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    :catch_8
    move-exception v0

    move-object/from16 v15, v16

    move-object/from16 v16, v2

    move-object/from16 v17, v6

    move-wide/from16 v41, v8

    move-object v2, v10

    move-object/from16 v40, v15

    move-object/from16 v70, v18

    move-wide/from16 v38, v34

    move-object/from16 v65, v54

    move-object/from16 v6, v59

    move-object/from16 v71, v60

    move-object/from16 v18, v11

    move-wide/from16 v34, v12

    .end local v16    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    .restart local v15    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    goto/16 :goto_12

    .end local v15    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    .end local v34    # "lastUpdateTime":J
    .restart local v14    # "lastUpdateTime":J
    .restart local v40    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    :catch_9
    move-exception v0

    move-wide/from16 v34, v14

    move-object/from16 v14, p0

    move-object/from16 v16, v2

    move-object/from16 v17, v6

    move-wide/from16 v41, v8

    move-object v2, v10

    move-object/from16 v70, v18

    move-wide/from16 v38, v34

    move-object/from16 v65, v54

    move-object/from16 v6, v59

    move-object/from16 v71, v60

    move-object/from16 v18, v11

    move-wide/from16 v34, v12

    .end local v14    # "lastUpdateTime":J
    .restart local v34    # "lastUpdateTime":J
    goto/16 :goto_12

    .end local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .end local v34    # "lastUpdateTime":J
    .restart local v14    # "lastUpdateTime":J
    .restart local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    :catch_a
    move-exception v0

    move-wide/from16 v34, v14

    move-object/from16 v11, v17

    move-object/from16 v14, p0

    move-object/from16 v16, v2

    move-object/from16 v17, v6

    move-wide/from16 v41, v8

    move-object v2, v10

    move-object/from16 v70, v18

    move-wide/from16 v38, v34

    move-object/from16 v65, v54

    move-object/from16 v6, v59

    move-object/from16 v71, v60

    move-object/from16 v18, v11

    move-wide/from16 v34, v12

    .end local v14    # "lastUpdateTime":J
    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v34    # "lastUpdateTime":J
    goto/16 :goto_12

    .end local v2    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .end local v34    # "lastUpdateTime":J
    .restart local v14    # "lastUpdateTime":J
    .local v16, "primaryCpuAbiString":Ljava/lang/String;
    .restart local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    :catch_b
    move-exception v0

    move-wide/from16 v34, v14

    move-object/from16 v2, v16

    move-object/from16 v11, v17

    move-object/from16 v14, p0

    move-object/from16 v17, v6

    move-wide/from16 v41, v8

    move-object v2, v10

    move-object/from16 v70, v18

    move-wide/from16 v38, v34

    move-object/from16 v65, v54

    move-object/from16 v6, v59

    move-object/from16 v71, v60

    move-object/from16 v18, v11

    move-wide/from16 v34, v12

    .end local v14    # "lastUpdateTime":J
    .end local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v2    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v34    # "lastUpdateTime":J
    goto/16 :goto_12

    .line 4273
    .end local v2    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .end local v34    # "lastUpdateTime":J
    .restart local v14    # "lastUpdateTime":J
    .restart local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v42    # "domainSetId":Ljava/util/UUID;
    .restart local v68    # "domainSetIdString":Ljava/lang/String;
    :cond_f
    move-wide/from16 v34, v14

    move-object/from16 v2, v16

    move-object/from16 v11, v17

    move-object/from16 v14, p0

    .end local v14    # "lastUpdateTime":J
    .end local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v2    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v34    # "lastUpdateTime":J
    :try_start_21
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V
    :try_end_21
    .catch Ljava/lang/NumberFormatException; {:try_start_21 .. :try_end_21} :catch_10

    move-object/from16 v15, v60

    :try_start_22
    invoke-virtual {v0, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    :try_end_22
    .catch Ljava/lang/NumberFormatException; {:try_start_22 .. :try_end_22} :catch_f

    move-object/from16 v16, v2

    .end local v2    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v16    # "primaryCpuAbiString":Ljava/lang/String;
    :try_start_23
    const-string v2, " has bad sharedUserAppId "

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v4}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;
    :try_end_23
    .catch Ljava/lang/NumberFormatException; {:try_start_23 .. :try_end_23} :catch_e

    move-object/from16 v2, v18

    :try_start_24
    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    :try_end_24
    .catch Ljava/lang/NumberFormatException; {:try_start_24 .. :try_end_24} :catch_d

    .line 4276
    move/from16 v60, v4

    .end local v4    # "sharedUserAppId":I
    .local v60, "sharedUserAppId":I
    :try_start_25
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v4

    invoke-virtual {v0, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 4273
    const/4 v4, 0x5

    invoke-static {v4, v0}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V
    :try_end_25
    .catch Ljava/lang/NumberFormatException; {:try_start_25 .. :try_end_25} :catch_c

    move-object/from16 v18, v2

    goto/16 :goto_b

    .line 4283
    .end local v42    # "domainSetId":Ljava/util/UUID;
    .end local v68    # "domainSetIdString":Ljava/lang/String;
    :catch_c
    move-exception v0

    move-object/from16 v70, v2

    move-object/from16 v17, v6

    move-wide/from16 v41, v8

    move-object v2, v10

    move-object/from16 v18, v11

    move-object/from16 v71, v15

    move-wide/from16 v38, v34

    move-object/from16 v65, v54

    move-object/from16 v6, v59

    move/from16 v4, v60

    move-wide/from16 v34, v12

    goto/16 :goto_12

    .end local v60    # "sharedUserAppId":I
    .restart local v4    # "sharedUserAppId":I
    :catch_d
    move-exception v0

    move/from16 v60, v4

    :goto_9
    move-object/from16 v70, v2

    move-object/from16 v17, v6

    move-wide/from16 v41, v8

    move-object v2, v10

    move-object/from16 v18, v11

    move-object/from16 v71, v15

    move-wide/from16 v38, v34

    move-object/from16 v65, v54

    move-object/from16 v6, v59

    move-wide/from16 v34, v12

    .end local v4    # "sharedUserAppId":I
    .restart local v60    # "sharedUserAppId":I
    goto/16 :goto_12

    .end local v60    # "sharedUserAppId":I
    .restart local v4    # "sharedUserAppId":I
    :catch_e
    move-exception v0

    move/from16 v60, v4

    move-object/from16 v2, v18

    goto :goto_9

    .end local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v2    # "primaryCpuAbiString":Ljava/lang/String;
    :catch_f
    move-exception v0

    move-object/from16 v16, v2

    move/from16 v60, v4

    move-object/from16 v2, v18

    :goto_a
    move-object/from16 v70, v2

    move-object/from16 v17, v6

    move-wide/from16 v41, v8

    move-object v2, v10

    move-object/from16 v18, v11

    move-object/from16 v71, v15

    move-wide/from16 v38, v34

    move-object/from16 v65, v54

    move-object/from16 v6, v59

    move-wide/from16 v34, v12

    .end local v2    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v4    # "sharedUserAppId":I
    .restart local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v60    # "sharedUserAppId":I
    goto/16 :goto_12

    .end local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v60    # "sharedUserAppId":I
    .restart local v2    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v4    # "sharedUserAppId":I
    :catch_10
    move-exception v0

    move-object/from16 v16, v2

    move-object/from16 v2, v18

    move-object/from16 v15, v60

    move/from16 v60, v4

    goto :goto_a

    .line 4279
    .end local v2    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .end local v34    # "lastUpdateTime":J
    .restart local v14    # "lastUpdateTime":J
    .restart local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v42    # "domainSetId":Ljava/util/UUID;
    .restart local v68    # "domainSetIdString":Ljava/lang/String;
    :cond_10
    move-wide/from16 v34, v14

    move-object/from16 v11, v17

    move-object/from16 v2, v18

    move-object/from16 v15, v60

    move-object/from16 v14, p0

    move/from16 v60, v4

    .end local v4    # "sharedUserAppId":I
    .end local v14    # "lastUpdateTime":J
    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v34    # "lastUpdateTime":J
    .restart local v60    # "sharedUserAppId":I
    :try_start_26
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v0, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    :try_end_26
    .catch Ljava/lang/NumberFormatException; {:try_start_26 .. :try_end_26} :catch_13

    move-object/from16 v4, v54

    :try_start_27
    invoke-virtual {v0, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v3}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    :try_end_27
    .catch Ljava/lang/NumberFormatException; {:try_start_27 .. :try_end_27} :catch_12

    .line 4281
    move-object/from16 v18, v2

    :try_start_28
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 4279
    const/4 v2, 0x5

    invoke-static {v2, v0}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V
    :try_end_28
    .catch Ljava/lang/NumberFormatException; {:try_start_28 .. :try_end_28} :catch_11

    .line 4287
    .end local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .end local v34    # "lastUpdateTime":J
    .end local v60    # "sharedUserAppId":I
    .end local v68    # "domainSetIdString":Ljava/lang/String;
    .restart local v4    # "sharedUserAppId":I
    .restart local v14    # "lastUpdateTime":J
    .restart local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    :goto_b
    move-object/from16 v54, v1

    move-object/from16 v62, v5

    move-object v14, v7

    move-wide v4, v12

    move-object/from16 v71, v15

    move-object/from16 v70, v18

    move-object v15, v6

    move-wide v12, v8

    move-object/from16 v18, v10

    move-object/from16 v10, v16

    move-wide/from16 v6, v34

    .end local v4    # "sharedUserAppId":I
    .end local v14    # "lastUpdateTime":J
    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v34    # "lastUpdateTime":J
    .restart local v60    # "sharedUserAppId":I
    goto/16 :goto_e

    .line 4283
    .end local v42    # "domainSetId":Ljava/util/UUID;
    :catch_11
    move-exception v0

    move-object/from16 v65, v4

    move-object/from16 v17, v6

    move-wide/from16 v41, v8

    move-object v2, v10

    move-object/from16 v71, v15

    move-object/from16 v70, v18

    move-wide/from16 v38, v34

    move-object/from16 v6, v59

    move/from16 v4, v60

    move-object/from16 v18, v11

    move-wide/from16 v34, v12

    goto/16 :goto_12

    :catch_12
    move-exception v0

    move-object/from16 v18, v2

    move-object/from16 v65, v4

    move-object/from16 v17, v6

    move-wide/from16 v41, v8

    move-object v2, v10

    move-object/from16 v71, v15

    move-object/from16 v70, v18

    move-wide/from16 v38, v34

    move-object/from16 v6, v59

    move/from16 v4, v60

    move-object/from16 v18, v11

    move-wide/from16 v34, v12

    goto/16 :goto_12

    :catch_13
    move-exception v0

    move-object/from16 v18, v2

    move-object/from16 v4, v54

    move-object/from16 v65, v4

    move-object/from16 v17, v6

    move-wide/from16 v41, v8

    move-object v2, v10

    move-object/from16 v71, v15

    move-object/from16 v70, v18

    move-wide/from16 v38, v34

    move-object/from16 v6, v59

    move/from16 v4, v60

    move-object/from16 v18, v11

    move-wide/from16 v34, v12

    goto/16 :goto_12

    .line 4235
    .end local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .end local v34    # "lastUpdateTime":J
    .end local v60    # "sharedUserAppId":I
    .restart local v4    # "sharedUserAppId":I
    .restart local v14    # "lastUpdateTime":J
    .restart local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v42    # "domainSetId":Ljava/util/UUID;
    .restart local v68    # "domainSetIdString":Ljava/lang/String;
    :cond_11
    move-wide/from16 v34, v14

    move-object/from16 v11, v17

    move-object/from16 v15, v60

    move-object/from16 v14, p0

    move/from16 v60, v4

    move-object/from16 v4, v54

    .line 4237
    .end local v4    # "sharedUserAppId":I
    .end local v14    # "lastUpdateTime":J
    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v34    # "lastUpdateTime":J
    .restart local v60    # "sharedUserAppId":I
    :goto_c
    :try_start_29
    invoke-virtual {v1}, Ljava/lang/String;->intern()Ljava/lang/String;

    move-result-object v2

    new-instance v0, Ljava/io/File;

    invoke-direct {v0, v5}, Ljava/io/File;-><init>(Ljava/lang/String;)V
    :try_end_29
    .catch Ljava/lang/NumberFormatException; {:try_start_29 .. :try_end_29} :catch_1a

    move-object/from16 v54, v1

    .end local v1    # "name":Ljava/lang/String;
    .local v54, "name":Ljava/lang/String;
    move-object/from16 v1, p0

    move-object/from16 v17, v16

    move-object/from16 v16, v18

    .end local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .local v17, "primaryCpuAbiString":Ljava/lang/String;
    move/from16 v61, v3

    .end local v3    # "appId":I
    .local v61, "appId":I
    move-object v3, v10

    move-object/from16 v18, v10

    move-object v10, v4

    .end local v10    # "realName":Ljava/lang/String;
    .local v18, "realName":Ljava/lang/String;
    move-object v4, v0

    move-object/from16 v62, v5

    .end local v5    # "codePathStr":Ljava/lang/String;
    .local v62, "codePathStr":Ljava/lang/String;
    move/from16 v5, v61

    move-object/from16 v38, v15

    move-object v15, v6

    .end local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .local v15, "secondaryCpuAbiString":Ljava/lang/String;
    move/from16 v6, v32

    move-object v14, v7

    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .local v14, "legacyNativeLibraryPathStr":Ljava/lang/String;
    move/from16 v7, v33

    move-wide/from16 v63, v12

    move-wide v12, v8

    move-object/from16 v9, v38

    .end local v8    # "versionCode":J
    .local v12, "versionCode":J
    .local v63, "timeStamp":J
    move-object/from16 v8, v42

    move-object/from16 v71, v9

    move-object/from16 v65, v10

    move-object/from16 v70, v16

    move-object/from16 v10, v17

    .end local v17    # "primaryCpuAbiString":Ljava/lang/String;
    .local v10, "primaryCpuAbiString":Ljava/lang/String;
    move/from16 v9, v53

    :try_start_2a
    invoke-virtual/range {v1 .. v9}, Lcom/android/server/pm/Settings;->addPackageLPw(Ljava/lang/String;Ljava/lang/String;Ljava/io/File;IIILjava/util/UUID;Z)Lcom/android/server/pm/PackageSetting;

    move-result-object v0
    :try_end_2a
    .catch Ljava/lang/NumberFormatException; {:try_start_2a .. :try_end_2a} :catch_19

    move-object v1, v0

    .line 4242
    .end local v40    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    .local v1, "packageSetting":Lcom/android/server/pm/PackageSetting;
    if-nez v1, :cond_12

    .line 4243
    :try_start_2b
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "Failure adding appId "

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    :try_end_2b
    .catch Ljava/lang/NumberFormatException; {:try_start_2b .. :try_end_2b} :catch_15

    move/from16 v3, v61

    .end local v61    # "appId":I
    .restart local v3    # "appId":I
    :try_start_2c
    invoke-virtual {v0, v3}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    const-string v2, " while parsing settings at "

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4245
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 4243
    const/4 v2, 0x6

    invoke-static {v2, v0}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V
    :try_end_2c
    .catch Ljava/lang/NumberFormatException; {:try_start_2c .. :try_end_2c} :catch_14

    move-wide/from16 v6, v34

    move-wide/from16 v4, v63

    goto :goto_d

    .line 4283
    .end local v42    # "domainSetId":Ljava/util/UUID;
    .end local v68    # "domainSetIdString":Ljava/lang/String;
    :catch_14
    move-exception v0

    move-object/from16 v40, v1

    move-object/from16 v16, v10

    move-wide/from16 v41, v12

    move-object v7, v14

    move-object/from16 v17, v15

    move-object/from16 v2, v18

    move-wide/from16 v38, v34

    move-object/from16 v1, v54

    move-object/from16 v6, v59

    move/from16 v4, v60

    move-object/from16 v5, v62

    move-wide/from16 v34, v63

    move-object/from16 v18, v11

    goto/16 :goto_12

    .end local v3    # "appId":I
    .restart local v61    # "appId":I
    :catch_15
    move-exception v0

    move/from16 v3, v61

    move-object/from16 v40, v1

    move-object/from16 v16, v10

    move-wide/from16 v41, v12

    move-object v7, v14

    move-object/from16 v17, v15

    move-object/from16 v2, v18

    move-wide/from16 v38, v34

    move-object/from16 v1, v54

    move-object/from16 v6, v59

    move/from16 v4, v60

    move-object/from16 v5, v62

    move-wide/from16 v34, v63

    move-object/from16 v18, v11

    .end local v61    # "appId":I
    .restart local v3    # "appId":I
    goto/16 :goto_12

    .line 4247
    .end local v3    # "appId":I
    .restart local v42    # "domainSetId":Ljava/util/UUID;
    .restart local v61    # "appId":I
    .restart local v68    # "domainSetIdString":Ljava/lang/String;
    :cond_12
    move/from16 v3, v61

    .end local v61    # "appId":I
    .restart local v3    # "appId":I
    :try_start_2d
    invoke-virtual {v1, v14}, Lcom/android/server/pm/PackageSetting;->setLegacyNativeLibraryPath(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 4248
    invoke-virtual {v1, v10}, Lcom/android/server/pm/PackageSetting;->setPrimaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 4249
    invoke-virtual {v1, v15}, Lcom/android/server/pm/PackageSetting;->setSecondaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 4250
    invoke-virtual {v1, v11}, Lcom/android/server/pm/PackageSetting;->setCpuAbiOverride(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 4251
    invoke-virtual {v1, v12, v13}, Lcom/android/server/pm/PackageSetting;->setLongVersionCode(J)Lcom/android/server/pm/PackageSetting;
    :try_end_2d
    .catch Ljava/lang/NumberFormatException; {:try_start_2d .. :try_end_2d} :catch_18

    .line 4252
    move-wide/from16 v4, v63

    .end local v63    # "timeStamp":J
    .local v4, "timeStamp":J
    :try_start_2e
    invoke-virtual {v1, v4, v5}, Lcom/android/server/pm/PackageSetting;->setLastModifiedTime(J)Lcom/android/server/pm/PackageSetting;
    :try_end_2e
    .catch Ljava/lang/NumberFormatException; {:try_start_2e .. :try_end_2e} :catch_17

    .line 4253
    move-wide/from16 v6, v34

    .end local v34    # "lastUpdateTime":J
    .local v6, "lastUpdateTime":J
    :try_start_2f
    invoke-virtual {v1, v6, v7}, Lcom/android/server/pm/PackageSetting;->setLastUpdateTime(J)Lcom/android/server/pm/PackageSetting;
    :try_end_2f
    .catch Ljava/lang/NumberFormatException; {:try_start_2f .. :try_end_2f} :catch_16

    .line 4287
    .end local v4    # "timeStamp":J
    .end local v6    # "lastUpdateTime":J
    .end local v68    # "domainSetIdString":Ljava/lang/String;
    .restart local v34    # "lastUpdateTime":J
    .restart local v63    # "timeStamp":J
    :goto_d
    move-object/from16 v40, v1

    .end local v1    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    .end local v34    # "lastUpdateTime":J
    .end local v63    # "timeStamp":J
    .restart local v4    # "timeStamp":J
    .restart local v6    # "lastUpdateTime":J
    .restart local v40    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    :goto_e
    move-wide/from16 v34, v4

    move-object v2, v10

    move-object/from16 v17, v11

    move-object/from16 v8, v20

    move/from16 v11, v21

    move-object/from16 v16, v22

    move/from16 v4, v30

    move/from16 v5, v31

    move/from16 v41, v33

    move-wide/from16 v9, v46

    move-object/from16 v1, v48

    move/from16 v72, v49

    move/from16 v73, v50

    move-object/from16 v74, v51

    move/from16 v75, v52

    move-object/from16 v48, v54

    move/from16 v38, v60

    move-object/from16 v39, v62

    move-object/from16 v60, v71

    move-wide/from16 v46, v6

    move-object v7, v14

    move-object v6, v15

    move/from16 v30, v24

    move/from16 v31, v25

    move-object/from16 v33, v27

    move/from16 v14, v44

    move/from16 v15, v45

    move-wide/from16 v44, v12

    move-object/from16 v12, v40

    move/from16 v13, v43

    move/from16 v40, v32

    move-wide/from16 v42, v36

    move/from16 v37, v3

    move-object/from16 v32, v26

    move/from16 v36, v28

    move-object/from16 v3, v29

    move-object/from16 v29, v23

    goto/16 :goto_13

    .line 4283
    .end local v40    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    .end local v42    # "domainSetId":Ljava/util/UUID;
    .restart local v1    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    :catch_16
    move-exception v0

    move-object/from16 v40, v1

    move-wide/from16 v34, v4

    move-wide/from16 v38, v6

    move-object/from16 v16, v10

    move-wide/from16 v41, v12

    move-object v7, v14

    move-object/from16 v17, v15

    move-object/from16 v2, v18

    move-object/from16 v1, v54

    move-object/from16 v6, v59

    move/from16 v4, v60

    move-object/from16 v5, v62

    move-object/from16 v18, v11

    goto/16 :goto_12

    .end local v6    # "lastUpdateTime":J
    .restart local v34    # "lastUpdateTime":J
    :catch_17
    move-exception v0

    move-wide/from16 v6, v34

    move-object/from16 v40, v1

    move-wide/from16 v34, v4

    move-wide/from16 v38, v6

    move-object/from16 v16, v10

    move-wide/from16 v41, v12

    move-object v7, v14

    move-object/from16 v17, v15

    move-object/from16 v2, v18

    move-object/from16 v1, v54

    move-object/from16 v6, v59

    move/from16 v4, v60

    move-object/from16 v5, v62

    move-object/from16 v18, v11

    .end local v34    # "lastUpdateTime":J
    .restart local v6    # "lastUpdateTime":J
    goto/16 :goto_12

    .end local v4    # "timeStamp":J
    .end local v6    # "lastUpdateTime":J
    .restart local v34    # "lastUpdateTime":J
    .restart local v63    # "timeStamp":J
    :catch_18
    move-exception v0

    move-wide/from16 v6, v34

    move-wide/from16 v4, v63

    move-object/from16 v40, v1

    move-wide/from16 v34, v4

    move-wide/from16 v38, v6

    move-object/from16 v16, v10

    move-wide/from16 v41, v12

    move-object v7, v14

    move-object/from16 v17, v15

    move-object/from16 v2, v18

    move-object/from16 v1, v54

    move-object/from16 v6, v59

    move/from16 v4, v60

    move-object/from16 v5, v62

    move-object/from16 v18, v11

    .end local v34    # "lastUpdateTime":J
    .end local v63    # "timeStamp":J
    .restart local v4    # "timeStamp":J
    .restart local v6    # "lastUpdateTime":J
    goto/16 :goto_12

    .end local v1    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    .end local v3    # "appId":I
    .end local v4    # "timeStamp":J
    .end local v6    # "lastUpdateTime":J
    .restart local v34    # "lastUpdateTime":J
    .restart local v40    # "packageSetting":Lcom/android/server/pm/PackageSetting;
    .restart local v61    # "appId":I
    .restart local v63    # "timeStamp":J
    :catch_19
    move-exception v0

    move-wide/from16 v6, v34

    move/from16 v3, v61

    move-wide/from16 v4, v63

    move-wide/from16 v34, v4

    move-wide/from16 v38, v6

    move-object/from16 v16, v10

    move-wide/from16 v41, v12

    move-object v7, v14

    move-object/from16 v17, v15

    move-object/from16 v2, v18

    move-object/from16 v1, v54

    move-object/from16 v6, v59

    move/from16 v4, v60

    move-object/from16 v5, v62

    move-object/from16 v18, v11

    .end local v34    # "lastUpdateTime":J
    .end local v61    # "appId":I
    .end local v63    # "timeStamp":J
    .restart local v3    # "appId":I
    .restart local v4    # "timeStamp":J
    .restart local v6    # "lastUpdateTime":J
    goto/16 :goto_12

    .end local v4    # "timeStamp":J
    .end local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v18    # "realName":Ljava/lang/String;
    .end local v54    # "name":Ljava/lang/String;
    .end local v62    # "codePathStr":Ljava/lang/String;
    .local v1, "name":Ljava/lang/String;
    .restart local v5    # "codePathStr":Ljava/lang/String;
    .local v6, "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v8    # "versionCode":J
    .local v10, "realName":Ljava/lang/String;
    .local v12, "timeStamp":J
    .restart local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v34    # "lastUpdateTime":J
    :catch_1a
    move-exception v0

    move-object/from16 v54, v1

    move-object/from16 v65, v4

    move-object/from16 v62, v5

    move-object v14, v7

    move-wide v4, v12

    move-object/from16 v71, v15

    move-object/from16 v70, v18

    move-object v15, v6

    move-wide v12, v8

    move-object/from16 v18, v10

    move-object/from16 v10, v16

    move-wide/from16 v6, v34

    move-wide/from16 v34, v4

    move-wide/from16 v38, v6

    move-wide/from16 v41, v12

    move-object v7, v14

    move-object/from16 v17, v15

    move-object/from16 v2, v18

    move-object/from16 v6, v59

    move/from16 v4, v60

    move-object/from16 v5, v62

    move-object/from16 v18, v11

    .end local v1    # "name":Ljava/lang/String;
    .end local v5    # "codePathStr":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v8    # "versionCode":J
    .end local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v34    # "lastUpdateTime":J
    .restart local v4    # "timeStamp":J
    .local v6, "lastUpdateTime":J
    .local v10, "primaryCpuAbiString":Ljava/lang/String;
    .local v12, "versionCode":J
    .restart local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v18    # "realName":Ljava/lang/String;
    .restart local v54    # "name":Ljava/lang/String;
    .restart local v62    # "codePathStr":Ljava/lang/String;
    goto/16 :goto_12

    .end local v10    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .end local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v18    # "realName":Ljava/lang/String;
    .end local v54    # "name":Ljava/lang/String;
    .end local v60    # "sharedUserAppId":I
    .end local v62    # "codePathStr":Ljava/lang/String;
    .restart local v1    # "name":Ljava/lang/String;
    .local v2, "realName":Ljava/lang/String;
    .local v4, "sharedUserAppId":I
    .restart local v5    # "codePathStr":Ljava/lang/String;
    .local v6, "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v8    # "versionCode":J
    .local v12, "timeStamp":J
    .restart local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .local v17, "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v38    # "lastUpdateTime":J
    :catch_1b
    move-exception v0

    move-object/from16 v62, v5

    move-object v15, v6

    move-object v14, v7

    move-object/from16 v10, v16

    move-object/from16 v11, v17

    move-object/from16 v70, v18

    move-object/from16 v65, v54

    move-object/from16 v71, v60

    move-object/from16 v54, v1

    move/from16 v60, v4

    :goto_f
    move-wide v4, v12

    move-wide v12, v8

    move-wide/from16 v34, v4

    move-object/from16 v18, v11

    move-wide/from16 v41, v12

    move-object/from16 v17, v15

    move-object/from16 v6, v59

    move/from16 v4, v60

    move-object/from16 v5, v62

    .end local v1    # "name":Ljava/lang/String;
    .end local v5    # "codePathStr":Ljava/lang/String;
    .end local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v8    # "versionCode":J
    .end local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .local v4, "timeStamp":J
    .restart local v10    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .local v12, "versionCode":J
    .restart local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v54    # "name":Ljava/lang/String;
    .restart local v60    # "sharedUserAppId":I
    .restart local v62    # "codePathStr":Ljava/lang/String;
    goto/16 :goto_12

    .end local v10    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .end local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v54    # "name":Ljava/lang/String;
    .end local v60    # "sharedUserAppId":I
    .end local v62    # "codePathStr":Ljava/lang/String;
    .restart local v1    # "name":Ljava/lang/String;
    .local v4, "sharedUserAppId":I
    .restart local v5    # "codePathStr":Ljava/lang/String;
    .restart local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v8    # "versionCode":J
    .local v12, "timeStamp":J
    .restart local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    :catch_1c
    move-exception v0

    move-object/from16 v62, v5

    move-object v14, v7

    move-object/from16 v69, v15

    move-object/from16 v10, v16

    move-object/from16 v11, v17

    move-object/from16 v70, v18

    move-object/from16 v65, v54

    move-object/from16 v71, v60

    move-object/from16 v54, v1

    move/from16 v60, v4

    move-object v15, v6

    goto :goto_f

    .end local v12    # "timeStamp":J
    .local v34, "timeStamp":J
    :catch_1d
    move-exception v0

    move-object/from16 v62, v5

    move-object v14, v7

    move-wide v12, v8

    move-object/from16 v69, v15

    move-object/from16 v10, v16

    move-object/from16 v11, v17

    move-object/from16 v70, v18

    move-object/from16 v65, v54

    move-object/from16 v71, v60

    move-object/from16 v54, v1

    move/from16 v60, v4

    move-object v15, v6

    :goto_10
    move-object/from16 v18, v11

    move-wide/from16 v41, v12

    move-object/from16 v17, v15

    move-object/from16 v6, v59

    .end local v1    # "name":Ljava/lang/String;
    .end local v4    # "sharedUserAppId":I
    .end local v5    # "codePathStr":Ljava/lang/String;
    .end local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v8    # "versionCode":J
    .end local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v10    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .local v12, "versionCode":J
    .restart local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v54    # "name":Ljava/lang/String;
    .restart local v60    # "sharedUserAppId":I
    .restart local v62    # "codePathStr":Ljava/lang/String;
    goto/16 :goto_12

    .end local v10    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .end local v12    # "versionCode":J
    .end local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v54    # "name":Ljava/lang/String;
    .end local v60    # "sharedUserAppId":I
    .end local v62    # "codePathStr":Ljava/lang/String;
    .restart local v1    # "name":Ljava/lang/String;
    .restart local v4    # "sharedUserAppId":I
    .restart local v5    # "codePathStr":Ljava/lang/String;
    .restart local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v8    # "versionCode":J
    .restart local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    :catch_1e
    move-exception v0

    move-object/from16 v62, v5

    move-wide v12, v8

    move-object/from16 v70, v14

    move-object/from16 v69, v15

    move-object/from16 v10, v16

    move-object/from16 v11, v17

    move-object/from16 v65, v54

    move-object/from16 v71, v60

    move-object/from16 v54, v1

    move/from16 v60, v4

    move-object v15, v6

    move-object v14, v7

    goto :goto_10

    .end local v8    # "versionCode":J
    .restart local v41    # "versionCode":J
    :catch_1f
    move-exception v0

    move-object/from16 v62, v5

    move-object/from16 v70, v14

    move-object/from16 v69, v15

    move-object/from16 v10, v16

    move-object/from16 v11, v17

    move-object/from16 v65, v54

    move-object/from16 v71, v60

    move-object/from16 v54, v1

    move/from16 v60, v4

    move-object v15, v6

    move-object v14, v7

    move-object/from16 v18, v11

    move-object/from16 v17, v15

    move-object/from16 v6, v59

    .end local v1    # "name":Ljava/lang/String;
    .end local v4    # "sharedUserAppId":I
    .end local v5    # "codePathStr":Ljava/lang/String;
    .end local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v10    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v54    # "name":Ljava/lang/String;
    .restart local v60    # "sharedUserAppId":I
    .restart local v62    # "codePathStr":Ljava/lang/String;
    goto/16 :goto_12

    .end local v10    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .end local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v54    # "name":Ljava/lang/String;
    .end local v60    # "sharedUserAppId":I
    .end local v62    # "codePathStr":Ljava/lang/String;
    .restart local v1    # "name":Ljava/lang/String;
    .restart local v4    # "sharedUserAppId":I
    .restart local v5    # "codePathStr":Ljava/lang/String;
    .restart local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v9    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    :catch_20
    move-exception v0

    move-object/from16 v62, v5

    move-object v10, v9

    move-object/from16 v70, v14

    move-object/from16 v69, v15

    move-object/from16 v11, v17

    move-object/from16 v65, v54

    move-object/from16 v71, v60

    move-object/from16 v54, v1

    move/from16 v60, v4

    move-object v15, v6

    move-object v14, v7

    move-object/from16 v16, v10

    move-object/from16 v18, v11

    move-object/from16 v17, v15

    move-object/from16 v6, v59

    .end local v1    # "name":Ljava/lang/String;
    .end local v4    # "sharedUserAppId":I
    .end local v5    # "codePathStr":Ljava/lang/String;
    .end local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v9    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v10    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v54    # "name":Ljava/lang/String;
    .restart local v60    # "sharedUserAppId":I
    .restart local v62    # "codePathStr":Ljava/lang/String;
    goto/16 :goto_12

    .end local v10    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .end local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v54    # "name":Ljava/lang/String;
    .end local v60    # "sharedUserAppId":I
    .end local v62    # "codePathStr":Ljava/lang/String;
    .restart local v1    # "name":Ljava/lang/String;
    .restart local v4    # "sharedUserAppId":I
    .restart local v5    # "codePathStr":Ljava/lang/String;
    .restart local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v16    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    :catch_21
    move-exception v0

    move-object/from16 v62, v5

    move-object/from16 v70, v14

    move-object/from16 v69, v15

    move-object/from16 v11, v17

    move-object/from16 v65, v54

    move-object/from16 v71, v60

    move-object/from16 v54, v1

    move/from16 v60, v4

    move-object v15, v6

    move-object v14, v7

    :goto_11
    move-object/from16 v18, v11

    move-object/from16 v17, v15

    move-object/from16 v6, v59

    .end local v1    # "name":Ljava/lang/String;
    .end local v4    # "sharedUserAppId":I
    .end local v5    # "codePathStr":Ljava/lang/String;
    .end local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .restart local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v54    # "name":Ljava/lang/String;
    .restart local v60    # "sharedUserAppId":I
    .restart local v62    # "codePathStr":Ljava/lang/String;
    goto/16 :goto_12

    .end local v11    # "cpuAbiOverrideString":Ljava/lang/String;
    .end local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v54    # "name":Ljava/lang/String;
    .end local v60    # "sharedUserAppId":I
    .end local v62    # "codePathStr":Ljava/lang/String;
    .restart local v1    # "name":Ljava/lang/String;
    .restart local v4    # "sharedUserAppId":I
    .restart local v5    # "codePathStr":Ljava/lang/String;
    .restart local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    :catch_22
    move-exception v0

    move/from16 v60, v4

    move-object/from16 v62, v5

    move-object v14, v7

    move-object/from16 v71, v8

    move-object/from16 v70, v9

    move-object/from16 v69, v15

    move-object/from16 v11, v17

    move-object/from16 v65, v54

    move-object/from16 v54, v1

    move-object v15, v6

    goto :goto_11

    .end local v17    # "cpuAbiOverrideString":Ljava/lang/String;
    .local v18, "cpuAbiOverrideString":Ljava/lang/String;
    :catch_23
    move-exception v0

    move/from16 v60, v4

    move-object/from16 v62, v5

    move-object v14, v7

    move-object/from16 v71, v8

    move-object/from16 v70, v9

    move-object/from16 v69, v15

    move-object/from16 v65, v54

    move-object/from16 v54, v1

    move-object v15, v6

    move-object/from16 v17, v15

    move-object/from16 v6, v59

    .end local v1    # "name":Ljava/lang/String;
    .end local v4    # "sharedUserAppId":I
    .end local v5    # "codePathStr":Ljava/lang/String;
    .end local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v54    # "name":Ljava/lang/String;
    .restart local v60    # "sharedUserAppId":I
    .restart local v62    # "codePathStr":Ljava/lang/String;
    goto/16 :goto_12

    .end local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v15    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v54    # "name":Ljava/lang/String;
    .end local v60    # "sharedUserAppId":I
    .end local v62    # "codePathStr":Ljava/lang/String;
    .restart local v1    # "name":Ljava/lang/String;
    .restart local v4    # "sharedUserAppId":I
    .restart local v5    # "codePathStr":Ljava/lang/String;
    .restart local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .local v17, "secondaryCpuAbiString":Ljava/lang/String;
    :catch_24
    move-exception v0

    move/from16 v60, v4

    move-object/from16 v62, v5

    move-object v14, v7

    move-object/from16 v71, v8

    move-object/from16 v70, v9

    move-object/from16 v69, v15

    move-object/from16 v65, v54

    move-object/from16 v54, v1

    move-object/from16 v6, v59

    .end local v1    # "name":Ljava/lang/String;
    .end local v4    # "sharedUserAppId":I
    .end local v5    # "codePathStr":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v54    # "name":Ljava/lang/String;
    .restart local v60    # "sharedUserAppId":I
    .restart local v62    # "codePathStr":Ljava/lang/String;
    goto :goto_12

    .end local v14    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v54    # "name":Ljava/lang/String;
    .end local v60    # "sharedUserAppId":I
    .end local v62    # "codePathStr":Ljava/lang/String;
    .restart local v1    # "name":Ljava/lang/String;
    .restart local v4    # "sharedUserAppId":I
    .restart local v5    # "codePathStr":Ljava/lang/String;
    .restart local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    :catch_25
    move-exception v0

    move/from16 v60, v4

    move-object/from16 v62, v5

    move-object/from16 v71, v8

    move-object/from16 v70, v9

    move-object/from16 v69, v15

    move-object/from16 v65, v54

    move-object/from16 v54, v1

    move-object/from16 v6, v59

    .end local v1    # "name":Ljava/lang/String;
    .end local v4    # "sharedUserAppId":I
    .end local v5    # "codePathStr":Ljava/lang/String;
    .restart local v54    # "name":Ljava/lang/String;
    .restart local v60    # "sharedUserAppId":I
    .restart local v62    # "codePathStr":Ljava/lang/String;
    goto :goto_12

    .end local v54    # "name":Ljava/lang/String;
    .end local v59    # "legacyCpuAbiString":Ljava/lang/String;
    .end local v60    # "sharedUserAppId":I
    .end local v62    # "codePathStr":Ljava/lang/String;
    .restart local v1    # "name":Ljava/lang/String;
    .restart local v4    # "sharedUserAppId":I
    .restart local v5    # "codePathStr":Ljava/lang/String;
    .local v6, "legacyCpuAbiString":Ljava/lang/String;
    :catch_26
    move-exception v0

    move/from16 v60, v4

    move-object/from16 v62, v5

    move-object/from16 v71, v8

    move-object/from16 v70, v9

    move-object/from16 v69, v15

    move-object/from16 v65, v54

    move-object/from16 v54, v1

    .end local v1    # "name":Ljava/lang/String;
    .end local v4    # "sharedUserAppId":I
    .end local v5    # "codePathStr":Ljava/lang/String;
    .restart local v54    # "name":Ljava/lang/String;
    .restart local v60    # "sharedUserAppId":I
    .restart local v62    # "codePathStr":Ljava/lang/String;
    goto :goto_12

    .end local v54    # "name":Ljava/lang/String;
    .end local v60    # "sharedUserAppId":I
    .end local v62    # "codePathStr":Ljava/lang/String;
    .restart local v1    # "name":Ljava/lang/String;
    .restart local v4    # "sharedUserAppId":I
    .restart local v5    # "codePathStr":Ljava/lang/String;
    :catch_27
    move-exception v0

    move/from16 v60, v4

    move-object/from16 v71, v8

    move-object/from16 v70, v9

    move-object/from16 v69, v15

    move-object/from16 v65, v54

    move-object/from16 v54, v1

    .end local v1    # "name":Ljava/lang/String;
    .end local v4    # "sharedUserAppId":I
    .restart local v54    # "name":Ljava/lang/String;
    .restart local v60    # "sharedUserAppId":I
    goto :goto_12

    .end local v54    # "name":Ljava/lang/String;
    .end local v60    # "sharedUserAppId":I
    .restart local v1    # "name":Ljava/lang/String;
    .restart local v4    # "sharedUserAppId":I
    :catch_28
    move-exception v0

    move-object/from16 v71, v8

    move-object/from16 v70, v9

    move-object/from16 v69, v15

    move-object/from16 v65, v54

    move-object/from16 v54, v1

    .end local v1    # "name":Ljava/lang/String;
    .restart local v54    # "name":Ljava/lang/String;
    goto :goto_12

    .end local v54    # "name":Ljava/lang/String;
    .restart local v1    # "name":Ljava/lang/String;
    :catch_29
    move-exception v0

    move-object/from16 v71, v8

    move-object/from16 v70, v9

    move-object/from16 v69, v15

    move-object/from16 v65, v54

    :goto_12
    nop

    .line 4284
    .local v0, "e":Ljava/lang/NumberFormatException;
    new-instance v8, Ljava/lang/StringBuilder;

    invoke-direct {v8}, Ljava/lang/StringBuilder;-><init>()V

    move-object/from16 v9, v71

    invoke-virtual {v8, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v8, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-object/from16 v10, v65

    invoke-virtual {v8, v10}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v8, v3}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    move-object/from16 v10, v70

    invoke-virtual {v8, v10}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4286
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v11

    invoke-virtual {v8, v11}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v8}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v8

    .line 4284
    const/4 v11, 0x5

    invoke-static {v11, v8}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    move-object/from16 v59, v6

    move-object/from16 v60, v9

    move-object/from16 v6, v17

    move-object/from16 v17, v18

    move-object/from16 v8, v20

    move/from16 v11, v21

    move-object/from16 v12, v40

    move/from16 v13, v43

    move/from16 v14, v44

    move/from16 v15, v45

    move-wide/from16 v9, v46

    move/from16 v72, v49

    move/from16 v73, v50

    move-object/from16 v74, v51

    move/from16 v75, v52

    move-object/from16 v18, v2

    move-object/from16 v2, v16

    move-object/from16 v16, v22

    move/from16 v40, v32

    move-wide/from16 v46, v38

    move-wide/from16 v44, v41

    move/from16 v38, v4

    move-object/from16 v39, v5

    move-object/from16 v32, v26

    move/from16 v4, v30

    move/from16 v5, v31

    move/from16 v41, v33

    move-wide/from16 v42, v36

    move/from16 v37, v3

    move/from16 v30, v24

    move/from16 v31, v25

    move-object/from16 v33, v27

    move/from16 v36, v28

    move-object/from16 v3, v29

    move-object/from16 v29, v23

    move-object/from16 v76, v48

    move-object/from16 v48, v1

    move-object/from16 v1, v76

    .line 4288
    .end local v0    # "e":Ljava/lang/NumberFormatException;
    .end local v20    # "installerPackageName":Ljava/lang/String;
    .end local v21    # "installerPackageUid":I
    .end local v22    # "updateOwnerPackageName":Ljava/lang/String;
    .end local v23    # "installerAttributionTag":Ljava/lang/String;
    .end local v24    # "packageSource":I
    .end local v25    # "isOrphaned":Z
    .end local v26    # "installOriginatingPackageName":Ljava/lang/String;
    .end local v27    # "installInitiatingPackageName":Ljava/lang/String;
    .end local v28    # "installInitiatorUninstalled":Z
    .end local v43    # "installedForceQueryable":Z
    .end local v45    # "loadingProgress":F
    .end local v49    # "appMetadataSource":I
    .end local v50    # "targetSdkVersion":I
    .end local v51    # "restrictUpdateHash":[B
    .end local v52    # "isScannedAsStoppedSystemApp":Z
    .local v1, "appMetadataFilePath":Ljava/lang/String;
    .local v2, "primaryCpuAbiString":Ljava/lang/String;
    .local v3, "volumeUuid":Ljava/lang/String;
    .local v4, "updateAvailable":Z
    .local v5, "categoryHint":I
    .local v6, "secondaryCpuAbiString":Ljava/lang/String;
    .local v8, "installerPackageName":Ljava/lang/String;
    .local v9, "loadingCompletedTime":J
    .local v11, "installerPackageUid":I
    .local v12, "packageSetting":Lcom/android/server/pm/PackageSetting;
    .local v13, "installedForceQueryable":Z
    .local v14, "isPendingRestore":Z
    .local v15, "loadingProgress":F
    .local v16, "updateOwnerPackageName":Ljava/lang/String;
    .local v17, "cpuAbiOverrideString":Ljava/lang/String;
    .local v18, "realName":Ljava/lang/String;
    .local v29, "installerAttributionTag":Ljava/lang/String;
    .local v30, "packageSource":I
    .local v31, "isOrphaned":Z
    .local v32, "installOriginatingPackageName":Ljava/lang/String;
    .local v33, "installInitiatingPackageName":Ljava/lang/String;
    .local v36, "installInitiatorUninstalled":Z
    .local v37, "appId":I
    .local v38, "sharedUserAppId":I
    .local v39, "codePathStr":Ljava/lang/String;
    .local v40, "pkgFlags":I
    .local v41, "pkgPrivateFlags":I
    .local v42, "firstInstallTime":J
    .local v44, "versionCode":J
    .local v46, "lastUpdateTime":J
    .local v48, "name":Ljava/lang/String;
    .restart local v59    # "legacyCpuAbiString":Ljava/lang/String;
    .local v72, "appMetadataSource":I
    .local v73, "targetSdkVersion":I
    .local v74, "restrictUpdateHash":[B
    .local v75, "isScannedAsStoppedSystemApp":Z
    :goto_13
    if-eqz v12, :cond_30

    .line 4289
    move-object/from16 v20, v33

    move-object/from16 v21, v32

    move-object/from16 v22, v8

    move/from16 v23, v11

    move-object/from16 v24, v16

    move-object/from16 v25, v29

    move/from16 v26, v30

    move/from16 v27, v31

    move/from16 v28, v36

    move-object/from16 v49, v8

    .end local v8    # "installerPackageName":Ljava/lang/String;
    .local v49, "installerPackageName":Ljava/lang/String;
    invoke-static/range {v20 .. v28}, Lcom/android/server/pm/InstallSource;->create(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ILjava/lang/String;Ljava/lang/String;IZZ)Lcom/android/server/pm/InstallSource;

    move-result-object v8

    .line 4294
    .local v8, "installSource":Lcom/android/server/pm/InstallSource;
    invoke-virtual {v12, v8}, Lcom/android/server/pm/PackageSetting;->setInstallSource(Lcom/android/server/pm/InstallSource;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4295
    invoke-virtual {v0, v3}, Lcom/android/server/pm/PackageSetting;->setVolumeUuid(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4296
    invoke-virtual {v0, v5}, Lcom/android/server/pm/PackageSetting;->setCategoryOverride(I)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4297
    invoke-virtual {v0, v7}, Lcom/android/server/pm/PackageSetting;->setLegacyNativeLibraryPath(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4298
    invoke-virtual {v0, v2}, Lcom/android/server/pm/PackageSetting;->setPrimaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4299
    invoke-virtual {v0, v6}, Lcom/android/server/pm/PackageSetting;->setSecondaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4300
    invoke-virtual {v0, v4}, Lcom/android/server/pm/PackageSetting;->setUpdateAvailable(Z)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4301
    invoke-virtual {v0, v13}, Lcom/android/server/pm/PackageSetting;->setForceQueryableOverride(Z)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4302
    invoke-virtual {v0, v14}, Lcom/android/server/pm/PackageSetting;->setPendingRestore(Z)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4303
    invoke-virtual {v0, v15}, Lcom/android/server/pm/PackageSetting;->setLoadingProgress(F)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4304
    invoke-virtual {v0, v9, v10}, Lcom/android/server/pm/PackageSetting;->setLoadingCompletedTime(J)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4305
    invoke-virtual {v0, v1}, Lcom/android/server/pm/PackageSetting;->setAppMetadataFilePath(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4306
    move-object/from16 v20, v1

    move/from16 v1, v72

    .end local v72    # "appMetadataSource":I
    .local v1, "appMetadataSource":I
    .local v20, "appMetadataFilePath":Ljava/lang/String;
    invoke-virtual {v0, v1}, Lcom/android/server/pm/PackageSetting;->setAppMetadataSource(I)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4307
    move/from16 v21, v1

    move/from16 v1, v73

    .end local v73    # "targetSdkVersion":I
    .local v1, "targetSdkVersion":I
    .local v21, "appMetadataSource":I
    invoke-virtual {v0, v1}, Lcom/android/server/pm/PackageSetting;->setTargetSdkVersion(I)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4308
    move/from16 v22, v1

    move-object/from16 v1, v74

    .end local v74    # "restrictUpdateHash":[B
    .local v1, "restrictUpdateHash":[B
    .local v22, "targetSdkVersion":I
    invoke-virtual {v0, v1}, Lcom/android/server/pm/PackageSetting;->setRestrictUpdateHash([B)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    .line 4309
    move-object/from16 v23, v1

    move/from16 v1, v75

    .end local v75    # "isScannedAsStoppedSystemApp":Z
    .local v1, "isScannedAsStoppedSystemApp":Z
    .local v23, "restrictUpdateHash":[B
    invoke-virtual {v0, v1}, Lcom/android/server/pm/PackageSetting;->setScannedAsStoppedSystemApp(Z)Lcom/android/server/pm/PackageSetting;

    .line 4311
    const-string v0, "enabled"

    move/from16 v24, v1

    move-object/from16 v25, v2

    move-object/from16 v26, v3

    const/4 v2, 0x0

    move-object/from16 v1, p1

    .end local v1    # "isScannedAsStoppedSystemApp":Z
    .end local v2    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v3    # "volumeUuid":Ljava/lang/String;
    .local v24, "isScannedAsStoppedSystemApp":Z
    .local v25, "primaryCpuAbiString":Ljava/lang/String;
    .local v26, "volumeUuid":Ljava/lang/String;
    invoke-interface {v1, v2, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v3

    .line 4312
    .local v3, "enabledStr":Ljava/lang/String;
    const-string/jumbo v2, "settings"

    if-eqz v3, :cond_16

    .line 4314
    :try_start_30
    invoke-static {v3}, Ljava/lang/Integer;->parseInt(Ljava/lang/String;)I

    move-result v0
    :try_end_30
    .catch Ljava/lang/NumberFormatException; {:try_start_30 .. :try_end_30} :catch_2b

    move/from16 v27, v4

    const/4 v4, 0x0

    .end local v4    # "updateAvailable":Z
    .local v27, "updateAvailable":Z
    :try_start_31
    invoke-virtual {v12, v0, v4, v2}, Lcom/android/server/pm/PackageSetting;->setEnabled(IILjava/lang/String;)V
    :try_end_31
    .catch Ljava/lang/NumberFormatException; {:try_start_31 .. :try_end_31} :catch_2a

    .line 4329
    move/from16 v28, v5

    move-object/from16 v4, v48

    goto/16 :goto_16

    .line 4316
    :catch_2a
    move-exception v0

    goto :goto_14

    .end local v27    # "updateAvailable":Z
    .restart local v4    # "updateAvailable":Z
    :catch_2b
    move-exception v0

    move/from16 v27, v4

    .line 4317
    .end local v4    # "updateAvailable":Z
    .restart local v0    # "e":Ljava/lang/NumberFormatException;
    .restart local v27    # "updateAvailable":Z
    :goto_14
    move-object/from16 v4, v69

    invoke-virtual {v3, v4}, Ljava/lang/String;->equalsIgnoreCase(Ljava/lang/String;)Z

    move-result v4

    if-eqz v4, :cond_13

    .line 4318
    move/from16 v28, v5

    const/4 v4, 0x1

    const/4 v5, 0x0

    .end local v5    # "categoryHint":I
    .local v28, "categoryHint":I
    invoke-virtual {v12, v4, v5, v2}, Lcom/android/server/pm/PackageSetting;->setEnabled(IILjava/lang/String;)V

    move-object/from16 v4, v48

    const/4 v5, 0x5

    goto :goto_15

    .line 4319
    .end local v28    # "categoryHint":I
    .restart local v5    # "categoryHint":I
    :cond_13
    move/from16 v28, v5

    const/4 v5, 0x0

    .end local v5    # "categoryHint":I
    .restart local v28    # "categoryHint":I
    const-string v4, "false"

    invoke-virtual {v3, v4}, Ljava/lang/String;->equalsIgnoreCase(Ljava/lang/String;)Z

    move-result v4

    if-eqz v4, :cond_14

    .line 4320
    const/4 v4, 0x2

    invoke-virtual {v12, v4, v5, v2}, Lcom/android/server/pm/PackageSetting;->setEnabled(IILjava/lang/String;)V

    move-object/from16 v4, v48

    const/4 v5, 0x5

    goto :goto_15

    .line 4321
    :cond_14
    const-string v4, "default"

    invoke-virtual {v3, v4}, Ljava/lang/String;->equalsIgnoreCase(Ljava/lang/String;)Z

    move-result v4

    if-eqz v4, :cond_15

    .line 4322
    invoke-virtual {v12, v5, v5, v2}, Lcom/android/server/pm/PackageSetting;->setEnabled(IILjava/lang/String;)V

    move-object/from16 v4, v48

    const/4 v5, 0x5

    goto :goto_15

    .line 4324
    :cond_15
    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    move-object/from16 v4, v60

    invoke-virtual {v2, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-object/from16 v4, v48

    .end local v48    # "name":Ljava/lang/String;
    .local v4, "name":Ljava/lang/String;
    invoke-virtual {v2, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v5, " has bad enabled value: "

    invoke-virtual {v2, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-object/from16 v5, v70

    invoke-virtual {v2, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4327
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v2, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    .line 4324
    const/4 v5, 0x5

    invoke-static {v5, v2}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 4329
    .end local v0    # "e":Ljava/lang/NumberFormatException;
    :goto_15
    goto :goto_16

    .line 4331
    .end local v27    # "updateAvailable":Z
    .end local v28    # "categoryHint":I
    .local v4, "updateAvailable":Z
    .restart local v5    # "categoryHint":I
    .restart local v48    # "name":Ljava/lang/String;
    :cond_16
    move/from16 v27, v4

    move/from16 v28, v5

    move-object/from16 v4, v48

    const/4 v5, 0x5

    .end local v5    # "categoryHint":I
    .end local v48    # "name":Ljava/lang/String;
    .local v4, "name":Ljava/lang/String;
    .restart local v27    # "updateAvailable":Z
    .restart local v28    # "categoryHint":I
    const/4 v5, 0x0

    invoke-virtual {v12, v5, v5, v2}, Lcom/android/server/pm/PackageSetting;->setEnabled(IILjava/lang/String;)V

    .line 4334
    :goto_16
    move-object/from16 v2, p0

    invoke-virtual {v2, v8}, Lcom/android/server/pm/Settings;->addInstallerPackageNames(Lcom/android/server/pm/InstallSource;)V

    .line 4336
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v0

    .line 4338
    .local v0, "outerDepth":I
    :goto_17
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v5

    move/from16 v48, v5

    move-object/from16 v50, v3

    const/4 v3, 0x1

    .end local v3    # "enabledStr":Ljava/lang/String;
    .local v48, "type":I
    .local v50, "enabledStr":Ljava/lang/String;
    if-eq v5, v3, :cond_2e

    const/4 v3, 0x3

    move/from16 v5, v48

    .end local v48    # "type":I
    .local v5, "type":I
    if-ne v5, v3, :cond_18

    .line 4339
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v3

    if-le v3, v0, :cond_17

    goto :goto_18

    :cond_17
    move/from16 v48, v0

    move-object/from16 v51, v4

    move/from16 v52, v5

    move-object/from16 v54, v6

    move-object/from16 v60, v7

    move-object/from16 v61, v8

    move-wide/from16 v62, v9

    move-object/from16 v4, p2

    move-object/from16 v6, p3

    goto/16 :goto_20

    .line 4340
    :cond_18
    :goto_18
    const/4 v3, 0x3

    if-eq v5, v3, :cond_2d

    const/4 v3, 0x4

    if-ne v5, v3, :cond_19

    .line 4341
    move-object/from16 v3, v50

    goto :goto_17

    .line 4344
    :cond_19
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v3

    .line 4346
    .local v3, "tagName":Ljava/lang/String;
    move/from16 v48, v0

    .end local v0    # "outerDepth":I
    .local v48, "outerDepth":I
    const-string v0, "disabled-components"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1a

    .line 4347
    move-object/from16 v51, v4

    const/4 v4, 0x0

    .end local v4    # "name":Ljava/lang/String;
    .local v51, "name":Ljava/lang/String;
    invoke-direct {v2, v12, v1, v4}, Lcom/android/server/pm/Settings;->readDisabledComponentsLPw(Lcom/android/server/pm/PackageSetting;Lcom/android/modules/utils/TypedXmlPullParser;I)V

    move-object/from16 v4, p2

    move/from16 v52, v5

    move-object/from16 v54, v6

    move-object/from16 v60, v7

    move-object/from16 v61, v8

    move-wide/from16 v62, v9

    const/4 v5, 0x5

    const/16 v58, 0x1

    move-object/from16 v6, p3

    goto/16 :goto_1f

    .line 4348
    .end local v51    # "name":Ljava/lang/String;
    .restart local v4    # "name":Ljava/lang/String;
    :cond_1a
    move-object/from16 v51, v4

    const/4 v4, 0x0

    .end local v4    # "name":Ljava/lang/String;
    .restart local v51    # "name":Ljava/lang/String;
    const-string v0, "enabled-components"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1b

    .line 4349
    invoke-direct {v2, v12, v1, v4}, Lcom/android/server/pm/Settings;->readEnabledComponentsLPw(Lcom/android/server/pm/PackageSetting;Lcom/android/modules/utils/TypedXmlPullParser;I)V

    move-object/from16 v4, p2

    move/from16 v52, v5

    move-object/from16 v54, v6

    move-object/from16 v60, v7

    move-object/from16 v61, v8

    move-wide/from16 v62, v9

    const/4 v5, 0x5

    const/16 v58, 0x1

    move-object/from16 v6, p3

    goto/16 :goto_1f

    .line 4350
    :cond_1b
    const-string/jumbo v0, "sigs"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1c

    .line 4351
    invoke-virtual {v12}, Lcom/android/server/pm/PackageSetting;->getSignatures()Lcom/android/server/pm/PackageSignatures;

    move-result-object v0

    move-object/from16 v4, p2

    invoke-virtual {v0, v1, v4}, Lcom/android/server/pm/PackageSignatures;->readXml(Lcom/android/modules/utils/TypedXmlPullParser;Ljava/util/ArrayList;)V

    move/from16 v52, v5

    move-object/from16 v54, v6

    move-object/from16 v60, v7

    move-object/from16 v61, v8

    move-wide/from16 v62, v9

    const/4 v5, 0x5

    const/16 v58, 0x1

    move-object/from16 v6, p3

    goto/16 :goto_1f

    .line 4352
    :cond_1c
    move-object/from16 v4, p2

    const-string/jumbo v0, "perms"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_20

    .line 4354
    invoke-virtual {v12}, Lcom/android/server/pm/PackageSetting;->hasSharedUser()Z

    move-result v0

    if-eqz v0, :cond_1e

    .line 4355
    nop

    .line 4356
    invoke-virtual {v12}, Lcom/android/server/pm/PackageSetting;->getSharedUserAppId()I

    move-result v0

    .line 4355
    invoke-virtual {v2, v0}, Lcom/android/server/pm/Settings;->getSettingLPr(I)Lcom/android/server/pm/SettingBase;

    move-result-object v0

    .line 4357
    .local v0, "sharedUserSettings":Lcom/android/server/pm/SettingBase;
    if-eqz v0, :cond_1d

    .line 4358
    invoke-virtual {v0}, Lcom/android/server/pm/SettingBase;->getLegacyPermissionState()Lcom/android/server/pm/permission/LegacyPermissionState;

    move-result-object v52

    goto :goto_19

    :cond_1d
    const/16 v52, 0x0

    :goto_19
    move-object/from16 v0, v52

    .line 4359
    .local v0, "legacyState":Lcom/android/server/pm/permission/LegacyPermissionState;
    goto :goto_1a

    .line 4360
    .end local v0    # "legacyState":Lcom/android/server/pm/permission/LegacyPermissionState;
    :cond_1e
    invoke-virtual {v12}, Lcom/android/server/pm/PackageSetting;->getLegacyPermissionState()Lcom/android/server/pm/permission/LegacyPermissionState;

    move-result-object v0

    .line 4362
    .restart local v0    # "legacyState":Lcom/android/server/pm/permission/LegacyPermissionState;
    :goto_1a
    if-eqz v0, :cond_1f

    .line 4363
    move/from16 v52, v5

    move-object/from16 v5, p4

    .end local v5    # "type":I
    .local v52, "type":I
    invoke-virtual {v2, v1, v0, v5}, Lcom/android/server/pm/Settings;->readInstallPermissionsLPr(Lcom/android/modules/utils/TypedXmlPullParser;Lcom/android/server/pm/permission/LegacyPermissionState;Ljava/util/List;)V

    .line 4364
    const/4 v5, 0x1

    invoke-virtual {v12, v5}, Lcom/android/server/pm/PackageSetting;->setInstallPermissionsFixed(Z)Lcom/android/server/pm/PackageSetting;

    goto :goto_1b

    .line 4362
    .end local v52    # "type":I
    .restart local v5    # "type":I
    :cond_1f
    move/from16 v52, v5

    .line 4366
    .end local v0    # "legacyState":Lcom/android/server/pm/permission/LegacyPermissionState;
    .end local v5    # "type":I
    .restart local v52    # "type":I
    :goto_1b
    move-object/from16 v54, v6

    move-object/from16 v60, v7

    move-object/from16 v61, v8

    move-wide/from16 v62, v9

    const/4 v5, 0x5

    const/16 v58, 0x1

    move-object/from16 v6, p3

    goto/16 :goto_1f

    .end local v52    # "type":I
    .restart local v5    # "type":I
    :cond_20
    move/from16 v52, v5

    .end local v5    # "type":I
    .restart local v52    # "type":I
    const-string/jumbo v0, "proper-signing-keyset"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    const-string/jumbo v5, "identifier"

    if-eqz v0, :cond_22

    .line 4367
    move-object/from16 v54, v6

    move-object/from16 v60, v7

    move-object/from16 v61, v8

    const/4 v6, 0x0

    .end local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v8    # "installSource":Lcom/android/server/pm/InstallSource;
    .local v54, "secondaryCpuAbiString":Ljava/lang/String;
    .local v60, "legacyNativeLibraryPathStr":Ljava/lang/String;
    .local v61, "installSource":Lcom/android/server/pm/InstallSource;
    invoke-interface {v1, v6, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLong(Ljava/lang/String;Ljava/lang/String;)J

    move-result-wide v7

    .line 4368
    .local v7, "id":J
    invoke-static {v7, v8}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v0

    move-object/from16 v6, p3

    const/4 v5, 0x5

    invoke-virtual {v6, v0}, Landroid/util/ArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Ljava/lang/Integer;

    .line 4369
    .local v0, "refCt":Ljava/lang/Integer;
    if-eqz v0, :cond_21

    .line 4370
    invoke-static {v7, v8}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v5

    invoke-virtual {v0}, Ljava/lang/Integer;->intValue()I

    move-result v62

    const/16 v58, 0x1

    add-int/lit8 v62, v62, 0x1

    move-object/from16 v63, v0

    .end local v0    # "refCt":Ljava/lang/Integer;
    .local v63, "refCt":Ljava/lang/Integer;
    invoke-static/range {v62 .. v62}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    invoke-virtual {v6, v5, v0}, Landroid/util/ArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    goto :goto_1c

    .line 4372
    .end local v63    # "refCt":Ljava/lang/Integer;
    .restart local v0    # "refCt":Ljava/lang/Integer;
    :cond_21
    move-object/from16 v63, v0

    const/16 v58, 0x1

    .end local v0    # "refCt":Ljava/lang/Integer;
    .restart local v63    # "refCt":Ljava/lang/Integer;
    invoke-static {v7, v8}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v0

    invoke-static/range {v58 .. v58}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v5

    invoke-virtual {v6, v0, v5}, Landroid/util/ArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 4374
    :goto_1c
    invoke-virtual {v12}, Lcom/android/server/pm/PackageSetting;->getKeySetData()Lcom/android/server/pm/PackageKeySetData;

    move-result-object v0

    invoke-virtual {v0, v7, v8}, Lcom/android/server/pm/PackageKeySetData;->setProperSigningKeySet(J)V

    .line 4375
    .end local v7    # "id":J
    .end local v63    # "refCt":Ljava/lang/Integer;
    move-wide/from16 v62, v9

    const/4 v5, 0x5

    :goto_1d
    const/16 v58, 0x1

    goto/16 :goto_1f

    .end local v54    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v60    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v61    # "installSource":Lcom/android/server/pm/InstallSource;
    .restart local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .local v7, "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v8    # "installSource":Lcom/android/server/pm/InstallSource;
    :cond_22
    move-object/from16 v54, v6

    move-object/from16 v60, v7

    move-object/from16 v61, v8

    const/4 v7, 0x5

    move-object/from16 v6, p3

    .end local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v8    # "installSource":Lcom/android/server/pm/InstallSource;
    .restart local v54    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v60    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v61    # "installSource":Lcom/android/server/pm/InstallSource;
    const-string/jumbo v0, "signing-keyset"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_23

    move v5, v7

    move-wide/from16 v62, v9

    goto :goto_1d

    .line 4377
    :cond_23
    const-string/jumbo v0, "upgrade-keyset"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_24

    .line 4378
    move-wide/from16 v62, v9

    const/4 v8, 0x0

    .end local v9    # "loadingCompletedTime":J
    .local v62, "loadingCompletedTime":J
    invoke-interface {v1, v8, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLong(Ljava/lang/String;Ljava/lang/String;)J

    move-result-wide v9

    .line 4379
    .local v9, "id":J
    invoke-virtual {v12}, Lcom/android/server/pm/PackageSetting;->getKeySetData()Lcom/android/server/pm/PackageKeySetData;

    move-result-object v0

    invoke-virtual {v0, v9, v10}, Lcom/android/server/pm/PackageKeySetData;->addUpgradeKeySetById(J)V

    .line 4380
    .end local v9    # "id":J
    move v5, v7

    const/16 v58, 0x1

    goto/16 :goto_1f

    .end local v62    # "loadingCompletedTime":J
    .local v9, "loadingCompletedTime":J
    :cond_24
    move-wide/from16 v62, v9

    const/4 v8, 0x0

    .end local v9    # "loadingCompletedTime":J
    .restart local v62    # "loadingCompletedTime":J
    const-string v0, "defined-keyset"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_26

    .line 4381
    invoke-interface {v1, v8, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLong(Ljava/lang/String;Ljava/lang/String;)J

    move-result-wide v9

    .line 4382
    .local v9, "id":J
    const-string v0, "alias"

    invoke-interface {v1, v8, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    .line 4383
    .local v0, "alias":Ljava/lang/String;
    invoke-static {v9, v10}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v5

    invoke-virtual {v6, v5}, Landroid/util/ArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Ljava/lang/Integer;

    .line 4384
    .local v5, "refCt":Ljava/lang/Integer;
    if-eqz v5, :cond_25

    .line 4385
    invoke-static {v9, v10}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v8

    invoke-virtual {v5}, Ljava/lang/Integer;->intValue()I

    move-result v55

    const/16 v58, 0x1

    add-int/lit8 v55, v55, 0x1

    invoke-static/range {v55 .. v55}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v7

    invoke-virtual {v6, v8, v7}, Landroid/util/ArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    goto :goto_1e

    .line 4387
    :cond_25
    const/16 v58, 0x1

    invoke-static {v9, v10}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v7

    invoke-static/range {v58 .. v58}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v8

    invoke-virtual {v6, v7, v8}, Landroid/util/ArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 4389
    :goto_1e
    invoke-virtual {v12}, Lcom/android/server/pm/PackageSetting;->getKeySetData()Lcom/android/server/pm/PackageKeySetData;

    move-result-object v7

    invoke-virtual {v7, v9, v10, v0}, Lcom/android/server/pm/PackageKeySetData;->addDefinedKeySet(JLjava/lang/String;)V

    .line 4390
    .end local v0    # "alias":Ljava/lang/String;
    .end local v5    # "refCt":Ljava/lang/Integer;
    .end local v9    # "id":J
    const/4 v5, 0x5

    goto/16 :goto_1f

    :cond_26
    const/16 v58, 0x1

    const-string/jumbo v0, "install-initiator-sigs"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_27

    .line 4391
    new-instance v0, Lcom/android/server/pm/PackageSignatures;

    invoke-direct {v0}, Lcom/android/server/pm/PackageSignatures;-><init>()V

    .line 4392
    .local v0, "signatures":Lcom/android/server/pm/PackageSignatures;
    invoke-virtual {v0, v1, v4}, Lcom/android/server/pm/PackageSignatures;->readXml(Lcom/android/modules/utils/TypedXmlPullParser;Ljava/util/ArrayList;)V

    .line 4393
    nop

    .line 4394
    invoke-virtual {v12}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v5

    .line 4395
    invoke-virtual {v5, v0}, Lcom/android/server/pm/InstallSource;->setInitiatingPackageSignatures(Lcom/android/server/pm/PackageSignatures;)Lcom/android/server/pm/InstallSource;

    move-result-object v5

    .line 4393
    invoke-virtual {v12, v5}, Lcom/android/server/pm/PackageSetting;->setInstallSource(Lcom/android/server/pm/InstallSource;)Lcom/android/server/pm/PackageSetting;

    .line 4396
    .end local v0    # "signatures":Lcom/android/server/pm/PackageSignatures;
    const/4 v5, 0x5

    goto :goto_1f

    :cond_27
    const-string v0, "domain-verification"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_28

    .line 4397
    new-instance v0, Landroid/content/pm/IntentFilterVerificationInfo;

    invoke-direct {v0, v1}, Landroid/content/pm/IntentFilterVerificationInfo;-><init>(Lcom/android/modules/utils/TypedXmlPullParser;)V

    .line 4398
    .local v0, "ivi":Landroid/content/pm/IntentFilterVerificationInfo;
    iget-object v5, v2, Lcom/android/server/pm/Settings;->mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;

    invoke-virtual {v12}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v7

    invoke-interface {v5, v7, v0}, Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;->addLegacySetting(Ljava/lang/String;Landroid/content/pm/IntentFilterVerificationInfo;)V

    .line 4403
    .end local v0    # "ivi":Landroid/content/pm/IntentFilterVerificationInfo;
    const/4 v5, 0x5

    goto :goto_1f

    :cond_28
    const-string/jumbo v0, "mime-group"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_2a

    .line 4404
    invoke-direct/range {p0 .. p1}, Lcom/android/server/pm/Settings;->readMimeGroupLPw(Lcom/android/modules/utils/TypedXmlPullParser;)Landroid/util/Pair;

    move-result-object v0

    .line 4405
    .local v0, "groupToMimeTypes":Landroid/util/Pair;, "Landroid/util/Pair<Ljava/lang/String;Ljava/util/Set<Ljava/lang/String;>;>;"
    if-eqz v0, :cond_29

    .line 4406
    iget-object v5, v0, Landroid/util/Pair;->first:Ljava/lang/Object;

    check-cast v5, Ljava/lang/String;

    iget-object v7, v0, Landroid/util/Pair;->second:Ljava/lang/Object;

    check-cast v7, Ljava/util/Set;

    invoke-virtual {v12, v5, v7}, Lcom/android/server/pm/PackageSetting;->addMimeTypes(Ljava/lang/String;Ljava/util/Set;)Lcom/android/server/pm/PackageSetting;

    .line 4409
    .end local v0    # "groupToMimeTypes":Landroid/util/Pair;, "Landroid/util/Pair<Ljava/lang/String;Ljava/util/Set<Ljava/lang/String;>;>;"
    :cond_29
    const/4 v5, 0x5

    goto :goto_1f

    :cond_2a
    const-string/jumbo v0, "uses-static-lib"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_2b

    .line 4410
    invoke-virtual {v2, v1, v12}, Lcom/android/server/pm/Settings;->readUsesStaticLibLPw(Lcom/android/modules/utils/TypedXmlPullParser;Lcom/android/server/pm/PackageSetting;)V

    const/4 v5, 0x5

    goto :goto_1f

    .line 4411
    :cond_2b
    const-string/jumbo v0, "uses-sdk-lib"

    invoke-virtual {v3, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_2c

    .line 4412
    invoke-virtual {v2, v1, v12}, Lcom/android/server/pm/Settings;->readUsesSdkLibLPw(Lcom/android/modules/utils/TypedXmlPullParser;Lcom/android/server/pm/PackageSetting;)V

    const/4 v5, 0x5

    goto :goto_1f

    .line 4414
    :cond_2c
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string v5, "Unknown element under <package>: "

    invoke-virtual {v0, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4415
    invoke-interface/range {p1 .. p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v0, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 4414
    const/4 v5, 0x5

    invoke-static {v5, v0}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 4416
    invoke-static/range {p1 .. p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 4418
    .end local v3    # "tagName":Ljava/lang/String;
    :goto_1f
    move/from16 v0, v48

    move-object/from16 v3, v50

    move-object/from16 v4, v51

    move-object/from16 v6, v54

    move-object/from16 v7, v60

    move-object/from16 v8, v61

    move-wide/from16 v9, v62

    goto/16 :goto_17

    .line 4340
    .end local v48    # "outerDepth":I
    .end local v51    # "name":Ljava/lang/String;
    .end local v52    # "type":I
    .end local v54    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v60    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v61    # "installSource":Lcom/android/server/pm/InstallSource;
    .end local v62    # "loadingCompletedTime":J
    .local v0, "outerDepth":I
    .restart local v4    # "name":Ljava/lang/String;
    .local v5, "type":I
    .restart local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v8    # "installSource":Lcom/android/server/pm/InstallSource;
    .local v9, "loadingCompletedTime":J
    :cond_2d
    move/from16 v48, v0

    move-object/from16 v51, v4

    move/from16 v52, v5

    move-object/from16 v54, v6

    move-object/from16 v60, v7

    move-object/from16 v61, v8

    move-wide/from16 v62, v9

    const/4 v5, 0x5

    const/16 v58, 0x1

    move-object/from16 v4, p2

    move-object/from16 v6, p3

    .end local v0    # "outerDepth":I
    .end local v4    # "name":Ljava/lang/String;
    .end local v5    # "type":I
    .end local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v8    # "installSource":Lcom/android/server/pm/InstallSource;
    .end local v9    # "loadingCompletedTime":J
    .restart local v48    # "outerDepth":I
    .restart local v51    # "name":Ljava/lang/String;
    .restart local v52    # "type":I
    .restart local v54    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v60    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v61    # "installSource":Lcom/android/server/pm/InstallSource;
    .restart local v62    # "loadingCompletedTime":J
    move-object/from16 v3, v50

    move-object/from16 v4, v51

    move-object/from16 v6, v54

    goto/16 :goto_17

    .line 4338
    .end local v51    # "name":Ljava/lang/String;
    .end local v52    # "type":I
    .end local v54    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v60    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v61    # "installSource":Lcom/android/server/pm/InstallSource;
    .end local v62    # "loadingCompletedTime":J
    .restart local v0    # "outerDepth":I
    .restart local v4    # "name":Ljava/lang/String;
    .restart local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v8    # "installSource":Lcom/android/server/pm/InstallSource;
    .restart local v9    # "loadingCompletedTime":J
    .local v48, "type":I
    :cond_2e
    move-object/from16 v51, v4

    move-object/from16 v54, v6

    move-object/from16 v60, v7

    move-object/from16 v61, v8

    move-wide/from16 v62, v9

    move/from16 v52, v48

    move-object/from16 v4, p2

    move-object/from16 v6, p3

    move/from16 v48, v0

    .line 4419
    .end local v0    # "outerDepth":I
    .end local v4    # "name":Ljava/lang/String;
    .end local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v8    # "installSource":Lcom/android/server/pm/InstallSource;
    .end local v9    # "loadingCompletedTime":J
    .local v48, "outerDepth":I
    .restart local v51    # "name":Ljava/lang/String;
    .restart local v52    # "type":I
    .restart local v54    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v60    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v61    # "installSource":Lcom/android/server/pm/InstallSource;
    .restart local v62    # "loadingCompletedTime":J
    :goto_20
    const-wide/16 v7, 0x0

    cmp-long v0, v42, v7

    if-eqz v0, :cond_2f

    .line 4420
    invoke-virtual {v12}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v0

    invoke-static/range {v42 .. v43}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v3

    move-object/from16 v5, p5

    invoke-virtual {v5, v0, v3}, Landroid/util/ArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    goto :goto_21

    .line 4419
    :cond_2f
    move-object/from16 v5, p5

    .line 4422
    .end local v48    # "outerDepth":I
    .end local v50    # "enabledStr":Ljava/lang/String;
    .end local v52    # "type":I
    .end local v61    # "installSource":Lcom/android/server/pm/InstallSource;
    :goto_21
    goto :goto_22

    .line 4423
    .end local v20    # "appMetadataFilePath":Ljava/lang/String;
    .end local v21    # "appMetadataSource":I
    .end local v22    # "targetSdkVersion":I
    .end local v23    # "restrictUpdateHash":[B
    .end local v24    # "isScannedAsStoppedSystemApp":Z
    .end local v25    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v26    # "volumeUuid":Ljava/lang/String;
    .end local v27    # "updateAvailable":Z
    .end local v28    # "categoryHint":I
    .end local v49    # "installerPackageName":Ljava/lang/String;
    .end local v51    # "name":Ljava/lang/String;
    .end local v54    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v60    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v62    # "loadingCompletedTime":J
    .local v1, "appMetadataFilePath":Ljava/lang/String;
    .restart local v2    # "primaryCpuAbiString":Ljava/lang/String;
    .local v3, "volumeUuid":Ljava/lang/String;
    .local v4, "updateAvailable":Z
    .local v5, "categoryHint":I
    .restart local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .local v8, "installerPackageName":Ljava/lang/String;
    .restart local v9    # "loadingCompletedTime":J
    .local v48, "name":Ljava/lang/String;
    .restart local v72    # "appMetadataSource":I
    .restart local v73    # "targetSdkVersion":I
    .restart local v74    # "restrictUpdateHash":[B
    .restart local v75    # "isScannedAsStoppedSystemApp":Z
    :cond_30
    move-object/from16 v20, v1

    move-object/from16 v25, v2

    move-object/from16 v26, v3

    move/from16 v27, v4

    move/from16 v28, v5

    move-object/from16 v54, v6

    move-object/from16 v60, v7

    move-object/from16 v49, v8

    move-wide/from16 v62, v9

    move-object/from16 v51, v48

    move/from16 v21, v72

    move/from16 v22, v73

    move-object/from16 v23, v74

    move/from16 v24, v75

    move-object/from16 v2, p0

    move-object/from16 v1, p1

    move-object/from16 v4, p2

    move-object/from16 v6, p3

    move-object/from16 v5, p5

    .end local v1    # "appMetadataFilePath":Ljava/lang/String;
    .end local v2    # "primaryCpuAbiString":Ljava/lang/String;
    .end local v3    # "volumeUuid":Ljava/lang/String;
    .end local v4    # "updateAvailable":Z
    .end local v5    # "categoryHint":I
    .end local v6    # "secondaryCpuAbiString":Ljava/lang/String;
    .end local v7    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .end local v8    # "installerPackageName":Ljava/lang/String;
    .end local v9    # "loadingCompletedTime":J
    .end local v48    # "name":Ljava/lang/String;
    .end local v72    # "appMetadataSource":I
    .end local v73    # "targetSdkVersion":I
    .end local v74    # "restrictUpdateHash":[B
    .end local v75    # "isScannedAsStoppedSystemApp":Z
    .restart local v20    # "appMetadataFilePath":Ljava/lang/String;
    .restart local v21    # "appMetadataSource":I
    .restart local v22    # "targetSdkVersion":I
    .restart local v23    # "restrictUpdateHash":[B
    .restart local v24    # "isScannedAsStoppedSystemApp":Z
    .restart local v25    # "primaryCpuAbiString":Ljava/lang/String;
    .restart local v26    # "volumeUuid":Ljava/lang/String;
    .restart local v27    # "updateAvailable":Z
    .restart local v28    # "categoryHint":I
    .restart local v49    # "installerPackageName":Ljava/lang/String;
    .restart local v51    # "name":Ljava/lang/String;
    .restart local v54    # "secondaryCpuAbiString":Ljava/lang/String;
    .restart local v60    # "legacyNativeLibraryPathStr":Ljava/lang/String;
    .restart local v62    # "loadingCompletedTime":J
    invoke-static/range {p1 .. p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 4425
    :goto_22
    return-void
.end method

.method private readPersistentPreferredActivitiesLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V
    .locals 6
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .param p2, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 1729
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v0

    .line 1731
    .local v0, "outerDepth":I
    :cond_0
    :goto_0
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v1

    move v2, v1

    .local v2, "type":I
    const/4 v3, 0x1

    nop

    if-eq v1, v3, :cond_4

    const/4 v1, 0x3

    if-ne v2, v1, :cond_1

    .line 1732
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v3

    if-le v3, v0, :cond_4

    .line 1733
    :cond_1
    nop

    nop

    if-eq v2, v1, :cond_0

    const/4 v1, 0x4

    if-ne v2, v1, :cond_2

    .line 1734
    goto :goto_0

    .line 1736
    :cond_2
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v1

    .line 1737
    .local v1, "tagName":Ljava/lang/String;
    const-string/jumbo v3, "item"

    invoke-virtual {v1, v3}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v3

    if-eqz v3, :cond_3

    .line 1738
    new-instance v3, Lcom/android/server/pm/PersistentPreferredActivity;

    invoke-direct {v3, p1}, Lcom/android/server/pm/PersistentPreferredActivity;-><init>(Lcom/android/modules/utils/TypedXmlPullParser;)V

    .line 1739
    .local v3, "ppa":Lcom/android/server/pm/PersistentPreferredActivity;
    invoke-virtual {p0, p2}, Lcom/android/server/pm/Settings;->editPersistentPreferredActivitiesLPw(I)Lcom/android/server/pm/PersistentPreferredIntentResolver;

    move-result-object v4

    const/4 v5, 0x0

    invoke-virtual {v4, v5, v3}, Lcom/android/server/pm/WatchedIntentResolver;->addFilter(Lcom/android/server/pm/snapshot/PackageDataSnapshot;Lcom/android/server/pm/WatchedIntentFilter;)V

    .line 1740
    .end local v3    # "ppa":Lcom/android/server/pm/PersistentPreferredActivity;
    goto :goto_1

    .line 1741
    :cond_3
    new-instance v3, Ljava/lang/StringBuilder;

    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V

    const-string v4, "Unknown element under <persistent-preferred-activities>: "

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1743
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v4

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    .line 1741
    const/4 v4, 0x5

    invoke-static {v4, v3}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 1744
    invoke-static {p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 1746
    .end local v1    # "tagName":Ljava/lang/String;
    :goto_1
    goto :goto_0

    .line 1747
    :cond_4
    return-void
.end method

.method private readSharedUserLPw(Lcom/android/modules/utils/TypedXmlPullParser;Ljava/util/ArrayList;Ljava/util/List;)V
    .locals 10
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/modules/utils/TypedXmlPullParser;",
            "Ljava/util/ArrayList<",
            "Landroid/content/pm/Signature;",
            ">;",
            "Ljava/util/List<",
            "Landroid/content/pm/UserInfo;",
            ">;)V"
        }
    .end annotation

    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 4568
    .local p2, "readSignatures":Ljava/util/ArrayList;, "Ljava/util/ArrayList<Landroid/content/pm/Signature;>;"
    .local p3, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    const/4 v0, 0x0

    .line 4569
    .local v0, "name":Ljava/lang/String;
    const/4 v1, 0x0

    .line 4570
    .local v1, "pkgFlags":I
    const/4 v2, 0x0

    .line 4571
    .local v2, "pkgPrivateFlags":I
    const/4 v3, 0x0

    .line 4573
    .local v3, "su":Lcom/android/server/pm/SharedUserSetting;
    const-string/jumbo v4, "name"

    const/4 v5, 0x0

    invoke-interface {p1, v5, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    .line 4574
    invoke-static {p1}, Lcom/android/server/pm/Settings;->parseAppId(Lcom/android/modules/utils/TypedXmlPullParser;)I

    move-result v4

    .line 4575
    .local v4, "appId":I
    const-string/jumbo v6, "system"

    const/4 v7, 0x0

    invoke-interface {p1, v5, v6, v7}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v5

    if-eqz v5, :cond_0

    .line 4576
    or-int/lit8 v1, v1, 0x1

    .line 4578
    :cond_0
    const/4 v5, 0x5

    if-nez v0, :cond_1

    .line 4579
    new-instance v6, Ljava/lang/StringBuilder;

    invoke-direct {v6}, Ljava/lang/StringBuilder;-><init>()V

    const-string v7, "Error in package manager settings: <shared-user> has no name at "

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4581
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v7

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v6

    .line 4579
    invoke-static {v5, v6}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    goto :goto_0

    .line 4582
    :cond_1
    if-nez v4, :cond_2

    .line 4583
    new-instance v6, Ljava/lang/StringBuilder;

    invoke-direct {v6}, Ljava/lang/StringBuilder;-><init>()V

    const-string v7, "Error in package manager settings: shared-user "

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v7, " has bad appId "

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v4}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    const-string v7, " at "

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4586
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v7

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v6

    .line 4583
    invoke-static {v5, v6}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    goto :goto_0

    .line 4588
    :cond_2
    invoke-virtual {v0}, Ljava/lang/String;->intern()Ljava/lang/String;

    move-result-object v6

    invoke-virtual {p0, v6, v4, v1, v2}, Lcom/android/server/pm/Settings;->addSharedUserLPw(Ljava/lang/String;III)Lcom/android/server/pm/SharedUserSetting;

    move-result-object v6

    move-object v3, v6

    if-nez v6, :cond_3

    .line 4590
    new-instance v6, Ljava/lang/StringBuilder;

    invoke-direct {v6}, Ljava/lang/StringBuilder;-><init>()V

    const-string v7, "Occurred while parsing settings at "

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4592
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v7

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v6

    .line 4591
    const/4 v7, 0x6

    invoke-static {v7, v6}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 4597
    .end local v4    # "appId":I
    :cond_3
    :goto_0
    if-eqz v3, :cond_a

    .line 4598
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v4

    .line 4600
    .local v4, "outerDepth":I
    :cond_4
    :goto_1
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v6

    move v7, v6

    .local v7, "type":I
    const/4 v8, 0x1

    nop

    if-eq v6, v8, :cond_9

    const/4 v6, 0x3

    if-ne v7, v6, :cond_5

    .line 4601
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v8

    if-le v8, v4, :cond_9

    .line 4602
    :cond_5
    nop

    nop

    if-eq v7, v6, :cond_4

    const/4 v6, 0x4

    if-ne v7, v6, :cond_6

    .line 4603
    goto :goto_1

    .line 4606
    :cond_6
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v6

    .line 4607
    .local v6, "tagName":Ljava/lang/String;
    const-string/jumbo v8, "sigs"

    invoke-virtual {v6, v8}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v8

    if-eqz v8, :cond_7

    .line 4608
    iget-object v8, v3, Lcom/android/server/pm/SharedUserSetting;->signatures:Lcom/android/server/pm/PackageSignatures;

    invoke-virtual {v8, p1, p2}, Lcom/android/server/pm/PackageSignatures;->readXml(Lcom/android/modules/utils/TypedXmlPullParser;Ljava/util/ArrayList;)V

    goto :goto_2

    .line 4609
    :cond_7
    const-string/jumbo v8, "perms"

    invoke-virtual {v6, v8}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v8

    if-eqz v8, :cond_8

    .line 4610
    invoke-virtual {v3}, Lcom/android/server/pm/SettingBase;->getLegacyPermissionState()Lcom/android/server/pm/permission/LegacyPermissionState;

    move-result-object v8

    invoke-virtual {p0, p1, v8, p3}, Lcom/android/server/pm/Settings;->readInstallPermissionsLPr(Lcom/android/modules/utils/TypedXmlPullParser;Lcom/android/server/pm/permission/LegacyPermissionState;Ljava/util/List;)V

    goto :goto_2

    .line 4612
    :cond_8
    new-instance v8, Ljava/lang/StringBuilder;

    invoke-direct {v8}, Ljava/lang/StringBuilder;-><init>()V

    const-string v9, "Unknown element under <shared-user>: "

    invoke-virtual {v8, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 4613
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v9

    invoke-virtual {v8, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v8}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v8

    .line 4612
    invoke-static {v5, v8}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 4614
    invoke-static {p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 4616
    .end local v6    # "tagName":Ljava/lang/String;
    :goto_2
    goto :goto_1

    .line 4617
    .end local v4    # "outerDepth":I
    .end local v7    # "type":I
    :cond_9
    goto :goto_3

    .line 4618
    :cond_a
    invoke-static {p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 4620
    :goto_3
    return-void
.end method

.method private static readSuspensionParamsLPr(ILcom/android/modules/utils/TypedXmlPullParser;)Ljava/util/Map$Entry;
    .locals 4
    .param p0, "userId"    # I
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .annotation build Landroid/annotation/Nullable;
    .end annotation

    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(I",
            "Lcom/android/modules/utils/TypedXmlPullParser;",
            ")",
            "Ljava/util/Map$Entry<",
            "Landroid/content/pm/UserPackage;",
            "Lcom/android/server/pm/pkg/SuspendParams;",
            ">;"
        }
    .end annotation

    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;
        }
    .end annotation

    .line 2094
    const-string/jumbo v0, "suspending-package"

    const/4 v1, 0x0

    invoke-interface {p1, v1, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    .line 2095
    .local v0, "suspendingPackage":Ljava/lang/String;
    if-nez v0, :cond_0

    .line 2096
    const-string v2, "PackageSettings"

    const-string v3, "No suspendingPackage found inside tag suspend-params"

    invoke-static {v2, v3}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 2097
    return-object v1

    .line 2100
    :cond_0
    invoke-static {}, Landroid/app/admin/flags/Flags;->crossUserSuspensionEnabledRo()Z

    move-result v2

    if-eqz v2, :cond_2

    .line 2101
    const-string/jumbo v2, "suspending-user"

    const/16 v3, -0x2710

    invoke-interface {p1, v1, v2, v3}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v1

    .line 2103
    .local v1, "suspendingUserId":I
    if-ne v1, v3, :cond_3

    .line 2104
    invoke-virtual {v0}, Ljava/lang/Object;->hashCode()I

    move-result v2

    const/4 v3, 0x0

    sparse-switch v2, :sswitch_data_0

    :cond_1
    goto :goto_0

    :sswitch_0
    const-string v2, "com.android.shell"

    invoke-virtual {v0, v2}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v2

    if-eqz v2, :cond_1

    const/4 v2, 0x1

    goto :goto_1

    :sswitch_1
    const-string/jumbo v2, "root"

    invoke-virtual {v0, v2}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v2

    if-eqz v2, :cond_1

    move v2, v3

    goto :goto_1

    :sswitch_2
    const-string v2, "android"

    invoke-virtual {v0, v2}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v2

    if-eqz v2, :cond_1

    const/4 v2, 0x2

    goto :goto_1

    :goto_0
    const/4 v2, -0x1

    :goto_1
    packed-switch v2, :pswitch_data_0

    .line 2107
    move v3, p0

    goto :goto_2

    .line 2106
    :pswitch_0
    nop

    .line 2107
    :goto_2
    move v1, v3

    goto :goto_3

    .line 2111
    .end local v1    # "suspendingUserId":I
    :cond_2
    move v1, p0

    .line 2113
    .restart local v1    # "suspendingUserId":I
    :cond_3
    :goto_3
    nop

    .line 2114
    invoke-static {v1, v0}, Landroid/content/pm/UserPackage;->of(ILjava/lang/String;)Landroid/content/pm/UserPackage;

    move-result-object v2

    .line 2115
    invoke-static {p1}, Lcom/android/server/pm/pkg/SuspendParams;->restoreFromXml(Lcom/android/modules/utils/TypedXmlPullParser;)Lcom/android/server/pm/pkg/SuspendParams;

    move-result-object v3

    .line 2113
    invoke-static {v2, v3}, Ljava/util/Map;->entry(Ljava/lang/Object;Ljava/lang/Object;)Ljava/util/Map$Entry;

    move-result-object v2

    return-object v2

    nop

    :sswitch_data_0
    .sparse-switch
        -0x3357c991 -> :sswitch_2
        0x3580e2 -> :sswitch_1
        0x5c363844 -> :sswitch_0
    .end sparse-switch

    :pswitch_data_0
    .packed-switch 0x0
        :pswitch_0
        :pswitch_0
        :pswitch_0
    .end packed-switch
.end method

.method private registerObservers()V
    .locals 2

    .line 611
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArrayMap;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 612
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArraySet;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 613
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMapping:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArrayMap;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 614
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArrayMap;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 615
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedSparseArray;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 616
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArrayMap;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 617
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedSparseArray;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 618
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedSparseArray;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 619
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedSparseArray;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 620
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArrayMap;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 621
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/pm/AppIdSettingMap;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 622
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArrayMap;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 623
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mNextAppLinkGeneration:Lcom/android/server/utils/WatchedSparseIntArray;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchableImpl;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 624
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPendingDefaultBrowser:Lcom/android/server/utils/WatchedSparseArray;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedSparseArray;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 625
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mObserver:Lcom/android/server/utils/Watcher;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArrayList;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 626
    return-void
.end method

.method static removeFilters(Lcom/android/server/pm/PreferredIntentResolver;Lcom/android/server/pm/WatchedIntentFilter;Ljava/util/List;)V
    .locals 2
    .param p0, "pir"    # Lcom/android/server/pm/PreferredIntentResolver;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p1, "filter"    # Lcom/android/server/pm/WatchedIntentFilter;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p2    # Ljava/util/List;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/server/pm/PreferredIntentResolver;",
            "Lcom/android/server/pm/WatchedIntentFilter;",
            "Ljava/util/List<",
            "Lcom/android/server/pm/PreferredActivity;",
            ">;)V"
        }
    .end annotation

    .line 3696
    .local p2, "existing":Ljava/util/List;, "Ljava/util/List<Lcom/android/server/pm/PreferredActivity;>;"
    invoke-interface {p2}, Ljava/util/List;->size()I

    move-result v0

    add-int/lit8 v0, v0, -0x1

    .local v0, "i":I
    :goto_0
    if-ltz v0, :cond_0

    .line 3697
    invoke-interface {p2, v0}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/android/server/pm/PreferredActivity;

    .line 3702
    .local v1, "pa":Lcom/android/server/pm/PreferredActivity;
    invoke-virtual {p0, v1}, Lcom/android/server/pm/WatchedIntentResolver;->removeFilter(Lcom/android/server/pm/WatchedIntentFilter;)V

    .line 3696
    .end local v1    # "pa":Lcom/android/server/pm/PreferredActivity;
    add-int/lit8 v0, v0, -0x1

    goto :goto_0

    :cond_0
    nop

    .line 3704
    .end local v0    # "i":I
    return-void
.end method

.method private removeInstallerPackageStatus(Ljava/lang/String;)V
    .locals 2
    .param p1, "packageName"    # Ljava/lang/String;

    .line 1507
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArraySet;->contains(Ljava/lang/Object;)Z

    move-result v0

    if-nez v0, :cond_0

    .line 1508
    return-void

    .line 1510
    :cond_0
    const/4 v0, 0x0

    .local v0, "i":I
    :goto_0
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v1

    if-ge v0, v1, :cond_1

    .line 1511
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, v0}, Lcom/android/server/utils/WatchedArrayMap;->valueAt(I)Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/android/server/pm/PackageSetting;

    invoke-virtual {v1, p1}, Lcom/android/server/pm/PackageSetting;->removeInstallerPackage(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 1510
    add-int/lit8 v0, v0, 0x1

    goto :goto_0

    :cond_1
    nop

    .line 1513
    .end local v0    # "i":I
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArraySet;->remove(Ljava/lang/Object;)Z

    .line 1514
    return-void
.end method

.method static updatePackageSetting(Lcom/android/server/pm/PackageSetting;Lcom/android/server/pm/PackageSetting;Lcom/android/server/pm/SharedUserSetting;Lcom/android/server/pm/SharedUserSetting;Ljava/io/File;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;IILcom/android/server/pm/UserManagerService;[Ljava/lang/String;[J[Z[Ljava/lang/String;[JLjava/util/Set;Ljava/util/UUID;I[BZ)V
    .locals 17
    .param p0, "pkgSetting"    # Lcom/android/server/pm/PackageSetting;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p1, "disabledPkg"    # Lcom/android/server/pm/PackageSetting;
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p2, "existingSharedUserSetting"    # Lcom/android/server/pm/SharedUserSetting;
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p3, "sharedUser"    # Lcom/android/server/pm/SharedUserSetting;
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p4, "codePath"    # Ljava/io/File;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p5, "legacyNativeLibraryPath"    # Ljava/lang/String;
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p6, "primaryCpuAbi"    # Ljava/lang/String;
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p7, "secondaryCpuAbi"    # Ljava/lang/String;
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p8, "pkgFlags"    # I
    .param p9, "pkgPrivateFlags"    # I
    .param p10, "userManager"    # Lcom/android/server/pm/UserManagerService;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p11, "usesSdkLibraries"    # [Ljava/lang/String;
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p12, "usesSdkLibrariesVersions"    # [J
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p13, "usesSdkLibrariesOptional"    # [Z
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p14, "usesStaticLibraries"    # [Ljava/lang/String;
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p15, "usesStaticLibrariesVersions"    # [J
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p16    # Ljava/util/Set;
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p17, "domainSetId"    # Ljava/util/UUID;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p18, "targetSdkVersion"    # I
    .param p19, "restrictUpdatedHash"    # [B
    .param p20, "isDontKill"    # Z
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/server/pm/PackageSetting;",
            "Lcom/android/server/pm/PackageSetting;",
            "Lcom/android/server/pm/SharedUserSetting;",
            "Lcom/android/server/pm/SharedUserSetting;",
            "Ljava/io/File;",
            "Ljava/lang/String;",
            "Ljava/lang/String;",
            "Ljava/lang/String;",
            "II",
            "Lcom/android/server/pm/UserManagerService;",
            "[",
            "Ljava/lang/String;",
            "[J[Z[",
            "Ljava/lang/String;",
            "[J",
            "Ljava/util/Set<",
            "Ljava/lang/String;",
            ">;",
            "Ljava/util/UUID;",
            "I[BZ)V"
        }
    .end annotation

    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lcom/android/server/pm/PackageManagerException;
        }
    .end annotation

    .line 1249
    .local p16, "mimeGroupNames":Ljava/util/Set;, "Ljava/util/Set<Ljava/lang/String;>;"
    move-object/from16 v0, p0

    move-object/from16 v1, p2

    move-object/from16 v2, p3

    move-object/from16 v3, p4

    move/from16 v4, p9

    move-object/from16 v5, p11

    move-object/from16 v6, p12

    move-object/from16 v7, p13

    move-object/from16 v8, p14

    move-object/from16 v9, p15

    invoke-virtual/range {p0 .. p0}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v10

    .line 1250
    .local v10, "pkgName":Ljava/lang/String;
    invoke-virtual/range {p0 .. p0}, Lcom/android/server/pm/PackageSetting;->getPath()Ljava/io/File;

    move-result-object v11

    .line 1251
    .local v11, "oldCodePath":Ljava/io/File;
    const-string v12, " to "

    if-eqz v2, :cond_2

    .line 1252
    invoke-static/range {p2 .. p3}, Ljava/util/Objects;->equals(Ljava/lang/Object;Ljava/lang/Object;)Z

    move-result v13

    if-nez v13, :cond_1

    .line 1253
    new-instance v13, Ljava/lang/StringBuilder;

    invoke-direct {v13}, Ljava/lang/StringBuilder;-><init>()V

    const-string v14, "Package "

    invoke-virtual {v13, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v13, v10}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v14, " shared user changed from "

    invoke-virtual {v13, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1255
    if-eqz v1, :cond_0

    .line 1256
    iget-object v14, v1, Lcom/android/server/pm/SharedUserSetting;->name:Ljava/lang/String;

    goto :goto_0

    :cond_0
    const-string v14, "<nothing>"

    :goto_0
    invoke-virtual {v13, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v13, v12}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object v12, v2, Lcom/android/server/pm/SharedUserSetting;->name:Ljava/lang/String;

    invoke-virtual {v13, v12}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v13}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v12

    .line 1253
    const/4 v13, 0x5

    invoke-static {v13, v12}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 1258
    new-instance v12, Lcom/android/server/pm/PackageManagerException;

    new-instance v13, Ljava/lang/StringBuilder;

    invoke-direct {v13}, Ljava/lang/StringBuilder;-><init>()V

    const-string v14, "Updating application package "

    invoke-virtual {v13, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v13, v10}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v14, " failed"

    invoke-virtual {v13, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v13}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v13

    const/16 v14, -0x18

    invoke-direct {v12, v14, v13}, Lcom/android/server/pm/PackageManagerException;-><init>(ILjava/lang/String;)V

    throw v12

    .line 1261
    :cond_1
    iget v13, v2, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-virtual {v0, v13}, Lcom/android/server/pm/PackageSetting;->setSharedUserAppId(I)Lcom/android/server/pm/PackageSetting;

    goto :goto_1

    .line 1264
    :cond_2
    const/4 v13, -0x1

    invoke-virtual {v0, v13}, Lcom/android/server/pm/PackageSetting;->setSharedUserAppId(I)Lcom/android/server/pm/PackageSetting;

    .line 1267
    :goto_1
    invoke-virtual {v11, v3}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v13

    if-nez v13, :cond_8

    .line 1268
    invoke-virtual/range {p0 .. p0}, Lcom/android/server/pm/PackageSetting;->isSystem()Z

    move-result v13

    .line 1269
    .local v13, "isSystem":Z
    new-instance v14, Ljava/lang/StringBuilder;

    invoke-direct {v14}, Ljava/lang/StringBuilder;-><init>()V

    const-string v15, "Update"

    invoke-virtual {v14, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1270
    if-eqz v13, :cond_3

    const-string v15, " system"

    goto :goto_2

    :cond_3
    const-string v15, ""

    :goto_2
    invoke-virtual {v14, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v15, " package "

    invoke-virtual {v14, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v14, v10}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v15, " code path from "

    invoke-virtual {v14, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1272
    invoke-virtual/range {p0 .. p0}, Lcom/android/server/pm/PackageSetting;->getPathString()Ljava/lang/String;

    move-result-object v15

    invoke-virtual {v14, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v14, v12}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1273
    invoke-virtual/range {p4 .. p4}, Ljava/lang/Object;->toString()Ljava/lang/String;

    move-result-object v12

    invoke-virtual {v14, v12}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v12, "; Retain data and using new"

    invoke-virtual {v14, v12}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v14}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v12

    .line 1269
    const-string v14, "PackageManager"

    invoke-static {v14, v12}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I

    .line 1275
    if-nez v13, :cond_7

    .line 1279
    and-int/lit8 v12, p8, 0x1

    if-eqz v12, :cond_6

    if-nez p1, :cond_6

    .line 1280
    invoke-static/range {p10 .. p10}, Lcom/android/server/pm/Settings;->getAllUsers(Lcom/android/server/pm/UserManagerService;)Ljava/util/List;

    move-result-object v12

    .line 1281
    .local v12, "allUserInfos":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    if-eqz v12, :cond_5

    .line 1282
    invoke-interface {v12}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v14

    :goto_3
    invoke-interface {v14}, Ljava/util/Iterator;->hasNext()Z

    move-result v15

    if-eqz v15, :cond_4

    invoke-interface {v14}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v15

    check-cast v15, Landroid/content/pm/UserInfo;

    .line 1283
    .local v15, "userInfo":Landroid/content/pm/UserInfo;
    iget v1, v15, Landroid/content/pm/UserInfo;->id:I

    const/4 v2, 0x1

    invoke-virtual {v0, v2, v1}, Lcom/android/server/pm/PackageSetting;->setInstalled(ZI)V

    .line 1284
    iget v1, v15, Landroid/content/pm/UserInfo;->id:I

    const/4 v2, 0x0

    invoke-virtual {v0, v2, v1}, Lcom/android/server/pm/PackageSetting;->setUninstallReason(II)V

    .line 1285
    .end local v15    # "userInfo":Landroid/content/pm/UserInfo;
    move-object/from16 v1, p2

    move-object/from16 v2, p3

    goto :goto_3

    .line 1282
    :cond_4
    const/4 v2, 0x0

    goto :goto_4

    .line 1281
    :cond_5
    const/4 v2, 0x0

    goto :goto_4

    .line 1279
    .end local v12    # "allUserInfos":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    :cond_6
    const/4 v2, 0x0

    .line 1292
    :goto_4
    move-object/from16 v1, p5

    invoke-virtual {v0, v1}, Lcom/android/server/pm/PackageSetting;->setLegacyNativeLibraryPath(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    goto :goto_5

    .line 1275
    :cond_7
    move-object/from16 v1, p5

    const/4 v2, 0x0

    .line 1294
    :goto_5
    invoke-virtual {v0, v3}, Lcom/android/server/pm/PackageSetting;->setPath(Ljava/io/File;)Lcom/android/server/pm/PackageSetting;

    .line 1295
    if-eqz p20, :cond_9

    invoke-static {}, Lcom/android/internal/hidden_from_bootclasspath/android/content/pm/Flags;->improveInstallDontKill()Z

    move-result v12

    if-eqz v12, :cond_9

    .line 1298
    invoke-virtual {v0, v11}, Lcom/android/server/pm/PackageSetting;->addOldPath(Ljava/io/File;)Lcom/android/server/pm/PackageSetting;

    goto :goto_6

    .line 1267
    .end local v13    # "isSystem":Z
    :cond_8
    move-object/from16 v1, p5

    const/4 v2, 0x0

    .line 1302
    :cond_9
    :goto_6
    move-object/from16 v12, p6

    invoke-virtual {v0, v12}, Lcom/android/server/pm/PackageSetting;->setPrimaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v13

    .line 1303
    move-object/from16 v14, p7

    invoke-virtual {v13, v14}, Lcom/android/server/pm/PackageSetting;->setSecondaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v13

    .line 1304
    move-object/from16 v15, p16

    invoke-virtual {v13, v15}, Lcom/android/server/pm/PackageSetting;->updateMimeGroups(Ljava/util/Set;)Lcom/android/server/pm/PackageSetting;

    move-result-object v13

    .line 1305
    move-object/from16 v2, p17

    invoke-virtual {v13, v2}, Lcom/android/server/pm/PackageSetting;->setDomainSetId(Ljava/util/UUID;)Lcom/android/server/pm/PackageSetting;

    move-result-object v13

    .line 1306
    move/from16 v1, p18

    invoke-virtual {v13, v1}, Lcom/android/server/pm/PackageSetting;->setTargetSdkVersion(I)Lcom/android/server/pm/PackageSetting;

    move-result-object v13

    .line 1307
    move-object/from16 v1, p19

    invoke-virtual {v13, v1}, Lcom/android/server/pm/PackageSetting;->setRestrictUpdateHash([B)Lcom/android/server/pm/PackageSetting;

    .line 1309
    if-eqz v5, :cond_a

    if-eqz v6, :cond_a

    if-eqz v7, :cond_a

    array-length v13, v5

    array-length v1, v6

    if-ne v13, v1, :cond_a

    array-length v1, v5

    array-length v13, v7

    if-ne v1, v13, :cond_a

    .line 1313
    invoke-virtual {v0, v5}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibraries([Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v1

    .line 1314
    invoke-virtual {v1, v6}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibrariesVersionsMajor([J)Lcom/android/server/pm/PackageSetting;

    move-result-object v1

    .line 1315
    invoke-virtual {v1, v7}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibrariesOptional([Z)Lcom/android/server/pm/PackageSetting;

    goto :goto_7

    .line 1317
    :cond_a
    const/4 v1, 0x0

    invoke-virtual {v0, v1}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibraries([Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v13

    .line 1318
    invoke-virtual {v13, v1}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibrariesVersionsMajor([J)Lcom/android/server/pm/PackageSetting;

    move-result-object v13

    .line 1319
    invoke-virtual {v13, v1}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibrariesOptional([Z)Lcom/android/server/pm/PackageSetting;

    .line 1324
    :goto_7
    if-eqz v8, :cond_b

    if-eqz v9, :cond_b

    array-length v1, v8

    array-length v13, v9

    if-ne v1, v13, :cond_b

    .line 1326
    invoke-virtual {v0, v8}, Lcom/android/server/pm/PackageSetting;->setUsesStaticLibraries([Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v1

    .line 1327
    invoke-virtual {v1, v9}, Lcom/android/server/pm/PackageSetting;->setUsesStaticLibrariesVersions([J)Lcom/android/server/pm/PackageSetting;

    goto :goto_8

    .line 1329
    :cond_b
    const/4 v1, 0x0

    invoke-virtual {v0, v1}, Lcom/android/server/pm/PackageSetting;->setUsesStaticLibraries([Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v13

    .line 1330
    invoke-virtual {v13, v1}, Lcom/android/server/pm/PackageSetting;->setUsesStaticLibrariesVersions([J)Lcom/android/server/pm/PackageSetting;

    .line 1336
    :goto_8
    invoke-virtual/range {p0 .. p0}, Lcom/android/server/pm/SettingBase;->getFlags()I

    move-result v1

    .line 1337
    .local v1, "newPkgFlags":I
    and-int/lit8 v1, v1, -0x2

    .line 1338
    and-int/lit8 v13, p8, 0x1

    or-int/2addr v1, v13

    .line 1340
    invoke-virtual {v0, v1}, Lcom/android/server/pm/SettingBase;->setFlags(I)Lcom/android/server/pm/SettingBase;

    .line 1342
    invoke-virtual/range {p0 .. p0}, Lcom/android/server/pm/SettingBase;->getPrivateFlags()I

    move-result v13

    and-int/lit16 v13, v13, 0x200

    if-eqz v13, :cond_c

    const/16 v16, 0x1

    goto :goto_9

    :cond_c
    const/16 v16, 0x0

    :goto_9
    move/from16 v13, v16

    .line 1344
    .local v13, "wasRequiredForSystemUser":Z
    if-eqz v13, :cond_d

    .line 1345
    or-int/lit16 v4, v4, 0x200

    .end local p9    # "pkgPrivateFlags":I
    .local v4, "pkgPrivateFlags":I
    goto :goto_a

    .line 1347
    .end local v4    # "pkgPrivateFlags":I
    .restart local p9    # "pkgPrivateFlags":I
    :cond_d
    and-int/lit16 v4, v4, -0x201

    .line 1349
    .end local p9    # "pkgPrivateFlags":I
    .restart local v4    # "pkgPrivateFlags":I
    :goto_a
    invoke-virtual {v0, v4}, Lcom/android/server/pm/SettingBase;->setPrivateFlags(I)Lcom/android/server/pm/SettingBase;

    .line 1350
    return-void
.end method

.method private writeArchiveStateLPr(Lcom/android/modules/utils/TypedXmlSerializer;Lcom/android/server/pm/pkg/ArchiveState;)V
    .locals 7
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .param p2, "archiveState"    # Lcom/android/server/pm/pkg/ArchiveState;
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;
        }
    .end annotation

    .line 2565
    if-nez p2, :cond_0

    .line 2566
    return-void

    .line 2569
    :cond_0
    const/4 v0, 0x0

    const-string v1, "archive-state"

    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2570
    const-string/jumbo v2, "installer-title"

    invoke-virtual {p2}, Lcom/android/server/pm/pkg/ArchiveState;->getInstallerTitle()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2571
    const-string v2, "archive-time"

    invoke-virtual {p2}, Lcom/android/server/pm/pkg/ArchiveState;->getArchiveTimeMillis()J

    move-result-wide v3

    invoke-interface {p1, v0, v2, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLongHex(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 2572
    invoke-virtual {p2}, Lcom/android/server/pm/pkg/ArchiveState;->getActivityInfos()Ljava/util/List;

    move-result-object v2

    invoke-interface {v2}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v2

    :goto_0
    invoke-interface {v2}, Ljava/util/Iterator;->hasNext()Z

    move-result v3

    if-eqz v3, :cond_3

    invoke-interface {v2}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;

    .line 2573
    .local v3, "activityInfo":Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;
    const-string v4, "archive-activity-info"

    invoke-interface {p1, v0, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2574
    invoke-virtual {v3}, Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;->getTitle()Ljava/lang/String;

    move-result-object v5

    const-string v6, "activity-title"

    invoke-interface {p1, v0, v6, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2575
    nop

    .line 2578
    invoke-virtual {v3}, Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;->getOriginalComponentName()Landroid/content/ComponentName;

    move-result-object v5

    invoke-virtual {v5}, Landroid/content/ComponentName;->flattenToString()Ljava/lang/String;

    move-result-object v5

    .line 2575
    const-string/jumbo v6, "original-component-name"

    invoke-interface {p1, v0, v6, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2579
    invoke-virtual {v3}, Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;->getIconBitmap()Ljava/nio/file/Path;

    move-result-object v5

    if-eqz v5, :cond_1

    .line 2580
    nop

    .line 2581
    invoke-virtual {v3}, Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;->getIconBitmap()Ljava/nio/file/Path;

    move-result-object v5

    invoke-interface {v5}, Ljava/nio/file/Path;->toAbsolutePath()Ljava/nio/file/Path;

    move-result-object v5

    invoke-interface {v5}, Ljava/nio/file/Path;->toString()Ljava/lang/String;

    move-result-object v5

    .line 2580
    const-string/jumbo v6, "icon-path"

    invoke-interface {p1, v0, v6, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2583
    :cond_1
    invoke-virtual {v3}, Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;->getMonochromeIconBitmap()Ljava/nio/file/Path;

    move-result-object v5

    if-eqz v5, :cond_2

    .line 2584
    nop

    .line 2585
    invoke-virtual {v3}, Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;->getMonochromeIconBitmap()Ljava/nio/file/Path;

    move-result-object v5

    invoke-interface {v5}, Ljava/nio/file/Path;->toAbsolutePath()Ljava/nio/file/Path;

    move-result-object v5

    invoke-interface {v5}, Ljava/nio/file/Path;->toString()Ljava/lang/String;

    move-result-object v5

    .line 2584
    const-string/jumbo v6, "monochrome-icon-path"

    invoke-interface {p1, v0, v6, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2587
    :cond_2
    invoke-interface {p1, v0, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2588
    .end local v3    # "activityInfo":Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;
    goto :goto_0

    .line 2589
    :cond_3
    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2590
    return-void
.end method

.method static writeDefaultApps(Lorg/xmlpull/v1/XmlSerializer;Ljava/lang/String;)V
    .locals 4
    .param p0, "serializer"    # Lorg/xmlpull/v1/XmlSerializer;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p1, "defaultBrowser"    # Ljava/lang/String;
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/lang/IllegalArgumentException;,
            Ljava/lang/IllegalStateException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 2310
    const/4 v0, 0x0

    const-string v1, "default-apps"

    invoke-interface {p0, v0, v1}, Lorg/xmlpull/v1/XmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2311
    invoke-static {p1}, Landroid/text/TextUtils;->isEmpty(Ljava/lang/CharSequence;)Z

    move-result v2

    if-nez v2, :cond_0

    .line 2312
    const-string v2, "default-browser"

    invoke-interface {p0, v0, v2}, Lorg/xmlpull/v1/XmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2313
    const-string/jumbo v3, "packageName"

    invoke-interface {p0, v0, v3, p1}, Lorg/xmlpull/v1/XmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2314
    invoke-interface {p0, v0, v2}, Lorg/xmlpull/v1/XmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2316
    :cond_0
    invoke-interface {p0, v0, v1}, Lorg/xmlpull/v1/XmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2317
    return-void
.end method

.method private writeIntToFile(Ljava/io/File;I)V
    .locals 3
    .param p1, "file"    # Ljava/io/File;
    .param p2, "value"    # I

    .line 3004
    :try_start_0
    invoke-virtual {p1}, Ljava/io/File;->getAbsolutePath()Ljava/lang/String;

    move-result-object v0

    .line 3005
    invoke-static {p2}, Ljava/lang/Integer;->toString(I)Ljava/lang/String;

    move-result-object v1

    sget-object v2, Ljava/nio/charset/StandardCharsets;->US_ASCII:Ljava/nio/charset/Charset;

    invoke-virtual {v1, v2}, Ljava/lang/String;->getBytes(Ljava/nio/charset/Charset;)[B

    move-result-object v1

    .line 3004
    invoke-static {v0, v1}, Landroid/os/FileUtils;->bytesToFile(Ljava/lang/String;[B)V
    :try_end_0
    .catch Ljava/io/IOException; {:try_start_0 .. :try_end_0} :catch_0

    .line 3008
    goto :goto_0

    .line 3006
    :catch_0
    move-exception v0

    .line 3007
    .local v0, "ignored":Ljava/io/IOException;
    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "Couldn\'t write "

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p2}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    const-string v2, " to "

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {p1}, Ljava/io/File;->getAbsolutePath()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    const-string v2, "PackageSettings"

    invoke-static {v2, v1}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 3009
    .end local v0    # "ignored":Ljava/io/IOException;
    :goto_0
    return-void
.end method

.method private writeKernelRemoveUserLPr(I)V
    .locals 3
    .param p1, "userId"    # I

    .line 2914
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMappingFilename:Ljava/io/File;

    if-nez v0, :cond_0

    return-void

    .line 2916
    :cond_0
    new-instance v0, Ljava/io/File;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mKernelMappingFilename:Ljava/io/File;

    const-string/jumbo v2, "remove_userid"

    invoke-direct {v0, v1, v2}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    .line 2919
    .local v0, "removeUserIdFile":Ljava/io/File;
    invoke-direct {p0, v0, p1}, Lcom/android/server/pm/Settings;->writeIntToFile(Ljava/io/File;I)V

    .line 2920
    return-void
.end method

.method private writeMimeGroupLPr(Lcom/android/modules/utils/TypedXmlSerializer;Ljava/util/Map;)V
    .locals 8
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/modules/utils/TypedXmlSerializer;",
            "Ljava/util/Map<",
            "Ljava/lang/String;",
            "Ljava/util/Set<",
            "Ljava/lang/String;",
            ">;>;)V"
        }
    .end annotation

    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;
        }
    .end annotation

    .line 4491
    .local p2, "mimeGroups":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Ljava/util/Set<Ljava/lang/String;>;>;"
    if-nez p2, :cond_0

    .line 4492
    return-void

    .line 4495
    :cond_0
    invoke-interface {p2}, Ljava/util/Map;->keySet()Ljava/util/Set;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v0

    :goto_0
    invoke-interface {v0}, Ljava/util/Iterator;->hasNext()Z

    move-result v1

    if-eqz v1, :cond_2

    invoke-interface {v0}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Ljava/lang/String;

    .line 4496
    .local v1, "mimeGroup":Ljava/lang/String;
    const/4 v2, 0x0

    const-string/jumbo v3, "mime-group"

    invoke-interface {p1, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 4497
    const-string/jumbo v4, "name"

    invoke-interface {p1, v2, v4, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 4499
    invoke-interface {p2, v1}, Ljava/util/Map;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Ljava/util/Set;

    invoke-interface {v4}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v4

    :goto_1
    invoke-interface {v4}, Ljava/util/Iterator;->hasNext()Z

    move-result v5

    if-eqz v5, :cond_1

    invoke-interface {v4}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Ljava/lang/String;

    .line 4500
    .local v5, "mimeType":Ljava/lang/String;
    const-string/jumbo v6, "mime-type"

    invoke-interface {p1, v2, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 4501
    const-string/jumbo v7, "value"

    invoke-interface {p1, v2, v7, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 4502
    invoke-interface {p1, v2, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 4503
    .end local v5    # "mimeType":Ljava/lang/String;
    goto :goto_1

    .line 4505
    :cond_1
    invoke-interface {p1, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 4506
    .end local v1    # "mimeGroup":Ljava/lang/String;
    goto :goto_0

    .line 4507
    :cond_2
    return-void
.end method

.method private writePackageListLPrInternal(I)V
    .locals 23
    .param p1, "creatingUserId"    # I

    .line 3035
    move-object/from16 v1, p0

    move/from16 v2, p1

    const-string v3, "PackageSettings"

    const-string v0, " "

    invoke-static {}, Lcom/android/server/pm/UserManagerService;->getInstance()Lcom/android/server/pm/UserManagerService;

    move-result-object v4

    const/4 v5, 0x1

    invoke-static {v4, v5}, Lcom/android/server/pm/Settings;->getActiveUsers(Lcom/android/server/pm/UserManagerService;Z)Ljava/util/List;

    move-result-object v4

    .line 3036
    .local v4, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    invoke-interface {v4}, Ljava/util/List;->size()I

    move-result v5

    new-array v5, v5, [I

    .line 3037
    .local v5, "userIds":[I
    const/4 v6, 0x0

    .local v6, "i":I
    :goto_0
    array-length v7, v5

    if-ge v6, v7, :cond_0

    .line 3038
    invoke-interface {v4, v6}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v7

    check-cast v7, Landroid/content/pm/UserInfo;

    iget v7, v7, Landroid/content/pm/UserInfo;->id:I

    aput v7, v5, v6

    .line 3037
    add-int/lit8 v6, v6, 0x1

    goto :goto_0

    :cond_0
    nop

    .line 3040
    .end local v6    # "i":I
    const/4 v6, -0x1

    if-eq v2, v6, :cond_1

    .line 3041
    invoke-static {v5, v2}, Lcom/android/internal/util/ArrayUtils;->appendInt([II)[I

    move-result-object v5

    .line 3045
    :cond_1
    new-instance v6, Ljava/io/File;

    new-instance v7, Ljava/lang/StringBuilder;

    invoke-direct {v7}, Ljava/lang/StringBuilder;-><init>()V

    iget-object v8, v1, Lcom/android/server/pm/Settings;->mPackageListFilename:Ljava/io/File;

    invoke-virtual {v8}, Ljava/io/File;->getAbsolutePath()Ljava/lang/String;

    move-result-object v8

    invoke-virtual {v7, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v8, ".tmp"

    invoke-virtual {v7, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v7}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v7

    invoke-direct {v6, v7}, Ljava/io/File;-><init>(Ljava/lang/String;)V

    .line 3046
    .local v6, "tempFile":Ljava/io/File;
    new-instance v7, Lcom/android/internal/util/JournaledFile;

    iget-object v8, v1, Lcom/android/server/pm/Settings;->mPackageListFilename:Ljava/io/File;

    invoke-direct {v7, v8, v6}, Lcom/android/internal/util/JournaledFile;-><init>(Ljava/io/File;Ljava/io/File;)V

    .line 3048
    .local v7, "journal":Lcom/android/internal/util/JournaledFile;
    invoke-virtual {v7}, Lcom/android/internal/util/JournaledFile;->chooseForWrite()Ljava/io/File;

    move-result-object v8

    .line 3050
    .local v8, "writeTarget":Ljava/io/File;
    const/4 v9, 0x0

    .line 3052
    .local v9, "writer":Ljava/io/BufferedWriter;
    :try_start_0
    new-instance v10, Ljava/io/FileOutputStream;

    invoke-direct {v10, v8}, Ljava/io/FileOutputStream;-><init>(Ljava/io/File;)V

    .line 3053
    .local v10, "fstr":Ljava/io/FileOutputStream;
    new-instance v11, Ljava/io/BufferedWriter;

    new-instance v12, Ljava/io/OutputStreamWriter;

    invoke-static {}, Ljava/nio/charset/Charset;->defaultCharset()Ljava/nio/charset/Charset;

    move-result-object v13

    invoke-direct {v12, v10, v13}, Ljava/io/OutputStreamWriter;-><init>(Ljava/io/OutputStream;Ljava/nio/charset/Charset;)V

    invoke-direct {v11, v12}, Ljava/io/BufferedWriter;-><init>(Ljava/io/Writer;)V

    move-object v9, v11

    .line 3054
    invoke-virtual {v10}, Ljava/io/FileOutputStream;->getFD()Ljava/io/FileDescriptor;

    move-result-object v11

    const/16 v12, 0x3e8

    const/16 v13, 0x408

    const/16 v14, 0x1a0

    invoke-static {v11, v14, v12, v13}, Landroid/os/FileUtils;->setPermissions(Ljava/io/FileDescriptor;III)I

    .line 3056
    new-instance v11, Ljava/lang/StringBuilder;

    invoke-direct {v11}, Ljava/lang/StringBuilder;-><init>()V

    .line 3057
    .local v11, "sb":Ljava/lang/StringBuilder;
    iget-object v12, v1, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v12}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v12

    invoke-interface {v12}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v12

    :cond_2
    :goto_1
    invoke-interface {v12}, Ljava/util/Iterator;->hasNext()Z

    move-result v13

    if-eqz v13, :cond_10

    invoke-interface {v12}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v13

    check-cast v13, Lcom/android/server/pm/PackageSetting;

    .line 3058
    .local v13, "ps":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v14
    :try_end_0
    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_0} :catch_3

    if-nez v14, :cond_3

    .line 3059
    :try_start_1
    const-string v14, "android"

    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v15

    invoke-virtual {v14, v15}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v14

    if-nez v14, :cond_2

    .line 3060
    new-instance v14, Ljava/lang/StringBuilder;

    invoke-direct {v14}, Ljava/lang/StringBuilder;-><init>()V

    const-string v15, "Skipping "

    invoke-virtual {v14, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v14, v13}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v15, " due to missing metadata"

    invoke-virtual {v14, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v14}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v14

    invoke-static {v3, v14}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
    :try_end_1
    .catch Ljava/lang/Exception; {:try_start_1 .. :try_end_1} :catch_0

    goto :goto_1

    .line 3148
    .end local v10    # "fstr":Ljava/io/FileOutputStream;
    .end local v11    # "sb":Ljava/lang/StringBuilder;
    .end local v13    # "ps":Lcom/android/server/pm/PackageSetting;
    :catch_0
    move-exception v0

    move-object/from16 v20, v4

    move-object/from16 v22, v5

    goto/16 :goto_9

    .line 3064
    .restart local v10    # "fstr":Ljava/io/FileOutputStream;
    .restart local v11    # "sb":Ljava/lang/StringBuilder;
    .restart local v13    # "ps":Lcom/android/server/pm/PackageSetting;
    :cond_3
    :try_start_2
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v14

    invoke-interface {v14}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->isApex()Z

    move-result v14

    if-eqz v14, :cond_4

    .line 3067
    goto :goto_1

    .line 3071
    :cond_4
    const/4 v14, 0x0

    invoke-static {v13, v14}, Lcom/android/server/pm/parsing/PackageInfoUtils;->getDataDir(Lcom/android/server/pm/pkg/PackageStateInternal;I)Ljava/io/File;

    move-result-object v15
    :try_end_2
    .catch Ljava/lang/Exception; {:try_start_2 .. :try_end_2} :catch_3

    .line 3072
    .local v15, "dataDir":Ljava/io/File;
    if-nez v15, :cond_5

    :try_start_3
    const-string/jumbo v16, "null"
    :try_end_3
    .catch Ljava/lang/Exception; {:try_start_3 .. :try_end_3} :catch_0

    goto :goto_2

    :cond_5
    :try_start_4
    invoke-virtual {v15}, Ljava/io/File;->getAbsolutePath()Ljava/lang/String;

    move-result-object v16

    :goto_2
    move-object/from16 v17, v16

    .line 3074
    .local v17, "dataPath":Ljava/lang/String;
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v16

    invoke-interface/range {v16 .. v16}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->isDebuggable()Z

    move-result v16

    .line 3075
    .local v16, "isDebug":Z
    new-instance v18, Landroid/util/IntArray;

    invoke-direct/range {v18 .. v18}, Landroid/util/IntArray;-><init>()V

    move-object/from16 v19, v18

    .line 3076
    .local v19, "gids":Landroid/util/IntArray;
    array-length v14, v5

    const/4 v2, 0x0

    :goto_3
    if-ge v2, v14, :cond_6

    aget v20, v5, v2
    :try_end_4
    .catch Ljava/lang/Exception; {:try_start_4 .. :try_end_4} :catch_3

    move/from16 v21, v20

    .line 3077
    .local v21, "userId":I
    move-object/from16 v20, v4

    .end local v4    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .local v20, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    :try_start_5
    iget-object v4, v1, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    .line 3078
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v1
    :try_end_5
    .catch Ljava/lang/Exception; {:try_start_5 .. :try_end_5} :catch_2

    .line 3077
    move-object/from16 v22, v5

    move/from16 v5, v21

    .end local v21    # "userId":I
    .local v5, "userId":I
    .local v22, "userIds":[I
    :try_start_6
    invoke-static {v5, v1}, Landroid/os/UserHandle;->getUid(II)I

    move-result v1

    invoke-interface {v4, v1}, Lcom/android/server/pm/permission/LegacyPermissionDataProvider;->getGidsForUid(I)[I

    move-result-object v1

    move-object/from16 v4, v19

    .end local v19    # "gids":Landroid/util/IntArray;
    .local v4, "gids":Landroid/util/IntArray;
    invoke-virtual {v4, v1}, Landroid/util/IntArray;->addAll([I)V

    .line 3076
    .end local v5    # "userId":I
    add-int/lit8 v2, v2, 0x1

    move-object/from16 v1, p0

    move-object/from16 v19, v4

    move-object/from16 v4, v20

    move-object/from16 v5, v22

    goto :goto_3

    .line 3148
    .end local v4    # "gids":Landroid/util/IntArray;
    .end local v10    # "fstr":Ljava/io/FileOutputStream;
    .end local v11    # "sb":Ljava/lang/StringBuilder;
    .end local v13    # "ps":Lcom/android/server/pm/PackageSetting;
    .end local v15    # "dataDir":Ljava/io/File;
    .end local v16    # "isDebug":Z
    .end local v17    # "dataPath":Ljava/lang/String;
    :catch_1
    move-exception v0

    goto/16 :goto_9

    .end local v22    # "userIds":[I
    .local v5, "userIds":[I
    :catch_2
    move-exception v0

    move-object/from16 v22, v5

    .end local v5    # "userIds":[I
    .restart local v22    # "userIds":[I
    goto/16 :goto_9

    .end local v20    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .end local v22    # "userIds":[I
    .local v4, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .restart local v5    # "userIds":[I
    :catch_3
    move-exception v0

    move-object/from16 v20, v4

    move-object/from16 v22, v5

    .end local v4    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .end local v5    # "userIds":[I
    .restart local v20    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .restart local v22    # "userIds":[I
    goto/16 :goto_9

    .line 3082
    .end local v20    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .end local v22    # "userIds":[I
    .restart local v4    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .restart local v5    # "userIds":[I
    .restart local v10    # "fstr":Ljava/io/FileOutputStream;
    .restart local v11    # "sb":Ljava/lang/StringBuilder;
    .restart local v13    # "ps":Lcom/android/server/pm/PackageSetting;
    .restart local v15    # "dataDir":Ljava/io/File;
    .restart local v16    # "isDebug":Z
    .restart local v17    # "dataPath":Ljava/lang/String;
    .restart local v19    # "gids":Landroid/util/IntArray;
    :cond_6
    move-object/from16 v20, v4

    move-object/from16 v22, v5

    move-object/from16 v4, v19

    .end local v5    # "userIds":[I
    .end local v19    # "gids":Landroid/util/IntArray;
    .local v4, "gids":Landroid/util/IntArray;
    .restart local v20    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .restart local v22    # "userIds":[I
    const/16 v1, 0x20

    move-object/from16 v2, v17

    .end local v17    # "dataPath":Ljava/lang/String;
    .local v2, "dataPath":Ljava/lang/String;
    invoke-virtual {v2, v1}, Ljava/lang/String;->indexOf(I)I

    move-result v1

    if-ltz v1, :cond_7

    .line 3083
    move-object/from16 v1, p0

    move/from16 v2, p1

    move-object/from16 v4, v20

    move-object/from16 v5, v22

    goto/16 :goto_1

    .line 3105
    :cond_7
    const/4 v1, 0x0

    invoke-virtual {v11, v1}, Ljava/lang/StringBuilder;->setLength(I)V

    .line 3106
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v1

    invoke-interface {v1}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getPackageName()Ljava/lang/String;

    move-result-object v1

    invoke-virtual {v11, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3107
    invoke-virtual {v11, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3108
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v1

    invoke-interface {v1}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getUid()I

    move-result v1

    invoke-virtual {v11, v1}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    .line 3109
    nop

    nop

    if-eqz v16, :cond_8

    const-string v1, " 1 "

    goto :goto_4

    :cond_8
    const-string v1, " 0 "

    :goto_4
    invoke-virtual {v11, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3110
    invoke-virtual {v11, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3111
    invoke-virtual {v11, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3112
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getSeInfo()Ljava/lang/String;

    move-result-object v1

    invoke-virtual {v11, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3113
    invoke-virtual {v11, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3114
    invoke-virtual {v4}, Landroid/util/IntArray;->size()I

    move-result v1

    .line 3115
    .local v1, "gidsSize":I
    invoke-virtual {v4}, Landroid/util/IntArray;->size()I

    move-result v5

    if-lez v5, :cond_a

    .line 3116
    const/4 v5, 0x0

    invoke-virtual {v4, v5}, Landroid/util/IntArray;->get(I)I

    move-result v5

    invoke-virtual {v11, v5}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    .line 3117
    const/4 v5, 0x1

    .local v5, "i":I
    :goto_5
    if-ge v5, v1, :cond_9

    .line 3118
    const-string v14, ","

    invoke-virtual {v11, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3119
    invoke-virtual {v4, v5}, Landroid/util/IntArray;->get(I)I

    move-result v14

    invoke-virtual {v11, v14}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    .line 3117
    add-int/lit8 v5, v5, 0x1

    goto :goto_5

    :cond_9
    nop

    .end local v5    # "i":I
    goto :goto_6

    .line 3122
    :cond_a
    const-string/jumbo v5, "none"

    invoke-virtual {v11, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3124
    :goto_6
    invoke-virtual {v11, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3125
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v5

    invoke-interface {v5}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->isProfileableByShell()Z

    move-result v5
    :try_end_6
    .catch Ljava/lang/Exception; {:try_start_6 .. :try_end_6} :catch_1

    const-string v14, "0"

    const-string v17, "1"

    if-eqz v5, :cond_b

    move-object/from16 v5, v17

    goto :goto_7

    :cond_b
    move-object v5, v14

    :goto_7
    :try_start_7
    invoke-virtual {v11, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3126
    invoke-virtual {v11, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3127
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v5

    move/from16 v19, v1

    move-object/from16 v18, v2

    .end local v1    # "gidsSize":I
    .end local v2    # "dataPath":Ljava/lang/String;
    .local v18, "dataPath":Ljava/lang/String;
    .local v19, "gidsSize":I
    invoke-interface {v5}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getLongVersionCode()J

    move-result-wide v1

    invoke-virtual {v11, v1, v2}, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;

    .line 3128
    invoke-virtual {v11, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3129
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v1

    invoke-interface {v1}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->isProfileable()Z

    move-result v1

    if-eqz v1, :cond_c

    move-object/from16 v14, v17

    :cond_c
    invoke-virtual {v11, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3130
    invoke-virtual {v11, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3131
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->isSystem()Z

    move-result v1

    if-eqz v1, :cond_d

    .line 3132
    const-string v1, "@system"

    invoke-virtual {v11, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    goto :goto_8

    .line 3133
    :cond_d
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->isProduct()Z

    move-result v1

    if-eqz v1, :cond_e

    .line 3134
    const-string v1, "@product"

    invoke-virtual {v11, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    goto :goto_8

    .line 3135
    :cond_e
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v1

    iget-object v1, v1, Lcom/android/server/pm/InstallSource;->mInstallerPackageName:Ljava/lang/String;

    if-eqz v1, :cond_f

    .line 3136
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v1

    iget-object v1, v1, Lcom/android/server/pm/InstallSource;->mInstallerPackageName:Ljava/lang/String;

    invoke-virtual {v1}, Ljava/lang/String;->isEmpty()Z

    move-result v1

    if-nez v1, :cond_f

    .line 3137
    invoke-virtual {v13}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v1

    iget-object v1, v1, Lcom/android/server/pm/InstallSource;->mInstallerPackageName:Ljava/lang/String;

    invoke-virtual {v11, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    goto :goto_8

    .line 3139
    :cond_f
    const-string v1, "@null"

    invoke-virtual {v11, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3141
    :goto_8
    const-string v1, "\n"

    invoke-virtual {v11, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3142
    invoke-virtual {v9, v11}, Ljava/io/BufferedWriter;->append(Ljava/lang/CharSequence;)Ljava/io/Writer;

    .line 3143
    move-object/from16 v1, p0

    move/from16 v2, p1

    move-object/from16 v4, v20

    move-object/from16 v5, v22

    .end local v4    # "gids":Landroid/util/IntArray;
    .end local v13    # "ps":Lcom/android/server/pm/PackageSetting;
    .end local v15    # "dataDir":Ljava/io/File;
    .end local v16    # "isDebug":Z
    .end local v18    # "dataPath":Ljava/lang/String;
    .end local v19    # "gidsSize":I
    goto/16 :goto_1

    .line 3144
    .end local v20    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .end local v22    # "userIds":[I
    .local v4, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .local v5, "userIds":[I
    :cond_10
    move-object/from16 v20, v4

    move-object/from16 v22, v5

    .end local v4    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .end local v5    # "userIds":[I
    .restart local v20    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .restart local v22    # "userIds":[I
    invoke-virtual {v9}, Ljava/io/BufferedWriter;->flush()V

    .line 3145
    invoke-static {v10}, Landroid/os/FileUtils;->sync(Ljava/io/FileOutputStream;)Z

    .line 3146
    invoke-virtual {v9}, Ljava/io/BufferedWriter;->close()V

    .line 3147
    invoke-virtual {v7}, Lcom/android/internal/util/JournaledFile;->commit()V
    :try_end_7
    .catch Ljava/lang/Exception; {:try_start_7 .. :try_end_7} :catch_1

    .line 3152
    .end local v11    # "sb":Ljava/lang/StringBuilder;
    goto :goto_a

    .line 3148
    .end local v10    # "fstr":Ljava/io/FileOutputStream;
    :goto_9
    nop

    .line 3149
    .local v0, "e":Ljava/lang/Exception;
    const-string v1, "Failed to write packages.list"

    invoke-static {v3, v1, v0}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I

    .line 3150
    invoke-static {v9}, Llibcore/io/IoUtils;->closeQuietly(Ljava/lang/AutoCloseable;)V

    .line 3151
    invoke-virtual {v7}, Lcom/android/internal/util/JournaledFile;->rollback()V

    .line 3153
    .end local v0    # "e":Ljava/lang/Exception;
    :goto_a
    return-void
.end method


# virtual methods
.method addInstallerPackageNames(Lcom/android/server/pm/InstallSource;)V
    .locals 2
    .param p1, "installSource"    # Lcom/android/server/pm/InstallSource;

    .line 4444
    iget-object v0, p1, Lcom/android/server/pm/InstallSource;->mInstallerPackageName:Ljava/lang/String;

    if-eqz v0, :cond_0

    .line 4445
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    iget-object v1, p1, Lcom/android/server/pm/InstallSource;->mInstallerPackageName:Ljava/lang/String;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArraySet;->add(Ljava/lang/Object;)Z

    .line 4447
    :cond_0
    iget-object v0, p1, Lcom/android/server/pm/InstallSource;->mInitiatingPackageName:Ljava/lang/String;

    if-eqz v0, :cond_1

    .line 4448
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    iget-object v1, p1, Lcom/android/server/pm/InstallSource;->mInitiatingPackageName:Ljava/lang/String;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArraySet;->add(Ljava/lang/Object;)Z

    .line 4450
    :cond_1
    iget-object v0, p1, Lcom/android/server/pm/InstallSource;->mOriginatingPackageName:Ljava/lang/String;

    if-eqz v0, :cond_2

    .line 4451
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    iget-object v1, p1, Lcom/android/server/pm/InstallSource;->mOriginatingPackageName:Ljava/lang/String;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArraySet;->add(Ljava/lang/Object;)Z

    .line 4453
    :cond_2
    return-void
.end method

.method addPackageLPw(Ljava/lang/String;Ljava/lang/String;Ljava/io/File;IIILjava/util/UUID;Z)Lcom/android/server/pm/PackageSetting;
    .locals 13
    .param p1, "name"    # Ljava/lang/String;
    .param p2, "realName"    # Ljava/lang/String;
    .param p3, "codePath"    # Ljava/io/File;
    .param p4, "uid"    # I
    .param p5, "pkgFlags"    # I
    .param p6, "pkgPrivateFlags"    # I
    .param p7, "domainSetId"    # Ljava/util/UUID;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p8, "isSdkLibrary"    # Z

    .line 986
    move-object v0, p0

    move-object v8, p1

    move/from16 v9, p4

    iget-object v1, v0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v1

    move-object v10, v1

    check-cast v10, Lcom/android/server/pm/PackageSetting;

    .line 987
    .local v10, "p":Lcom/android/server/pm/PackageSetting;
    const/4 v11, 0x0

    if-eqz v10, :cond_1

    .line 988
    invoke-virtual {v10}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v1

    if-ne v1, v9, :cond_0

    .line 989
    return-object v10

    .line 991
    :cond_0
    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "Adding duplicate package, keeping first: "

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    const/4 v2, 0x6

    invoke-static {v2, v1}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 993
    return-object v11

    .line 995
    :cond_1
    new-instance v12, Lcom/android/server/pm/PackageSetting;

    move-object v1, v12

    move-object v2, p1

    move-object v3, p2

    move-object/from16 v4, p3

    move/from16 v5, p5

    move/from16 v6, p6

    move-object/from16 v7, p7

    invoke-direct/range {v1 .. v7}, Lcom/android/server/pm/PackageSetting;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/io/File;IILjava/util/UUID;)V

    .line 996
    invoke-virtual {v12, v9}, Lcom/android/server/pm/PackageSetting;->setAppId(I)Lcom/android/server/pm/PackageSetting;

    move-result-object v1

    .line 997
    .end local v10    # "p":Lcom/android/server/pm/PackageSetting;
    .local v1, "p":Lcom/android/server/pm/PackageSetting;
    const/4 v2, -0x1

    if-ne v9, v2, :cond_2

    if-eqz p8, :cond_2

    invoke-static {}, Lcom/android/internal/hidden_from_bootclasspath/android/content/pm/Flags;->disallowSdkLibsToBeApps()Z

    move-result v2

    if-nez v2, :cond_3

    :cond_2
    iget-object v2, v0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    .line 998
    invoke-virtual {v2, v9, v1, p1}, Lcom/android/server/pm/AppIdSettingMap;->registerExistingAppId(ILcom/android/server/pm/SettingBase;Ljava/lang/Object;)Z

    move-result v2

    if-eqz v2, :cond_4

    .line 999
    :cond_3
    iget-object v2, v0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2, p1, v1}, Lcom/android/server/utils/WatchedArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 1000
    return-object v1

    .line 1002
    :cond_4
    return-object v11
.end method

.method addPackageSettingLPw(Lcom/android/server/pm/PackageSetting;Lcom/android/server/pm/SharedUserSetting;)V
    .locals 6
    .param p1, "p"    # Lcom/android/server/pm/PackageSetting;
    .param p2, "sharedUser"    # Lcom/android/server/pm/SharedUserSetting;
    .annotation build Lcom/android/internal/annotations/VisibleForTesting;
        visibility = .enum Lcom/android/internal/annotations/VisibleForTesting$Visibility;->PRIVATE:Lcom/android/internal/annotations/VisibleForTesting$Visibility;
    .end annotation

    .line 1430
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v1

    invoke-virtual {v0, v1, p1}, Lcom/android/server/utils/WatchedArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 1431
    if-eqz p2, :cond_2

    .line 1432
    invoke-virtual {p0, p1}, Lcom/android/server/pm/Settings;->getSharedUserSettingLPr(Lcom/android/server/pm/PackageSetting;)Lcom/android/server/pm/SharedUserSetting;

    move-result-object v0

    .line 1433
    .local v0, "existingSharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    const-string v1, "; I am not changing its files so it will probably fail!"

    const-string v2, "Package "

    const/4 v3, 0x6

    if-eqz v0, :cond_0

    if-eq v0, p2, :cond_0

    .line 1434
    new-instance v4, Ljava/lang/StringBuilder;

    invoke-direct {v4}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1435
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v2, " was user "

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v2, " but is now "

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v4, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    .line 1434
    invoke-static {v3, v1}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 1438
    invoke-virtual {v0, p1}, Lcom/android/server/pm/SharedUserSetting;->removePackage(Lcom/android/server/pm/PackageSetting;)Z

    goto :goto_0

    .line 1439
    :cond_0
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v4

    if-eqz v4, :cond_1

    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v4

    iget v5, p2, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    if-eq v4, v5, :cond_1

    .line 1440
    new-instance v4, Ljava/lang/StringBuilder;

    invoke-direct {v4}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1441
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v2, " was app id "

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v2

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    const-string v2, " but is now user "

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v2, " with app id "

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget v2, p2, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v4, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    .line 1440
    invoke-static {v3, v1}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 1447
    :cond_1
    :goto_0
    invoke-virtual {p2, p1}, Lcom/android/server/pm/SharedUserSetting;->addPackage(Lcom/android/server/pm/PackageSetting;)V

    .line 1448
    iget v1, p2, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-virtual {p1, v1}, Lcom/android/server/pm/PackageSetting;->setSharedUserAppId(I)Lcom/android/server/pm/PackageSetting;

    .line 1449
    iget v1, p2, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-virtual {p1, v1}, Lcom/android/server/pm/PackageSetting;->setAppId(I)Lcom/android/server/pm/PackageSetting;

    .line 1454
    .end local v0    # "existingSharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    :cond_2
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v0

    invoke-virtual {p0, v0}, Lcom/android/server/pm/Settings;->getSettingLPr(I)Lcom/android/server/pm/SettingBase;

    move-result-object v0

    .line 1455
    .local v0, "appIdPs":Ljava/lang/Object;
    if-nez p2, :cond_3

    .line 1456
    if-eqz v0, :cond_4

    if-eq v0, p1, :cond_4

    .line 1457
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v2

    invoke-virtual {v1, v2, p1}, Lcom/android/server/pm/AppIdSettingMap;->replaceSetting(ILcom/android/server/pm/SettingBase;)V

    goto :goto_1

    .line 1460
    :cond_3
    if-eqz v0, :cond_4

    if-eq v0, p2, :cond_4

    .line 1461
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v2

    invoke-virtual {v1, v2, p2}, Lcom/android/server/pm/AppIdSettingMap;->replaceSetting(ILcom/android/server/pm/SettingBase;)V

    .line 1464
    :cond_4
    :goto_1
    return-void
.end method

.method addRenamedPackageLPw(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
    .locals 1
    .param p1, "pkgName"    # Ljava/lang/String;
    .param p2, "origPkgName"    # Ljava/lang/String;

    .line 857
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1, p2}, Lcom/android/server/utils/WatchedArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Ljava/lang/String;

    return-object v0
.end method

.method addSharedUserLPw(Ljava/lang/String;III)Lcom/android/server/pm/SharedUserSetting;
    .locals 4
    .param p1, "name"    # Ljava/lang/String;
    .param p2, "uid"    # I
    .param p3, "pkgFlags"    # I
    .param p4, "pkgPrivateFlags"    # I

    .line 1006
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/SharedUserSetting;

    .line 1007
    .local v0, "s":Lcom/android/server/pm/SharedUserSetting;
    const/4 v1, 0x0

    if-eqz v0, :cond_1

    .line 1008
    iget v2, v0, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    if-ne v2, p2, :cond_0

    .line 1009
    return-object v0

    .line 1011
    :cond_0
    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    const-string v3, "Adding duplicate shared user, keeping first: "

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    const/4 v3, 0x6

    invoke-static {v3, v2}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 1013
    return-object v1

    .line 1015
    :cond_1
    new-instance v2, Lcom/android/server/pm/SharedUserSetting;

    invoke-direct {v2, p1, p3, p4}, Lcom/android/server/pm/SharedUserSetting;-><init>(Ljava/lang/String;II)V

    move-object v0, v2

    .line 1016
    iput p2, v0, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    .line 1017
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    invoke-virtual {v2, p2, v0, p1}, Lcom/android/server/pm/AppIdSettingMap;->registerExistingAppId(ILcom/android/server/pm/SettingBase;Ljava/lang/Object;)Z

    move-result v2

    if-eqz v2, :cond_2

    .line 1018
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, p1, v0}, Lcom/android/server/utils/WatchedArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 1019
    return-object v0

    .line 1021
    :cond_2
    return-object v1
.end method

.method applyDefaultPreferredAppsLPw(I)V
    .locals 21
    .param p1, "userId"    # I

    .line 3611
    move-object/from16 v1, p0

    move/from16 v2, p1

    const-string v3, "Error reading apps file "

    .line 3612
    const-class v0, Landroid/content/pm/PackageManagerInternal;

    invoke-static {v0}, Lcom/android/server/LocalServices;->getService(Ljava/lang/Class;)Ljava/lang/Object;

    move-result-object v0

    move-object v4, v0

    check-cast v4, Landroid/content/pm/PackageManagerInternal;

    .line 3613
    .local v4, "pmInternal":Landroid/content/pm/PackageManagerInternal;
    iget-object v0, v1, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v0

    :goto_0
    invoke-interface {v0}, Ljava/util/Iterator;->hasNext()Z

    move-result v5

    const/4 v6, 0x1

    if-eqz v5, :cond_1

    invoke-interface {v0}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Lcom/android/server/pm/PackageSetting;

    .line 3614
    .local v5, "ps":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v5}, Lcom/android/server/pm/SettingBase;->getFlags()I

    move-result v7

    and-int/2addr v6, v7

    if-eqz v6, :cond_0

    invoke-virtual {v5}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v6

    if-eqz v6, :cond_0

    .line 3615
    invoke-virtual {v5}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v6

    invoke-interface {v6}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getPreferredActivityFilters()Ljava/util/List;

    move-result-object v6

    invoke-interface {v6}, Ljava/util/List;->isEmpty()Z

    move-result v6

    if-nez v6, :cond_0

    .line 3616
    nop

    .line 3617
    invoke-virtual {v5}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v6

    invoke-interface {v6}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getPreferredActivityFilters()Ljava/util/List;

    move-result-object v6

    .line 3618
    .local v6, "intents":Ljava/util/List;, "Ljava/util/List<Landroid/util/Pair<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedIntentInfo;>;>;"
    const/4 v7, 0x0

    .local v7, "i":I
    :goto_1
    invoke-interface {v6}, Ljava/util/List;->size()I

    move-result v8

    if-ge v7, v8, :cond_0

    .line 3619
    invoke-interface {v6, v7}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v8

    check-cast v8, Landroid/util/Pair;

    .line 3620
    .local v8, "pair":Landroid/util/Pair;, "Landroid/util/Pair<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedIntentInfo;>;"
    iget-object v9, v8, Landroid/util/Pair;->second:Ljava/lang/Object;

    check-cast v9, Lcom/android/internal/pm/pkg/component/ParsedIntentInfo;

    .line 3621
    invoke-interface {v9}, Lcom/android/internal/pm/pkg/component/ParsedIntentInfo;->getIntentFilter()Landroid/content/IntentFilter;

    move-result-object v9

    new-instance v10, Landroid/content/ComponentName;

    .line 3622
    invoke-virtual {v5}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v11

    iget-object v12, v8, Landroid/util/Pair;->first:Ljava/lang/Object;

    check-cast v12, Ljava/lang/String;

    invoke-direct {v10, v11, v12}, Landroid/content/ComponentName;-><init>(Ljava/lang/String;Ljava/lang/String;)V

    .line 3620
    invoke-direct {v1, v4, v9, v10, v2}, Lcom/android/server/pm/Settings;->applyDefaultPreferredActivityLPw(Landroid/content/pm/PackageManagerInternal;Landroid/content/IntentFilter;Landroid/content/ComponentName;I)V

    .line 3618
    .end local v8    # "pair":Landroid/util/Pair;, "Landroid/util/Pair<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedIntentInfo;>;"
    add-int/lit8 v7, v7, 0x1

    goto :goto_1

    .line 3625
    .end local v5    # "ps":Lcom/android/server/pm/PackageSetting;
    .end local v6    # "intents":Ljava/util/List;, "Ljava/util/List<Landroid/util/Pair<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedIntentInfo;>;>;"
    .end local v7    # "i":I
    :cond_0
    goto :goto_0

    .line 3628
    :cond_1
    sget-object v0, Lcom/android/server/pm/PackageManagerService;->SYSTEM_PARTITIONS:Ljava/util/List;

    invoke-interface {v0}, Ljava/util/List;->size()I

    move-result v5

    .line 3629
    .local v5, "size":I
    const/4 v0, 0x0

    move v7, v0

    .local v7, "index":I
    :goto_2
    if-ge v7, v5, :cond_d

    .line 3630
    sget-object v0, Lcom/android/server/pm/PackageManagerService;->SYSTEM_PARTITIONS:Ljava/util/List;

    invoke-interface {v0, v7}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v0

    move-object v8, v0

    check-cast v8, Lcom/android/server/pm/ScanPartition;

    .line 3632
    .local v8, "partition":Lcom/android/server/pm/ScanPartition;
    new-instance v0, Ljava/io/File;

    invoke-virtual {v8}, Landroid/content/pm/PackagePartitions$SystemPartition;->getFolder()Ljava/io/File;

    move-result-object v9

    const-string v10, "etc/preferred-apps"

    invoke-direct {v0, v9, v10}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    move-object v9, v0

    .line 3633
    .local v9, "preferredDir":Ljava/io/File;
    invoke-virtual {v9}, Ljava/io/File;->exists()Z

    move-result v0

    if-eqz v0, :cond_c

    invoke-virtual {v9}, Ljava/io/File;->isDirectory()Z

    move-result v0

    if-nez v0, :cond_2

    .line 3634
    move-object/from16 v18, v4

    move/from16 v20, v5

    goto/16 :goto_b

    .line 3637
    :cond_2
    invoke-virtual {v9}, Ljava/io/File;->canRead()Z

    move-result v0

    const-string v10, " cannot be read"

    const-string v11, "PackageSettings"

    if-nez v0, :cond_3

    .line 3638
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string v12, "Directory "

    invoke-virtual {v0, v12}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v10}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v11, v0}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 3639
    move-object/from16 v18, v4

    move/from16 v20, v5

    goto/16 :goto_b

    .line 3643
    :cond_3
    invoke-virtual {v9}, Ljava/io/File;->listFiles()[Ljava/io/File;

    move-result-object v12

    .line 3644
    .local v12, "files":[Ljava/io/File;
    invoke-static {v12}, Lcom/android/internal/util/ArrayUtils;->isEmpty([Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_4

    .line 3645
    move-object/from16 v18, v4

    move/from16 v20, v5

    goto/16 :goto_b

    .line 3648
    :cond_4
    array-length v13, v12

    const/4 v0, 0x0

    move v14, v0

    :goto_3
    if-ge v14, v13, :cond_b

    aget-object v15, v12, v14

    .line 3649
    .local v15, "f":Ljava/io/File;
    invoke-virtual {v15}, Ljava/io/File;->getPath()Ljava/lang/String;

    move-result-object v0

    const-string v6, ".xml"

    invoke-virtual {v0, v6}, Ljava/lang/String;->endsWith(Ljava/lang/String;)Z

    move-result v0

    if-nez v0, :cond_5

    .line 3650
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string v6, "Non-xml file "

    invoke-virtual {v0, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v6, " in "

    invoke-virtual {v0, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v6, " directory, ignoring"

    invoke-virtual {v0, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v11, v0}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I

    .line 3652
    move-object/from16 v18, v4

    move/from16 v20, v5

    goto/16 :goto_a

    .line 3654
    :cond_5
    invoke-virtual {v15}, Ljava/io/File;->canRead()Z

    move-result v0

    const-string v6, "Preferred apps file "

    if-nez v0, :cond_6

    .line 3655
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v0, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v10}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v11, v0}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 3656
    move-object/from16 v18, v4

    move/from16 v20, v5

    goto/16 :goto_a

    .line 3662
    :cond_6
    :try_start_0
    new-instance v0, Ljava/io/FileInputStream;

    invoke-direct {v0, v15}, Ljava/io/FileInputStream;-><init>(Ljava/io/File;)V
    :try_end_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_0 .. :try_end_0} :catch_3
    .catch Ljava/io/IOException; {:try_start_0 .. :try_end_0} :catch_2

    move-object/from16 v17, v0

    .line 3663
    .local v17, "str":Ljava/io/InputStream;
    :try_start_1
    invoke-static/range {v17 .. v17}, Landroid/util/Xml;->resolvePullParser(Ljava/io/InputStream;)Lcom/android/modules/utils/TypedXmlPullParser;

    move-result-object v0
    :try_end_1
    .catchall {:try_start_1 .. :try_end_1} :catchall_2

    .line 3666
    .local v0, "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    :goto_4
    move-object/from16 v18, v4

    .end local v4    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .local v18, "pmInternal":Landroid/content/pm/PackageManagerInternal;
    :try_start_2
    invoke-interface {v0}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v4
    :try_end_2
    .catchall {:try_start_2 .. :try_end_2} :catchall_1

    move/from16 v19, v4

    move/from16 v20, v5

    .end local v5    # "size":I
    .local v19, "type":I
    .local v20, "size":I
    const/4 v5, 0x2

    if-eq v4, v5, :cond_7

    move/from16 v5, v19

    const/4 v4, 0x1

    .end local v19    # "type":I
    .local v5, "type":I
    if-eq v5, v4, :cond_8

    move-object/from16 v4, v18

    move/from16 v5, v20

    goto :goto_4

    .end local v5    # "type":I
    .restart local v19    # "type":I
    :cond_7
    move/from16 v5, v19

    const/4 v4, 0x1

    .line 3671
    .end local v19    # "type":I
    .restart local v5    # "type":I
    :cond_8
    const/4 v4, 0x2

    if-eq v5, v4, :cond_9

    .line 3672
    :try_start_3
    new-instance v4, Ljava/lang/StringBuilder;

    invoke-direct {v4}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v4, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v6, " does not have start tag"

    invoke-virtual {v4, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v4

    invoke-static {v11, v4}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
    :try_end_3
    .catchall {:try_start_3 .. :try_end_3} :catchall_0

    .line 3681
    :try_start_4
    invoke-virtual/range {v17 .. v17}, Ljava/io/InputStream;->close()V
    :try_end_4
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_4 .. :try_end_4} :catch_1
    .catch Ljava/io/IOException; {:try_start_4 .. :try_end_4} :catch_0

    .line 3673
    goto/16 :goto_a

    .line 3683
    .end local v0    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v5    # "type":I
    .end local v17    # "str":Ljava/io/InputStream;
    :catch_0
    move-exception v0

    goto :goto_8

    .line 3681
    :catch_1
    move-exception v0

    goto/16 :goto_9

    .line 3662
    .restart local v17    # "str":Ljava/io/InputStream;
    :catchall_0
    move-exception v0

    move-object v4, v0

    goto :goto_6

    .line 3675
    .restart local v0    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v5    # "type":I
    :cond_9
    :try_start_5
    const-string/jumbo v4, "preferred-activities"

    move/from16 v16, v5

    .end local v5    # "type":I
    .local v16, "type":I
    invoke-interface {v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v4, v5}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v4

    if-nez v4, :cond_a

    .line 3676
    new-instance v4, Ljava/lang/StringBuilder;

    invoke-direct {v4}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v4, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v5, " does not start with \'preferred-activities\'"

    invoke-virtual {v4, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v4

    invoke-static {v11, v4}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
    :try_end_5
    .catchall {:try_start_5 .. :try_end_5} :catchall_0

    .line 3681
    :try_start_6
    invoke-virtual/range {v17 .. v17}, Ljava/io/InputStream;->close()V
    :try_end_6
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_6 .. :try_end_6} :catch_1
    .catch Ljava/io/IOException; {:try_start_6 .. :try_end_6} :catch_0

    .line 3678
    goto :goto_a

    .line 3680
    :cond_a
    :try_start_7
    invoke-direct {v1, v0, v2}, Lcom/android/server/pm/Settings;->readDefaultPreferredActivitiesLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V
    :try_end_7
    .catchall {:try_start_7 .. :try_end_7} :catchall_0

    .line 3681
    .end local v0    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v16    # "type":I
    :try_start_8
    invoke-virtual/range {v17 .. v17}, Ljava/io/InputStream;->close()V
    :try_end_8
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_8 .. :try_end_8} :catch_1
    .catch Ljava/io/IOException; {:try_start_8 .. :try_end_8} :catch_0

    .line 3685
    .end local v17    # "str":Ljava/io/InputStream;
    :goto_5
    goto :goto_a

    .line 3662
    .end local v20    # "size":I
    .local v5, "size":I
    .restart local v17    # "str":Ljava/io/InputStream;
    :catchall_1
    move-exception v0

    move/from16 v20, v5

    move-object v4, v0

    .end local v5    # "size":I
    .restart local v20    # "size":I
    goto :goto_6

    .end local v18    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .end local v20    # "size":I
    .restart local v4    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .restart local v5    # "size":I
    :catchall_2
    move-exception v0

    move-object/from16 v18, v4

    move/from16 v20, v5

    move-object v4, v0

    .end local v4    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .end local v5    # "size":I
    .restart local v18    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .restart local v20    # "size":I
    :goto_6
    :try_start_9
    invoke-virtual/range {v17 .. v17}, Ljava/io/InputStream;->close()V
    :try_end_9
    .catchall {:try_start_9 .. :try_end_9} :catchall_3

    goto :goto_7

    :catchall_3
    move-exception v0

    move-object v5, v0

    :try_start_a
    invoke-virtual {v4, v5}, Ljava/lang/Throwable;->addSuppressed(Ljava/lang/Throwable;)V

    .end local v7    # "index":I
    .end local v8    # "partition":Lcom/android/server/pm/ScanPartition;
    .end local v9    # "preferredDir":Ljava/io/File;
    .end local v12    # "files":[Ljava/io/File;
    .end local v15    # "f":Ljava/io/File;
    .end local v18    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .end local v20    # "size":I
    .end local p0    # "this":Lcom/android/server/pm/Settings;
    .end local p1    # "userId":I
    :goto_7
    throw v4
    :try_end_a
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_a .. :try_end_a} :catch_1
    .catch Ljava/io/IOException; {:try_start_a .. :try_end_a} :catch_0

    .line 3683
    .end local v17    # "str":Ljava/io/InputStream;
    .restart local v4    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .restart local v5    # "size":I
    .restart local v7    # "index":I
    .restart local v8    # "partition":Lcom/android/server/pm/ScanPartition;
    .restart local v9    # "preferredDir":Ljava/io/File;
    .restart local v12    # "files":[Ljava/io/File;
    .restart local v15    # "f":Ljava/io/File;
    .restart local p0    # "this":Lcom/android/server/pm/Settings;
    .restart local p1    # "userId":I
    :catch_2
    move-exception v0

    move-object/from16 v18, v4

    move/from16 v20, v5

    .end local v4    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .end local v5    # "size":I
    .restart local v18    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .restart local v20    # "size":I
    goto :goto_8

    .line 3681
    .end local v18    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .end local v20    # "size":I
    .restart local v4    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .restart local v5    # "size":I
    :catch_3
    move-exception v0

    move-object/from16 v18, v4

    move/from16 v20, v5

    .end local v4    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .end local v5    # "size":I
    .restart local v18    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .restart local v20    # "size":I
    goto :goto_9

    .line 3683
    :goto_8
    nop

    .line 3684
    .local v0, "e":Ljava/io/IOException;
    new-instance v4, Ljava/lang/StringBuilder;

    invoke-direct {v4}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v4, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v4

    invoke-static {v11, v4, v0}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I

    goto :goto_a

    .line 3681
    .end local v0    # "e":Ljava/io/IOException;
    :goto_9
    nop

    .line 3682
    .local v0, "e":Lorg/xmlpull/v1/XmlPullParserException;
    new-instance v4, Ljava/lang/StringBuilder;

    invoke-direct {v4}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v4, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v4

    invoke-static {v11, v4, v0}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I

    .end local v0    # "e":Lorg/xmlpull/v1/XmlPullParserException;
    goto :goto_5

    .line 3648
    .end local v15    # "f":Ljava/io/File;
    :goto_a
    add-int/lit8 v14, v14, 0x1

    move-object/from16 v4, v18

    move/from16 v5, v20

    const/4 v6, 0x1

    goto/16 :goto_3

    .end local v18    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .end local v20    # "size":I
    .restart local v4    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .restart local v5    # "size":I
    :cond_b
    move-object/from16 v18, v4

    move/from16 v20, v5

    .end local v4    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .end local v5    # "size":I
    .restart local v18    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .restart local v20    # "size":I
    goto :goto_b

    .line 3633
    .end local v12    # "files":[Ljava/io/File;
    .end local v18    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .end local v20    # "size":I
    .restart local v4    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .restart local v5    # "size":I
    :cond_c
    move-object/from16 v18, v4

    move/from16 v20, v5

    .line 3629
    .end local v4    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .end local v5    # "size":I
    .end local v8    # "partition":Lcom/android/server/pm/ScanPartition;
    .end local v9    # "preferredDir":Ljava/io/File;
    .restart local v18    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .restart local v20    # "size":I
    :goto_b
    add-int/lit8 v7, v7, 0x1

    move-object/from16 v4, v18

    move/from16 v5, v20

    const/4 v6, 0x1

    goto/16 :goto_2

    .end local v18    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .end local v20    # "size":I
    .restart local v4    # "pmInternal":Landroid/content/pm/PackageManagerInternal;
    .restart local v5    # "size":I
    :cond_d
    nop

    .line 3688
    .end local v7    # "index":I
    return-void
.end method

.method checkAndConvertSharedUserSettingsLPw(Lcom/android/server/pm/SharedUserSetting;)V
    .locals 2
    .param p1, "sharedUser"    # Lcom/android/server/pm/SharedUserSetting;

    .line 1546
    invoke-virtual {p1}, Lcom/android/server/pm/SharedUserSetting;->isSingleUser()Z

    move-result v0

    if-nez v0, :cond_0

    return-void

    .line 1547
    :cond_0
    invoke-virtual {p1}, Lcom/android/server/pm/SharedUserSetting;->getPackageSettings()Lcom/android/server/utils/WatchedArraySet;

    move-result-object v0

    const/4 v1, 0x0

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArraySet;->valueAt(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PackageSetting;

    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v0

    .line 1548
    .local v0, "pkg":Lcom/android/server/pm/pkg/AndroidPackage;
    if-eqz v0, :cond_1

    invoke-interface {v0}, Lcom/android/server/pm/pkg/AndroidPackage;->isLeavingSharedUser()Z

    move-result v1

    if-eqz v1, :cond_1

    .line 1549
    const/4 v1, 0x2

    invoke-static {v1}, Lcom/android/server/pm/SharedUidMigration;->applyStrategy(I)Z

    move-result v1

    if-eqz v1, :cond_1

    .line 1550
    invoke-virtual {p0, p1}, Lcom/android/server/pm/Settings;->convertSharedUserSettingsLPw(Lcom/android/server/pm/SharedUserSetting;)V

    .line 1552
    :cond_1
    return-void
.end method

.method checkAndPruneSharedUserLPw(Lcom/android/server/pm/SharedUserSetting;Z)Z
    .locals 2
    .param p1, "s"    # Lcom/android/server/pm/SharedUserSetting;
    .param p2, "skipCheck"    # Z

    .line 1467
    nop

    nop

    if-nez p2, :cond_0

    invoke-virtual {p1}, Lcom/android/server/pm/SharedUserSetting;->getPackageStates()Landroid/util/ArraySet;

    move-result-object v0

    invoke-virtual {v0}, Landroid/util/ArraySet;->isEmpty()Z

    move-result v0

    if-eqz v0, :cond_1

    .line 1468
    invoke-virtual {p1}, Lcom/android/server/pm/SharedUserSetting;->getDisabledPackageStates()Landroid/util/ArraySet;

    move-result-object v0

    invoke-virtual {v0}, Landroid/util/ArraySet;->isEmpty()Z

    move-result v0

    if-eqz v0, :cond_1

    .line 1469
    :cond_0
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v1, p1, Lcom/android/server/pm/SharedUserSetting;->name:Ljava/lang/String;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArrayMap;->remove(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    if-eqz v0, :cond_1

    .line 1470
    iget v0, p1, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-virtual {p0, v0}, Lcom/android/server/pm/Settings;->removeAppIdLPw(I)V

    .line 1471
    const/4 v0, 0x1

    return v0

    .line 1474
    :cond_1
    const/4 v0, 0x0

    return v0
.end method

.method clearBlockUninstallLPw(I)V
    .locals 1
    .param p1, "userId"    # I

    .line 2217
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedSparseArray;->remove(I)V

    .line 2218
    return-void
.end method

.method clearPackagePersistentPreferredActivities(Ljava/lang/String;I)Z
    .locals 8
    .param p1, "packageName"    # Ljava/lang/String;
    .param p2, "userId"    # I

    .line 6622
    const/4 v0, 0x0

    .line 6623
    .local v0, "removed":Ljava/util/ArrayList;, "Ljava/util/ArrayList<Lcom/android/server/pm/PersistentPreferredActivity;>;"
    const/4 v1, 0x0

    .line 6624
    .local v1, "changed":Z
    const/4 v2, 0x0

    .local v2, "i":I
    :goto_0
    iget-object v3, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v3}, Lcom/android/server/utils/WatchedSparseArray;->size()I

    move-result v3

    if-ge v2, v3, :cond_6

    .line 6625
    iget-object v3, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v3, v2}, Lcom/android/server/utils/WatchedSparseArray;->keyAt(I)I

    move-result v3

    .line 6626
    .local v3, "thisUserId":I
    iget-object v4, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v4, v2}, Lcom/android/server/utils/WatchedSparseArray;->valueAt(I)Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/android/server/pm/PersistentPreferredIntentResolver;

    .line 6627
    .local v4, "ppir":Lcom/android/server/pm/PersistentPreferredIntentResolver;
    if-eq p2, v3, :cond_0

    .line 6628
    goto :goto_3

    .line 6630
    :cond_0
    invoke-virtual {v4}, Lcom/android/server/IntentResolver;->filterIterator()Ljava/util/Iterator;

    move-result-object v5

    .line 6631
    .local v5, "it":Ljava/util/Iterator;, "Ljava/util/Iterator<Lcom/android/server/pm/PersistentPreferredActivity;>;"
    :goto_1
    invoke-interface {v5}, Ljava/util/Iterator;->hasNext()Z

    move-result v6

    if-eqz v6, :cond_3

    .line 6632
    invoke-interface {v5}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v6

    check-cast v6, Lcom/android/server/pm/PersistentPreferredActivity;

    .line 6634
    .local v6, "ppa":Lcom/android/server/pm/PersistentPreferredActivity;
    iget-object v7, v6, Lcom/android/server/pm/PersistentPreferredActivity;->mComponent:Landroid/content/ComponentName;

    invoke-virtual {v7}, Landroid/content/ComponentName;->getPackageName()Ljava/lang/String;

    move-result-object v7

    invoke-virtual {v7, p1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v7

    if-eqz v7, :cond_2

    .line 6635
    if-nez v0, :cond_1

    .line 6636
    new-instance v7, Ljava/util/ArrayList;

    invoke-direct {v7}, Ljava/util/ArrayList;-><init>()V

    move-object v0, v7

    .line 6638
    :cond_1
    invoke-virtual {v0, v6}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z

    .line 6640
    .end local v6    # "ppa":Lcom/android/server/pm/PersistentPreferredActivity;
    :cond_2
    goto :goto_1

    .line 6641
    :cond_3
    if-eqz v0, :cond_5

    .line 6642
    const/4 v6, 0x0

    .local v6, "j":I
    :goto_2
    invoke-virtual {v0}, Ljava/util/ArrayList;->size()I

    move-result v7

    if-ge v6, v7, :cond_4

    .line 6643
    invoke-virtual {v0, v6}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;

    move-result-object v7

    check-cast v7, Lcom/android/server/pm/PersistentPreferredActivity;

    .line 6644
    .local v7, "ppa":Lcom/android/server/pm/PersistentPreferredActivity;
    invoke-virtual {v4, v7}, Lcom/android/server/pm/WatchedIntentResolver;->removeFilter(Lcom/android/server/pm/WatchedIntentFilter;)V

    .line 6642
    .end local v7    # "ppa":Lcom/android/server/pm/PersistentPreferredActivity;
    add-int/lit8 v6, v6, 0x1

    goto :goto_2

    :cond_4
    nop

    .line 6646
    .end local v6    # "j":I
    const/4 v1, 0x1

    .line 6624
    .end local v3    # "thisUserId":I
    .end local v4    # "ppir":Lcom/android/server/pm/PersistentPreferredIntentResolver;
    .end local v5    # "it":Ljava/util/Iterator;, "Ljava/util/Iterator<Lcom/android/server/pm/PersistentPreferredActivity;>;"
    :cond_5
    :goto_3
    add-int/lit8 v2, v2, 0x1

    goto :goto_0

    :cond_6
    nop

    .line 6649
    .end local v2    # "i":I
    if-eqz v1, :cond_7

    .line 6650
    invoke-virtual {p0}, Lcom/android/server/pm/Settings;->onChanged()V

    .line 6652
    :cond_7
    return v1
.end method

.method clearPackagePreferredActivities(Ljava/lang/String;Landroid/util/SparseBooleanArray;I)V
    .locals 1
    .param p1, "packageName"    # Ljava/lang/String;
    .param p2, "outUserChanged"    # Landroid/util/SparseBooleanArray;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p3, "userId"    # I

    .line 6575
    const/4 v0, 0x0

    invoke-virtual {p0, p1, p2, p3, v0}, Lcom/android/server/pm/Settings;->clearPackagePreferredActivities(Ljava/lang/String;Landroid/util/SparseBooleanArray;ILcom/android/server/pm/PackageManagerService;)V

    .line 6576
    return-void
.end method

.method clearPackagePreferredActivities(Ljava/lang/String;Landroid/util/SparseBooleanArray;ILcom/android/server/pm/PackageManagerService;)V
    .locals 8
    .param p1, "packageName"    # Ljava/lang/String;
    .param p2, "outUserChanged"    # Landroid/util/SparseBooleanArray;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p3, "userId"    # I
    .param p4, "packageManagerService"    # Lcom/android/server/pm/PackageManagerService;

    .line 6580
    const/4 v0, 0x0

    .line 6581
    .local v0, "changed":Z
    const/4 v1, 0x0

    .line 6582
    .local v1, "removed":Ljava/util/ArrayList;, "Ljava/util/ArrayList<Lcom/android/server/pm/PreferredActivity;>;"
    const/4 v2, 0x0

    .local v2, "i":I
    :goto_0
    iget-object v3, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v3}, Lcom/android/server/utils/WatchedSparseArray;->size()I

    move-result v3

    if-ge v2, v3, :cond_7

    .line 6583
    iget-object v3, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v3, v2}, Lcom/android/server/utils/WatchedSparseArray;->keyAt(I)I

    move-result v3

    .line 6584
    .local v3, "thisUserId":I
    iget-object v4, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v4, v2}, Lcom/android/server/utils/WatchedSparseArray;->valueAt(I)Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/android/server/pm/PreferredIntentResolver;

    .line 6585
    .local v4, "pir":Lcom/android/server/pm/PreferredIntentResolver;
    const/4 v5, -0x1

    if-eq p3, v5, :cond_0

    if-eq p3, v3, :cond_0

    .line 6586
    goto :goto_3

    .line 6588
    :cond_0
    invoke-virtual {v4}, Lcom/android/server/IntentResolver;->filterIterator()Ljava/util/Iterator;

    move-result-object v5

    .line 6589
    .local v5, "it":Ljava/util/Iterator;, "Ljava/util/Iterator<Lcom/android/server/pm/PreferredActivity;>;"
    :goto_1
    invoke-interface {v5}, Ljava/util/Iterator;->hasNext()Z

    move-result v6

    if-eqz v6, :cond_4

    .line 6590
    invoke-interface {v5}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v6

    check-cast v6, Lcom/android/server/pm/PreferredActivity;

    .line 6593
    .local v6, "pa":Lcom/android/server/pm/PreferredActivity;
    nop

    nop

    if-eqz p1, :cond_1

    iget-object v7, v6, Lcom/android/server/pm/PreferredActivity;->mPref:Lcom/android/server/pm/PreferredComponent;

    iget-object v7, v7, Lcom/android/server/pm/PreferredComponent;->mComponent:Landroid/content/ComponentName;

    .line 6594
    invoke-virtual {v7}, Landroid/content/ComponentName;->getPackageName()Ljava/lang/String;

    move-result-object v7

    invoke-virtual {v7, p1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v7

    if-eqz v7, :cond_3

    iget-object v7, v6, Lcom/android/server/pm/PreferredActivity;->mPref:Lcom/android/server/pm/PreferredComponent;

    iget-boolean v7, v7, Lcom/android/server/pm/PreferredComponent;->mAlways:Z

    if-eqz v7, :cond_3

    .line 6596
    :cond_1
    if-nez v1, :cond_2

    .line 6597
    new-instance v7, Ljava/util/ArrayList;

    invoke-direct {v7}, Ljava/util/ArrayList;-><init>()V

    move-object v1, v7

    .line 6599
    :cond_2
    invoke-virtual {v1, v6}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z

    .line 6601
    .end local v6    # "pa":Lcom/android/server/pm/PreferredActivity;
    :cond_3
    goto :goto_1

    .line 6602
    :cond_4
    if-eqz v1, :cond_6

    .line 6603
    const/4 v6, 0x0

    .local v6, "j":I
    :goto_2
    invoke-virtual {v1}, Ljava/util/ArrayList;->size()I

    move-result v7

    if-ge v6, v7, :cond_5

    .line 6604
    invoke-virtual {v1, v6}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;

    move-result-object v7

    check-cast v7, Lcom/android/server/pm/PreferredActivity;

    .line 6605
    .local v7, "pa":Lcom/android/server/pm/PreferredActivity;
    invoke-virtual {v4, v7}, Lcom/android/server/pm/WatchedIntentResolver;->removeFilter(Lcom/android/server/pm/WatchedIntentFilter;)V

    .line 6603
    .end local v7    # "pa":Lcom/android/server/pm/PreferredActivity;
    add-int/lit8 v6, v6, 0x1

    goto :goto_2

    :cond_5
    nop

    .line 6607
    .end local v6    # "j":I
    const/4 v6, 0x1

    invoke-virtual {p2, v3, v6}, Landroid/util/SparseBooleanArray;->put(IZ)V

    .line 6608
    const/4 v0, 0x1

    .line 6610
    if-eqz p4, :cond_6

    .line 6611
    invoke-virtual {p4}, Lcom/android/server/pm/PackageManagerService;->getSmtEx()Lcom/android/server/pm/PackageManagerServiceSmtEx;

    move-result-object v6

    invoke-virtual {v6, v1, p1}, Lcom/android/server/pm/PackageManagerServiceSmtEx;->postPreferredActivityClearBroadcast(Ljava/util/ArrayList;Ljava/lang/String;)V

    .line 6582
    .end local v3    # "thisUserId":I
    .end local v4    # "pir":Lcom/android/server/pm/PreferredIntentResolver;
    .end local v5    # "it":Ljava/util/Iterator;, "Ljava/util/Iterator<Lcom/android/server/pm/PreferredActivity;>;"
    :cond_6
    :goto_3
    add-int/lit8 v2, v2, 0x1

    goto :goto_0

    :cond_7
    nop

    .line 6616
    .end local v2    # "i":I
    if-eqz v0, :cond_8

    .line 6617
    invoke-virtual {p0}, Lcom/android/server/pm/Settings;->onChanged()V

    .line 6619
    :cond_8
    return-void
.end method

.method clearPersistentPreferredActivity(Landroid/content/IntentFilter;I)Z
    .locals 6
    .param p1, "filter"    # Landroid/content/IntentFilter;
    .param p2, "userId"    # I

    .line 6656
    const/4 v0, 0x0

    .line 6657
    .local v0, "removed":Ljava/util/ArrayList;, "Ljava/util/ArrayList<Lcom/android/server/pm/PersistentPreferredActivity;>;"
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, p2}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/android/server/pm/PersistentPreferredIntentResolver;

    .line 6658
    .local v1, "ppir":Lcom/android/server/pm/PersistentPreferredIntentResolver;
    invoke-virtual {v1}, Lcom/android/server/IntentResolver;->filterIterator()Ljava/util/Iterator;

    move-result-object v2

    .line 6659
    .local v2, "it":Ljava/util/Iterator;, "Ljava/util/Iterator<Lcom/android/server/pm/PersistentPreferredActivity;>;"
    const/4 v3, 0x0

    .line 6660
    .local v3, "changed":Z
    :goto_0
    invoke-interface {v2}, Ljava/util/Iterator;->hasNext()Z

    move-result v4

    if-eqz v4, :cond_2

    .line 6661
    invoke-interface {v2}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/android/server/pm/PersistentPreferredActivity;

    .line 6662
    .local v4, "ppa":Lcom/android/server/pm/PersistentPreferredActivity;
    invoke-virtual {v4}, Lcom/android/server/pm/PersistentPreferredActivity;->getIntentFilter()Landroid/content/IntentFilter;

    move-result-object v5

    invoke-static {v5, p1}, Landroid/content/IntentFilter;->filterEquals(Landroid/content/IntentFilter;Landroid/content/IntentFilter;)Z

    move-result v5

    if-eqz v5, :cond_1

    .line 6663
    if-nez v0, :cond_0

    .line 6664
    new-instance v5, Ljava/util/ArrayList;

    invoke-direct {v5}, Ljava/util/ArrayList;-><init>()V

    move-object v0, v5

    .line 6666
    :cond_0
    invoke-virtual {v0, v4}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z

    .line 6668
    .end local v4    # "ppa":Lcom/android/server/pm/PersistentPreferredActivity;
    :cond_1
    goto :goto_0

    .line 6669
    :cond_2
    if-eqz v0, :cond_4

    .line 6670
    const/4 v4, 0x0

    .local v4, "i":I
    :goto_1
    invoke-virtual {v0}, Ljava/util/ArrayList;->size()I

    move-result v5

    if-ge v4, v5, :cond_3

    .line 6671
    invoke-virtual {v0, v4}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Lcom/android/server/pm/PersistentPreferredActivity;

    .line 6672
    .local v5, "ppa":Lcom/android/server/pm/PersistentPreferredActivity;
    invoke-virtual {v1, v5}, Lcom/android/server/pm/WatchedIntentResolver;->removeFilter(Lcom/android/server/pm/WatchedIntentFilter;)V

    .line 6670
    .end local v5    # "ppa":Lcom/android/server/pm/PersistentPreferredActivity;
    add-int/lit8 v4, v4, 0x1

    goto :goto_1

    :cond_3
    nop

    .line 6674
    .end local v4    # "i":I
    const/4 v3, 0x1

    .line 6676
    :cond_4
    if-eqz v3, :cond_5

    .line 6677
    invoke-virtual {p0}, Lcom/android/server/pm/Settings;->onChanged()V

    .line 6679
    :cond_5
    return v3
.end method

.method convertSharedUserSettingsLPw(Lcom/android/server/pm/SharedUserSetting;)V
    .locals 4
    .param p1, "sharedUser"    # Lcom/android/server/pm/SharedUserSetting;

    .line 1530
    invoke-virtual {p1}, Lcom/android/server/pm/SharedUserSetting;->getPackageSettings()Lcom/android/server/utils/WatchedArraySet;

    move-result-object v0

    const/4 v1, 0x0

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArraySet;->valueAt(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PackageSetting;

    .line 1531
    .local v0, "ps":Lcom/android/server/pm/PackageSetting;
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    invoke-virtual {p1}, Lcom/android/server/pm/SharedUserSetting;->getAppId()I

    move-result v3

    invoke-virtual {v2, v3, v0}, Lcom/android/server/pm/AppIdSettingMap;->replaceSetting(ILcom/android/server/pm/SettingBase;)V

    .line 1534
    const/4 v2, -0x1

    invoke-virtual {v0, v2}, Lcom/android/server/pm/PackageSetting;->setSharedUserAppId(I)Lcom/android/server/pm/PackageSetting;

    .line 1535
    invoke-virtual {p1}, Lcom/android/server/pm/SharedUserSetting;->getDisabledPackageSettings()Lcom/android/server/utils/WatchedArraySet;

    move-result-object v3

    invoke-virtual {v3}, Lcom/android/server/utils/WatchedArraySet;->isEmpty()Z

    move-result v3

    if-nez v3, :cond_0

    .line 1536
    invoke-virtual {p1}, Lcom/android/server/pm/SharedUserSetting;->getDisabledPackageSettings()Lcom/android/server/utils/WatchedArraySet;

    move-result-object v3

    invoke-virtual {v3, v1}, Lcom/android/server/utils/WatchedArraySet;->valueAt(I)Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/android/server/pm/PackageSetting;

    .line 1537
    .local v1, "disabledPs":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v1, v2}, Lcom/android/server/pm/PackageSetting;->setSharedUserAppId(I)Lcom/android/server/pm/PackageSetting;

    .line 1539
    .end local v1    # "disabledPs":Lcom/android/server/pm/PackageSetting;
    :cond_0
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {p1}, Lcom/android/server/pm/SharedUserSetting;->getName()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedArrayMap;->remove(Ljava/lang/Object;)Ljava/lang/Object;

    .line 1540
    return-void
.end method

.method createNewUserLI(Lcom/android/server/pm/PackageManagerService;Lcom/android/server/pm/Installer;ILjava/util/Set;[Ljava/lang/String;)V
    .locals 28
    .param p1, "service"    # Lcom/android/server/pm/PackageManagerService;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p2, "installer"    # Lcom/android/server/pm/Installer;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p3, "userHandle"    # I
    .param p4    # Ljava/util/Set;
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param
    .param p5, "disallowedPackages"    # [Ljava/lang/String;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/server/pm/PackageManagerService;",
            "Lcom/android/server/pm/Installer;",
            "I",
            "Ljava/util/Set<",
            "Ljava/lang/String;",
            ">;[",
            "Ljava/lang/String;",
            ")V"
        }
    .end annotation

    .line 4625
    .local p4, "userTypeInstallablePackages":Ljava/util/Set;, "Ljava/util/Set<Ljava/lang/String;>;"
    move-object/from16 v1, p0

    move-object/from16 v2, p1

    move/from16 v11, p3

    move-object/from16 v12, p4

    new-instance v0, Lcom/android/server/utils/TimingsTraceAndSlog;

    const-string v3, "PackageSettingsTiming"

    const-wide/32 v4, 0x40000

    invoke-direct {v0, v3, v4, v5}, Lcom/android/server/utils/TimingsTraceAndSlog;-><init>(Ljava/lang/String;J)V

    move-object v13, v0

    .line 4627
    .local v13, "t":Lcom/android/server/utils/TimingsTraceAndSlog;
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string v3, "createNewUser-"

    invoke-virtual {v0, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v11}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v13, v0}, Lcom/android/server/utils/TimingsTraceAndSlog;->traceBegin(Ljava/lang/String;)V

    .line 4628
    new-instance v0, Lcom/android/server/pm/Installer$Batch;

    invoke-direct {v0}, Lcom/android/server/pm/Installer$Batch;-><init>()V

    move-object v14, v0

    .line 4629
    .local v14, "batch":Lcom/android/server/pm/Installer$Batch;
    const/4 v0, 0x0

    if-nez v12, :cond_0

    const/4 v3, 0x1

    goto :goto_0

    :cond_0
    move v3, v0

    :goto_0
    move/from16 v16, v3

    .line 4631
    .local v16, "skipPackageAllowList":Z
    invoke-static {}, Ljava/lang/System;->currentTimeMillis()J

    move-result-wide v6

    .line 4632
    .local v6, "currentTimeMillis":J
    iget-object v9, v1, Lcom/android/server/pm/Settings;->mLock:Lcom/android/server/pm/PackageManagerTracedLock;

    invoke-static {}, Lcom/android/server/pm/PackageManagerService;->boostPriorityForPackageManagerTracedLockedSection()V

    monitor-enter v9

    .line 4633
    :try_start_0
    iget-object v3, v1, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v3}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v3
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_5

    move v5, v3

    .line 4634
    .local v5, "size":I
    const/4 v3, 0x0

    move v4, v3

    .local v4, "i":I
    :goto_1
    if-ge v4, v5, :cond_f

    .line 4635
    :try_start_1
    iget-object v3, v1, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v3, v4}, Lcom/android/server/utils/WatchedArrayMap;->valueAt(I)Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Lcom/android/server/pm/PackageSetting;

    .line 4636
    .local v3, "ps":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v8
    :try_end_1
    .catchall {:try_start_1 .. :try_end_1} :catchall_3

    if-nez v8, :cond_1

    .line 4638
    :try_start_2
    invoke-virtual {v3, v0, v11}, Lcom/android/server/pm/PackageSetting;->setInstalled(ZI)V

    .line 4640
    invoke-virtual {v1, v3}, Lcom/android/server/pm/Settings;->writeKernelMappingLPr(Lcom/android/server/pm/PackageSetting;)V
    :try_end_2
    .catchall {:try_start_2 .. :try_end_2} :catchall_0

    .line 4641
    move/from16 v18, v4

    move/from16 v20, v5

    move-wide/from16 v26, v6

    move-object/from16 v21, v9

    goto/16 :goto_b

    .line 4714
    .end local v3    # "ps":Lcom/android/server/pm/PackageSetting;
    .end local v4    # "i":I
    .end local v5    # "size":I
    :catchall_0
    move-exception v0

    :goto_2
    move-object/from16 v3, p2

    move-wide/from16 v26, v6

    move-object/from16 v21, v9

    goto/16 :goto_d

    .line 4643
    .restart local v3    # "ps":Lcom/android/server/pm/PackageSetting;
    .restart local v4    # "i":I
    .restart local v5    # "size":I
    :cond_1
    :try_start_3
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->isSystem()Z

    move-result v8
    :try_end_3
    .catchall {:try_start_3 .. :try_end_3} :catchall_3

    if-eqz v8, :cond_2

    .line 4644
    :try_start_4
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v8
    :try_end_4
    .catchall {:try_start_4 .. :try_end_4} :catchall_1

    move-object/from16 v10, p5

    :try_start_5
    invoke-static {v10, v8}, Lcom/android/internal/util/ArrayUtils;->contains([Ljava/lang/Object;Ljava/lang/Object;)Z

    move-result v8

    if-nez v8, :cond_3

    .line 4645
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getPkgState()Lcom/android/server/pm/pkg/PackageStateUnserialized;

    move-result-object v8

    invoke-virtual {v8}, Lcom/android/server/pm/pkg/PackageStateUnserialized;->isHiddenUntilInstalled()Z

    move-result v8

    if-nez v8, :cond_3

    const/4 v8, 0x1

    goto :goto_3

    .line 4714
    .end local v3    # "ps":Lcom/android/server/pm/PackageSetting;
    .end local v4    # "i":I
    .end local v5    # "size":I
    :catchall_1
    move-exception v0

    move-object/from16 v10, p5

    goto :goto_2

    .line 4643
    .restart local v3    # "ps":Lcom/android/server/pm/PackageSetting;
    .restart local v4    # "i":I
    .restart local v5    # "size":I
    :cond_2
    move-object/from16 v10, p5

    .line 4645
    :cond_3
    move v8, v0

    :goto_3
    move/from16 v17, v8

    .line 4646
    .local v17, "shouldMaybeInstall":Z
    nop

    nop

    if-eqz v17, :cond_5

    if-nez v16, :cond_4

    .line 4648
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v8

    .line 4647
    invoke-interface {v12, v8}, Ljava/util/Set;->contains(Ljava/lang/Object;)Z

    move-result v8

    if-eqz v8, :cond_5

    :cond_4
    const/4 v8, 0x1

    goto :goto_4

    :cond_5
    move v8, v0

    :goto_4
    nop

    .line 4654
    .local v8, "shouldReallyInstall":Z
    const/16 v0, 0xa

    if-ne v11, v0, :cond_6

    .line 4655
    sget-object v0, Landroid/app/doppelganger/DoppelgangerConfigure;->DOPPELGANGER_NECESSARY_PACKAGES:Ljava/util/Set;

    .line 4656
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v15

    .line 4655
    invoke-interface {v0, v15}, Ljava/util/Set;->contains(Ljava/lang/Object;)Z

    move-result v0

    invoke-virtual {v3, v0, v11}, Lcom/android/server/pm/PackageSetting;->setInstalled(ZI)V
    :try_end_5
    .catchall {:try_start_5 .. :try_end_5} :catchall_0

    goto :goto_5

    .line 4658
    :cond_6
    :try_start_6
    invoke-virtual {v3, v8, v11}, Lcom/android/server/pm/PackageSetting;->setInstalled(ZI)V

    .line 4661
    :goto_5
    invoke-static {}, Lcom/android/internal/hidden_from_bootclasspath/android/content/pm/Flags;->fixSystemAppsFirstInstallTime()Z

    move-result v0
    :try_end_6
    .catchall {:try_start_6 .. :try_end_6} :catchall_3

    if-eqz v0, :cond_7

    if-eqz v8, :cond_7

    .line 4662
    :try_start_7
    invoke-virtual {v3, v6, v7, v11}, Lcom/android/server/pm/PackageSetting;->setFirstInstallTime(JI)Lcom/android/server/pm/PackageSetting;
    :try_end_7
    .catchall {:try_start_7 .. :try_end_7} :catchall_0

    .line 4667
    :cond_7
    :try_start_8
    iget-boolean v0, v2, Lcom/android/server/pm/PackageManagerService;->mShouldStopSystemPackagesByDefault:Z
    :try_end_8
    .catchall {:try_start_8 .. :try_end_8} :catchall_3

    if-eqz v0, :cond_8

    .line 4668
    :try_start_9
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->isSystem()Z

    move-result v0

    if-eqz v0, :cond_8

    .line 4669
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->isApex()Z

    move-result v0

    if-nez v0, :cond_8

    iget-object v0, v2, Lcom/android/server/pm/PackageManagerService;->mInitialNonStoppedSystemPackages:Ljava/util/Set;

    .line 4670
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v15

    invoke-interface {v0, v15}, Ljava/util/Set;->contains(Ljava/lang/Object;)Z

    move-result v0

    if-nez v0, :cond_8

    const/4 v0, 0x1

    goto :goto_6

    :cond_8
    const/4 v0, 0x0

    :goto_6
    nop

    .line 4671
    .local v0, "shouldBeStopped":Z
    if-eqz v0, :cond_9

    .line 4672
    new-instance v15, Landroid/content/Intent;

    move/from16 v18, v0

    .end local v0    # "shouldBeStopped":Z
    .local v18, "shouldBeStopped":Z
    const-string v0, "android.intent.action.MAIN"

    invoke-direct {v15, v0}, Landroid/content/Intent;-><init>(Ljava/lang/String;)V

    move-object v0, v15

    .line 4673
    .local v0, "launcherIntent":Landroid/content/Intent;
    const-string v15, "android.intent.category.LAUNCHER"

    invoke-virtual {v0, v15}, Landroid/content/Intent;->addCategory(Ljava/lang/String;)Landroid/content/Intent;

    .line 4674
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v15

    invoke-virtual {v0, v15}, Landroid/content/Intent;->setPackage(Ljava/lang/String;)Landroid/content/Intent;

    .line 4675
    nop

    .line 4676
    invoke-virtual/range {p1 .. p1}, Lcom/android/server/pm/PackageManagerService;->snapshotComputer()Lcom/android/server/pm/Computer;

    move-result-object v19

    const-wide/32 v22, 0xc0000

    const/16 v24, 0x0

    const/16 v21, 0x0

    move-object/from16 v20, v0

    invoke-interface/range {v19 .. v24}, Lcom/android/server/pm/Computer;->queryIntentActivitiesInternal(Landroid/content/Intent;Ljava/lang/String;JI)Ljava/util/List;

    move-result-object v15

    .line 4680
    .local v15, "launcherActivities":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/ResolveInfo;>;"
    invoke-interface {v15}, Ljava/util/List;->isEmpty()Z

    move-result v19
    :try_end_9
    .catchall {:try_start_9 .. :try_end_9} :catchall_0

    if-eqz v19, :cond_a

    .line 4681
    const/16 v18, 0x0

    move/from16 v0, v18

    goto :goto_7

    .line 4671
    .end local v15    # "launcherActivities":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/ResolveInfo;>;"
    .end local v18    # "shouldBeStopped":Z
    .local v0, "shouldBeStopped":Z
    :cond_9
    move/from16 v18, v0

    .line 4684
    .end local v0    # "shouldBeStopped":Z
    .restart local v18    # "shouldBeStopped":Z
    :cond_a
    move/from16 v0, v18

    .end local v18    # "shouldBeStopped":Z
    .restart local v0    # "shouldBeStopped":Z
    :goto_7
    :try_start_a
    invoke-virtual {v3, v0, v11}, Lcom/android/server/pm/PackageSetting;->setStopped(ZI)V

    .line 4689
    if-eqz v17, :cond_b

    if-nez v8, :cond_b

    .line 4690
    const/4 v15, 0x1

    goto :goto_8

    :cond_b
    const/4 v15, 0x0

    :goto_8
    nop

    .line 4691
    .local v15, "uninstallReason":I
    invoke-virtual {v3, v15, v11}, Lcom/android/server/pm/PackageSetting;->setUninstallReason(II)V

    .line 4692
    if-eqz v8, :cond_e

    .line 4693
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v18

    if-gez v18, :cond_c

    .line 4696
    move/from16 v18, v4

    move/from16 v20, v5

    move-wide/from16 v26, v6

    move-object/from16 v21, v9

    goto/16 :goto_b

    .line 4702
    :cond_c
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getSeInfo()Ljava/lang/String;

    move-result-object v18

    move/from16 v19, v8

    .end local v8    # "shouldReallyInstall":Z
    .local v19, "shouldReallyInstall":Z
    move-object/from16 v8, v18

    .line 4703
    .local v8, "seInfo":Ljava/lang/String;
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v18

    invoke-interface/range {v18 .. v18}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getUsesSdkLibraries()Ljava/util/List;

    move-result-object v18

    invoke-interface/range {v18 .. v18}, Ljava/util/List;->isEmpty()Z

    move-result v18

    if-nez v18, :cond_d

    const/16 v18, 0x1

    goto :goto_9

    :cond_d
    const/16 v18, 0x0

    :goto_9
    move/from16 v10, v18

    .line 4704
    .local v10, "usesSdk":Z
    nop

    .line 4705
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getVolumeUuid()Ljava/lang/String;

    move-result-object v18

    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v20

    .line 4706
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v21

    .line 4707
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v22

    invoke-interface/range {v22 .. v22}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getTargetSdkVersion()I

    move-result v22
    :try_end_a
    .catchall {:try_start_a .. :try_end_a} :catchall_3

    .line 4704
    const/16 v23, 0x1

    move-object/from16 v25, v3

    .end local v3    # "ps":Lcom/android/server/pm/PackageSetting;
    .local v25, "ps":Lcom/android/server/pm/PackageSetting;
    move-object/from16 v3, v18

    move/from16 v18, v4

    .end local v4    # "i":I
    .local v18, "i":I
    move-object/from16 v4, v20

    move/from16 v20, v5

    .end local v5    # "size":I
    .local v20, "size":I
    move/from16 v5, p3

    move-wide/from16 v26, v6

    .end local v6    # "currentTimeMillis":J
    .local v26, "currentTimeMillis":J
    move/from16 v6, v23

    move/from16 v7, v21

    move-object/from16 v21, v9

    move/from16 v9, v22

    :try_start_b
    invoke-static/range {v3 .. v10}, Lcom/android/server/pm/Installer;->buildCreateAppDataArgs(Ljava/lang/String;Ljava/lang/String;IIILjava/lang/String;IZ)Landroid/os/CreateAppDataArgs;

    move-result-object v3

    .line 4708
    .local v3, "args":Landroid/os/CreateAppDataArgs;
    invoke-virtual {v14, v3}, Lcom/android/server/pm/Installer$Batch;->createAppData(Landroid/os/CreateAppDataArgs;)Ljava/util/concurrent/CompletableFuture;

    .line 4709
    nop

    .end local v3    # "args":Landroid/os/CreateAppDataArgs;
    .end local v8    # "seInfo":Ljava/lang/String;
    .end local v10    # "usesSdk":Z
    goto :goto_b

    .line 4714
    .end local v0    # "shouldBeStopped":Z
    .end local v15    # "uninstallReason":I
    .end local v17    # "shouldMaybeInstall":Z
    .end local v18    # "i":I
    .end local v19    # "shouldReallyInstall":Z
    .end local v20    # "size":I
    .end local v25    # "ps":Lcom/android/server/pm/PackageSetting;
    :catchall_2
    move-exception v0

    move-object/from16 v3, p2

    goto/16 :goto_d

    .end local v26    # "currentTimeMillis":J
    .restart local v6    # "currentTimeMillis":J
    :catchall_3
    move-exception v0

    move-wide/from16 v26, v6

    move-object/from16 v21, v9

    move-object/from16 v3, p2

    .end local v6    # "currentTimeMillis":J
    .restart local v26    # "currentTimeMillis":J
    :goto_a
    goto :goto_d

    .line 4711
    .end local v26    # "currentTimeMillis":J
    .restart local v0    # "shouldBeStopped":Z
    .local v3, "ps":Lcom/android/server/pm/PackageSetting;
    .restart local v4    # "i":I
    .restart local v5    # "size":I
    .restart local v6    # "currentTimeMillis":J
    .local v8, "shouldReallyInstall":Z
    .restart local v15    # "uninstallReason":I
    .restart local v17    # "shouldMaybeInstall":Z
    :cond_e
    move-object/from16 v25, v3

    move/from16 v18, v4

    move/from16 v20, v5

    move-wide/from16 v26, v6

    move/from16 v19, v8

    move-object/from16 v21, v9

    .end local v4    # "i":I
    .end local v5    # "size":I
    .end local v6    # "currentTimeMillis":J
    .end local v8    # "shouldReallyInstall":Z
    .restart local v18    # "i":I
    .restart local v19    # "shouldReallyInstall":Z
    .restart local v20    # "size":I
    .restart local v26    # "currentTimeMillis":J
    invoke-virtual {v1, v3}, Lcom/android/server/pm/Settings;->writeKernelMappingLPr(Lcom/android/server/pm/PackageSetting;)V

    .line 4634
    .end local v0    # "shouldBeStopped":Z
    .end local v3    # "ps":Lcom/android/server/pm/PackageSetting;
    .end local v15    # "uninstallReason":I
    .end local v17    # "shouldMaybeInstall":Z
    .end local v19    # "shouldReallyInstall":Z
    :goto_b
    add-int/lit8 v4, v18, 0x1

    move/from16 v5, v20

    move-object/from16 v9, v21

    move-wide/from16 v6, v26

    const/4 v0, 0x0

    .end local v18    # "i":I
    .restart local v4    # "i":I
    goto/16 :goto_1

    .end local v20    # "size":I
    .end local v26    # "currentTimeMillis":J
    .restart local v5    # "size":I
    .restart local v6    # "currentTimeMillis":J
    :cond_f
    move/from16 v18, v4

    move/from16 v20, v5

    move-wide/from16 v26, v6

    move-object/from16 v21, v9

    .line 4714
    .end local v4    # "i":I
    .end local v5    # "size":I
    .end local v6    # "currentTimeMillis":J
    .restart local v26    # "currentTimeMillis":J
    monitor-exit v21
    :try_end_b
    .catchall {:try_start_b .. :try_end_b} :catchall_2

    invoke-static {}, Lcom/android/server/pm/PackageManagerService;->resetPriorityAfterPackageManagerTracedLockedSection()V

    .line 4715
    const-string v0, "createAppData"

    invoke-virtual {v13, v0}, Lcom/android/server/utils/TimingsTraceAndSlog;->traceBegin(Ljava/lang/String;)V

    .line 4717
    move-object/from16 v3, p2

    :try_start_c
    invoke-virtual {v14, v3}, Lcom/android/server/pm/Installer$Batch;->execute(Lcom/android/server/pm/Installer;)V
    :try_end_c
    .catch Lcom/android/server/pm/Installer$InstallerException; {:try_start_c .. :try_end_c} :catch_0

    .line 4720
    goto :goto_c

    .line 4718
    :catch_0
    move-exception v0

    move-object v4, v0

    move-object v0, v4

    .line 4719
    .local v0, "e":Lcom/android/server/pm/Installer$InstallerException;
    const-string v4, "PackageSettings"

    const-string v5, "Failed to prepare app data"

    invoke-static {v4, v5, v0}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I

    .line 4721
    .end local v0    # "e":Lcom/android/server/pm/Installer$InstallerException;
    :goto_c
    invoke-virtual {v13}, Landroid/util/TimingsTraceLog;->traceEnd()V

    .line 4722
    iget-object v4, v1, Lcom/android/server/pm/Settings;->mLock:Lcom/android/server/pm/PackageManagerTracedLock;

    invoke-static {}, Lcom/android/server/pm/PackageManagerService;->boostPriorityForPackageManagerTracedLockedSection()V

    monitor-enter v4

    .line 4723
    :try_start_d
    invoke-virtual {v1, v11}, Lcom/android/server/pm/Settings;->applyDefaultPreferredAppsLPw(I)V

    .line 4724
    monitor-exit v4
    :try_end_d
    .catchall {:try_start_d .. :try_end_d} :catchall_4

    invoke-static {}, Lcom/android/server/pm/PackageManagerService;->resetPriorityAfterPackageManagerTracedLockedSection()V

    .line 4725
    invoke-virtual {v13}, Landroid/util/TimingsTraceLog;->traceEnd()V

    .line 4726
    return-void

    .line 4724
    :catchall_4
    move-exception v0

    :try_start_e
    monitor-exit v4
    :try_end_e
    .catchall {:try_start_e .. :try_end_e} :catchall_4

    invoke-static {}, Lcom/android/server/pm/PackageManagerService;->resetPriorityAfterPackageManagerTracedLockedSection()V

    throw v0

    .line 4714
    .end local v26    # "currentTimeMillis":J
    .restart local v6    # "currentTimeMillis":J
    :catchall_5
    move-exception v0

    move-object/from16 v3, p2

    move-wide/from16 v26, v6

    move-object/from16 v21, v9

    goto :goto_a

    .end local v6    # "currentTimeMillis":J
    .restart local v26    # "currentTimeMillis":J
    :goto_d
    :try_start_f
    monitor-exit v21
    :try_end_f
    .catchall {:try_start_f .. :try_end_f} :catchall_6

    invoke-static {}, Lcom/android/server/pm/PackageManagerService;->resetPriorityAfterPackageManagerTracedLockedSection()V

    throw v0

    :catchall_6
    move-exception v0

    goto :goto_d
.end method

.method disableSystemPackageLPw(Ljava/lang/String;Z)Z
    .locals 6
    .param p1, "name"    # Ljava/lang/String;
    .param p2, "replaced"    # Z

    .line 900
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PackageSetting;

    .line 901
    .local v0, "p":Lcom/android/server/pm/PackageSetting;
    const/4 v1, 0x0

    if-nez v0, :cond_0

    .line 902
    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    const-string v3, "Package "

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v3, " is not an installed package"

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    const-string v3, "PackageManager"

    invoke-static {v3, v2}, Landroid/util/Log;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 903
    return v1

    .line 905
    :cond_0
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/server/pm/PackageSetting;

    .line 907
    .local v2, "dp":Lcom/android/server/pm/PackageSetting;
    if-nez v2, :cond_3

    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v3

    if-eqz v3, :cond_3

    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->isSystem()Z

    move-result v3

    if-eqz v3, :cond_3

    .line 908
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->isUpdatedSystemApp()Z

    move-result v3

    if-nez v3, :cond_3

    .line 910
    if-eqz p2, :cond_1

    .line 915
    new-instance v1, Lcom/android/server/pm/PackageSetting;

    invoke-direct {v1, v0}, Lcom/android/server/pm/PackageSetting;-><init>(Lcom/android/server/pm/PackageSetting;)V

    .local v1, "disabled":Lcom/android/server/pm/PackageSetting;
    goto :goto_0

    .line 917
    .end local v1    # "disabled":Lcom/android/server/pm/PackageSetting;
    :cond_1
    move-object v1, v0

    .line 919
    .restart local v1    # "disabled":Lcom/android/server/pm/PackageSetting;
    :goto_0
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getPkgState()Lcom/android/server/pm/pkg/PackageStateUnserialized;

    move-result-object v3

    const/4 v4, 0x1

    invoke-virtual {v3, v4}, Lcom/android/server/pm/pkg/PackageStateUnserialized;->setUpdatedSystemApp(Z)Lcom/android/server/pm/pkg/PackageStateUnserialized;

    .line 920
    iget-object v3, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v3, p1, v1}, Lcom/android/server/utils/WatchedArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 921
    invoke-virtual {p0, v1}, Lcom/android/server/pm/Settings;->getSharedUserSettingLPr(Lcom/android/server/pm/PackageSetting;)Lcom/android/server/pm/SharedUserSetting;

    move-result-object v3

    .line 922
    .local v3, "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    if-eqz v3, :cond_2

    .line 923
    iget-object v5, v3, Lcom/android/server/pm/SharedUserSetting;->mDisabledPackages:Lcom/android/server/utils/WatchedArraySet;

    invoke-virtual {v5, v1}, Lcom/android/server/utils/WatchedArraySet;->add(Ljava/lang/Object;)Z

    .line 925
    :cond_2
    return v4

    .line 927
    .end local v1    # "disabled":Lcom/android/server/pm/PackageSetting;
    .end local v3    # "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    :cond_3
    return v1
.end method

.method public dispatchChange(Lcom/android/server/utils/Watchable;)V
    .locals 1
    .param p1, "what"    # Lcom/android/server/utils/Watchable;
        .annotation build Landroid/annotation/Nullable;
        .end annotation
    .end param

    .line 231
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mWatchable:Lcom/android/server/utils/WatchableImpl;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchableImpl;->dispatchChange(Lcom/android/server/utils/Watchable;)V

    .line 232
    return-void
.end method

.method dumpComponents(Ljava/io/PrintWriter;Ljava/lang/String;Lcom/android/server/pm/PackageSetting;)V
    .locals 2
    .param p1, "pw"    # Ljava/io/PrintWriter;
    .param p2, "prefix"    # Ljava/lang/String;
    .param p3, "ps"    # Lcom/android/server/pm/PackageSetting;

    .line 5906
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v0

    invoke-interface {v0}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getActivities()Ljava/util/List;

    move-result-object v0

    const-string v1, "activities:"

    invoke-virtual {p0, p1, p2, v1, v0}, Lcom/android/server/pm/Settings;->dumpComponents(Ljava/io/PrintWriter;Ljava/lang/String;Ljava/lang/String;Ljava/util/List;)V

    .line 5907
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v0

    invoke-interface {v0}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getServices()Ljava/util/List;

    move-result-object v0

    const-string/jumbo v1, "services:"

    invoke-virtual {p0, p1, p2, v1, v0}, Lcom/android/server/pm/Settings;->dumpComponents(Ljava/io/PrintWriter;Ljava/lang/String;Ljava/lang/String;Ljava/util/List;)V

    .line 5908
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v0

    invoke-interface {v0}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getReceivers()Ljava/util/List;

    move-result-object v0

    const-string/jumbo v1, "receivers:"

    invoke-virtual {p0, p1, p2, v1, v0}, Lcom/android/server/pm/Settings;->dumpComponents(Ljava/io/PrintWriter;Ljava/lang/String;Ljava/lang/String;Ljava/util/List;)V

    .line 5909
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v0

    invoke-interface {v0}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getProviders()Ljava/util/List;

    move-result-object v0

    const-string/jumbo v1, "providers:"

    invoke-virtual {p0, p1, p2, v1, v0}, Lcom/android/server/pm/Settings;->dumpComponents(Ljava/io/PrintWriter;Ljava/lang/String;Ljava/lang/String;Ljava/util/List;)V

    .line 5910
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v0

    invoke-interface {v0}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getInstrumentations()Ljava/util/List;

    move-result-object v0

    const-string/jumbo v1, "instrumentations:"

    invoke-virtual {p0, p1, p2, v1, v0}, Lcom/android/server/pm/Settings;->dumpComponents(Ljava/io/PrintWriter;Ljava/lang/String;Ljava/lang/String;Ljava/util/List;)V

    .line 5911
    return-void
.end method

.method dumpComponents(Ljava/io/PrintWriter;Ljava/lang/String;Ljava/lang/String;Ljava/util/List;)V
    .locals 4
    .param p1, "pw"    # Ljava/io/PrintWriter;
    .param p2, "prefix"    # Ljava/lang/String;
    .param p3, "label"    # Ljava/lang/String;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/io/PrintWriter;",
            "Ljava/lang/String;",
            "Ljava/lang/String;",
            "Ljava/util/List<",
            "+",
            "Lcom/android/internal/pm/pkg/component/ParsedComponent;",
            ">;)V"
        }
    .end annotation

    .line 5915
    .local p4, "list":Ljava/util/List;, "Ljava/util/List<+Lcom/android/internal/pm/pkg/component/ParsedComponent;>;"
    invoke-static {p4}, Lcom/android/internal/util/CollectionUtils;->size(Ljava/util/Collection;)I

    move-result v0

    .line 5916
    .local v0, "size":I
    if-nez v0, :cond_0

    .line 5917
    return-void

    .line 5919
    :cond_0
    invoke-virtual {p1, p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {p1, p3}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5920
    const/4 v1, 0x0

    .local v1, "i":I
    :goto_0
    if-ge v1, v0, :cond_1

    .line 5921
    invoke-interface {p4, v1}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/internal/pm/pkg/component/ParsedComponent;

    .line 5922
    .local v2, "component":Lcom/android/internal/pm/pkg/component/ParsedComponent;
    invoke-virtual {p1, p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v3, "  "

    invoke-virtual {p1, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5923
    invoke-interface {v2}, Lcom/android/internal/pm/pkg/component/ParsedComponent;->getComponentName()Landroid/content/ComponentName;

    move-result-object v3

    invoke-virtual {v3}, Landroid/content/ComponentName;->flattenToShortString()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {p1, v3}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5920
    .end local v2    # "component":Lcom/android/internal/pm/pkg/component/ParsedComponent;
    add-int/lit8 v1, v1, 0x1

    goto :goto_0

    :cond_1
    nop

    .line 5925
    .end local v1    # "i":I
    return-void
.end method

.method dumpGidsLPr(Ljava/io/PrintWriter;Ljava/lang/String;[I)V
    .locals 1
    .param p1, "pw"    # Ljava/io/PrintWriter;
    .param p2, "prefix"    # Ljava/lang/String;
    .param p3, "gids"    # [I

    .line 5794
    invoke-static {p3}, Lcom/android/internal/util/ArrayUtils;->isEmpty([I)Z

    move-result v0

    if-nez v0, :cond_0

    .line 5795
    invoke-virtual {p1, p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5796
    const-string/jumbo v0, "gids="

    invoke-virtual {p1, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5797
    invoke-static {p3}, Lcom/android/server/pm/PackageManagerServiceUtils;->arrayToString([I)Ljava/lang/String;

    move-result-object v0

    .line 5796
    invoke-virtual {p1, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5799
    :cond_0
    return-void
.end method

.method dumpInstallPermissionsLPr(Ljava/io/PrintWriter;Ljava/lang/String;Landroid/util/ArraySet;Lcom/android/server/pm/permission/LegacyPermissionState;Ljava/util/List;)V
    .locals 15
    .param p1, "pw"    # Ljava/io/PrintWriter;
    .param p2, "prefix"    # Ljava/lang/String;
    .param p4, "permissionsState"    # Lcom/android/server/pm/permission/LegacyPermissionState;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/io/PrintWriter;",
            "Ljava/lang/String;",
            "Landroid/util/ArraySet<",
            "Ljava/lang/String;",
            ">;",
            "Lcom/android/server/pm/permission/LegacyPermissionState;",
            "Ljava/util/List<",
            "Landroid/content/pm/UserInfo;",
            ">;)V"
        }
    .end annotation

    .line 5855
    .local p3, "filterPermissionNames":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .local p5, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    move-object/from16 v0, p1

    move-object/from16 v1, p3

    move-object/from16 v2, p4

    new-instance v3, Landroid/util/ArraySet;

    invoke-direct {v3}, Landroid/util/ArraySet;-><init>()V

    .line 5856
    .local v3, "dumpPermissionNames":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    invoke-interface/range {p5 .. p5}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v4

    :goto_0
    invoke-interface {v4}, Ljava/util/Iterator;->hasNext()Z

    move-result v5

    if-eqz v5, :cond_3

    invoke-interface {v4}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Landroid/content/pm/UserInfo;

    .line 5857
    .local v5, "user":Landroid/content/pm/UserInfo;
    iget v6, v5, Landroid/content/pm/UserInfo;->id:I

    .line 5858
    .local v6, "userId":I
    invoke-virtual {v2, v6}, Lcom/android/server/pm/permission/LegacyPermissionState;->getPermissionStates(I)Ljava/util/Collection;

    move-result-object v7

    .line 5860
    .local v7, "permissionStates":Ljava/util/Collection;, "Ljava/util/Collection<Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;>;"
    invoke-interface {v7}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v8

    :goto_1
    invoke-interface {v8}, Ljava/util/Iterator;->hasNext()Z

    move-result v9

    nop

    if-eqz v9, :cond_2

    invoke-interface {v8}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v9

    check-cast v9, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;

    .line 5861
    .local v9, "permissionState":Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;
    invoke-virtual {v9}, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;->isRuntime()Z

    move-result v10

    if-eqz v10, :cond_0

    .line 5862
    goto :goto_1

    .line 5864
    :cond_0
    invoke-virtual {v9}, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;->getName()Ljava/lang/String;

    move-result-object v10

    .line 5865
    .local v10, "permissionName":Ljava/lang/String;
    if-eqz v1, :cond_1

    .line 5866
    invoke-virtual {v1, v10}, Landroid/util/ArraySet;->contains(Ljava/lang/Object;)Z

    move-result v11

    if-nez v11, :cond_1

    .line 5867
    goto :goto_1

    .line 5869
    :cond_1
    invoke-virtual {v3, v10}, Landroid/util/ArraySet;->add(Ljava/lang/Object;)Z

    .line 5870
    .end local v9    # "permissionState":Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;
    .end local v10    # "permissionName":Ljava/lang/String;
    goto :goto_1

    .line 5871
    .end local v5    # "user":Landroid/content/pm/UserInfo;
    .end local v6    # "userId":I
    .end local v7    # "permissionStates":Ljava/util/Collection;, "Ljava/util/Collection<Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;>;"
    :cond_2
    goto :goto_0

    .line 5872
    :cond_3
    const/4 v4, 0x0

    .line 5873
    .local v4, "printedSomething":Z
    invoke-virtual {v3}, Landroid/util/ArraySet;->iterator()Ljava/util/Iterator;

    move-result-object v5

    :goto_2
    invoke-interface {v5}, Ljava/util/Iterator;->hasNext()Z

    move-result v6

    if-eqz v6, :cond_b

    invoke-interface {v5}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v6

    check-cast v6, Ljava/lang/String;

    .line 5874
    .local v6, "permissionName":Ljava/lang/String;
    const/4 v7, 0x0

    invoke-virtual {v2, v6, v7}, Lcom/android/server/pm/permission/LegacyPermissionState;->getPermissionState(Ljava/lang/String;I)Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;

    move-result-object v8

    .line 5876
    .local v8, "systemPermissionState":Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;
    invoke-interface/range {p5 .. p5}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v9

    :goto_3
    invoke-interface {v9}, Ljava/util/Iterator;->hasNext()Z

    move-result v10

    nop

    if-eqz v10, :cond_a

    invoke-interface {v9}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v10

    check-cast v10, Landroid/content/pm/UserInfo;

    .line 5877
    .local v10, "user":Landroid/content/pm/UserInfo;
    iget v11, v10, Landroid/content/pm/UserInfo;->id:I

    .line 5879
    .local v11, "userId":I
    if-nez v11, :cond_4

    .line 5880
    move-object v12, v8

    .local v12, "permissionState":Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;
    goto :goto_4

    .line 5882
    .end local v12    # "permissionState":Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;
    :cond_4
    invoke-virtual {v2, v6, v11}, Lcom/android/server/pm/permission/LegacyPermissionState;->getPermissionState(Ljava/lang/String;I)Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;

    move-result-object v12

    .line 5883
    .restart local v12    # "permissionState":Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;
    invoke-static {v12, v8}, Ljava/util/Objects;->equals(Ljava/lang/Object;Ljava/lang/Object;)Z

    move-result v13

    if-eqz v13, :cond_5

    .line 5884
    goto :goto_3

    .line 5887
    :cond_5
    :goto_4
    if-nez v4, :cond_6

    .line 5888
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string/jumbo v13, "install permissions:"

    invoke-virtual {v0, v13}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5889
    const/4 v4, 0x1

    .line 5891
    :cond_6
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v13, "  "

    invoke-virtual {v0, v13}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v0, v6}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5892
    const-string v13, ": granted="

    invoke-virtual {v0, v13}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    if-eqz v12, :cond_7

    .line 5893
    invoke-virtual {v12}, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;->isGranted()Z

    move-result v13

    if-eqz v13, :cond_7

    const/4 v13, 0x1

    goto :goto_5

    :cond_7
    move v13, v7

    .line 5892
    :goto_5
    invoke-virtual {v0, v13}, Ljava/io/PrintWriter;->print(Z)V

    .line 5894
    nop

    .line 5895
    if-eqz v12, :cond_8

    invoke-virtual {v12}, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;->getFlags()I

    move-result v13

    goto :goto_6

    :cond_8
    move v13, v7

    .line 5894
    :goto_6
    const-string v14, ", flags="

    invoke-static {v14, v13}, Lcom/android/server/pm/Settings;->permissionFlagsToString(Ljava/lang/String;I)Ljava/lang/String;

    move-result-object v13

    invoke-virtual {v0, v13}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5896
    if-nez v11, :cond_9

    .line 5897
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    goto :goto_7

    .line 5899
    :cond_9
    const-string v13, ", userId="

    invoke-virtual {v0, v13}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v0, v11}, Ljava/io/PrintWriter;->println(I)V

    .line 5901
    .end local v10    # "user":Landroid/content/pm/UserInfo;
    .end local v11    # "userId":I
    .end local v12    # "permissionState":Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;
    :goto_7
    goto :goto_3

    .line 5902
    .end local v6    # "permissionName":Ljava/lang/String;
    .end local v8    # "systemPermissionState":Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;
    :cond_a
    goto :goto_2

    .line 5903
    :cond_b
    return-void
.end method

.method dumpPackageLPr(Ljava/io/PrintWriter;Ljava/lang/String;Ljava/lang/String;Landroid/util/ArraySet;Lcom/android/server/pm/PackageSetting;Lcom/android/server/pm/permission/LegacyPermissionState;Ljava/text/SimpleDateFormat;Ljava/util/Date;Ljava/util/List;ZZ)V
    .locals 30
    .param p1, "pw"    # Ljava/io/PrintWriter;
    .param p2, "prefix"    # Ljava/lang/String;
    .param p3, "checkinTag"    # Ljava/lang/String;
    .param p5, "ps"    # Lcom/android/server/pm/PackageSetting;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p6, "permissionsState"    # Lcom/android/server/pm/permission/LegacyPermissionState;
    .param p7, "sdf"    # Ljava/text/SimpleDateFormat;
    .param p8, "date"    # Ljava/util/Date;
    .param p10, "dumpAll"    # Z
    .param p11, "dumpAllComponents"    # Z
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/io/PrintWriter;",
            "Ljava/lang/String;",
            "Ljava/lang/String;",
            "Landroid/util/ArraySet<",
            "Ljava/lang/String;",
            ">;",
            "Lcom/android/server/pm/PackageSetting;",
            "Lcom/android/server/pm/permission/LegacyPermissionState;",
            "Ljava/text/SimpleDateFormat;",
            "Ljava/util/Date;",
            "Ljava/util/List<",
            "Landroid/content/pm/UserInfo;",
            ">;ZZ)V"
        }
    .end annotation

    .annotation build Ldalvik/annotation/optimization/NeverCompile;
    .end annotation

    .line 4997
    .local p4, "permissionNames":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .local p9, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    move-object/from16 v6, p0

    move-object/from16 v7, p1

    move-object/from16 v8, p2

    move-object/from16 v9, p3

    move-object/from16 v10, p4

    move-object/from16 v11, p5

    move-object/from16 v12, p8

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v13

    .line 4998
    .local v13, "pkg":Lcom/android/server/pm/pkg/AndroidPackage;
    if-eqz v9, :cond_10

    .line 4999
    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5000
    const-string v0, ","

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5001
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getRealName()Ljava/lang/String;

    move-result-object v1

    if-eqz v1, :cond_0

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getRealName()Ljava/lang/String;

    move-result-object v1

    goto :goto_0

    :cond_0
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v1

    :goto_0
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5002
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5003
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v1

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(I)V

    .line 5004
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5005
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getVersionCode()J

    move-result-wide v1

    invoke-virtual {v7, v1, v2}, Ljava/io/PrintWriter;->print(J)V

    .line 5006
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5007
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getLastUpdateTime()J

    move-result-wide v1

    invoke-virtual {v7, v1, v2}, Ljava/io/PrintWriter;->print(J)V

    .line 5008
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5009
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v1

    iget-object v1, v1, Lcom/android/server/pm/InstallSource;->mInstallerPackageName:Ljava/lang/String;

    const-string v2, "?"

    if-eqz v1, :cond_1

    .line 5010
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v1

    iget-object v1, v1, Lcom/android/server/pm/InstallSource;->mInstallerPackageName:Ljava/lang/String;

    goto :goto_1

    :cond_1
    move-object v1, v2

    .line 5009
    :goto_1
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5011
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v1

    iget v1, v1, Lcom/android/server/pm/InstallSource;->mInstallerPackageUid:I

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(I)V

    .line 5012
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v1

    iget-object v1, v1, Lcom/android/server/pm/InstallSource;->mUpdateOwnerPackageName:Ljava/lang/String;

    if-eqz v1, :cond_2

    .line 5013
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v1

    iget-object v1, v1, Lcom/android/server/pm/InstallSource;->mUpdateOwnerPackageName:Ljava/lang/String;

    goto :goto_2

    :cond_2
    move-object v1, v2

    .line 5012
    :goto_2
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5014
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v1

    iget-object v1, v1, Lcom/android/server/pm/InstallSource;->mInstallerAttributionTag:Ljava/lang/String;

    if-eqz v1, :cond_3

    .line 5015
    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v3, "("

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v3

    iget-object v3, v3, Lcom/android/server/pm/InstallSource;->mInstallerAttributionTag:Ljava/lang/String;

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v3, ")"

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    goto :goto_3

    :cond_3
    const-string v1, ""

    .line 5014
    :goto_3
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5016
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5017
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v1

    iget v1, v1, Lcom/android/server/pm/InstallSource;->mPackageSource:I

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(I)V

    .line 5018
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5019
    const-string v1, "-"

    if-eqz v13, :cond_4

    .line 5020
    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string/jumbo v3, "splt,"

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5021
    const-string v4, "base,"

    invoke-virtual {v7, v4}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5022
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getBaseRevisionCode()I

    move-result v4

    invoke-virtual {v7, v4}, Ljava/io/PrintWriter;->println(I)V

    .line 5023
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getSplitRevisionCodes()[I

    move-result-object v4

    .line 5024
    .local v4, "splitRevisionCodes":[I
    const/4 v5, 0x0

    .local v5, "i":I
    :goto_4
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getSplitNames()[Ljava/lang/String;

    move-result-object v14

    array-length v14, v14

    if-ge v5, v14, :cond_4

    .line 5025
    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5026
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getSplitNames()[Ljava/lang/String;

    move-result-object v14

    aget-object v14, v14, v5

    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5027
    aget v14, v4, v5

    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->println(I)V

    .line 5024
    add-int/lit8 v5, v5, 0x1

    goto :goto_4

    .line 5030
    .end local v4    # "splitRevisionCodes":[I
    .end local v5    # "i":I
    :cond_4
    invoke-interface/range {p9 .. p9}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v3

    :goto_5
    invoke-interface {v3}, Ljava/util/Iterator;->hasNext()Z

    move-result v4

    if-eqz v4, :cond_f

    invoke-interface {v3}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Landroid/content/pm/UserInfo;

    .line 5031
    .local v4, "user":Landroid/content/pm/UserInfo;
    iget v5, v4, Landroid/content/pm/UserInfo;->id:I

    invoke-interface {v11, v5}, Lcom/android/server/pm/pkg/PackageStateInternal;->getUserStateOrDefault(I)Lcom/android/server/pm/pkg/PackageUserStateInternal;

    move-result-object v5

    .line 5032
    .local v5, "userState":Lcom/android/server/pm/pkg/PackageUserStateInternal;
    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5033
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5034
    const-string/jumbo v14, "usr"

    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5035
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5036
    iget v14, v4, Landroid/content/pm/UserInfo;->id:I

    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->print(I)V

    .line 5037
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5038
    invoke-interface {v5}, Lcom/android/server/pm/pkg/PackageUserState;->isInstalled()Z

    move-result v14

    if-eqz v14, :cond_5

    const-string v14, "I"

    goto :goto_6

    :cond_5
    const-string/jumbo v14, "i"

    :goto_6
    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5039
    invoke-interface {v5}, Lcom/android/server/pm/pkg/PackageUserState;->isHidden()Z

    move-result v14

    if-eqz v14, :cond_6

    const-string v14, "B"

    goto :goto_7

    :cond_6
    const-string v14, "b"

    :goto_7
    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5040
    invoke-interface {v5}, Lcom/android/server/pm/pkg/PackageUserState;->isSuspended()Z

    move-result v14

    if-eqz v14, :cond_7

    const-string v14, "SU"

    goto :goto_8

    :cond_7
    const-string/jumbo v14, "su"

    :goto_8
    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5041
    invoke-interface {v5}, Lcom/android/server/pm/pkg/PackageUserState;->isStopped()Z

    move-result v14

    if-eqz v14, :cond_8

    const-string v14, "S"

    goto :goto_9

    :cond_8
    const-string/jumbo v14, "s"

    :goto_9
    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5042
    invoke-interface {v5}, Lcom/android/server/pm/pkg/PackageUserState;->isNotLaunched()Z

    move-result v14

    if-eqz v14, :cond_9

    const-string/jumbo v14, "l"

    goto :goto_a

    :cond_9
    const-string v14, "L"

    :goto_a
    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5043
    invoke-interface {v5}, Lcom/android/server/pm/pkg/PackageUserState;->isInstantApp()Z

    move-result v14

    if-eqz v14, :cond_a

    const-string v14, "IA"

    goto :goto_b

    :cond_a
    const-string/jumbo v14, "ia"

    :goto_b
    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5044
    invoke-interface {v5}, Lcom/android/server/pm/pkg/PackageUserState;->isVirtualPreload()Z

    move-result v14

    if-eqz v14, :cond_b

    const-string v14, "VPI"

    goto :goto_c

    :cond_b
    const-string/jumbo v14, "vpi"

    :goto_c
    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5045
    invoke-interface {v5}, Lcom/android/server/pm/pkg/PackageUserState;->isQuarantined()Z

    move-result v14

    if-eqz v14, :cond_c

    const-string v14, "Q"

    goto :goto_d

    :cond_c
    const-string/jumbo v14, "q"

    :goto_d
    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5046
    invoke-interface {v5}, Lcom/android/server/pm/pkg/PackageUserState;->getHarmfulAppWarning()Ljava/lang/String;

    move-result-object v14

    .line 5047
    .local v14, "harmfulAppWarning":Ljava/lang/String;
    if-eqz v14, :cond_d

    const-string v15, "HA"

    goto :goto_e

    :cond_d
    const-string/jumbo v15, "ha"

    :goto_e
    invoke-virtual {v7, v15}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5048
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5049
    invoke-interface {v5}, Lcom/android/server/pm/pkg/PackageUserState;->getEnabledState()I

    move-result v15

    invoke-virtual {v7, v15}, Ljava/io/PrintWriter;->print(I)V

    .line 5050
    invoke-interface {v5}, Lcom/android/server/pm/pkg/PackageUserState;->getLastDisableAppCaller()Ljava/lang/String;

    move-result-object v15

    .line 5051
    .local v15, "lastDisabledAppCaller":Ljava/lang/String;
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5052
    move-object/from16 v16, v1

    if-eqz v15, :cond_e

    move-object v1, v15

    goto :goto_f

    :cond_e
    move-object v1, v2

    :goto_f
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5053
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5054
    iget v1, v4, Landroid/content/pm/UserInfo;->id:I

    invoke-virtual {v11, v1}, Lcom/android/server/pm/PackageSetting;->readUserState(I)Lcom/android/server/pm/pkg/PackageUserStateInternal;

    move-result-object v1

    move-object/from16 v17, v2

    invoke-interface {v1}, Lcom/android/server/pm/pkg/PackageUserState;->getFirstInstallTimeMillis()J

    move-result-wide v1

    invoke-virtual {v7, v1, v2}, Ljava/io/PrintWriter;->print(J)V

    .line 5055
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5056
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5057
    .end local v4    # "user":Landroid/content/pm/UserInfo;
    .end local v5    # "userState":Lcom/android/server/pm/pkg/PackageUserStateInternal;
    .end local v14    # "harmfulAppWarning":Ljava/lang/String;
    .end local v15    # "lastDisabledAppCaller":Ljava/lang/String;
    move-object/from16 v1, v16

    move-object/from16 v2, v17

    goto/16 :goto_5

    .line 5058
    :cond_f
    return-void

    .line 5061
    :cond_10
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "Package ["

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5062
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getRealName()Ljava/lang/String;

    move-result-object v0

    if-eqz v0, :cond_11

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getRealName()Ljava/lang/String;

    move-result-object v0

    goto :goto_10

    :cond_11
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v0

    :goto_10
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5063
    const-string v0, "] ("

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5064
    invoke-static/range {p5 .. p5}, Ljava/lang/System;->identityHashCode(Ljava/lang/Object;)I

    move-result v0

    invoke-static {v0}, Ljava/lang/Integer;->toHexString(I)Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5065
    const-string v0, "):"

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5067
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getRealName()Ljava/lang/String;

    move-result-object v0

    if-eqz v0, :cond_12

    .line 5068
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  compat name="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5069
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5072
    :cond_12
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  appId="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(I)V

    .line 5074
    invoke-virtual {v6, v11}, Lcom/android/server/pm/Settings;->getSharedUserSettingLPr(Lcom/android/server/pm/PackageSetting;)Lcom/android/server/pm/SharedUserSetting;

    move-result-object v14

    .line 5075
    .local v14, "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    if-eqz v14, :cond_13

    .line 5076
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  sharedUser="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->println(Ljava/lang/Object;)V

    .line 5078
    :cond_13
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  pkg="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v13}, Ljava/io/PrintWriter;->println(Ljava/lang/Object;)V

    .line 5079
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  codePath="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPathString()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5080
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getOldPaths()Ljava/util/LinkedHashSet;

    move-result-object v0

    if-eqz v0, :cond_14

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getOldPaths()Ljava/util/LinkedHashSet;

    move-result-object v0

    invoke-virtual {v0}, Ljava/util/LinkedHashSet;->size()I

    move-result v0

    if-lez v0, :cond_14

    .line 5081
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getOldPaths()Ljava/util/LinkedHashSet;

    move-result-object v0

    invoke-virtual {v0}, Ljava/util/LinkedHashSet;->iterator()Ljava/util/Iterator;

    move-result-object v0

    :goto_11
    invoke-interface {v0}, Ljava/util/Iterator;->hasNext()Z

    move-result v1

    nop

    if-eqz v1, :cond_14

    invoke-interface {v0}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Ljava/io/File;

    .line 5082
    .local v1, "oldPath":Ljava/io/File;
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    const-string v3, "    oldCodePath="

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/io/File;->getAbsolutePath()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5083
    .end local v1    # "oldPath":Ljava/io/File;
    goto :goto_11

    .line 5085
    :cond_14
    if-nez v10, :cond_16

    .line 5086
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  resourcePath="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPathString()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5087
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  legacyNativeLibraryDir="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5088
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getLegacyNativeLibraryPath()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5089
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  extractNativeLibs="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5090
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/SettingBase;->getFlags()I

    move-result v0

    const/high16 v1, 0x10000000

    and-int/2addr v0, v1

    if-eqz v0, :cond_15

    .line 5091
    const-string/jumbo v0, "true"

    goto :goto_12

    :cond_15
    const-string v0, "false"

    .line 5090
    :goto_12
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5092
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  primaryCpuAbi="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPrimaryCpuAbiLegacy()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5093
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  secondaryCpuAbi="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getSecondaryCpuAbiLegacy()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5094
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  cpuAbiOverride="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getCpuAbiOverride()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5096
    :cond_16
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  versionCode="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getVersionCode()J

    move-result-wide v0

    invoke-virtual {v7, v0, v1}, Ljava/io/PrintWriter;->print(J)V

    .line 5097
    if-eqz v13, :cond_17

    .line 5098
    const-string v0, " minSdk="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5099
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getMinSdkVersion()I

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(I)V

    .line 5101
    :cond_17
    const-string v0, " targetSdk="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getTargetSdkVersion()I

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(I)V

    .line 5102
    const-string v0, "]"

    const-string v1, ", "

    if-eqz v13, :cond_1a

    .line 5103
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getMinExtensionVersions()Landroid/util/SparseIntArray;

    move-result-object v2

    .line 5105
    .local v2, "minExtensionVersions":Landroid/util/SparseIntArray;
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v3, "  minExtensionVersions=["

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5106
    if-eqz v2, :cond_19

    .line 5107
    new-instance v3, Ljava/util/ArrayList;

    invoke-direct {v3}, Ljava/util/ArrayList;-><init>()V

    .line 5108
    .local v3, "minExtVerStrings":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    invoke-virtual {v2}, Landroid/util/SparseIntArray;->size()I

    move-result v4

    .line 5109
    .local v4, "size":I
    const/4 v5, 0x0

    .local v5, "index":I
    :goto_13
    if-ge v5, v4, :cond_18

    .line 5110
    invoke-virtual {v2, v5}, Landroid/util/SparseIntArray;->keyAt(I)I

    move-result v15

    .line 5111
    .local v15, "key":I
    move/from16 v16, v4

    .end local v4    # "size":I
    .local v16, "size":I
    invoke-virtual {v2, v5}, Landroid/util/SparseIntArray;->valueAt(I)I

    move-result v4

    .line 5112
    .local v4, "value":I
    move-object/from16 v17, v2

    .end local v2    # "minExtensionVersions":Landroid/util/SparseIntArray;
    .local v17, "minExtensionVersions":Landroid/util/SparseIntArray;
    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v2, v15}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    const-string v9, "="

    invoke-virtual {v2, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2, v4}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    invoke-interface {v3, v2}, Ljava/util/List;->add(Ljava/lang/Object;)Z

    .line 5109
    .end local v4    # "value":I
    .end local v15    # "key":I
    add-int/lit8 v5, v5, 0x1

    move-object/from16 v9, p3

    move/from16 v4, v16

    move-object/from16 v2, v17

    goto :goto_13

    .end local v16    # "size":I
    .end local v17    # "minExtensionVersions":Landroid/util/SparseIntArray;
    .restart local v2    # "minExtensionVersions":Landroid/util/SparseIntArray;
    .local v4, "size":I
    :cond_18
    move-object/from16 v17, v2

    move/from16 v16, v4

    .line 5115
    .end local v2    # "minExtensionVersions":Landroid/util/SparseIntArray;
    .end local v4    # "size":I
    .end local v5    # "index":I
    .restart local v16    # "size":I
    .restart local v17    # "minExtensionVersions":Landroid/util/SparseIntArray;
    invoke-static {v1, v3}, Landroid/text/TextUtils;->join(Ljava/lang/CharSequence;Ljava/lang/Iterable;)Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    goto :goto_14

    .line 5106
    .end local v3    # "minExtVerStrings":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v16    # "size":I
    .end local v17    # "minExtensionVersions":Landroid/util/SparseIntArray;
    .restart local v2    # "minExtensionVersions":Landroid/util/SparseIntArray;
    :cond_19
    move-object/from16 v17, v2

    .line 5117
    .end local v2    # "minExtensionVersions":Landroid/util/SparseIntArray;
    .restart local v17    # "minExtensionVersions":Landroid/util/SparseIntArray;
    :goto_14
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5119
    .end local v17    # "minExtensionVersions":Landroid/util/SparseIntArray;
    :cond_1a
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5120
    const-string v2, "  pendingRestore=true"

    const-string v9, "    "

    if-eqz v13, :cond_41

    .line 5121
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v3, "  versionName="

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getVersionName()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5122
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v3, "  hiddenApiEnforcementPolicy="

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5123
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getHiddenApiEnforcementPolicy()I

    move-result v3

    .line 5122
    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->println(I)V

    .line 5124
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v3, "  usesNonSdkApi="

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->isNonSdkApiRequested()Z

    move-result v3

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->println(Z)V

    .line 5125
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v3, "  splits="

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-static {v7, v13}, Lcom/android/server/pm/Settings;->dumpSplitNames(Ljava/io/PrintWriter;Lcom/android/server/pm/pkg/AndroidPackage;)V

    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5126
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getSigningDetails()Landroid/content/pm/SigningDetails;

    move-result-object v3

    invoke-virtual {v3}, Landroid/content/pm/SigningDetails;->getSignatureSchemeVersion()I

    move-result v3

    .line 5127
    .local v3, "apkSigningVersion":I
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v4, "  apkSigningVersion="

    invoke-virtual {v7, v4}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->println(I)V

    .line 5128
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v4, "  flags="

    invoke-virtual {v7, v4}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5129
    invoke-static {v13, v11}, Lcom/android/server/pm/parsing/PackageInfoUtils;->appInfoFlags(Lcom/android/server/pm/pkg/AndroidPackage;Lcom/android/server/pm/pkg/PackageStateInternal;)I

    move-result v4

    sget-object v5, Lcom/android/server/pm/Settings;->FLAG_DUMP_SPEC:[Ljava/lang/Object;

    invoke-static {v7, v4, v5}, Lcom/android/server/pm/Settings;->printFlags(Ljava/io/PrintWriter;I[Ljava/lang/Object;)V

    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5130
    invoke-static {v13, v11}, Lcom/android/server/pm/parsing/PackageInfoUtils;->appInfoPrivateFlags(Lcom/android/server/pm/pkg/AndroidPackage;Lcom/android/server/pm/pkg/PackageStateInternal;)I

    move-result v4

    .line 5131
    .local v4, "privateFlags":I
    if-eqz v4, :cond_1b

    .line 5132
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v5, "  privateFlags="

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    sget-object v5, Lcom/android/server/pm/Settings;->PRIVATE_FLAG_DUMP_SPEC:[Ljava/lang/Object;

    invoke-static {v7, v4, v5}, Lcom/android/server/pm/Settings;->printFlags(Ljava/io/PrintWriter;I[Ljava/lang/Object;)V

    .line 5133
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5135
    :cond_1b
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->isPendingRestore()Z

    move-result v5

    if-eqz v5, :cond_1c

    .line 5136
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5137
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5139
    :cond_1c
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->isUpdatableSystem()Z

    move-result v5

    if-nez v5, :cond_1d

    .line 5140
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v5, "  updatableSystem=false"

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5141
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5143
    :cond_1d
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getEmergencyInstaller()Ljava/lang/String;

    move-result-object v5

    if-eqz v5, :cond_1e

    .line 5144
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v5, "  emergencyInstaller="

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5145
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getEmergencyInstaller()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5147
    :cond_1e
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->hasPreserveLegacyExternalStorage()Z

    move-result v5

    if-eqz v5, :cond_1f

    .line 5148
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v5, "  hasPreserveLegacyExternalStorage=true"

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5149
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5151
    :cond_1f
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v5, "  forceQueryable="

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5152
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v5

    invoke-interface {v5}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->isForceQueryable()Z

    move-result v5

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->print(Z)V

    .line 5153
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->isForceQueryableOverride()Z

    move-result v5

    if-eqz v5, :cond_20

    .line 5154
    const-string v5, " (override=true)"

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5156
    :cond_20
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5157
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v5

    invoke-interface {v5}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getQueriesPackages()Ljava/util/List;

    move-result-object v5

    invoke-interface {v5}, Ljava/util/List;->isEmpty()Z

    move-result v5

    if-nez v5, :cond_21

    .line 5158
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->append(Ljava/lang/CharSequence;)Ljava/io/PrintWriter;

    move-result-object v5

    const-string v15, "  queriesPackages="

    invoke-virtual {v5, v15}, Ljava/io/PrintWriter;->append(Ljava/lang/CharSequence;)Ljava/io/PrintWriter;

    move-result-object v5

    .line 5159
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v15

    invoke-interface {v15}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getQueriesPackages()Ljava/util/List;

    move-result-object v15

    invoke-virtual {v5, v15}, Ljava/io/PrintWriter;->println(Ljava/lang/Object;)V

    .line 5161
    :cond_21
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v5

    invoke-interface {v5}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getQueriesIntents()Ljava/util/List;

    move-result-object v5

    invoke-interface {v5}, Ljava/util/List;->isEmpty()Z

    move-result v5

    if-nez v5, :cond_22

    .line 5162
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->append(Ljava/lang/CharSequence;)Ljava/io/PrintWriter;

    move-result-object v5

    const-string v15, "  queriesIntents="

    invoke-virtual {v5, v15}, Ljava/io/PrintWriter;->append(Ljava/lang/CharSequence;)Ljava/io/PrintWriter;

    move-result-object v5

    .line 5163
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v15

    invoke-interface {v15}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->getQueriesIntents()Ljava/util/List;

    move-result-object v15

    invoke-virtual {v5, v15}, Ljava/io/PrintWriter;->println(Ljava/lang/Object;)V

    .line 5165
    :cond_22
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v5, "  scannedAsStoppedSystemApp="

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5166
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->isScannedAsStoppedSystemApp()Z

    move-result v5

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->println(Z)V

    .line 5167
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v5, "  supportsScreens=["

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5168
    const/4 v5, 0x1

    .line 5169
    .local v5, "first":Z
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->isSmallScreensSupported()Z

    move-result v15

    if-eqz v15, :cond_24

    .line 5170
    if-nez v5, :cond_23

    .line 5171
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5172
    :cond_23
    const/4 v5, 0x0

    .line 5173
    const-string/jumbo v15, "small"

    invoke-virtual {v7, v15}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5175
    :cond_24
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->isNormalScreensSupported()Z

    move-result v15

    if-eqz v15, :cond_26

    .line 5176
    if-nez v5, :cond_25

    .line 5177
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5178
    :cond_25
    const/4 v5, 0x0

    .line 5179
    const-string/jumbo v15, "medium"

    invoke-virtual {v7, v15}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5181
    :cond_26
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->isLargeScreensSupported()Z

    move-result v15

    if-eqz v15, :cond_28

    .line 5182
    if-nez v5, :cond_27

    .line 5183
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5184
    :cond_27
    const/4 v5, 0x0

    .line 5185
    const-string/jumbo v15, "large"

    invoke-virtual {v7, v15}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5187
    :cond_28
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->isExtraLargeScreensSupported()Z

    move-result v15

    if-eqz v15, :cond_2a

    .line 5188
    if-nez v5, :cond_29

    .line 5189
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5190
    :cond_29
    const/4 v5, 0x0

    .line 5191
    const-string/jumbo v15, "xlarge"

    invoke-virtual {v7, v15}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5193
    :cond_2a
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->isResizeable()Z

    move-result v15

    if-eqz v15, :cond_2c

    .line 5194
    if-nez v5, :cond_2b

    .line 5195
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5196
    :cond_2b
    const/4 v5, 0x0

    .line 5197
    const-string/jumbo v15, "resizeable"

    invoke-virtual {v7, v15}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5199
    :cond_2c
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->isAnyDensity()Z

    move-result v15

    if-eqz v15, :cond_2e

    .line 5200
    if-nez v5, :cond_2d

    .line 5201
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5202
    :cond_2d
    const/4 v5, 0x0

    .line 5203
    const-string v1, "anyDensity"

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5205
    :cond_2e
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5206
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getLibraryNames()Ljava/util/List;

    move-result-object v0

    .line 5207
    .local v0, "libraryNames":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    if-eqz v0, :cond_2f

    invoke-interface {v0}, Ljava/util/List;->size()I

    move-result v1

    if-lez v1, :cond_2f

    .line 5208
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v1, "  dynamic libraries:"

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5209
    const/4 v1, 0x0

    .local v1, "i":I
    :goto_15
    invoke-interface {v0}, Ljava/util/List;->size()I

    move-result v15

    if-ge v1, v15, :cond_2f

    .line 5210
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5211
    invoke-interface {v0, v1}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v15

    check-cast v15, Ljava/lang/String;

    invoke-virtual {v7, v15}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5209
    add-int/lit8 v1, v1, 0x1

    goto :goto_15

    .line 5214
    .end local v1    # "i":I
    :cond_2f
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getStaticSharedLibraryName()Ljava/lang/String;

    move-result-object v1

    const-string/jumbo v15, "name:"

    move-object/from16 v16, v0

    .end local v0    # "libraryNames":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .local v16, "libraryNames":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    const-string v0, " version:"

    if-eqz v1, :cond_30

    .line 5215
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v1, "  static library:"

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5216
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5217
    invoke-virtual {v7, v15}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getStaticSharedLibraryName()Ljava/lang/String;

    move-result-object v1

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5218
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    move v1, v3

    move/from16 v17, v4

    .end local v3    # "apkSigningVersion":I
    .end local v4    # "privateFlags":I
    .local v1, "apkSigningVersion":I
    .local v17, "privateFlags":I
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getStaticSharedLibraryVersion()J

    move-result-wide v3

    invoke-virtual {v7, v3, v4}, Ljava/io/PrintWriter;->println(J)V

    goto :goto_16

    .line 5214
    .end local v1    # "apkSigningVersion":I
    .end local v17    # "privateFlags":I
    .restart local v3    # "apkSigningVersion":I
    .restart local v4    # "privateFlags":I
    :cond_30
    move v1, v3

    move/from16 v17, v4

    .line 5221
    .end local v3    # "apkSigningVersion":I
    .end local v4    # "privateFlags":I
    .restart local v1    # "apkSigningVersion":I
    .restart local v17    # "privateFlags":I
    :goto_16
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getSdkLibraryName()Ljava/lang/String;

    move-result-object v3

    if-eqz v3, :cond_31

    .line 5222
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v3, "  SDK library:"

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5223
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5224
    invoke-virtual {v7, v15}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getSdkLibraryName()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5225
    const-string v3, " versionMajor:"

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getSdkLibVersionMajor()I

    move-result v3

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->println(I)V

    .line 5228
    :cond_31
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getUsesLibraries()Ljava/util/List;

    move-result-object v3

    .line 5229
    .local v3, "usesLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    invoke-interface {v3}, Ljava/util/List;->size()I

    move-result v4

    if-lez v4, :cond_32

    .line 5230
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v4, "  usesLibraries:"

    invoke-virtual {v7, v4}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5231
    const/4 v4, 0x0

    .local v4, "i":I
    :goto_17
    invoke-interface {v3}, Ljava/util/List;->size()I

    move-result v15

    if-ge v4, v15, :cond_32

    .line 5232
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-interface {v3, v4}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v15

    check-cast v15, Ljava/lang/String;

    invoke-virtual {v7, v15}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5231
    add-int/lit8 v4, v4, 0x1

    goto :goto_17

    .line 5236
    .end local v4    # "i":I
    :cond_32
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getUsesStaticLibraries()Ljava/util/List;

    move-result-object v4

    .line 5237
    .local v4, "usesStaticLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getUsesStaticLibrariesVersions()[J

    move-result-object v15

    .line 5238
    .local v15, "usesStaticLibrariesVersions":[J
    invoke-interface {v4}, Ljava/util/List;->size()I

    move-result v18

    if-lez v18, :cond_34

    .line 5239
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    move/from16 v18, v1

    .end local v1    # "apkSigningVersion":I
    .local v18, "apkSigningVersion":I
    const-string v1, "  usesStaticLibraries:"

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5240
    const/4 v1, 0x0

    .local v1, "i":I
    :goto_18
    move-object/from16 v19, v3

    .end local v3    # "usesLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .local v19, "usesLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    invoke-interface {v4}, Ljava/util/List;->size()I

    move-result v3

    if-ge v1, v3, :cond_33

    .line 5241
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5242
    invoke-interface {v4, v1}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Ljava/lang/String;

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5243
    move-object/from16 v20, v4

    .end local v4    # "usesStaticLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .local v20, "usesStaticLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    aget-wide v3, v15, v1

    invoke-virtual {v7, v3, v4}, Ljava/io/PrintWriter;->println(J)V

    .line 5240
    add-int/lit8 v1, v1, 0x1

    move-object/from16 v3, v19

    move-object/from16 v4, v20

    goto :goto_18

    .end local v20    # "usesStaticLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v4    # "usesStaticLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    :cond_33
    move-object/from16 v20, v4

    .end local v4    # "usesStaticLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v20    # "usesStaticLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    goto :goto_19

    .line 5238
    .end local v18    # "apkSigningVersion":I
    .end local v19    # "usesLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v20    # "usesStaticLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .local v1, "apkSigningVersion":I
    .restart local v3    # "usesLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v4    # "usesStaticLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    :cond_34
    move/from16 v18, v1

    move-object/from16 v19, v3

    move-object/from16 v20, v4

    .line 5247
    .end local v1    # "apkSigningVersion":I
    .end local v3    # "usesLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v4    # "usesStaticLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v18    # "apkSigningVersion":I
    .restart local v19    # "usesLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v20    # "usesStaticLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    :goto_19
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getUsesSdkLibraries()Ljava/util/List;

    move-result-object v1

    .line 5248
    .local v1, "usesSdkLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getUsesSdkLibrariesVersionsMajor()[J

    move-result-object v3

    .line 5249
    .local v3, "usesSdkLibrariesVersionsMajor":[J
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getUsesSdkLibrariesOptional()[Z

    move-result-object v4

    .line 5250
    .local v4, "usesSdkLibrariesOptional":[Z
    invoke-interface {v1}, Ljava/util/List;->size()I

    move-result v21

    if-lez v21, :cond_36

    .line 5251
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    move/from16 v21, v5

    .end local v5    # "first":Z
    .local v21, "first":Z
    const-string v5, "  usesSdkLibraries:"

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5252
    const/4 v5, 0x0

    move/from16 v22, v5

    .local v22, "i":I
    invoke-interface {v1}, Ljava/util/List;->size()I

    move-result v5

    move-object/from16 v23, v14

    move/from16 v14, v22

    .end local v22    # "i":I
    .local v5, "size":I
    .local v14, "i":I
    .local v23, "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    :goto_1a
    if-ge v14, v5, :cond_35

    .line 5253
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5254
    invoke-interface {v1, v14}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v22

    move-object/from16 v24, v1

    .end local v1    # "usesSdkLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .local v24, "usesSdkLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    move-object/from16 v1, v22

    check-cast v1, Ljava/lang/String;

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5255
    move-object/from16 v22, v0

    aget-wide v0, v3, v14

    invoke-virtual {v7, v0, v1}, Ljava/io/PrintWriter;->println(J)V

    const-string v0, " optional:"

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5256
    aget-boolean v0, v4, v14

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Z)V

    .line 5252
    add-int/lit8 v14, v14, 0x1

    move-object/from16 v0, v22

    move-object/from16 v1, v24

    goto :goto_1a

    .end local v24    # "usesSdkLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v1    # "usesSdkLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    :cond_35
    move-object/from16 v24, v1

    .end local v1    # "usesSdkLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v24    # "usesSdkLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    goto :goto_1b

    .line 5250
    .end local v21    # "first":Z
    .end local v23    # "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    .end local v24    # "usesSdkLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v1    # "usesSdkLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .local v5, "first":Z
    .local v14, "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    :cond_36
    move-object/from16 v24, v1

    move/from16 v21, v5

    move-object/from16 v23, v14

    .line 5260
    .end local v1    # "usesSdkLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v5    # "first":Z
    .end local v14    # "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    .restart local v21    # "first":Z
    .restart local v23    # "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    .restart local v24    # "usesSdkLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    :goto_1b
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getUsesOptionalLibraries()Ljava/util/List;

    move-result-object v0

    .line 5261
    .local v0, "usesOptionalLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    invoke-interface {v0}, Ljava/util/List;->size()I

    move-result v1

    if-lez v1, :cond_37

    .line 5262
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v1, "  usesOptionalLibraries:"

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5263
    const/4 v1, 0x0

    .local v1, "i":I
    :goto_1c
    invoke-interface {v0}, Ljava/util/List;->size()I

    move-result v5

    if-ge v1, v5, :cond_37

    .line 5264
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5265
    invoke-interface {v0, v1}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Ljava/lang/String;

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5263
    add-int/lit8 v1, v1, 0x1

    goto :goto_1c

    .line 5269
    .end local v1    # "i":I
    :cond_37
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getUsesNativeLibraries()Ljava/util/List;

    move-result-object v1

    .line 5270
    .local v1, "usesNativeLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    invoke-interface {v1}, Ljava/util/List;->size()I

    move-result v5

    if-lez v5, :cond_38

    .line 5271
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v5, "  usesNativeLibraries:"

    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5272
    const/4 v5, 0x0

    .local v5, "i":I
    :goto_1d
    invoke-interface {v1}, Ljava/util/List;->size()I

    move-result v14

    if-ge v5, v14, :cond_38

    .line 5273
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-interface {v1, v5}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v14

    check-cast v14, Ljava/lang/String;

    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5272
    add-int/lit8 v5, v5, 0x1

    goto :goto_1d

    .line 5277
    .end local v5    # "i":I
    :cond_38
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getUsesOptionalNativeLibraries()Ljava/util/List;

    move-result-object v5

    .line 5278
    .local v5, "usesOptionalNativeLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    invoke-interface {v5}, Ljava/util/List;->size()I

    move-result v14

    if-lez v14, :cond_39

    .line 5279
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v14, "  usesOptionalNativeLibraries:"

    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5280
    const/4 v14, 0x0

    .local v14, "i":I
    :goto_1e
    move-object/from16 v22, v0

    .end local v0    # "usesOptionalLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .local v22, "usesOptionalLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    invoke-interface {v5}, Ljava/util/List;->size()I

    move-result v0

    if-ge v14, v0, :cond_3a

    .line 5281
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5282
    invoke-interface {v5, v14}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Ljava/lang/String;

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5280
    add-int/lit8 v14, v14, 0x1

    move-object/from16 v0, v22

    goto :goto_1e

    .line 5278
    .end local v14    # "i":I
    .end local v22    # "usesOptionalLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v0    # "usesOptionalLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    :cond_39
    move-object/from16 v22, v0

    .line 5286
    .end local v0    # "usesOptionalLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v22    # "usesOptionalLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    :cond_3a
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getPkgState()Lcom/android/server/pm/pkg/PackageStateUnserialized;

    move-result-object v0

    invoke-virtual {v0}, Lcom/android/server/pm/pkg/PackageStateUnserialized;->getUsesLibraryFiles()Ljava/util/List;

    move-result-object v0

    .line 5287
    .local v0, "usesLibraryFiles":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    invoke-interface {v0}, Ljava/util/List;->size()I

    move-result v14

    if-lez v14, :cond_3b

    .line 5288
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v14, "  usesLibraryFiles:"

    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5289
    const/4 v14, 0x0

    .restart local v14    # "i":I
    :goto_1f
    move-object/from16 v25, v1

    .end local v1    # "usesNativeLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .local v25, "usesNativeLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    invoke-interface {v0}, Ljava/util/List;->size()I

    move-result v1

    if-ge v14, v1, :cond_3c

    .line 5290
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-interface {v0, v14}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Ljava/lang/String;

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5289
    add-int/lit8 v14, v14, 0x1

    move-object/from16 v1, v25

    goto :goto_1f

    .line 5287
    .end local v14    # "i":I
    .end local v25    # "usesNativeLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v1    # "usesNativeLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    :cond_3b
    move-object/from16 v25, v1

    .line 5293
    .end local v1    # "usesNativeLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v25    # "usesNativeLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    :cond_3c
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getProcesses()Ljava/util/Map;

    move-result-object v1

    .line 5294
    .local v1, "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    invoke-interface {v1}, Ljava/util/Map;->isEmpty()Z

    move-result v14

    if-nez v14, :cond_40

    .line 5295
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v14, "  processes:"

    invoke-virtual {v7, v14}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5296
    invoke-interface {v1}, Ljava/util/Map;->values()Ljava/util/Collection;

    move-result-object v14

    invoke-interface {v14}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v14

    :goto_20
    invoke-interface {v14}, Ljava/util/Iterator;->hasNext()Z

    move-result v26

    if-eqz v26, :cond_3f

    invoke-interface {v14}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v26

    check-cast v26, Lcom/android/internal/pm/pkg/component/ParsedProcess;

    .line 5297
    .local v26, "proc":Lcom/android/internal/pm/pkg/component/ParsedProcess;
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    move-object/from16 v27, v0

    .end local v0    # "usesLibraryFiles":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .local v27, "usesLibraryFiles":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    invoke-interface/range {v26 .. v26}, Lcom/android/internal/pm/pkg/component/ParsedProcess;->getName()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5298
    invoke-interface/range {v26 .. v26}, Lcom/android/internal/pm/pkg/component/ParsedProcess;->getDeniedPermissions()Ljava/util/Set;

    move-result-object v0

    if-eqz v0, :cond_3e

    .line 5299
    invoke-interface/range {v26 .. v26}, Lcom/android/internal/pm/pkg/component/ParsedProcess;->getDeniedPermissions()Ljava/util/Set;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v0

    :goto_21
    invoke-interface {v0}, Ljava/util/Iterator;->hasNext()Z

    move-result v28

    if-eqz v28, :cond_3d

    invoke-interface {v0}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v28

    move-object/from16 v29, v0

    move-object/from16 v0, v28

    check-cast v0, Ljava/lang/String;

    .line 5300
    .local v0, "deniedPermission":Ljava/lang/String;
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    move-object/from16 v28, v1

    .end local v1    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    .local v28, "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    const-string v1, "      deny: "

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5301
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5302
    .end local v0    # "deniedPermission":Ljava/lang/String;
    move-object/from16 v1, v28

    move-object/from16 v0, v29

    goto :goto_21

    .line 5299
    .end local v28    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    .restart local v1    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    :cond_3d
    move-object/from16 v28, v1

    .end local v1    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    .restart local v28    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    goto :goto_22

    .line 5298
    .end local v28    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    .restart local v1    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    :cond_3e
    move-object/from16 v28, v1

    .line 5304
    .end local v1    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    .end local v26    # "proc":Lcom/android/internal/pm/pkg/component/ParsedProcess;
    .restart local v28    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    :goto_22
    move-object/from16 v0, v27

    move-object/from16 v1, v28

    goto :goto_20

    .line 5296
    .end local v27    # "usesLibraryFiles":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v28    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    .local v0, "usesLibraryFiles":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v1    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    :cond_3f
    move-object/from16 v27, v0

    move-object/from16 v28, v1

    .end local v0    # "usesLibraryFiles":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v1    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    .restart local v27    # "usesLibraryFiles":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v28    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    goto :goto_23

    .line 5294
    .end local v27    # "usesLibraryFiles":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v28    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    .restart local v0    # "usesLibraryFiles":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v1    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    :cond_40
    move-object/from16 v27, v0

    move-object/from16 v28, v1

    .end local v0    # "usesLibraryFiles":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v1    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    .restart local v27    # "usesLibraryFiles":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .restart local v28    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    goto :goto_23

    .line 5120
    .end local v3    # "usesSdkLibrariesVersionsMajor":[J
    .end local v4    # "usesSdkLibrariesOptional":[Z
    .end local v5    # "usesOptionalNativeLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v15    # "usesStaticLibrariesVersions":[J
    .end local v16    # "libraryNames":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v17    # "privateFlags":I
    .end local v18    # "apkSigningVersion":I
    .end local v19    # "usesLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v20    # "usesStaticLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v21    # "first":Z
    .end local v22    # "usesOptionalLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v23    # "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    .end local v24    # "usesSdkLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v25    # "usesNativeLibraries":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v27    # "usesLibraryFiles":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    .end local v28    # "procs":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Lcom/android/internal/pm/pkg/component/ParsedProcess;>;"
    .local v14, "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    :cond_41
    move-object/from16 v23, v14

    .line 5307
    .end local v14    # "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    .restart local v23    # "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    :goto_23
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  timeStamp="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5308
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getLastModifiedTime()J

    move-result-wide v0

    invoke-virtual {v12, v0, v1}, Ljava/util/Date;->setTime(J)V

    .line 5309
    invoke-virtual/range {p7 .. p8}, Ljava/text/SimpleDateFormat;->format(Ljava/util/Date;)Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5310
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  lastUpdateTime="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5311
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getLastUpdateTime()J

    move-result-wide v0

    invoke-virtual {v12, v0, v1}, Ljava/util/Date;->setTime(J)V

    .line 5312
    invoke-virtual/range {p7 .. p8}, Ljava/text/SimpleDateFormat;->format(Ljava/util/Date;)Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5313
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  installerPackageName="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5314
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v0

    iget-object v0, v0, Lcom/android/server/pm/InstallSource;->mInstallerPackageName:Ljava/lang/String;

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5315
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  installerPackageUid="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5316
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v0

    iget v0, v0, Lcom/android/server/pm/InstallSource;->mInstallerPackageUid:I

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(I)V

    .line 5317
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  initiatingPackageName="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5318
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v0

    iget-object v0, v0, Lcom/android/server/pm/InstallSource;->mInitiatingPackageName:Ljava/lang/String;

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5319
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  originatingPackageName="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5320
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v0

    iget-object v0, v0, Lcom/android/server/pm/InstallSource;->mOriginatingPackageName:Ljava/lang/String;

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5322
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v0

    iget-object v0, v0, Lcom/android/server/pm/InstallSource;->mUpdateOwnerPackageName:Ljava/lang/String;

    if-eqz v0, :cond_42

    .line 5323
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  updateOwnerPackageName="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5324
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v0

    iget-object v0, v0, Lcom/android/server/pm/InstallSource;->mUpdateOwnerPackageName:Ljava/lang/String;

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5326
    :cond_42
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v0

    iget-object v0, v0, Lcom/android/server/pm/InstallSource;->mInstallerAttributionTag:Ljava/lang/String;

    if-eqz v0, :cond_43

    .line 5327
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  installerAttributionTag="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5328
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v0

    iget-object v0, v0, Lcom/android/server/pm/InstallSource;->mInstallerAttributionTag:Ljava/lang/String;

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5330
    :cond_43
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  packageSource="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5331
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v0

    iget v0, v0, Lcom/android/server/pm/InstallSource;->mPackageSource:I

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(I)V

    .line 5332
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->isIncremental()Z

    move-result v0

    if-eqz v0, :cond_44

    .line 5333
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string v1, "  loadingProgress="

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 5334
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getLoadingProgress()F

    move-result v1

    const/high16 v3, 0x42c80000    # 100.0f

    mul-float/2addr v1, v3

    float-to-int v1, v1

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    const-string v1, "%"

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 5333
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5335
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getLoadingCompletedTime()J

    move-result-wide v0

    invoke-virtual {v12, v0, v1}, Ljava/util/Date;->setTime(J)V

    .line 5336
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string v1, "  loadingCompletedTime="

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual/range {p7 .. p8}, Ljava/text/SimpleDateFormat;->format(Ljava/util/Date;)Ljava/lang/String;

    move-result-object v1

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5338
    :cond_44
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  appMetadataFilePath="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5339
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getAppMetadataFilePath()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5340
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  appMetadataSource="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5341
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getAppMetadataSource()I

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(I)V

    .line 5342
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getVolumeUuid()Ljava/lang/String;

    move-result-object v0

    if-eqz v0, :cond_45

    .line 5343
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  volumeUuid="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5344
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getVolumeUuid()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5346
    :cond_45
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  signatures="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getSignatures()Lcom/android/server/pm/PackageSignatures;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/Object;)V

    .line 5347
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  installPermissionsFixed="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5348
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->isInstallPermissionsFixed()Z

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Z)V

    .line 5349
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5350
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  pkgFlags="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/SettingBase;->getFlags()I

    move-result v0

    sget-object v1, Lcom/android/server/pm/Settings;->FLAG_DUMP_SPEC:[Ljava/lang/Object;

    invoke-static {v7, v0, v1}, Lcom/android/server/pm/Settings;->printFlags(Ljava/io/PrintWriter;I[Ljava/lang/Object;)V

    .line 5351
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5352
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  privatePkgFlags="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/SettingBase;->getPrivateFlags()I

    move-result v0

    sget-object v1, Lcom/android/server/pm/Settings;->PRIVATE_FLAG_DUMP_SPEC:[Ljava/lang/Object;

    invoke-static {v7, v0, v1}, Lcom/android/server/pm/Settings;->printFlags(Ljava/io/PrintWriter;I[Ljava/lang/Object;)V

    .line 5354
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5355
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->isPendingRestore()Z

    move-result v0

    if-eqz v0, :cond_46

    .line 5356
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5358
    :cond_46
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  apexModuleName="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getApexModuleName()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5360
    if-eqz v13, :cond_47

    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getOverlayTarget()Ljava/lang/String;

    move-result-object v0

    if-eqz v0, :cond_47

    .line 5361
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  overlayTarget="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getOverlayTarget()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5362
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  overlayCategory="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getOverlayCategory()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5365
    :cond_47
    if-eqz v13, :cond_4c

    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getPermissions()Ljava/util/List;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/List;->isEmpty()Z

    move-result v0

    if-nez v0, :cond_4c

    .line 5366
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getPermissions()Ljava/util/List;

    move-result-object v0

    .line 5367
    .local v0, "perms":Ljava/util/List;, "Ljava/util/List<Lcom/android/internal/pm/pkg/component/ParsedPermission;>;"
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v1, "  declared permissions:"

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5368
    const/4 v1, 0x0

    .local v1, "i":I
    :goto_24
    invoke-interface {v0}, Ljava/util/List;->size()I

    move-result v2

    if-ge v1, v2, :cond_4c

    .line 5369
    invoke-interface {v0, v1}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/internal/pm/pkg/component/ParsedPermission;

    .line 5370
    .local v2, "perm":Lcom/android/internal/pm/pkg/component/ParsedPermission;
    if-eqz v10, :cond_48

    .line 5371
    invoke-interface {v2}, Lcom/android/internal/pm/pkg/component/ParsedPermission;->getName()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {v10, v3}, Landroid/util/ArraySet;->contains(Ljava/lang/Object;)Z

    move-result v3

    if-nez v3, :cond_48

    .line 5372
    goto :goto_25

    .line 5374
    :cond_48
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-interface {v2}, Lcom/android/internal/pm/pkg/component/ParsedPermission;->getName()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5375
    const-string v3, ": prot="

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5376
    invoke-interface {v2}, Lcom/android/internal/pm/pkg/component/ParsedPermission;->getProtectionLevel()I

    move-result v3

    invoke-static {v3}, Landroid/content/pm/PermissionInfo;->protectionToString(I)Ljava/lang/String;

    move-result-object v3

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5377
    invoke-interface {v2}, Lcom/android/internal/pm/pkg/component/ParsedPermission;->getFlags()I

    move-result v3

    and-int/lit8 v3, v3, 0x1

    if-eqz v3, :cond_49

    .line 5378
    const-string v3, ", COSTS_MONEY"

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5380
    :cond_49
    invoke-interface {v2}, Lcom/android/internal/pm/pkg/component/ParsedPermission;->getFlags()I

    move-result v3

    and-int/lit8 v3, v3, 0x2

    if-eqz v3, :cond_4a

    .line 5381
    const-string v3, ", HIDDEN"

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5383
    :cond_4a
    invoke-interface {v2}, Lcom/android/internal/pm/pkg/component/ParsedPermission;->getFlags()I

    move-result v3

    const/high16 v4, 0x40000000    # 2.0f

    and-int/2addr v3, v4

    if-eqz v3, :cond_4b

    .line 5384
    const-string v3, ", INSTALLED"

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5386
    :cond_4b
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5368
    .end local v2    # "perm":Lcom/android/internal/pm/pkg/component/ParsedPermission;
    :goto_25
    add-int/lit8 v1, v1, 0x1

    goto :goto_24

    .line 5390
    .end local v0    # "perms":Ljava/util/List;, "Ljava/util/List<Lcom/android/internal/pm/pkg/component/ParsedPermission;>;"
    .end local v1    # "i":I
    :cond_4c
    if-nez v10, :cond_4d

    if-eqz p10, :cond_4f

    :cond_4d
    if-eqz v13, :cond_4f

    .line 5391
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getRequestedPermissions()Ljava/util/Set;

    move-result-object v0

    if-eqz v0, :cond_4f

    .line 5392
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getRequestedPermissions()Ljava/util/Set;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/Set;->size()I

    move-result v0

    if-lez v0, :cond_4f

    .line 5393
    invoke-interface {v13}, Lcom/android/server/pm/pkg/AndroidPackage;->getRequestedPermissions()Ljava/util/Set;

    move-result-object v0

    .line 5394
    .local v0, "perms":Ljava/util/Set;, "Ljava/util/Set<Ljava/lang/String;>;"
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v1, "  requested permissions:"

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5395
    invoke-interface {v0}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_26
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v2

    nop

    if-eqz v2, :cond_4f

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Ljava/lang/String;

    .line 5396
    .local v2, "perm":Ljava/lang/String;
    if-eqz v10, :cond_4e

    .line 5397
    invoke-virtual {v10, v2}, Landroid/util/ArraySet;->contains(Ljava/lang/Object;)Z

    move-result v3

    if-nez v3, :cond_4e

    .line 5398
    goto :goto_26

    .line 5400
    :cond_4e
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5401
    .end local v2    # "perm":Ljava/lang/String;
    goto :goto_26

    .line 5404
    .end local v0    # "perms":Ljava/util/Set;, "Ljava/util/Set<Ljava/lang/String;>;"
    :cond_4f
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->hasSharedUser()Z

    move-result v0

    const-string v14, "  "

    if-eqz v0, :cond_50

    if-nez v10, :cond_50

    if-eqz p10, :cond_51

    .line 5405
    :cond_50
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v0, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    move-object/from16 v0, p0

    move-object/from16 v1, p1

    move-object/from16 v3, p4

    move-object/from16 v4, p6

    move-object/from16 v5, p9

    invoke-virtual/range {v0 .. v5}, Lcom/android/server/pm/Settings;->dumpInstallPermissionsLPr(Ljava/io/PrintWriter;Ljava/lang/String;Landroid/util/ArraySet;Lcom/android/server/pm/permission/LegacyPermissionState;Ljava/util/List;)V

    .line 5408
    :cond_51
    if-eqz p11, :cond_52

    .line 5409
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v0, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v6, v7, v0, v11}, Lcom/android/server/pm/Settings;->dumpComponents(Ljava/io/PrintWriter;Ljava/lang/String;Lcom/android/server/pm/PackageSetting;)V

    .line 5412
    :cond_52
    invoke-interface/range {p9 .. p9}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v14

    :goto_27
    invoke-interface {v14}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    if-eqz v0, :cond_63

    invoke-interface {v14}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v0

    move-object v15, v0

    check-cast v15, Landroid/content/pm/UserInfo;

    .line 5413
    .local v15, "user":Landroid/content/pm/UserInfo;
    iget v0, v15, Landroid/content/pm/UserInfo;->id:I

    invoke-interface {v11, v0}, Lcom/android/server/pm/pkg/PackageStateInternal;->getUserStateOrDefault(I)Lcom/android/server/pm/pkg/PackageUserStateInternal;

    move-result-object v16

    .line 5414
    .local v16, "userState":Lcom/android/server/pm/pkg/PackageUserStateInternal;
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "  User "

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    iget v0, v15, Landroid/content/pm/UserInfo;->id:I

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(I)V

    const-string v0, ": "

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5415
    const-string v0, "ceDataInode="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5416
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->getCeDataInode()J

    move-result-wide v0

    invoke-virtual {v7, v0, v1}, Ljava/io/PrintWriter;->print(J)V

    .line 5417
    const-string v0, " deDataInode="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5418
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->getDeDataInode()J

    move-result-wide v0

    invoke-virtual {v7, v0, v1}, Ljava/io/PrintWriter;->print(J)V

    .line 5419
    const-string v0, " installed="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5420
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->isInstalled()Z

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Z)V

    .line 5421
    const-string v0, " hidden="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5422
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->isHidden()Z

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Z)V

    .line 5423
    const-string v0, " suspended="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5424
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->isSuspended()Z

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Z)V

    .line 5425
    const-string v0, " distractionFlags="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5426
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->getDistractionFlags()I

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(I)V

    .line 5427
    const-string v0, " stopped="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5428
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->isStopped()Z

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Z)V

    .line 5429
    const-string v0, " notLaunched="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5430
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->isNotLaunched()Z

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Z)V

    .line 5431
    const-string v0, " enabled="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5432
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->getEnabledState()I

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(I)V

    .line 5433
    const-string v0, " instant="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5434
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->isInstantApp()Z

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Z)V

    .line 5435
    const-string v0, " virtual="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5436
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->isVirtualPreload()Z

    move-result v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Z)V

    .line 5437
    const-string v0, " quarantined="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5438
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->isQuarantined()Z

    move-result v1

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Z)V

    .line 5441
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5442
    const-string v1, "      installReason="

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5443
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->getInstallReason()I

    move-result v1

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(I)V

    .line 5445
    iget v1, v15, Landroid/content/pm/UserInfo;->id:I

    invoke-static {v11, v1}, Lcom/android/server/pm/parsing/PackageInfoUtils;->getDataDir(Lcom/android/server/pm/pkg/PackageStateInternal;I)Ljava/io/File;

    move-result-object v17

    .line 5446
    .local v17, "dataDir":Ljava/io/File;
    const-string v1, "      dataDir="

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5447
    if-nez v17, :cond_53

    const-string/jumbo v1, "null"

    goto :goto_28

    :cond_53
    invoke-virtual/range {v17 .. v17}, Ljava/io/File;->getAbsolutePath()Ljava/lang/String;

    move-result-object v1

    :goto_28
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5449
    iget v1, v15, Landroid/content/pm/UserInfo;->id:I

    invoke-virtual {v11, v1}, Lcom/android/server/pm/PackageSetting;->readUserState(I)Lcom/android/server/pm/pkg/PackageUserStateInternal;

    move-result-object v18

    .line 5450
    .local v18, "pus":Lcom/android/server/pm/pkg/PackageUserStateInternal;
    const-string v1, "      firstInstallTime="

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5451
    invoke-interface/range {v18 .. v18}, Lcom/android/server/pm/pkg/PackageUserState;->getFirstInstallTimeMillis()J

    move-result-wide v1

    invoke-virtual {v12, v1, v2}, Ljava/util/Date;->setTime(J)V

    .line 5452
    invoke-virtual/range {p7 .. p8}, Ljava/text/SimpleDateFormat;->format(Ljava/util/Date;)Ljava/lang/String;

    move-result-object v1

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5454
    invoke-interface/range {v18 .. v18}, Lcom/android/server/pm/pkg/PackageUserState;->getArchiveState()Lcom/android/server/pm/pkg/ArchiveState;

    move-result-object v1

    if-eqz v1, :cond_54

    .line 5455
    invoke-interface/range {v18 .. v18}, Lcom/android/server/pm/pkg/PackageUserState;->getArchiveState()Lcom/android/server/pm/pkg/ArchiveState;

    move-result-object v1

    .line 5456
    .local v1, "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    const-string v2, "      archiveTime="

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5457
    invoke-virtual {v1}, Lcom/android/server/pm/pkg/ArchiveState;->getArchiveTimeMillis()J

    move-result-wide v2

    invoke-virtual {v12, v2, v3}, Ljava/util/Date;->setTime(J)V

    .line 5458
    invoke-virtual/range {p7 .. p8}, Ljava/text/SimpleDateFormat;->format(Ljava/util/Date;)Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5459
    const-string v2, "      unarchiveInstallerTitle="

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5460
    invoke-virtual {v1}, Lcom/android/server/pm/pkg/ArchiveState;->getInstallerTitle()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5461
    invoke-virtual {v1}, Lcom/android/server/pm/pkg/ArchiveState;->getActivityInfos()Ljava/util/List;

    move-result-object v2

    invoke-interface {v2}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v2

    :goto_29
    invoke-interface {v2}, Ljava/util/Iterator;->hasNext()Z

    move-result v3

    nop

    if-eqz v3, :cond_54

    invoke-interface {v2}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;

    .line 5462
    .local v3, "activity":Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;
    const-string v4, "        archiveActivityInfo="

    invoke-virtual {v7, v4}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5463
    invoke-virtual {v3}, Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;->toString()Ljava/lang/String;

    move-result-object v4

    invoke-virtual {v7, v4}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5464
    .end local v3    # "activity":Lcom/android/server/pm/pkg/ArchiveState$ArchiveActivityInfo;
    goto :goto_29

    .line 5467
    .end local v1    # "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    :cond_54
    const-string v1, "      uninstallReason="

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5468
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->getUninstallReason()I

    move-result v1

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(I)V

    .line 5470
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->isSuspended()Z

    move-result v1

    if-eqz v1, :cond_56

    .line 5471
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5472
    const-string v1, "  Suspend params:"

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5473
    const/4 v1, 0x0

    .local v1, "i":I
    :goto_2a
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserStateInternal;->getSuspendParams()Lcom/android/server/utils/WatchedArrayMap;

    move-result-object v2

    invoke-virtual {v2}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v2

    if-ge v1, v2, :cond_56

    .line 5474
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5475
    const-string v2, "    suspendingPackage="

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5476
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserStateInternal;->getSuspendParams()Lcom/android/server/utils/WatchedArrayMap;

    move-result-object v2

    invoke-virtual {v2, v1}, Lcom/android/server/utils/WatchedArrayMap;->keyAt(I)Ljava/lang/Object;

    move-result-object v2

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->print(Ljava/lang/Object;)V

    .line 5477
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserStateInternal;->getSuspendParams()Lcom/android/server/utils/WatchedArrayMap;

    move-result-object v2

    invoke-virtual {v2, v1}, Lcom/android/server/utils/WatchedArrayMap;->valueAt(I)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/server/pm/pkg/SuspendParams;

    .line 5478
    .local v2, "params":Lcom/android/server/pm/pkg/SuspendParams;
    if-eqz v2, :cond_55

    .line 5479
    const-string v3, " dialogInfo="

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5480
    invoke-virtual {v2}, Lcom/android/server/pm/pkg/SuspendParams;->getDialogInfo()Landroid/content/pm/SuspendDialogInfo;

    move-result-object v3

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/Object;)V

    .line 5481
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5482
    invoke-virtual {v2}, Lcom/android/server/pm/pkg/SuspendParams;->isQuarantined()Z

    move-result v3

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->println(Z)V

    .line 5484
    :cond_55
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5473
    .end local v2    # "params":Lcom/android/server/pm/pkg/SuspendParams;
    add-int/lit8 v1, v1, 0x1

    goto :goto_2a

    .line 5488
    .end local v1    # "i":I
    :cond_56
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->getOverlayPaths()Landroid/content/pm/overlay/OverlayPaths;

    move-result-object v19

    .line 5489
    .local v19, "overlayPaths":Landroid/content/pm/overlay/OverlayPaths;
    const-string v5, "      "

    if-eqz v19, :cond_58

    .line 5490
    invoke-virtual/range {v19 .. v19}, Landroid/content/pm/overlay/OverlayPaths;->getOverlayPaths()Ljava/util/List;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/List;->isEmpty()Z

    move-result v0

    if-nez v0, :cond_57

    .line 5491
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5492
    const-string v0, "    overlay paths:"

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5493
    invoke-virtual/range {v19 .. v19}, Landroid/content/pm/overlay/OverlayPaths;->getOverlayPaths()Ljava/util/List;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v0

    :goto_2b
    invoke-interface {v0}, Ljava/util/Iterator;->hasNext()Z

    move-result v1

    nop

    if-eqz v1, :cond_57

    invoke-interface {v0}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Ljava/lang/String;

    .line 5494
    .local v1, "path":Ljava/lang/String;
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5495
    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5496
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5497
    .end local v1    # "path":Ljava/lang/String;
    goto :goto_2b

    .line 5499
    :cond_57
    invoke-virtual/range {v19 .. v19}, Landroid/content/pm/overlay/OverlayPaths;->getResourceDirs()Ljava/util/List;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/List;->isEmpty()Z

    move-result v0

    if-nez v0, :cond_58

    .line 5500
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5501
    const-string v0, "    legacy overlay paths:"

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5502
    invoke-virtual/range {v19 .. v19}, Landroid/content/pm/overlay/OverlayPaths;->getResourceDirs()Ljava/util/List;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v0

    :goto_2c
    invoke-interface {v0}, Ljava/util/Iterator;->hasNext()Z

    move-result v1

    nop

    if-eqz v1, :cond_58

    invoke-interface {v0}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Ljava/lang/String;

    .line 5503
    .restart local v1    # "path":Ljava/lang/String;
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5504
    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5505
    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5506
    .end local v1    # "path":Ljava/lang/String;
    goto :goto_2c

    .line 5510
    :cond_58
    nop

    .line 5511
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->getSharedLibraryOverlayPaths()Ljava/util/Map;

    move-result-object v20

    .line 5512
    .local v20, "sharedLibraryOverlayPaths":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Landroid/content/pm/overlay/OverlayPaths;>;"
    if-eqz v20, :cond_5d

    .line 5514
    invoke-interface/range {v20 .. v20}, Ljava/util/Map;->entrySet()Ljava/util/Set;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v0

    :goto_2d
    invoke-interface {v0}, Ljava/util/Iterator;->hasNext()Z

    move-result v1

    nop

    if-eqz v1, :cond_5d

    invoke-interface {v0}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Ljava/util/Map$Entry;

    .line 5515
    .local v1, "libOverlayPaths":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Ljava/lang/String;Landroid/content/pm/overlay/OverlayPaths;>;"
    invoke-interface {v1}, Ljava/util/Map$Entry;->getValue()Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Landroid/content/pm/overlay/OverlayPaths;

    .line 5516
    .local v2, "paths":Landroid/content/pm/overlay/OverlayPaths;
    if-nez v2, :cond_59

    .line 5517
    goto :goto_2d

    .line 5519
    :cond_59
    invoke-virtual {v2}, Landroid/content/pm/overlay/OverlayPaths;->getOverlayPaths()Ljava/util/List;

    move-result-object v3

    invoke-interface {v3}, Ljava/util/List;->isEmpty()Z

    move-result v3

    if-nez v3, :cond_5b

    .line 5520
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5521
    invoke-virtual {v7, v9}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5522
    invoke-interface {v1}, Ljava/util/Map$Entry;->getKey()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Ljava/lang/String;

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5523
    const-string v3, " overlay paths:"

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5524
    invoke-virtual {v2}, Landroid/content/pm/overlay/OverlayPaths;->getOverlayPaths()Ljava/util/List;

    move-result-object v3

    invoke-interface {v3}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v3

    :goto_2e
    invoke-interface {v3}, Ljava/util/Iterator;->hasNext()Z

    move-result v4

    if-eqz v4, :cond_5a

    invoke-interface {v3}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Ljava/lang/String;

    .line 5525
    .local v4, "path":Ljava/lang/String;
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5526
    move-object/from16 v21, v0

    const-string v0, "        "

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5527
    invoke-virtual {v7, v4}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5528
    .end local v4    # "path":Ljava/lang/String;
    move-object/from16 v0, v21

    goto :goto_2e

    .line 5524
    :cond_5a
    move-object/from16 v21, v0

    goto :goto_2f

    .line 5519
    :cond_5b
    move-object/from16 v21, v0

    .line 5530
    :goto_2f
    invoke-virtual {v2}, Landroid/content/pm/overlay/OverlayPaths;->getResourceDirs()Ljava/util/List;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/List;->isEmpty()Z

    move-result v0

    if-nez v0, :cond_5c

    .line 5531
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5532
    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5533
    invoke-interface {v1}, Ljava/util/Map$Entry;->getKey()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Ljava/lang/String;

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5534
    const-string v0, " legacy overlay paths:"

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5535
    invoke-virtual {v2}, Landroid/content/pm/overlay/OverlayPaths;->getResourceDirs()Ljava/util/List;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v0

    :goto_30
    invoke-interface {v0}, Ljava/util/Iterator;->hasNext()Z

    move-result v3

    nop

    if-eqz v3, :cond_5c

    invoke-interface {v0}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Ljava/lang/String;

    .line 5536
    .local v3, "path":Ljava/lang/String;
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5537
    invoke-virtual {v7, v5}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5538
    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5539
    .end local v3    # "path":Ljava/lang/String;
    goto :goto_30

    .line 5541
    .end local v1    # "libOverlayPaths":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Ljava/lang/String;Landroid/content/pm/overlay/OverlayPaths;>;"
    .end local v2    # "paths":Landroid/content/pm/overlay/OverlayPaths;
    :cond_5c
    move-object/from16 v0, v21

    goto/16 :goto_2d

    .line 5544
    :cond_5d
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->getLastDisableAppCaller()Ljava/lang/String;

    move-result-object v4

    .line 5545
    .local v4, "lastDisabledAppCaller":Ljava/lang/String;
    if-eqz v4, :cond_5e

    .line 5546
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "    lastDisabledCaller: "

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5547
    invoke-virtual {v7, v4}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5550
    :cond_5e
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->hasSharedUser()Z

    move-result v0

    if-nez v0, :cond_5f

    .line 5551
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v0, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    iget-object v1, v6, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    iget v2, v15, Landroid/content/pm/UserInfo;->id:I

    .line 5552
    invoke-virtual/range {p5 .. p5}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v3

    invoke-static {v2, v3}, Landroid/os/UserHandle;->getUid(II)I

    move-result v2

    .line 5551
    invoke-interface {v1, v2}, Lcom/android/server/pm/permission/LegacyPermissionDataProvider;->getGidsForUid(I)[I

    move-result-object v1

    invoke-virtual {v6, v7, v0, v1}, Lcom/android/server/pm/Settings;->dumpGidsLPr(Ljava/io/PrintWriter;Ljava/lang/String;[I)V

    .line 5553
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v0, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    iget v0, v15, Landroid/content/pm/UserInfo;->id:I

    .line 5554
    move-object/from16 v3, p6

    invoke-virtual {v3, v0}, Lcom/android/server/pm/permission/LegacyPermissionState;->getPermissionStates(I)Ljava/util/Collection;

    move-result-object v21

    .line 5553
    move-object/from16 v0, p0

    move-object/from16 v1, p1

    move-object/from16 v3, p4

    move-object/from16 v22, v4

    .end local v4    # "lastDisabledAppCaller":Ljava/lang/String;
    .local v22, "lastDisabledAppCaller":Ljava/lang/String;
    move-object/from16 v4, v21

    move-object v6, v5

    move/from16 v5, p10

    invoke-virtual/range {v0 .. v5}, Lcom/android/server/pm/Settings;->dumpRuntimePermissionsLPr(Ljava/io/PrintWriter;Ljava/lang/String;Landroid/util/ArraySet;Ljava/util/Collection;Z)V

    goto :goto_31

    .line 5550
    .end local v22    # "lastDisabledAppCaller":Ljava/lang/String;
    .restart local v4    # "lastDisabledAppCaller":Ljava/lang/String;
    :cond_5f
    move-object/from16 v22, v4

    move-object v6, v5

    .line 5557
    .end local v4    # "lastDisabledAppCaller":Ljava/lang/String;
    .restart local v22    # "lastDisabledAppCaller":Ljava/lang/String;
    :goto_31
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserState;->getHarmfulAppWarning()Ljava/lang/String;

    move-result-object v0

    .line 5558
    .local v0, "harmfulAppWarning":Ljava/lang/String;
    if-eqz v0, :cond_60

    .line 5559
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v1, "      harmfulAppWarning: "

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5560
    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5563
    :cond_60
    if-nez v10, :cond_62

    .line 5564
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserStateInternal;->getDisabledComponentsNoCopy()Lcom/android/server/utils/WatchedArraySet;

    move-result-object v1

    .line 5565
    .local v1, "cmp":Lcom/android/server/utils/WatchedArraySet;, "Lcom/android/server/utils/WatchedArraySet<Ljava/lang/String;>;"
    if-eqz v1, :cond_61

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArraySet;->size()I

    move-result v2

    if-lez v2, :cond_61

    .line 5566
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v2, "    disabledComponents:"

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5567
    const/4 v2, 0x0

    .local v2, "i":I
    :goto_32
    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArraySet;->size()I

    move-result v3

    if-ge v2, v3, :cond_61

    .line 5568
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v6}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedArraySet;->valueAt(I)Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Ljava/lang/String;

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5567
    add-int/lit8 v2, v2, 0x1

    goto :goto_32

    .line 5571
    .end local v2    # "i":I
    :cond_61
    invoke-interface/range {v16 .. v16}, Lcom/android/server/pm/pkg/PackageUserStateInternal;->getEnabledComponentsNoCopy()Lcom/android/server/utils/WatchedArraySet;

    move-result-object v1

    .line 5572
    if-eqz v1, :cond_62

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArraySet;->size()I

    move-result v2

    if-lez v2, :cond_62

    .line 5573
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v2, "    enabledComponents:"

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5574
    const/4 v2, 0x0

    .restart local v2    # "i":I
    :goto_33
    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArraySet;->size()I

    move-result v3

    if-ge v2, v3, :cond_62

    .line 5575
    invoke-virtual/range {p1 .. p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v6}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedArraySet;->valueAt(I)Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Ljava/lang/String;

    invoke-virtual {v7, v3}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5574
    add-int/lit8 v2, v2, 0x1

    goto :goto_33

    .line 5579
    .end local v0    # "harmfulAppWarning":Ljava/lang/String;
    .end local v1    # "cmp":Lcom/android/server/utils/WatchedArraySet;, "Lcom/android/server/utils/WatchedArraySet<Ljava/lang/String;>;"
    .end local v2    # "i":I
    .end local v15    # "user":Landroid/content/pm/UserInfo;
    .end local v16    # "userState":Lcom/android/server/pm/pkg/PackageUserStateInternal;
    .end local v17    # "dataDir":Ljava/io/File;
    .end local v18    # "pus":Lcom/android/server/pm/pkg/PackageUserStateInternal;
    .end local v19    # "overlayPaths":Landroid/content/pm/overlay/OverlayPaths;
    .end local v20    # "sharedLibraryOverlayPaths":Ljava/util/Map;, "Ljava/util/Map<Ljava/lang/String;Landroid/content/pm/overlay/OverlayPaths;>;"
    .end local v22    # "lastDisabledAppCaller":Ljava/lang/String;
    :cond_62
    move-object/from16 v6, p0

    goto/16 :goto_27

    .line 5580
    :cond_63
    return-void
.end method

.method dumpPackagesLPr(Ljava/io/PrintWriter;Ljava/lang/String;Landroid/util/ArraySet;Lcom/android/server/pm/DumpState;Z)V
    .locals 24
    .param p1, "pw"    # Ljava/io/PrintWriter;
    .param p2, "packageName"    # Ljava/lang/String;
    .param p4, "dumpState"    # Lcom/android/server/pm/DumpState;
    .param p5, "checkin"    # Z
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/io/PrintWriter;",
            "Ljava/lang/String;",
            "Landroid/util/ArraySet<",
            "Ljava/lang/String;",
            ">;",
            "Lcom/android/server/pm/DumpState;",
            "Z)V"
        }
    .end annotation

    .line 5584
    .local p3, "permissionNames":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    move-object/from16 v15, p0

    move-object/from16 v14, p1

    move-object/from16 v13, p2

    move-object/from16 v12, p3

    move-object/from16 v11, p4

    new-instance v7, Ljava/text/SimpleDateFormat;

    const-string/jumbo v0, "yyyy-MM-dd HH:mm:ss"

    invoke-direct {v7, v0}, Ljava/text/SimpleDateFormat;-><init>(Ljava/lang/String;)V

    .line 5585
    .local v7, "sdf":Ljava/text/SimpleDateFormat;
    new-instance v8, Ljava/util/Date;

    invoke-direct {v8}, Ljava/util/Date;-><init>()V

    .line 5586
    .local v8, "date":Ljava/util/Date;
    const/4 v0, 0x0

    .line 5587
    .local v0, "printedSomething":Z
    nop

    .line 5588
    const/4 v1, 0x2

    invoke-virtual {v11, v1}, Lcom/android/server/pm/DumpState;->isOptionEnabled(I)Z

    move-result v21

    .line 5589
    .local v21, "dumpAllComponents":Z
    invoke-static {}, Lcom/android/server/pm/UserManagerService;->getInstance()Lcom/android/server/pm/UserManagerService;

    move-result-object v1

    invoke-static {v1}, Lcom/android/server/pm/Settings;->getAllUsers(Lcom/android/server/pm/UserManagerService;)Ljava/util/List;

    move-result-object v22

    .line 5590
    .local v22, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    iget-object v1, v15, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v1

    invoke-interface {v1}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v16

    :goto_0
    invoke-interface/range {v16 .. v16}, Ljava/util/Iterator;->hasNext()Z

    move-result v1

    const/4 v2, 0x0

    const/4 v3, 0x1

    const/4 v4, 0x0

    const/16 v5, 0x8

    if-eqz v1, :cond_8

    invoke-interface/range {v16 .. v16}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v1

    move-object v10, v1

    check-cast v10, Lcom/android/server/pm/PackageSetting;

    .line 5591
    .local v10, "ps":Lcom/android/server/pm/PackageSetting;
    if-eqz v13, :cond_0

    invoke-virtual {v10}, Lcom/android/server/pm/PackageSetting;->getRealName()Ljava/lang/String;

    move-result-object v1

    invoke-virtual {v13, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-nez v1, :cond_0

    .line 5592
    invoke-virtual {v10}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v1

    invoke-virtual {v13, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-nez v1, :cond_0

    .line 5593
    goto :goto_0

    .line 5595
    :cond_0
    invoke-virtual {v10}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v1

    if-eqz v1, :cond_1

    invoke-virtual {v10}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v1

    invoke-interface {v1}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->isApex()Z

    move-result v1

    if-eqz v1, :cond_1

    .line 5596
    invoke-virtual {v11, v5}, Lcom/android/server/pm/DumpState;->isOptionEnabled(I)Z

    move-result v1

    if-nez v1, :cond_1

    .line 5598
    goto :goto_0

    .line 5600
    :cond_1
    iget-object v1, v15, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    .line 5601
    invoke-virtual {v10}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v5

    invoke-interface {v1, v5}, Lcom/android/server/pm/permission/LegacyPermissionDataProvider;->getLegacyPermissionState(I)Lcom/android/server/pm/permission/LegacyPermissionState;

    move-result-object v9

    .line 5602
    .local v9, "permissionsState":Lcom/android/server/pm/permission/LegacyPermissionState;
    if-eqz v12, :cond_2

    .line 5603
    invoke-virtual {v9, v12}, Lcom/android/server/pm/permission/LegacyPermissionState;->hasPermissionState(Ljava/util/Collection;)Z

    move-result v1

    if-nez v1, :cond_2

    .line 5604
    goto :goto_0

    .line 5607
    :cond_2
    if-nez p5, :cond_3

    if-eqz v13, :cond_3

    .line 5608
    invoke-virtual {v15, v10}, Lcom/android/server/pm/Settings;->getSharedUserSettingLPr(Lcom/android/server/pm/PackageSetting;)Lcom/android/server/pm/SharedUserSetting;

    move-result-object v1

    invoke-virtual {v11, v1}, Lcom/android/server/pm/DumpState;->setSharedUser(Lcom/android/server/pm/SharedUserSetting;)V

    .line 5611
    :cond_3
    if-nez p5, :cond_5

    if-nez v0, :cond_5

    .line 5612
    invoke-virtual/range {p4 .. p4}, Lcom/android/server/pm/DumpState;->onTitlePrinted()Z

    move-result v1

    if-eqz v1, :cond_4

    .line 5613
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5614
    :cond_4
    const-string v1, "Packages:"

    invoke-virtual {v14, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5615
    const/4 v0, 0x1

    move/from16 v17, v0

    goto :goto_1

    .line 5617
    :cond_5
    move/from16 v17, v0

    .end local v0    # "printedSomething":Z
    .local v17, "printedSomething":Z
    :goto_1
    if-eqz p5, :cond_6

    const-string/jumbo v0, "pkg"

    move-object v4, v0

    :cond_6
    if-eqz v13, :cond_7

    move/from16 v18, v3

    goto :goto_2

    :cond_7
    move/from16 v18, v2

    :goto_2
    const-string v2, "  "

    move-object/from16 v0, p0

    move-object/from16 v1, p1

    move-object v3, v4

    move-object/from16 v4, p3

    move-object v5, v10

    move-object v6, v9

    move-object/from16 v19, v9

    .end local v9    # "permissionsState":Lcom/android/server/pm/permission/LegacyPermissionState;
    .local v19, "permissionsState":Lcom/android/server/pm/permission/LegacyPermissionState;
    move-object/from16 v9, v22

    move-object/from16 v20, v10

    .end local v10    # "ps":Lcom/android/server/pm/PackageSetting;
    .local v20, "ps":Lcom/android/server/pm/PackageSetting;
    move/from16 v10, v18

    move/from16 v11, v21

    invoke-virtual/range {v0 .. v11}, Lcom/android/server/pm/Settings;->dumpPackageLPr(Ljava/io/PrintWriter;Ljava/lang/String;Ljava/lang/String;Landroid/util/ArraySet;Lcom/android/server/pm/PackageSetting;Lcom/android/server/pm/permission/LegacyPermissionState;Ljava/text/SimpleDateFormat;Ljava/util/Date;Ljava/util/List;ZZ)V

    .line 5619
    .end local v19    # "permissionsState":Lcom/android/server/pm/permission/LegacyPermissionState;
    .end local v20    # "ps":Lcom/android/server/pm/PackageSetting;
    move-object/from16 v11, p4

    move/from16 v0, v17

    goto/16 :goto_0

    .line 5621
    .end local v17    # "printedSomething":Z
    .restart local v0    # "printedSomething":Z
    :cond_8
    const/4 v0, 0x0

    .line 5622
    iget-object v1, v15, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v1

    if-lez v1, :cond_e

    if-nez v12, :cond_e

    .line 5623
    iget-object v1, v15, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArrayMap;->entrySet()Ljava/util/Set;

    move-result-object v1

    invoke-interface {v1}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_3
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v6

    nop

    if-eqz v6, :cond_e

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v6

    check-cast v6, Ljava/util/Map$Entry;

    .line 5624
    .local v6, "e":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Ljava/lang/String;Ljava/lang/String;>;"
    if-eqz v13, :cond_9

    invoke-interface {v6}, Ljava/util/Map$Entry;->getKey()Ljava/lang/Object;

    move-result-object v9

    invoke-virtual {v13, v9}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v9

    if-nez v9, :cond_9

    .line 5625
    invoke-interface {v6}, Ljava/util/Map$Entry;->getValue()Ljava/lang/Object;

    move-result-object v9

    invoke-virtual {v13, v9}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v9

    if-nez v9, :cond_9

    .line 5626
    goto :goto_3

    .line 5628
    :cond_9
    if-nez p5, :cond_c

    .line 5629
    if-nez v0, :cond_b

    .line 5630
    invoke-virtual/range {p4 .. p4}, Lcom/android/server/pm/DumpState;->onTitlePrinted()Z

    move-result v9

    if-eqz v9, :cond_a

    .line 5631
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5632
    :cond_a
    const-string v9, "Renamed packages:"

    invoke-virtual {v14, v9}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5633
    const/4 v0, 0x1

    .line 5635
    :cond_b
    const-string v9, "  "

    invoke-virtual {v14, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    goto :goto_4

    .line 5637
    :cond_c
    const-string/jumbo v9, "ren,"

    invoke-virtual {v14, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5639
    :goto_4
    invoke-interface {v6}, Ljava/util/Map$Entry;->getKey()Ljava/lang/Object;

    move-result-object v9

    check-cast v9, Ljava/lang/String;

    invoke-virtual {v14, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5640
    if-eqz p5, :cond_d

    const-string v9, " -> "

    goto :goto_5

    :cond_d
    const-string v9, ","

    :goto_5
    invoke-virtual {v14, v9}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5641
    invoke-interface {v6}, Ljava/util/Map$Entry;->getValue()Ljava/lang/Object;

    move-result-object v9

    check-cast v9, Ljava/lang/String;

    invoke-virtual {v14, v9}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5642
    .end local v6    # "e":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Ljava/lang/String;Ljava/lang/String;>;"
    goto :goto_3

    .line 5645
    :cond_e
    const/4 v0, 0x0

    .line 5646
    iget-object v1, v15, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v1

    if-lez v1, :cond_16

    if-nez v12, :cond_16

    .line 5647
    iget-object v1, v15, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v1

    invoke-interface {v1}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_6
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v6

    nop

    if-eqz v6, :cond_16

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v6

    check-cast v6, Lcom/android/server/pm/PackageSetting;

    .line 5648
    .local v6, "ps":Lcom/android/server/pm/PackageSetting;
    if-eqz v13, :cond_f

    invoke-virtual {v6}, Lcom/android/server/pm/PackageSetting;->getRealName()Ljava/lang/String;

    move-result-object v9

    invoke-virtual {v13, v9}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v9

    if-nez v9, :cond_f

    .line 5649
    invoke-virtual {v6}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v9

    invoke-virtual {v13, v9}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v9

    if-nez v9, :cond_f

    .line 5650
    move-object/from16 v11, p4

    goto :goto_6

    .line 5652
    :cond_f
    invoke-virtual {v6}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v9

    if-eqz v9, :cond_10

    invoke-virtual {v6}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v9

    invoke-interface {v9}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->isApex()Z

    move-result v9

    if-eqz v9, :cond_10

    .line 5653
    move-object/from16 v11, p4

    invoke-virtual {v11, v5}, Lcom/android/server/pm/DumpState;->isOptionEnabled(I)Z

    move-result v9

    if-nez v9, :cond_11

    .line 5655
    goto :goto_6

    .line 5652
    :cond_10
    move-object/from16 v11, p4

    .line 5657
    :cond_11
    if-nez p5, :cond_13

    if-nez v0, :cond_13

    .line 5658
    invoke-virtual/range {p4 .. p4}, Lcom/android/server/pm/DumpState;->onTitlePrinted()Z

    move-result v9

    if-eqz v9, :cond_12

    .line 5659
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5660
    :cond_12
    const-string v9, "Hidden system packages:"

    invoke-virtual {v14, v9}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5661
    const/4 v0, 0x1

    .line 5663
    :cond_13
    iget-object v9, v15, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    .line 5664
    invoke-virtual {v6}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v10

    invoke-interface {v9, v10}, Lcom/android/server/pm/permission/LegacyPermissionDataProvider;->getLegacyPermissionState(I)Lcom/android/server/pm/permission/LegacyPermissionState;

    move-result-object v23

    .line 5665
    .local v23, "permissionsState":Lcom/android/server/pm/permission/LegacyPermissionState;
    if-eqz p5, :cond_14

    const-string v9, "dis"

    move-object/from16 v16, v9

    goto :goto_7

    :cond_14
    move-object/from16 v16, v4

    :goto_7
    if-eqz v13, :cond_15

    move/from16 v19, v3

    goto :goto_8

    :cond_15
    move/from16 v19, v2

    :goto_8
    const-string v17, "  "

    move-object/from16 v9, p0

    move-object/from16 v10, p1

    move-object/from16 v11, v17

    move-object/from16 v12, v16

    move-object/from16 v13, p3

    move-object v14, v6

    move-object/from16 v15, v23

    move-object/from16 v16, v7

    move-object/from16 v17, v8

    move-object/from16 v18, v22

    move/from16 v20, v21

    invoke-virtual/range {v9 .. v20}, Lcom/android/server/pm/Settings;->dumpPackageLPr(Ljava/io/PrintWriter;Ljava/lang/String;Ljava/lang/String;Landroid/util/ArraySet;Lcom/android/server/pm/PackageSetting;Lcom/android/server/pm/permission/LegacyPermissionState;Ljava/text/SimpleDateFormat;Ljava/util/Date;Ljava/util/List;ZZ)V

    .line 5667
    .end local v6    # "ps":Lcom/android/server/pm/PackageSetting;
    .end local v23    # "permissionsState":Lcom/android/server/pm/permission/LegacyPermissionState;
    move-object/from16 v15, p0

    move-object/from16 v14, p1

    move-object/from16 v13, p2

    move-object/from16 v12, p3

    goto/16 :goto_6

    .line 5669
    :cond_16
    return-void
.end method

.method dumpPackagesProto(Landroid/util/proto/ProtoOutputStream;)V
    .locals 10
    .param p1, "proto"    # Landroid/util/proto/ProtoOutputStream;

    .line 5672
    invoke-static {}, Lcom/android/server/pm/UserManagerService;->getInstance()Lcom/android/server/pm/UserManagerService;

    move-result-object v0

    invoke-static {v0}, Lcom/android/server/pm/Settings;->getAllUsers(Lcom/android/server/pm/UserManagerService;)Ljava/util/List;

    move-result-object v0

    .line 5674
    .local v0, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v7

    .line 5675
    .local v7, "count":I
    const/4 v1, 0x0

    move v8, v1

    .local v8, "i":I
    :goto_0
    if-ge v8, v7, :cond_0

    .line 5676
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, v8}, Lcom/android/server/utils/WatchedArrayMap;->valueAt(I)Ljava/lang/Object;

    move-result-object v1

    move-object v9, v1

    check-cast v9, Lcom/android/server/pm/PackageSetting;

    .line 5677
    .local v9, "ps":Lcom/android/server/pm/PackageSetting;
    const-wide v3, 0x20b00000005L

    iget-object v6, p0, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    move-object v1, v9

    move-object v2, p1

    move-object v5, v0

    invoke-virtual/range {v1 .. v6}, Lcom/android/server/pm/PackageSetting;->dumpDebug(Landroid/util/proto/ProtoOutputStream;JLjava/util/List;Lcom/android/server/pm/permission/LegacyPermissionDataProvider;)V

    .line 5675
    .end local v9    # "ps":Lcom/android/server/pm/PackageSetting;
    add-int/lit8 v8, v8, 0x1

    goto :goto_0

    :cond_0
    nop

    .line 5679
    .end local v8    # "i":I
    return-void
.end method

.method dumpPermissions(Ljava/io/PrintWriter;Ljava/lang/String;Landroid/util/ArraySet;Lcom/android/server/pm/DumpState;)V
    .locals 8
    .param p1, "pw"    # Ljava/io/PrintWriter;
    .param p2, "packageName"    # Ljava/lang/String;
    .param p4, "dumpState"    # Lcom/android/server/pm/DumpState;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/io/PrintWriter;",
            "Ljava/lang/String;",
            "Landroid/util/ArraySet<",
            "Ljava/lang/String;",
            ">;",
            "Lcom/android/server/pm/DumpState;",
            ")V"
        }
    .end annotation

    .line 5683
    .local p3, "permissionNames":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    .line 5684
    invoke-interface {v0}, Lcom/android/server/pm/permission/LegacyPermissionDataProvider;->getLegacyPermissions()Ljava/util/List;

    move-result-object v4

    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    .line 5685
    invoke-interface {v0}, Lcom/android/server/pm/permission/LegacyPermissionDataProvider;->getAllAppOpPermissionPackages()Ljava/util/Map;

    move-result-object v5

    .line 5683
    const/4 v6, 0x1

    move-object v1, p1

    move-object v2, p2

    move-object v3, p3

    move-object v7, p4

    invoke-static/range {v1 .. v7}, Lcom/android/server/pm/permission/LegacyPermissionSettings;->dumpPermissions(Ljava/io/PrintWriter;Ljava/lang/String;Landroid/util/ArraySet;Ljava/util/List;Ljava/util/Map;ZLcom/android/server/pm/DumpState;)V

    .line 5686
    return-void
.end method

.method dumpPreferred(Ljava/io/PrintWriter;Lcom/android/server/pm/DumpState;Ljava/lang/String;)V
    .locals 10
    .param p1, "pw"    # Ljava/io/PrintWriter;
    .param p2, "dumpState"    # Lcom/android/server/pm/DumpState;
    .param p3, "packageName"    # Ljava/lang/String;

    .line 6716
    const/4 v0, 0x0

    .local v0, "i":I
    :goto_0
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedSparseArray;->size()I

    move-result v1

    if-ge v0, v1, :cond_2

    .line 6717
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, v0}, Lcom/android/server/utils/WatchedSparseArray;->valueAt(I)Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/android/server/pm/PreferredIntentResolver;

    .line 6718
    .local v1, "pir":Lcom/android/server/pm/PreferredIntentResolver;
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v2, v0}, Lcom/android/server/utils/WatchedSparseArray;->keyAt(I)I

    move-result v9

    .line 6719
    .local v9, "user":I
    nop

    .line 6720
    invoke-virtual {p2}, Lcom/android/server/pm/DumpState;->getTitlePrinted()Z

    move-result v2

    const-string v3, ":"

    if-eqz v2, :cond_0

    .line 6721
    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    const-string v4, "\nPreferred Activities User "

    invoke-virtual {v2, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2, v9}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    move-object v4, v2

    goto :goto_1

    .line 6722
    :cond_0
    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    const-string v4, "Preferred Activities User "

    invoke-virtual {v2, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2, v9}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    move-object v4, v2

    :goto_1
    nop

    .line 6719
    const-string v5, "  "

    const/4 v7, 0x1

    const/4 v8, 0x0

    move-object v2, v1

    move-object v3, p1

    move-object v6, p3

    invoke-virtual/range {v2 .. v8}, Lcom/android/server/IntentResolver;->dump(Ljava/io/PrintWriter;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ZZ)Z

    move-result v2

    if-eqz v2, :cond_1

    .line 6724
    const/4 v2, 0x1

    invoke-virtual {p2, v2}, Lcom/android/server/pm/DumpState;->setTitlePrinted(Z)V

    .line 6716
    .end local v1    # "pir":Lcom/android/server/pm/PreferredIntentResolver;
    .end local v9    # "user":I
    :cond_1
    add-int/lit8 v0, v0, 0x1

    goto :goto_0

    :cond_2
    nop

    .line 6727
    .end local v0    # "i":I
    return-void
.end method

.method dumpReadMessages(Ljava/io/PrintWriter;Lcom/android/server/pm/DumpState;)V
    .locals 1
    .param p1, "pw"    # Ljava/io/PrintWriter;
    .param p2, "dumpState"    # Lcom/android/server/pm/DumpState;

    .line 5766
    const-string v0, "Settings parse messages:"

    invoke-virtual {p1, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5767
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {p1, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5768
    return-void
.end method

.method dumpRuntimePermissionsLPr(Ljava/io/PrintWriter;Ljava/lang/String;Landroid/util/ArraySet;Ljava/util/Collection;Z)V
    .locals 5
    .param p1, "pw"    # Ljava/io/PrintWriter;
    .param p2, "prefix"    # Ljava/lang/String;
    .param p5, "dumpAll"    # Z
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/io/PrintWriter;",
            "Ljava/lang/String;",
            "Landroid/util/ArraySet<",
            "Ljava/lang/String;",
            ">;",
            "Ljava/util/Collection<",
            "Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;",
            ">;Z)V"
        }
    .end annotation

    .line 5803
    .local p3, "permissionNames":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .local p4, "permissionStates":Ljava/util/Collection;, "Ljava/util/Collection<Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;>;"
    const/4 v0, 0x0

    .line 5804
    .local v0, "hasRuntimePermissions":Z
    invoke-interface {p4}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_0
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v2

    nop

    if-eqz v2, :cond_1

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;

    .line 5805
    .local v2, "permissionState":Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;
    invoke-virtual {v2}, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;->isRuntime()Z

    move-result v3

    if-eqz v3, :cond_0

    .line 5806
    const/4 v0, 0x1

    .line 5807
    goto :goto_1

    .line 5805
    :cond_0
    nop

    .line 5809
    .end local v2    # "permissionState":Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;
    goto :goto_0

    .line 5810
    :cond_1
    :goto_1
    if-nez v0, :cond_2

    if-eqz p5, :cond_5

    .line 5811
    :cond_2
    invoke-virtual {p1, p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string/jumbo v1, "runtime permissions:"

    invoke-virtual {p1, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5812
    invoke-interface {p4}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_2
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v2

    nop

    if-eqz v2, :cond_5

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;

    .line 5813
    .restart local v2    # "permissionState":Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;
    invoke-virtual {v2}, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;->isRuntime()Z

    move-result v3

    if-nez v3, :cond_3

    .line 5814
    goto :goto_2

    .line 5816
    :cond_3
    if-eqz p3, :cond_4

    .line 5817
    invoke-virtual {v2}, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;->getName()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {p3, v3}, Landroid/util/ArraySet;->contains(Ljava/lang/Object;)Z

    move-result v3

    if-nez v3, :cond_4

    .line 5818
    goto :goto_2

    .line 5820
    :cond_4
    invoke-virtual {p1, p2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v3, "  "

    invoke-virtual {p1, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v2}, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;->getName()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {p1, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5821
    const-string v3, ": granted="

    invoke-virtual {p1, v3}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v2}, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;->isGranted()Z

    move-result v3

    invoke-virtual {p1, v3}, Ljava/io/PrintWriter;->print(Z)V

    .line 5822
    nop

    .line 5823
    invoke-virtual {v2}, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;->getFlags()I

    move-result v3

    .line 5822
    const-string v4, ", flags="

    invoke-static {v4, v3}, Lcom/android/server/pm/Settings;->permissionFlagsToString(Ljava/lang/String;I)Ljava/lang/String;

    move-result-object v3

    invoke-virtual {p1, v3}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5824
    .end local v2    # "permissionState":Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;
    goto :goto_2

    .line 5826
    :cond_5
    return-void
.end method

.method dumpSharedUsersLPr(Ljava/io/PrintWriter;Ljava/lang/String;Landroid/util/ArraySet;Lcom/android/server/pm/DumpState;Z)V
    .locals 23
    .param p1, "pw"    # Ljava/io/PrintWriter;
    .param p2, "packageName"    # Ljava/lang/String;
    .param p4, "dumpState"    # Lcom/android/server/pm/DumpState;
    .param p5, "checkin"    # Z
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/io/PrintWriter;",
            "Ljava/lang/String;",
            "Landroid/util/ArraySet<",
            "Ljava/lang/String;",
            ">;",
            "Lcom/android/server/pm/DumpState;",
            "Z)V"
        }
    .end annotation

    .line 5690
    .local p3, "permissionNames":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    move-object/from16 v6, p0

    move-object/from16 v7, p1

    move-object/from16 v8, p3

    const/4 v0, 0x0

    .line 5691
    .local v0, "printedSomething":Z
    iget-object v1, v6, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v1

    invoke-interface {v1}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v9

    :goto_0
    invoke-interface {v9}, Ljava/util/Iterator;->hasNext()Z

    move-result v1

    if-eqz v1, :cond_c

    invoke-interface {v9}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v1

    move-object v10, v1

    check-cast v10, Lcom/android/server/pm/SharedUserSetting;

    .line 5692
    .local v10, "su":Lcom/android/server/pm/SharedUserSetting;
    if-eqz p2, :cond_0

    invoke-virtual/range {p4 .. p4}, Lcom/android/server/pm/DumpState;->getSharedUser()Lcom/android/server/pm/SharedUserSetting;

    move-result-object v1

    if-eq v10, v1, :cond_0

    .line 5693
    goto :goto_0

    .line 5695
    :cond_0
    iget-object v1, v6, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    iget v2, v10, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    .line 5696
    invoke-interface {v1, v2}, Lcom/android/server/pm/permission/LegacyPermissionDataProvider;->getLegacyPermissionState(I)Lcom/android/server/pm/permission/LegacyPermissionState;

    move-result-object v11

    .line 5697
    .local v11, "permissionsState":Lcom/android/server/pm/permission/LegacyPermissionState;
    if-eqz v8, :cond_1

    .line 5698
    invoke-virtual {v11, v8}, Lcom/android/server/pm/permission/LegacyPermissionState;->hasPermissionState(Ljava/util/Collection;)Z

    move-result v1

    if-nez v1, :cond_1

    .line 5699
    goto :goto_0

    .line 5701
    :cond_1
    if-nez p5, :cond_b

    .line 5702
    if-nez v0, :cond_3

    .line 5703
    invoke-virtual/range {p4 .. p4}, Lcom/android/server/pm/DumpState;->onTitlePrinted()Z

    move-result v1

    if-eqz v1, :cond_2

    .line 5704
    invoke-virtual/range {p1 .. p1}, Ljava/io/PrintWriter;->println()V

    .line 5705
    :cond_2
    const-string v1, "Shared users:"

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5706
    const/4 v0, 0x1

    move v12, v0

    goto :goto_1

    .line 5702
    :cond_3
    move v12, v0

    .line 5709
    .end local v0    # "printedSomething":Z
    .local v12, "printedSomething":Z
    :goto_1
    const-string v0, "  SharedUser ["

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5710
    iget-object v0, v10, Lcom/android/server/pm/SharedUserSetting;->name:Ljava/lang/String;

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5711
    const-string v0, "] ("

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5712
    invoke-static {v10}, Ljava/lang/System;->identityHashCode(Ljava/lang/Object;)I

    move-result v0

    invoke-static {v0}, Ljava/lang/Integer;->toHexString(I)Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    .line 5713
    const-string v0, "):"

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5715
    const-string v13, "    "

    .line 5716
    .local v13, "prefix":Ljava/lang/String;
    invoke-virtual {v7, v13}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "appId="

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    iget v0, v10, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(I)V

    .line 5718
    invoke-virtual {v7, v13}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "Packages"

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5719
    nop

    .line 5720
    invoke-virtual {v10}, Lcom/android/server/pm/SharedUserSetting;->getPackageStates()Landroid/util/ArraySet;

    move-result-object v14

    .line 5721
    .local v14, "susPackageStates":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Lcom/android/server/pm/pkg/PackageStateInternal;>;"
    invoke-virtual {v14}, Landroid/util/ArraySet;->size()I

    move-result v15

    .line 5722
    .local v15, "numPackages":I
    const/4 v0, 0x0

    .local v0, "i":I
    :goto_2
    const-string v5, "  "

    if-ge v0, v15, :cond_5

    .line 5723
    invoke-virtual {v14, v0}, Landroid/util/ArraySet;->valueAt(I)Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/android/server/pm/pkg/PackageStateInternal;

    .line 5724
    .local v1, "ps":Lcom/android/server/pm/pkg/PackageStateInternal;
    if-eqz v1, :cond_4

    .line 5725
    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v2, v13}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/Object;)V

    goto :goto_3

    .line 5727
    :cond_4
    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v2, v13}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v2, "NULL?!"

    invoke-virtual {v7, v2}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5722
    .end local v1    # "ps":Lcom/android/server/pm/pkg/PackageStateInternal;
    :goto_3
    add-int/lit8 v0, v0, 0x1

    goto :goto_2

    :cond_5
    nop

    .line 5731
    .end local v0    # "i":I
    const/4 v0, 0x4

    move-object/from16 v4, p4

    invoke-virtual {v4, v0}, Lcom/android/server/pm/DumpState;->isOptionEnabled(I)Z

    move-result v0

    if-eqz v0, :cond_6

    .line 5732
    move v0, v12

    goto/16 :goto_0

    .line 5735
    :cond_6
    invoke-static {}, Lcom/android/server/pm/UserManagerService;->getInstance()Lcom/android/server/pm/UserManagerService;

    move-result-object v0

    invoke-static {v0}, Lcom/android/server/pm/Settings;->getAllUsers(Lcom/android/server/pm/UserManagerService;)Ljava/util/List;

    move-result-object v16

    .line 5737
    .local v16, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    move-object/from16 v0, p0

    move-object/from16 v1, p1

    move-object v2, v13

    move-object/from16 v3, p3

    move-object v4, v11

    move-object v8, v5

    move-object/from16 v5, v16

    invoke-virtual/range {v0 .. v5}, Lcom/android/server/pm/Settings;->dumpInstallPermissionsLPr(Ljava/io/PrintWriter;Ljava/lang/String;Landroid/util/ArraySet;Lcom/android/server/pm/permission/LegacyPermissionState;Ljava/util/List;)V

    .line 5739
    invoke-interface/range {v16 .. v16}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v17

    :goto_4
    invoke-interface/range {v17 .. v17}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    nop

    if-eqz v0, :cond_a

    invoke-interface/range {v17 .. v17}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v0

    move-object v5, v0

    check-cast v5, Landroid/content/pm/UserInfo;

    .line 5740
    .local v5, "user":Landroid/content/pm/UserInfo;
    iget v4, v5, Landroid/content/pm/UserInfo;->id:I

    .line 5741
    .local v4, "userId":I
    iget-object v0, v6, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    iget v1, v10, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-static {v4, v1}, Landroid/os/UserHandle;->getUid(II)I

    move-result v1

    invoke-interface {v0, v1}, Lcom/android/server/pm/permission/LegacyPermissionDataProvider;->getGidsForUid(I)[I

    move-result-object v3

    .line 5743
    .local v3, "gids":[I
    nop

    .line 5744
    invoke-virtual {v11, v4}, Lcom/android/server/pm/permission/LegacyPermissionState;->getPermissionStates(I)Ljava/util/Collection;

    move-result-object v18

    .line 5745
    .local v18, "permissions":Ljava/util/Collection;, "Ljava/util/Collection<Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;>;"
    invoke-static {v3}, Lcom/android/internal/util/ArrayUtils;->isEmpty([I)Z

    move-result v0

    if-eqz v0, :cond_7

    invoke-interface/range {v18 .. v18}, Ljava/util/Collection;->isEmpty()Z

    move-result v0

    if-nez v0, :cond_9

    .line 5746
    :cond_7
    invoke-virtual {v7, v13}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    const-string v0, "User "

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    invoke-virtual {v7, v4}, Ljava/io/PrintWriter;->print(I)V

    const-string v0, ": "

    invoke-virtual {v7, v0}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5747
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v0, v13}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v6, v7, v0, v3}, Lcom/android/server/pm/Settings;->dumpGidsLPr(Ljava/io/PrintWriter;Ljava/lang/String;[I)V

    .line 5748
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v0, v13}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    if-eqz p2, :cond_8

    const/4 v0, 0x1

    :goto_5
    move/from16 v19, v0

    goto :goto_6

    :cond_8
    const/4 v0, 0x0

    goto :goto_5

    :goto_6
    move-object/from16 v0, p0

    move-object/from16 v1, p1

    move-object/from16 v20, v3

    .end local v3    # "gids":[I
    .local v20, "gids":[I
    move-object/from16 v3, p3

    move/from16 v21, v4

    .end local v4    # "userId":I
    .local v21, "userId":I
    move-object/from16 v4, v18

    move-object/from16 v22, v5

    .end local v5    # "user":Landroid/content/pm/UserInfo;
    .local v22, "user":Landroid/content/pm/UserInfo;
    move/from16 v5, v19

    invoke-virtual/range {v0 .. v5}, Lcom/android/server/pm/Settings;->dumpRuntimePermissionsLPr(Ljava/io/PrintWriter;Ljava/lang/String;Landroid/util/ArraySet;Ljava/util/Collection;Z)V

    .line 5751
    .end local v18    # "permissions":Ljava/util/Collection;, "Ljava/util/Collection<Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;>;"
    .end local v20    # "gids":[I
    .end local v21    # "userId":I
    .end local v22    # "user":Landroid/content/pm/UserInfo;
    :cond_9
    goto :goto_4

    .line 5752
    .end local v13    # "prefix":Ljava/lang/String;
    .end local v14    # "susPackageStates":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Lcom/android/server/pm/pkg/PackageStateInternal;>;"
    .end local v15    # "numPackages":I
    .end local v16    # "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    :cond_a
    move v0, v12

    goto :goto_7

    .line 5753
    .end local v12    # "printedSomething":Z
    .local v0, "printedSomething":Z
    :cond_b
    const-string/jumbo v1, "suid,"

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    iget v1, v10, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(I)V

    const-string v1, ","

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->print(Ljava/lang/String;)V

    iget-object v1, v10, Lcom/android/server/pm/SharedUserSetting;->name:Ljava/lang/String;

    invoke-virtual {v7, v1}, Ljava/io/PrintWriter;->println(Ljava/lang/String;)V

    .line 5755
    .end local v10    # "su":Lcom/android/server/pm/SharedUserSetting;
    .end local v11    # "permissionsState":Lcom/android/server/pm/permission/LegacyPermissionState;
    :goto_7
    move-object/from16 v8, p3

    goto/16 :goto_0

    .line 5756
    :cond_c
    return-void
.end method

.method dumpSharedUsersProto(Landroid/util/proto/ProtoOutputStream;)V
    .locals 5
    .param p1, "proto"    # Landroid/util/proto/ProtoOutputStream;

    .line 5759
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v0

    .line 5760
    .local v0, "count":I
    const/4 v1, 0x0

    .local v1, "i":I
    :goto_0
    if-ge v1, v0, :cond_0

    .line 5761
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2, v1}, Lcom/android/server/utils/WatchedArrayMap;->valueAt(I)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/server/pm/SharedUserSetting;

    const-wide v3, 0x20b00000006L

    invoke-virtual {v2, p1, v3, v4}, Lcom/android/server/pm/SharedUserSetting;->dumpDebug(Landroid/util/proto/ProtoOutputStream;J)V

    .line 5760
    add-int/lit8 v1, v1, 0x1

    goto :goto_0

    :cond_0
    nop

    .line 5763
    .end local v1    # "i":I
    return-void
.end method

.method dumpVersionLPr(Lcom/android/internal/util/IndentingPrintWriter;)V
    .locals 5
    .param p1, "pw"    # Lcom/android/internal/util/IndentingPrintWriter;

    .line 4969
    invoke-virtual {p1}, Lcom/android/internal/util/IndentingPrintWriter;->increaseIndent()Lcom/android/internal/util/IndentingPrintWriter;

    .line 4970
    const/4 v0, 0x0

    .local v0, "i":I
    :goto_0
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v1

    if-ge v0, v1, :cond_2

    .line 4971
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, v0}, Lcom/android/server/utils/WatchedArrayMap;->keyAt(I)Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Ljava/lang/String;

    .line 4972
    .local v1, "volumeUuid":Ljava/lang/String;
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2, v0}, Lcom/android/server/utils/WatchedArrayMap;->valueAt(I)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/server/pm/Settings$VersionInfo;

    .line 4973
    .local v2, "ver":Lcom/android/server/pm/Settings$VersionInfo;
    sget-object v3, Landroid/os/storage/StorageManager;->UUID_PRIVATE_INTERNAL:Ljava/lang/String;

    invoke-static {v3, v1}, Ljava/util/Objects;->equals(Ljava/lang/Object;Ljava/lang/Object;)Z

    move-result v3

    if-eqz v3, :cond_0

    .line 4974
    const-string v3, "Internal:"

    invoke-virtual {p1, v3}, Lcom/android/internal/util/IndentingPrintWriter;->println(Ljava/lang/String;)V

    goto :goto_1

    .line 4975
    :cond_0
    const-string/jumbo v3, "primary_physical"

    invoke-static {v3, v1}, Ljava/util/Objects;->equals(Ljava/lang/Object;Ljava/lang/Object;)Z

    move-result v3

    if-eqz v3, :cond_1

    .line 4976
    const-string v3, "External:"

    invoke-virtual {p1, v3}, Lcom/android/internal/util/IndentingPrintWriter;->println(Ljava/lang/String;)V

    goto :goto_1

    .line 4978
    :cond_1
    new-instance v3, Ljava/lang/StringBuilder;

    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V

    const-string v4, "UUID "

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v4, ":"

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {p1, v3}, Lcom/android/internal/util/IndentingPrintWriter;->println(Ljava/lang/String;)V

    .line 4980
    :goto_1
    invoke-virtual {p1}, Lcom/android/internal/util/IndentingPrintWriter;->increaseIndent()Lcom/android/internal/util/IndentingPrintWriter;

    .line 4981
    iget v3, v2, Lcom/android/server/pm/Settings$VersionInfo;->sdkVersion:I

    invoke-static {v3}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v3

    const-string/jumbo v4, "sdkVersion"

    invoke-virtual {p1, v4, v3}, Lcom/android/internal/util/IndentingPrintWriter;->printPair(Ljava/lang/String;Ljava/lang/Object;)Lcom/android/internal/util/IndentingPrintWriter;

    .line 4982
    iget v3, v2, Lcom/android/server/pm/Settings$VersionInfo;->databaseVersion:I

    invoke-static {v3}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v3

    const-string v4, "databaseVersion"

    invoke-virtual {p1, v4, v3}, Lcom/android/internal/util/IndentingPrintWriter;->printPair(Ljava/lang/String;Ljava/lang/Object;)Lcom/android/internal/util/IndentingPrintWriter;

    .line 4983
    invoke-virtual {p1}, Lcom/android/internal/util/IndentingPrintWriter;->println()V

    .line 4984
    const-string v3, "buildFingerprint"

    iget-object v4, v2, Lcom/android/server/pm/Settings$VersionInfo;->buildFingerprint:Ljava/lang/String;

    invoke-virtual {p1, v3, v4}, Lcom/android/internal/util/IndentingPrintWriter;->printPair(Ljava/lang/String;Ljava/lang/Object;)Lcom/android/internal/util/IndentingPrintWriter;

    .line 4985
    const-string v3, "fingerprint"

    iget-object v4, v2, Lcom/android/server/pm/Settings$VersionInfo;->fingerprint:Ljava/lang/String;

    invoke-virtual {p1, v3, v4}, Lcom/android/internal/util/IndentingPrintWriter;->printPair(Ljava/lang/String;Ljava/lang/Object;)Lcom/android/internal/util/IndentingPrintWriter;

    .line 4986
    invoke-virtual {p1}, Lcom/android/internal/util/IndentingPrintWriter;->println()V

    .line 4987
    invoke-virtual {p1}, Lcom/android/internal/util/IndentingPrintWriter;->decreaseIndent()Lcom/android/internal/util/IndentingPrintWriter;

    .line 4970
    .end local v1    # "volumeUuid":Ljava/lang/String;
    .end local v2    # "ver":Lcom/android/server/pm/Settings$VersionInfo;
    add-int/lit8 v0, v0, 0x1

    goto/16 :goto_0

    :cond_2
    nop

    .line 4989
    .end local v0    # "i":I
    invoke-virtual {p1}, Lcom/android/internal/util/IndentingPrintWriter;->decreaseIndent()Lcom/android/internal/util/IndentingPrintWriter;

    .line 4990
    return-void
.end method

.method editCrossProfileIntentResolverLPw(I)Lcom/android/server/pm/CrossProfileIntentResolver;
    .locals 2
    .param p1, "userId"    # I

    .line 1573
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/CrossProfileIntentResolver;

    .line 1574
    .local v0, "cpir":Lcom/android/server/pm/CrossProfileIntentResolver;
    if-nez v0, :cond_0

    .line 1575
    new-instance v1, Lcom/android/server/pm/CrossProfileIntentResolver;

    invoke-direct {v1}, Lcom/android/server/pm/CrossProfileIntentResolver;-><init>()V

    move-object v0, v1

    .line 1576
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, p1, v0}, Lcom/android/server/utils/WatchedSparseArray;->put(ILjava/lang/Object;)V

    .line 1578
    :cond_0
    return-object v0
.end method

.method editPersistentPreferredActivitiesLPw(I)Lcom/android/server/pm/PersistentPreferredIntentResolver;
    .locals 2
    .param p1, "userId"    # I

    .line 1564
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PersistentPreferredIntentResolver;

    .line 1565
    .local v0, "ppir":Lcom/android/server/pm/PersistentPreferredIntentResolver;
    if-nez v0, :cond_0

    .line 1566
    new-instance v1, Lcom/android/server/pm/PersistentPreferredIntentResolver;

    invoke-direct {v1}, Lcom/android/server/pm/PersistentPreferredIntentResolver;-><init>()V

    move-object v0, v1

    .line 1567
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, p1, v0}, Lcom/android/server/utils/WatchedSparseArray;->put(ILjava/lang/Object;)V

    .line 1569
    :cond_0
    return-object v0
.end method

.method editPreferredActivitiesLPw(I)Lcom/android/server/pm/PreferredIntentResolver;
    .locals 2
    .param p1, "userId"    # I

    .line 1555
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PreferredIntentResolver;

    .line 1556
    .local v0, "pir":Lcom/android/server/pm/PreferredIntentResolver;
    if-nez v0, :cond_0

    .line 1557
    new-instance v1, Lcom/android/server/pm/PreferredIntentResolver;

    invoke-direct {v1}, Lcom/android/server/pm/PreferredIntentResolver;-><init>()V

    move-object v0, v1

    .line 1558
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, p1, v0}, Lcom/android/server/utils/WatchedSparseArray;->put(ILjava/lang/Object;)V

    .line 1560
    :cond_0
    return-object v0
.end method

.method enableSystemPackageLPw(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;
    .locals 13
    .param p1, "name"    # Ljava/lang/String;

    .line 931
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PackageSetting;

    .line 932
    .local v0, "p":Lcom/android/server/pm/PackageSetting;
    if-nez v0, :cond_0

    .line 933
    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "Package "

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v2, " is not disabled"

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    const-string v2, "PackageManager"

    invoke-static {v2, v1}, Landroid/util/Log;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 934
    const/4 v1, 0x0

    return-object v1

    .line 936
    :cond_0
    invoke-virtual {p0, v0}, Lcom/android/server/pm/Settings;->getSharedUserSettingLPr(Lcom/android/server/pm/PackageSetting;)Lcom/android/server/pm/SharedUserSetting;

    move-result-object v1

    .line 937
    .local v1, "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    if-eqz v1, :cond_1

    .line 938
    iget-object v2, v1, Lcom/android/server/pm/SharedUserSetting;->mDisabledPackages:Lcom/android/server/utils/WatchedArraySet;

    invoke-virtual {v2, v0}, Lcom/android/server/utils/WatchedArraySet;->remove(Ljava/lang/Object;)Z

    .line 940
    :cond_1
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getPkgState()Lcom/android/server/pm/pkg/PackageStateUnserialized;

    move-result-object v2

    const/4 v3, 0x0

    invoke-virtual {v2, v3}, Lcom/android/server/pm/pkg/PackageStateUnserialized;->setUpdatedSystemApp(Z)Lcom/android/server/pm/pkg/PackageStateUnserialized;

    .line 941
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v2

    .line 942
    .local v2, "pkg":Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getRealName()Ljava/lang/String;

    move-result-object v6

    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getPath()Ljava/io/File;

    move-result-object v7

    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v8

    .line 943
    invoke-virtual {v0}, Lcom/android/server/pm/SettingBase;->getFlags()I

    move-result v9

    invoke-virtual {v0}, Lcom/android/server/pm/SettingBase;->getPrivateFlags()I

    move-result v10

    iget-object v4, p0, Lcom/android/server/pm/Settings;->mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;

    invoke-interface {v4}, Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;->generateNewId()Ljava/util/UUID;

    move-result-object v11

    .line 944
    if-nez v2, :cond_2

    move v12, v3

    goto :goto_0

    :cond_2
    invoke-interface {v2}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->isSdkLibrary()Z

    move-result v4

    move v12, v4

    .line 942
    :goto_0
    move-object v4, p0

    move-object v5, p1

    invoke-virtual/range {v4 .. v12}, Lcom/android/server/pm/Settings;->addPackageLPw(Ljava/lang/String;Ljava/lang/String;Ljava/io/File;IIILjava/util/UUID;Z)Lcom/android/server/pm/PackageSetting;

    move-result-object v4

    .line 945
    .local v4, "ret":Lcom/android/server/pm/PackageSetting;
    if-eqz v4, :cond_3

    .line 946
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getLegacyNativeLibraryPath()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v4, v5}, Lcom/android/server/pm/PackageSetting;->setLegacyNativeLibraryPath(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 947
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getPrimaryCpuAbiLegacy()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v4, v5}, Lcom/android/server/pm/PackageSetting;->setPrimaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 948
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getSecondaryCpuAbiLegacy()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v4, v5}, Lcom/android/server/pm/PackageSetting;->setSecondaryCpuAbi(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 949
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getCpuAbiOverride()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v4, v5}, Lcom/android/server/pm/PackageSetting;->setCpuAbiOverride(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 950
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getVersionCode()J

    move-result-wide v5

    invoke-virtual {v4, v5, v6}, Lcom/android/server/pm/PackageSetting;->setLongVersionCode(J)Lcom/android/server/pm/PackageSetting;

    .line 951
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getUsesSdkLibraries()[Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v4, v5}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibraries([Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 952
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getUsesSdkLibrariesVersionsMajor()[J

    move-result-object v5

    invoke-virtual {v4, v5}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibrariesVersionsMajor([J)Lcom/android/server/pm/PackageSetting;

    .line 953
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getUsesSdkLibrariesOptional()[Z

    move-result-object v5

    invoke-virtual {v4, v5}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibrariesOptional([Z)Lcom/android/server/pm/PackageSetting;

    .line 954
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getUsesStaticLibraries()[Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v4, v5}, Lcom/android/server/pm/PackageSetting;->setUsesStaticLibraries([Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 955
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getUsesStaticLibrariesVersions()[J

    move-result-object v5

    invoke-virtual {v4, v5}, Lcom/android/server/pm/PackageSetting;->setUsesStaticLibrariesVersions([J)Lcom/android/server/pm/PackageSetting;

    .line 956
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getMimeGroups()Ljava/util/Map;

    move-result-object v5

    invoke-virtual {v4, v5}, Lcom/android/server/pm/PackageSetting;->setMimeGroups(Ljava/util/Map;)Lcom/android/server/pm/PackageSetting;

    .line 957
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getAppMetadataFilePath()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v4, v5}, Lcom/android/server/pm/PackageSetting;->setAppMetadataFilePath(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 958
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getAppMetadataSource()I

    move-result v5

    invoke-virtual {v4, v5}, Lcom/android/server/pm/PackageSetting;->setAppMetadataSource(I)Lcom/android/server/pm/PackageSetting;

    .line 959
    invoke-virtual {v4}, Lcom/android/server/pm/PackageSetting;->getPkgState()Lcom/android/server/pm/pkg/PackageStateUnserialized;

    move-result-object v5

    invoke-virtual {v5, v3}, Lcom/android/server/pm/pkg/PackageStateUnserialized;->setUpdatedSystemApp(Z)Lcom/android/server/pm/pkg/PackageStateUnserialized;

    .line 960
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getTargetSdkVersion()I

    move-result v3

    invoke-virtual {v4, v3}, Lcom/android/server/pm/PackageSetting;->setTargetSdkVersion(I)Lcom/android/server/pm/PackageSetting;

    .line 961
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getRestrictUpdateHash()[B

    move-result-object v3

    invoke-virtual {v4, v3}, Lcom/android/server/pm/PackageSetting;->setRestrictUpdateHash([B)Lcom/android/server/pm/PackageSetting;

    .line 962
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->isScannedAsStoppedSystemApp()Z

    move-result v3

    invoke-virtual {v4, v3}, Lcom/android/server/pm/PackageSetting;->setScannedAsStoppedSystemApp(Z)Lcom/android/server/pm/PackageSetting;

    .line 963
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v3

    invoke-virtual {v4, v3}, Lcom/android/server/pm/PackageSetting;->setInstallSource(Lcom/android/server/pm/InstallSource;)Lcom/android/server/pm/PackageSetting;

    .line 965
    :cond_3
    iget-object v3, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v3, p1}, Lcom/android/server/utils/WatchedArrayMap;->remove(Ljava/lang/Object;)Ljava/lang/Object;

    .line 966
    return-object v4
.end method

.method public findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;
    .locals 2
    .param p1, "volumeUuid"    # Ljava/lang/String;

    .line 1669
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/Settings$VersionInfo;

    .line 1670
    .local v0, "ver":Lcom/android/server/pm/Settings$VersionInfo;
    if-nez v0, :cond_0

    .line 1671
    new-instance v1, Lcom/android/server/pm/Settings$VersionInfo;

    invoke-direct {v1}, Lcom/android/server/pm/Settings$VersionInfo;-><init>()V

    move-object v0, v1

    .line 1672
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, p1, v0}, Lcom/android/server/utils/WatchedArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 1674
    :cond_0
    return-object v0
.end method

.method getAllSharedUsersLPw()Ljava/util/Collection;
    .locals 1
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "()",
            "Ljava/util/Collection<",
            "Lcom/android/server/pm/SharedUserSetting;",
            ">;"
        }
    .end annotation

    .line 896
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v0

    return-object v0
.end method

.method getApplicationEnabledSettingLPr(Ljava/lang/String;I)I
    .locals 2
    .param p1, "packageName"    # Ljava/lang/String;
    .param p2, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Landroid/content/pm/PackageManager$NameNotFoundException;
        }
    .end annotation

    .line 4814
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PackageSetting;

    .line 4815
    .local v0, "pkg":Lcom/android/server/pm/PackageSetting;
    if-eqz v0, :cond_0

    .line 4818
    invoke-virtual {v0, p2}, Lcom/android/server/pm/PackageSetting;->getEnabled(I)I

    move-result v1

    return v1

    .line 4816
    :cond_0
    new-instance v1, Landroid/content/pm/PackageManager$NameNotFoundException;

    invoke-direct {v1, p1}, Landroid/content/pm/PackageManager$NameNotFoundException;-><init>(Ljava/lang/String;)V

    throw v1
.end method

.method getBlockUninstallLPr(ILjava/lang/String;)Z
    .locals 2
    .param p1, "userId"    # I
    .param p2, "packageName"    # Ljava/lang/String;

    .line 2221
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Landroid/util/ArraySet;

    .line 2222
    .local v0, "packages":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    if-nez v0, :cond_0

    .line 2223
    const/4 v1, 0x0

    return v1

    .line 2225
    :cond_0
    invoke-virtual {v0, p2}, Landroid/util/ArraySet;->contains(Ljava/lang/Object;)Z

    move-result v1

    return v1
.end method

.method getComponentEnabledSettingLPr(Landroid/content/ComponentName;I)I
    .locals 4
    .param p1, "componentName"    # Landroid/content/ComponentName;
    .param p2, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Landroid/content/pm/PackageManager$NameNotFoundException;
        }
    .end annotation

    .line 4823
    invoke-virtual {p1}, Landroid/content/ComponentName;->getPackageName()Ljava/lang/String;

    move-result-object v0

    .line 4824
    .local v0, "packageName":Ljava/lang/String;
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, v0}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/android/server/pm/PackageSetting;

    .line 4825
    .local v1, "pkg":Lcom/android/server/pm/PackageSetting;
    if-eqz v1, :cond_0

    .line 4828
    invoke-virtual {p1}, Landroid/content/ComponentName;->getClassName()Ljava/lang/String;

    move-result-object v2

    .line 4829
    .local v2, "classNameStr":Ljava/lang/String;
    invoke-virtual {v1, v2, p2}, Lcom/android/server/pm/PackageSetting;->getCurrentEnabledStateLPr(Ljava/lang/String;I)I

    move-result v3

    return v3

    .line 4826
    .end local v2    # "classNameStr":Ljava/lang/String;
    :cond_0
    new-instance v2, Landroid/content/pm/PackageManager$NameNotFoundException;

    invoke-virtual {p1}, Landroid/content/ComponentName;->getPackageName()Ljava/lang/String;

    move-result-object v3

    invoke-direct {v2, v3}, Landroid/content/pm/PackageManager$NameNotFoundException;-><init>(Ljava/lang/String;)V

    throw v2
.end method

.method getCrossProfileIntentResolver(I)Lcom/android/server/pm/CrossProfileIntentResolver;
    .locals 1
    .param p1, "userId"    # I
    .annotation build Landroid/annotation/Nullable;
    .end annotation

    .line 6567
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/CrossProfileIntentResolver;

    return-object v0
.end method

.method getDefaultRuntimePermissionsVersion(I)I
    .locals 1
    .param p1, "userId"    # I

    .line 1657
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    invoke-virtual {v0, p1}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;->getVersion(I)I

    move-result v0

    return v0
.end method

.method getDisabledSystemPackagesLocked()Lcom/android/server/utils/WatchedArrayMap;
    .locals 1
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "()",
            "Lcom/android/server/utils/WatchedArrayMap<",
            "Ljava/lang/String;",
            "Lcom/android/server/pm/PackageSetting;",
            ">;"
        }
    .end annotation

    .line 845
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    return-object v0
.end method

.method public getDisabledSystemPkgLPr(Lcom/android/server/pm/PackageSetting;)Lcom/android/server/pm/PackageSetting;
    .locals 1
    .param p1, "enabledPackageSetting"    # Lcom/android/server/pm/PackageSetting;
    .annotation build Landroid/annotation/Nullable;
    .end annotation

    .line 4806
    if-nez p1, :cond_0

    .line 4807
    const/4 v0, 0x0

    return-object v0

    .line 4809
    :cond_0
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {p0, v0}, Lcom/android/server/pm/Settings;->getDisabledSystemPkgLPr(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    return-object v0
.end method

.method public getDisabledSystemPkgLPr(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;
    .locals 1
    .param p1, "name"    # Ljava/lang/String;
    .annotation build Landroid/annotation/Nullable;
    .end annotation

    .line 4796
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PackageSetting;

    .line 4797
    .local v0, "ps":Lcom/android/server/pm/PackageSetting;
    return-object v0
.end method

.method public getExternalVersion()Lcom/android/server/pm/Settings$VersionInfo;
    .locals 2

    .line 1682
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    const-string/jumbo v1, "primary_physical"

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/Settings$VersionInfo;

    return-object v0
.end method

.method public getInternalVersion()Lcom/android/server/pm/Settings$VersionInfo;
    .locals 2

    .line 1678
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    sget-object v1, Landroid/os/storage/StorageManager;->UUID_PRIVATE_INTERNAL:Ljava/lang/String;

    invoke-virtual {v0, v1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/Settings$VersionInfo;

    return-object v0
.end method

.method getKeySetManagerService()Lcom/android/server/pm/KeySetManagerService;
    .locals 1

    .line 849
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mKeySetManagerService:Lcom/android/server/pm/KeySetManagerService;

    return-object v0
.end method

.method getLegacyPermissionsState(I)Lcom/android/permission/persistence/RuntimePermissionsState;
    .locals 3
    .param p1, "userId"    # I

    .line 3605
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1, v1, v2}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;->getLegacyPermissionsState(ILcom/android/server/utils/WatchedArrayMap;Lcom/android/server/utils/WatchedArrayMap;)Lcom/android/permission/persistence/RuntimePermissionsState;

    move-result-object v0

    return-object v0
.end method

.method getPackageLPr(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;
    .locals 1
    .param p1, "pkgName"    # Ljava/lang/String;

    .line 837
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PackageSetting;

    return-object v0
.end method

.method getPackagesLocked()Lcom/android/server/utils/WatchedArrayMap;
    .locals 1
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "()",
            "Lcom/android/server/utils/WatchedArrayMap<",
            "Ljava/lang/String;",
            "Lcom/android/server/pm/PackageSetting;",
            ">;"
        }
    .end annotation

    .line 841
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    return-object v0
.end method

.method getPendingDefaultBrowserLPr(I)Ljava/lang/String;
    .locals 1
    .param p1, "userId"    # I

    .line 1582
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPendingDefaultBrowser:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Ljava/lang/String;

    return-object v0
.end method

.method getPersistentPreferredActivities(I)Lcom/android/server/pm/PersistentPreferredIntentResolver;
    .locals 1
    .param p1, "userId"    # I

    .line 6558
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PersistentPreferredIntentResolver;

    return-object v0
.end method

.method getPreferredActivities(I)Lcom/android/server/pm/PreferredIntentResolver;
    .locals 1
    .param p1, "userId"    # I

    .line 6562
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PreferredIntentResolver;

    return-object v0
.end method

.method getRenamedPackageLPr(Ljava/lang/String;)Ljava/lang/String;
    .locals 1
    .param p1, "pkgName"    # Ljava/lang/String;

    .line 853
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Ljava/lang/String;

    return-object v0
.end method

.method public getSettingLPr(I)Lcom/android/server/pm/SettingBase;
    .locals 1
    .param p1, "appId"    # I

    .line 1518
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    invoke-virtual {v0, p1}, Lcom/android/server/pm/AppIdSettingMap;->getSetting(I)Lcom/android/server/pm/SettingBase;

    move-result-object v0

    return-object v0
.end method

.method getSharedUserLPw(Ljava/lang/String;IIZ)Lcom/android/server/pm/SharedUserSetting;
    .locals 4
    .param p1, "name"    # Ljava/lang/String;
    .param p2, "pkgFlags"    # I
    .param p3, "pkgPrivateFlags"    # I
    .param p4, "create"    # Z
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lcom/android/server/pm/PackageManagerException;
        }
    .end annotation

    .line 876
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/SharedUserSetting;

    .line 877
    .local v0, "s":Lcom/android/server/pm/SharedUserSetting;
    if-nez v0, :cond_1

    if-eqz p4, :cond_1

    .line 878
    new-instance v1, Lcom/android/server/pm/SharedUserSetting;

    invoke-direct {v1, p1, p2, p3}, Lcom/android/server/pm/SharedUserSetting;-><init>(Ljava/lang/String;II)V

    move-object v0, v1

    .line 879
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    invoke-virtual {v1, v0}, Lcom/android/server/pm/AppIdSettingMap;->acquireAndRegisterNewAppId(Lcom/android/server/pm/SettingBase;)I

    move-result v1

    iput v1, v0, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    .line 880
    iget v1, v0, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    if-ltz v1, :cond_0

    .line 885
    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "New shared user "

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v2, ": id="

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget v2, v0, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    const-string v2, "PackageManager"

    invoke-static {v2, v1}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I

    .line 886
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, p1, v0}, Lcom/android/server/utils/WatchedArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    goto :goto_0

    .line 882
    :cond_0
    new-instance v1, Lcom/android/server/pm/PackageManagerException;

    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    const-string v3, "Creating shared user "

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v3, " failed"

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    const/4 v3, -0x4

    invoke-direct {v1, v3, v2}, Lcom/android/server/pm/PackageManagerException;-><init>(ILjava/lang/String;)V

    throw v1

    .line 888
    :cond_1
    :goto_0
    return-object v0
.end method

.method getSharedUserSettingLPr(Lcom/android/server/pm/PackageSetting;)Lcom/android/server/pm/SharedUserSetting;
    .locals 1
    .param p1, "ps"    # Lcom/android/server/pm/PackageSetting;
    .annotation build Landroid/annotation/Nullable;
    .end annotation

    .line 4839
    if-eqz p1, :cond_0

    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->hasSharedUser()Z

    move-result v0

    if-nez v0, :cond_1

    :cond_0
    goto :goto_0

    .line 4842
    :cond_1
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getSharedUserAppId()I

    move-result v0

    invoke-virtual {p0, v0}, Lcom/android/server/pm/Settings;->getSettingLPr(I)Lcom/android/server/pm/SettingBase;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/SharedUserSetting;

    return-object v0

    .line 4840
    :goto_0
    const/4 v0, 0x0

    return-object v0
.end method

.method getSharedUserSettingLPr(Ljava/lang/String;)Lcom/android/server/pm/SharedUserSetting;
    .locals 2
    .param p1, "packageName"    # Ljava/lang/String;

    .line 4833
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PackageSetting;

    .line 4834
    .local v0, "ps":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {p0, v0}, Lcom/android/server/pm/Settings;->getSharedUserSettingLPr(Lcom/android/server/pm/PackageSetting;)Lcom/android/server/pm/SharedUserSetting;

    move-result-object v1

    return-object v1
.end method

.method getSharedUsersLocked()Lcom/android/server/utils/WatchedArrayMap;
    .locals 1
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "()",
            "Lcom/android/server/utils/WatchedArrayMap<",
            "Ljava/lang/String;",
            "+",
            "Lcom/android/server/pm/pkg/SharedUserApi;",
            ">;"
        }
    .end annotation

    .line 892
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    return-object v0
.end method

.method public getSmtEx()Lcom/android/server/pm/SettingsSmtEx;
    .locals 1

    .line 6739
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mSmtEx:Lcom/android/server/pm/SettingsSmtEx;

    return-object v0
.end method

.method public getVerifierDeviceIdentityLPw(Lcom/android/server/pm/Computer;)Landroid/content/pm/VerifierDeviceIdentity;
    .locals 1
    .param p1, "computer"    # Lcom/android/server/pm/Computer;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param

    .line 4781
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mVerifierDeviceIdentity:Landroid/content/pm/VerifierDeviceIdentity;

    if-nez v0, :cond_0

    .line 4782
    invoke-static {}, Landroid/content/pm/VerifierDeviceIdentity;->generate()Landroid/content/pm/VerifierDeviceIdentity;

    move-result-object v0

    iput-object v0, p0, Lcom/android/server/pm/Settings;->mVerifierDeviceIdentity:Landroid/content/pm/VerifierDeviceIdentity;

    .line 4784
    const/4 v0, 0x0

    invoke-virtual {p0, p1, v0}, Lcom/android/server/pm/Settings;->writeLPr(Lcom/android/server/pm/Computer;Z)V

    .line 4787
    :cond_0
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mVerifierDeviceIdentity:Landroid/content/pm/VerifierDeviceIdentity;

    return-object v0
.end method

.method getVolumePackagesLPr(Ljava/lang/String;)Ljava/util/List;
    .locals 4
    .param p1, "volumeUuid"    # Ljava/lang/String;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/lang/String;",
            ")",
            "Ljava/util/List<",
            "+",
            "Lcom/android/server/pm/pkg/PackageStateInternal;",
            ">;"
        }
    .end annotation

    .line 4900
    new-instance v0, Ljava/util/ArrayList;

    invoke-direct {v0}, Ljava/util/ArrayList;-><init>()V

    .line 4901
    .local v0, "res":Ljava/util/ArrayList;, "Ljava/util/ArrayList<Lcom/android/server/pm/pkg/PackageStateInternal;>;"
    const/4 v1, 0x0

    .local v1, "i":I
    :goto_0
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v2

    if-ge v1, v2, :cond_1

    .line 4902
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2, v1}, Lcom/android/server/utils/WatchedArrayMap;->valueAt(I)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/server/pm/PackageSetting;

    .line 4903
    .local v2, "setting":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v2}, Lcom/android/server/pm/PackageSetting;->getVolumeUuid()Ljava/lang/String;

    move-result-object v3

    invoke-static {p1, v3}, Ljava/util/Objects;->equals(Ljava/lang/Object;Ljava/lang/Object;)Z

    move-result v3

    if-eqz v3, :cond_0

    .line 4904
    invoke-virtual {v0, v2}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z

    .line 4901
    .end local v2    # "setting":Lcom/android/server/pm/PackageSetting;
    :cond_0
    add-int/lit8 v1, v1, 0x1

    goto :goto_0

    :cond_1
    nop

    .line 4907
    .end local v1    # "i":I
    return-object v0
.end method

.method insertPackageSettingLPw(Lcom/android/server/pm/PackageSetting;Lcom/android/server/pm/pkg/AndroidPackage;)V
    .locals 3
    .param p1, "p"    # Lcom/android/server/pm/PackageSetting;
    .param p2, "pkg"    # Lcom/android/server/pm/pkg/AndroidPackage;

    .line 1411
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getSigningDetails()Landroid/content/pm/SigningDetails;

    move-result-object v0

    invoke-virtual {v0}, Landroid/content/pm/SigningDetails;->getSignatures()[Landroid/content/pm/Signature;

    move-result-object v0

    if-nez v0, :cond_0

    .line 1412
    invoke-interface {p2}, Lcom/android/server/pm/pkg/AndroidPackage;->getSigningDetails()Landroid/content/pm/SigningDetails;

    move-result-object v0

    invoke-virtual {p1, v0}, Lcom/android/server/pm/PackageSetting;->setSigningDetails(Landroid/content/pm/SigningDetails;)Lcom/android/server/pm/PackageSetting;

    .line 1416
    :cond_0
    invoke-virtual {p0, p1}, Lcom/android/server/pm/Settings;->getSharedUserSettingLPr(Lcom/android/server/pm/PackageSetting;)Lcom/android/server/pm/SharedUserSetting;

    move-result-object v0

    .line 1417
    .local v0, "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    if-eqz v0, :cond_1

    .line 1418
    iget-object v1, v0, Lcom/android/server/pm/SharedUserSetting;->signatures:Lcom/android/server/pm/PackageSignatures;

    iget-object v1, v1, Lcom/android/server/pm/PackageSignatures;->mSigningDetails:Landroid/content/pm/SigningDetails;

    invoke-virtual {v1}, Landroid/content/pm/SigningDetails;->getSignatures()[Landroid/content/pm/Signature;

    move-result-object v1

    if-nez v1, :cond_1

    .line 1419
    iget-object v1, v0, Lcom/android/server/pm/SharedUserSetting;->signatures:Lcom/android/server/pm/PackageSignatures;

    invoke-interface {p2}, Lcom/android/server/pm/pkg/AndroidPackage;->getSigningDetails()Landroid/content/pm/SigningDetails;

    move-result-object v2

    iput-object v2, v1, Lcom/android/server/pm/PackageSignatures;->mSigningDetails:Landroid/content/pm/SigningDetails;

    .line 1422
    :cond_1
    invoke-virtual {p0, p1, v0}, Lcom/android/server/pm/Settings;->addPackageSettingLPw(Lcom/android/server/pm/PackageSetting;Lcom/android/server/pm/SharedUserSetting;)V

    .line 1423
    return-void
.end method

.method isDisabledSystemPackageLPr(Ljava/lang/String;)Z
    .locals 1
    .param p1, "name"    # Ljava/lang/String;

    .line 970
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->containsKey(Ljava/lang/Object;)Z

    move-result v0

    return v0
.end method

.method isInstallerPackage(Ljava/lang/String;)Z
    .locals 1
    .param p1, "packageName"    # Ljava/lang/String;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param

    .line 6730
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArraySet;->contains(Ljava/lang/Object;)Z

    move-result v0

    return v0
.end method

.method isPermissionUpgradeNeeded(I)Z
    .locals 1
    .param p1, "userId"    # I

    .line 1649
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    invoke-virtual {v0, p1}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;->isPermissionUpgradeNeeded(I)Z

    move-result v0

    return v0
.end method

.method public isRegisteredObserver(Lcom/android/server/utils/Watcher;)Z
    .locals 1
    .param p1, "observer"    # Lcom/android/server/utils/Watcher;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param

    .line 220
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mWatchable:Lcom/android/server/utils/WatchableImpl;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchableImpl;->isRegisteredObserver(Lcom/android/server/utils/Watcher;)Z

    move-result v0

    return v0
.end method

.method public logEvent(ILjava/lang/String;)V
    .locals 3
    .param p1, "priority"    # I
    .param p2, "msg"    # Ljava/lang/String;

    .line 1838
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v1, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v2, "\n"

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1839
    invoke-static {p1, p2}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 1840
    return-void
.end method

.method protected onChanged()V
    .locals 0

    .line 237
    invoke-virtual {p0, p0}, Lcom/android/server/pm/Settings;->dispatchChange(Lcom/android/server/utils/Watchable;)V

    .line 238
    return-void
.end method

.method public onVolumeForgotten(Ljava/lang/String;)V
    .locals 1
    .param p1, "fsUuid"    # Ljava/lang/String;

    .line 1686
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->remove(Ljava/lang/Object;)Ljava/lang/Object;

    .line 1687
    return-void
.end method

.method pruneRenamedPackagesLPw()V
    .locals 3

    .line 865
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v0

    add-int/lit8 v0, v0, -0x1

    .local v0, "i":I
    :goto_0
    if-ltz v0, :cond_1

    .line 866
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2, v0}, Lcom/android/server/utils/WatchedArrayMap;->valueAt(I)Ljava/lang/Object;

    move-result-object v2

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/android/server/pm/PackageSetting;

    .line 867
    .local v1, "ps":Lcom/android/server/pm/PackageSetting;
    if-nez v1, :cond_0

    .line 868
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2, v0}, Lcom/android/server/utils/WatchedArrayMap;->removeAt(I)Ljava/lang/Object;

    .line 865
    .end local v1    # "ps":Lcom/android/server/pm/PackageSetting;
    :cond_0
    add-int/lit8 v0, v0, -0x1

    goto :goto_0

    :cond_1
    nop

    .line 871
    .end local v0    # "i":I
    return-void
.end method

.method pruneSharedUsersLPw()V
    .locals 12

    .line 1025
    new-instance v0, Ljava/util/ArrayList;

    invoke-direct {v0}, Ljava/util/ArrayList;-><init>()V

    .line 1026
    .local v0, "removeKeys":Ljava/util/List;, "Ljava/util/List<Ljava/lang/String;>;"
    new-instance v1, Ljava/util/ArrayList;

    invoke-direct {v1}, Ljava/util/ArrayList;-><init>()V

    .line 1027
    .local v1, "removeValues":Ljava/util/List;, "Ljava/util/List<Lcom/android/server/pm/SharedUserSetting;>;"
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2}, Lcom/android/server/utils/WatchedArrayMap;->entrySet()Ljava/util/Set;

    move-result-object v2

    invoke-interface {v2}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v2

    :goto_0
    invoke-interface {v2}, Ljava/util/Iterator;->hasNext()Z

    move-result v3

    if-eqz v3, :cond_7

    invoke-interface {v2}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Ljava/util/Map$Entry;

    .line 1028
    .local v3, "entry":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Ljava/lang/String;Lcom/android/server/pm/SharedUserSetting;>;"
    invoke-interface {v3}, Ljava/util/Map$Entry;->getValue()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/android/server/pm/SharedUserSetting;

    .line 1029
    .local v4, "sus":Lcom/android/server/pm/SharedUserSetting;
    if-nez v4, :cond_0

    .line 1030
    invoke-interface {v3}, Ljava/util/Map$Entry;->getKey()Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Ljava/lang/String;

    invoke-interface {v0, v5}, Ljava/util/List;->add(Ljava/lang/Object;)Z

    .line 1031
    goto :goto_0

    .line 1033
    :cond_0
    const/4 v5, 0x0

    .line 1035
    .local v5, "changed":Z
    invoke-virtual {v4}, Lcom/android/server/pm/SharedUserSetting;->getPackageSettings()Lcom/android/server/utils/WatchedArraySet;

    move-result-object v6

    .line 1036
    .local v6, "sharedUserPackageSettings":Lcom/android/server/utils/WatchedArraySet;, "Lcom/android/server/utils/WatchedArraySet<Lcom/android/server/pm/PackageSetting;>;"
    invoke-virtual {v6}, Lcom/android/server/utils/WatchedArraySet;->size()I

    move-result v7

    add-int/lit8 v7, v7, -0x1

    .local v7, "i":I
    :goto_1
    if-ltz v7, :cond_2

    .line 1037
    invoke-virtual {v6, v7}, Lcom/android/server/utils/WatchedArraySet;->valueAt(I)Ljava/lang/Object;

    move-result-object v8

    check-cast v8, Lcom/android/server/pm/PackageSetting;

    .line 1038
    .local v8, "ps":Lcom/android/server/pm/PackageSetting;
    iget-object v9, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v8}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v10

    invoke-virtual {v9, v10}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v9

    if-nez v9, :cond_1

    .line 1039
    invoke-virtual {v6, v7}, Lcom/android/server/utils/WatchedArraySet;->removeAt(I)Ljava/lang/Object;

    .line 1040
    const/4 v5, 0x1

    .line 1036
    .end local v8    # "ps":Lcom/android/server/pm/PackageSetting;
    :cond_1
    add-int/lit8 v7, v7, -0x1

    goto :goto_1

    :cond_2
    nop

    .line 1043
    .end local v7    # "i":I
    nop

    .line 1044
    invoke-virtual {v4}, Lcom/android/server/pm/SharedUserSetting;->getDisabledPackageSettings()Lcom/android/server/utils/WatchedArraySet;

    move-result-object v7

    .line 1045
    .local v7, "sharedUserDisabledPackageSettings":Lcom/android/server/utils/WatchedArraySet;, "Lcom/android/server/utils/WatchedArraySet<Lcom/android/server/pm/PackageSetting;>;"
    invoke-virtual {v7}, Lcom/android/server/utils/WatchedArraySet;->size()I

    move-result v8

    add-int/lit8 v8, v8, -0x1

    .local v8, "i":I
    :goto_2
    if-ltz v8, :cond_4

    .line 1046
    invoke-virtual {v7, v8}, Lcom/android/server/utils/WatchedArraySet;->valueAt(I)Ljava/lang/Object;

    move-result-object v9

    check-cast v9, Lcom/android/server/pm/PackageSetting;

    .line 1047
    .local v9, "ps":Lcom/android/server/pm/PackageSetting;
    iget-object v10, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v9}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v11

    invoke-virtual {v10, v11}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v10

    if-nez v10, :cond_3

    .line 1048
    invoke-virtual {v7, v8}, Lcom/android/server/utils/WatchedArraySet;->removeAt(I)Ljava/lang/Object;

    .line 1049
    const/4 v5, 0x1

    .line 1045
    .end local v9    # "ps":Lcom/android/server/pm/PackageSetting;
    :cond_3
    add-int/lit8 v8, v8, -0x1

    goto :goto_2

    :cond_4
    nop

    .line 1052
    .end local v8    # "i":I
    if-eqz v5, :cond_5

    .line 1053
    invoke-virtual {v4}, Lcom/android/server/pm/SettingBase;->onChanged()V

    .line 1055
    :cond_5
    invoke-virtual {v6}, Lcom/android/server/utils/WatchedArraySet;->isEmpty()Z

    move-result v8

    if-eqz v8, :cond_6

    .line 1056
    invoke-virtual {v7}, Lcom/android/server/utils/WatchedArraySet;->isEmpty()Z

    move-result v8

    if-eqz v8, :cond_6

    .line 1057
    invoke-interface {v1, v4}, Ljava/util/List;->add(Ljava/lang/Object;)Z

    .line 1059
    .end local v3    # "entry":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Ljava/lang/String;Lcom/android/server/pm/SharedUserSetting;>;"
    .end local v4    # "sus":Lcom/android/server/pm/SharedUserSetting;
    .end local v5    # "changed":Z
    .end local v6    # "sharedUserPackageSettings":Lcom/android/server/utils/WatchedArraySet;, "Lcom/android/server/utils/WatchedArraySet<Lcom/android/server/pm/PackageSetting;>;"
    .end local v7    # "sharedUserDisabledPackageSettings":Lcom/android/server/utils/WatchedArraySet;, "Lcom/android/server/utils/WatchedArraySet<Lcom/android/server/pm/PackageSetting;>;"
    :cond_6
    goto/16 :goto_0

    .line 1060
    :cond_7
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-static {v2}, Ljava/util/Objects;->requireNonNull(Ljava/lang/Object;)Ljava/lang/Object;

    new-instance v3, Lcom/android/server/pm/Settings$$ExternalSyntheticLambda0;

    invoke-direct {v3, v2}, Lcom/android/server/pm/Settings$$ExternalSyntheticLambda0;-><init>(Lcom/android/server/utils/WatchedArrayMap;)V

    invoke-interface {v0, v3}, Ljava/util/List;->forEach(Ljava/util/function/Consumer;)V

    .line 1061
    new-instance v2, Lcom/android/server/pm/Settings$$ExternalSyntheticLambda1;

    invoke-direct {v2, p0}, Lcom/android/server/pm/Settings$$ExternalSyntheticLambda1;-><init>(Lcom/android/server/pm/Settings;)V

    invoke-interface {v1, v2}, Ljava/util/List;->forEach(Ljava/util/function/Consumer;)V

    .line 1062
    return-void
.end method

.method readBlockUninstallPackagesLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V
    .locals 6
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .param p2, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 1810
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v0

    .line 1812
    .local v0, "outerDepth":I
    new-instance v1, Landroid/util/ArraySet;

    invoke-direct {v1}, Landroid/util/ArraySet;-><init>()V

    .line 1813
    .local v1, "packages":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    :cond_0
    :goto_0
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v2

    move v3, v2

    .local v3, "type":I
    const/4 v4, 0x1

    nop

    if-eq v2, v4, :cond_4

    const/4 v2, 0x3

    if-ne v3, v2, :cond_1

    .line 1814
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v4

    if-le v4, v0, :cond_4

    .line 1815
    :cond_1
    nop

    nop

    if-eq v3, v2, :cond_0

    const/4 v2, 0x4

    if-ne v3, v2, :cond_2

    .line 1816
    goto :goto_0

    .line 1818
    :cond_2
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v2

    .line 1819
    .local v2, "tagName":Ljava/lang/String;
    const-string v4, "block-uninstall"

    invoke-virtual {v2, v4}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v4

    if-eqz v4, :cond_3

    .line 1820
    const/4 v4, 0x0

    const-string/jumbo v5, "packageName"

    invoke-interface {p1, v4, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v4

    .line 1821
    .local v4, "packageName":Ljava/lang/String;
    invoke-virtual {v1, v4}, Landroid/util/ArraySet;->add(Ljava/lang/Object;)Z

    .line 1822
    .end local v4    # "packageName":Ljava/lang/String;
    goto :goto_1

    .line 1823
    :cond_3
    new-instance v4, Ljava/lang/StringBuilder;

    invoke-direct {v4}, Ljava/lang/StringBuilder;-><init>()V

    const-string v5, "Unknown element under block-uninstall-packages: "

    invoke-virtual {v4, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1824
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v4, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v4

    .line 1825
    .local v4, "msg":Ljava/lang/String;
    const/4 v5, 0x5

    invoke-static {v5, v4}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 1826
    invoke-static {p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 1828
    .end local v2    # "tagName":Ljava/lang/String;
    .end local v4    # "msg":Ljava/lang/String;
    :goto_1
    goto :goto_0

    .line 1829
    :cond_4
    invoke-virtual {v1}, Landroid/util/ArraySet;->isEmpty()Z

    move-result v2

    if-eqz v2, :cond_5

    .line 1830
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v2, p2}, Lcom/android/server/utils/WatchedSparseArray;->remove(I)V

    goto :goto_2

    .line 1832
    :cond_5
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v2, p2, v1}, Lcom/android/server/utils/WatchedSparseArray;->put(ILjava/lang/Object;)V

    .line 1834
    :goto_2
    return-void
.end method

.method readDefaultAppsLPw(Lorg/xmlpull/v1/XmlPullParser;I)V
    .locals 2
    .param p1, "parser"    # Lorg/xmlpull/v1/XmlPullParser;
    .param p2, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 1773
    invoke-static {p1}, Lcom/android/server/pm/Settings;->readDefaultApps(Lorg/xmlpull/v1/XmlPullParser;)Ljava/lang/String;

    move-result-object v0

    .line 1774
    .local v0, "defaultBrowser":Ljava/lang/String;
    if-eqz v0, :cond_0

    .line 1775
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPendingDefaultBrowser:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, p2, v0}, Lcom/android/server/utils/WatchedSparseArray;->put(ILjava/lang/Object;)V

    .line 1777
    :cond_0
    return-void
.end method

.method readInstallPermissionsLPr(Lcom/android/modules/utils/TypedXmlPullParser;Lcom/android/server/pm/permission/LegacyPermissionState;Ljava/util/List;)V
    .locals 11
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .param p2, "permissionsState"    # Lcom/android/server/pm/permission/LegacyPermissionState;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/modules/utils/TypedXmlPullParser;",
            "Lcom/android/server/pm/permission/LegacyPermissionState;",
            "Ljava/util/List<",
            "Landroid/content/pm/UserInfo;",
            ">;)V"
        }
    .end annotation

    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;,
            Lorg/xmlpull/v1/XmlPullParserException;
        }
    .end annotation

    .line 2595
    .local p3, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v0

    .line 2597
    .local v0, "outerDepth":I
    :cond_0
    :goto_0
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v1

    move v2, v1

    .local v2, "type":I
    const/4 v3, 0x1

    nop

    if-eq v1, v3, :cond_5

    const/4 v1, 0x3

    if-ne v2, v1, :cond_1

    .line 2599
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v4

    if-le v4, v0, :cond_5

    .line 2600
    :cond_1
    nop

    nop

    if-eq v2, v1, :cond_0

    const/4 v1, 0x4

    if-ne v2, v1, :cond_2

    .line 2602
    goto :goto_0

    .line 2604
    :cond_2
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v1

    .line 2605
    .local v1, "tagName":Ljava/lang/String;
    const-string/jumbo v4, "item"

    invoke-virtual {v1, v4}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v4

    if-eqz v4, :cond_4

    .line 2606
    const-string/jumbo v4, "name"

    const/4 v5, 0x0

    invoke-interface {p1, v5, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v4

    .line 2607
    .local v4, "name":Ljava/lang/String;
    const-string/jumbo v6, "granted"

    invoke-interface {p1, v5, v6, v3}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v3

    .line 2608
    .local v3, "granted":Z
    const-string v6, "flags"

    const/4 v7, 0x0

    invoke-interface {p1, v5, v6, v7}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeIntHex(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v5

    .line 2609
    .local v5, "flags":I
    invoke-interface {p3}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v6

    :goto_1
    invoke-interface {v6}, Ljava/util/Iterator;->hasNext()Z

    move-result v8

    nop

    if-eqz v8, :cond_3

    invoke-interface {v6}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v8

    check-cast v8, Landroid/content/pm/UserInfo;

    .line 2610
    .local v8, "user":Landroid/content/pm/UserInfo;
    new-instance v9, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;

    invoke-direct {v9, v4, v7, v3, v5}, Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;-><init>(Ljava/lang/String;ZZI)V

    iget v10, v8, Landroid/content/pm/UserInfo;->id:I

    invoke-virtual {p2, v9, v10}, Lcom/android/server/pm/permission/LegacyPermissionState;->putPermissionState(Lcom/android/server/pm/permission/LegacyPermissionState$PermissionState;I)V

    .line 2612
    .end local v8    # "user":Landroid/content/pm/UserInfo;
    goto :goto_1

    .line 2613
    .end local v3    # "granted":Z
    .end local v4    # "name":Ljava/lang/String;
    .end local v5    # "flags":I
    :cond_3
    goto :goto_2

    .line 2614
    :cond_4
    new-instance v3, Ljava/lang/StringBuilder;

    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V

    const-string v4, "Unknown element under <permissions>: "

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 2615
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v4

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    .line 2614
    const-string v4, "PackageManager"

    invoke-static {v4, v3}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 2616
    invoke-static {p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 2618
    .end local v1    # "tagName":Ljava/lang/String;
    :goto_2
    goto :goto_0

    .line 2619
    :cond_5
    return-void
.end method

.method readLPw(Lcom/android/server/pm/Computer;Ljava/util/List;)Z
    .locals 11
    .param p1, "computer"    # Lcom/android/server/pm/Computer;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p2    # Ljava/util/List;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/server/pm/Computer;",
            "Ljava/util/List<",
            "Landroid/content/pm/UserInfo;",
            ">;)Z"
        }
    .end annotation

    .line 3514
    .local p2, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    const-string v0, "No external VersionInfo found in settings, using current."

    const-string v1, "No internal VersionInfo found in settings, using current."

    const-string/jumbo v2, "primary_physical"

    const-string v3, "PackageManager"

    new-instance v4, Landroid/util/ArrayMap;

    invoke-direct {v4}, Landroid/util/ArrayMap;-><init>()V

    .line 3517
    .local v4, "originalFirstInstallTimes":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Ljava/lang/String;Ljava/lang/Long;>;"
    :try_start_0
    invoke-virtual {p0, p1, p2, v4}, Lcom/android/server/pm/Settings;->readSettingsLPw(Lcom/android/server/pm/Computer;Ljava/util/List;Landroid/util/ArrayMap;)Z

    move-result v5
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    const/4 v6, 0x0

    if-nez v5, :cond_2

    .line 3518
    nop

    .line 3521
    iget-object v5, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    sget-object v7, Landroid/os/storage/StorageManager;->UUID_PRIVATE_INTERNAL:Ljava/lang/String;

    invoke-virtual {v5, v7}, Lcom/android/server/utils/WatchedArrayMap;->containsKey(Ljava/lang/Object;)Z

    move-result v5

    if-nez v5, :cond_0

    .line 3522
    invoke-static {v3, v1}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 3524
    sget-object v1, Landroid/os/storage/StorageManager;->UUID_PRIVATE_INTERNAL:Ljava/lang/String;

    invoke-virtual {p0, v1}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v1

    invoke-virtual {v1}, Lcom/android/server/pm/Settings$VersionInfo;->forceCurrent()V

    .line 3526
    :cond_0
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedArrayMap;->containsKey(Ljava/lang/Object;)Z

    move-result v1

    if-nez v1, :cond_1

    .line 3527
    invoke-static {v3, v0}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 3529
    invoke-virtual {p0, v2}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v0

    invoke-virtual {v0}, Lcom/android/server/pm/Settings$VersionInfo;->forceCurrent()V

    .line 3518
    :cond_1
    return v6

    .line 3521
    :cond_2
    iget-object v5, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    sget-object v7, Landroid/os/storage/StorageManager;->UUID_PRIVATE_INTERNAL:Ljava/lang/String;

    invoke-virtual {v5, v7}, Lcom/android/server/utils/WatchedArrayMap;->containsKey(Ljava/lang/Object;)Z

    move-result v5

    if-nez v5, :cond_3

    .line 3522
    invoke-static {v3, v1}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 3524
    sget-object v1, Landroid/os/storage/StorageManager;->UUID_PRIVATE_INTERNAL:Ljava/lang/String;

    invoke-virtual {p0, v1}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v1

    invoke-virtual {v1}, Lcom/android/server/pm/Settings$VersionInfo;->forceCurrent()V

    .line 3526
    :cond_3
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedArrayMap;->containsKey(Ljava/lang/Object;)Z

    move-result v1

    if-nez v1, :cond_4

    .line 3527
    invoke-static {v3, v0}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 3529
    invoke-virtual {p0, v2}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v0

    invoke-virtual {v0}, Lcom/android/server/pm/Settings$VersionInfo;->forceCurrent()V

    .line 3533
    :cond_4
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;

    invoke-virtual {v0}, Lcom/android/server/utils/WatchedArrayList;->size()I

    move-result v0

    .line 3535
    .local v0, "N":I
    const/4 v1, 0x0

    .local v1, "i":I
    :goto_0
    if-ge v1, v0, :cond_8

    .line 3536
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;

    invoke-virtual {v2, v1}, Lcom/android/server/utils/WatchedArrayList;->get(I)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/server/pm/PackageSetting;

    .line 3537
    .local v2, "p":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v2}, Lcom/android/server/pm/PackageSetting;->getSharedUserAppId()I

    move-result v3

    .line 3538
    .local v3, "sharedUserAppId":I
    if-gtz v3, :cond_5

    .line 3539
    goto :goto_1

    .line 3541
    :cond_5
    invoke-virtual {p0, v3}, Lcom/android/server/pm/Settings;->getSettingLPr(I)Lcom/android/server/pm/SettingBase;

    move-result-object v5

    .line 3542
    .local v5, "idObj":Ljava/lang/Object;
    instance-of v7, v5, Lcom/android/server/pm/SharedUserSetting;

    if-eqz v7, :cond_6

    .line 3543
    move-object v7, v5

    check-cast v7, Lcom/android/server/pm/SharedUserSetting;

    .line 3544
    .local v7, "sharedUser":Lcom/android/server/pm/SharedUserSetting;
    invoke-virtual {p0, v2, v7}, Lcom/android/server/pm/Settings;->addPackageSettingLPw(Lcom/android/server/pm/PackageSetting;Lcom/android/server/pm/SharedUserSetting;)V

    .line 3545
    .end local v7    # "sharedUser":Lcom/android/server/pm/SharedUserSetting;
    goto :goto_1

    :cond_6
    const/4 v7, 0x6

    const-string v8, " has shared uid "

    const-string v9, "Bad package setting: package "

    if-eqz v5, :cond_7

    .line 3546
    new-instance v10, Ljava/lang/StringBuilder;

    invoke-direct {v10}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v10, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v9

    invoke-virtual {v10, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v10, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v10, v3}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    const-string v8, " that is not a shared uid\n"

    invoke-virtual {v10, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v10}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v8

    .line 3548
    .local v8, "msg":Ljava/lang/String;
    iget-object v9, p0, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    invoke-virtual {v9, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3549
    invoke-static {v7, v8}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 3550
    .end local v8    # "msg":Ljava/lang/String;
    goto :goto_1

    .line 3551
    :cond_7
    new-instance v10, Ljava/lang/StringBuilder;

    invoke-direct {v10}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v10, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v9

    invoke-virtual {v10, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v10, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v10, v3}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    const-string v8, " that is not defined\n"

    invoke-virtual {v10, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v10}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v8

    .line 3553
    .restart local v8    # "msg":Ljava/lang/String;
    iget-object v9, p0, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    invoke-virtual {v9, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3554
    invoke-static {v7, v8}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 3535
    .end local v2    # "p":Lcom/android/server/pm/PackageSetting;
    .end local v3    # "sharedUserAppId":I
    .end local v5    # "idObj":Ljava/lang/Object;
    .end local v8    # "msg":Ljava/lang/String;
    :goto_1
    add-int/lit8 v1, v1, 0x1

    goto :goto_0

    :cond_8
    nop

    .line 3557
    .end local v1    # "i":I
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArrayList;->clear()V

    .line 3559
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mBackupStoppedPackagesFilename:Ljava/io/File;

    invoke-virtual {v1}, Ljava/io/File;->exists()Z

    move-result v1

    const/4 v2, 0x1

    nop

    if-nez v1, :cond_a

    iget-object v1, p0, Lcom/android/server/pm/Settings;->mStoppedPackagesFilename:Ljava/io/File;

    .line 3560
    invoke-virtual {v1}, Ljava/io/File;->exists()Z

    move-result v1

    if-eqz v1, :cond_9

    goto :goto_3

    .line 3568
    :cond_9
    invoke-interface {p2}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_2
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v3

    nop

    if-eqz v3, :cond_b

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Landroid/content/pm/UserInfo;

    .line 3569
    .local v3, "user":Landroid/content/pm/UserInfo;
    iget v5, v3, Landroid/content/pm/UserInfo;->id:I

    invoke-virtual {p0, v5, v4}, Lcom/android/server/pm/Settings;->readPackageRestrictionsLPr(ILandroid/util/ArrayMap;)V

    .line 3570
    .end local v3    # "user":Landroid/content/pm/UserInfo;
    goto :goto_2

    .line 3562
    :cond_a
    :goto_3
    invoke-virtual {p0}, Lcom/android/server/pm/Settings;->readStoppedLPw()V

    .line 3563
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mBackupStoppedPackagesFilename:Ljava/io/File;

    invoke-virtual {v1}, Ljava/io/File;->delete()Z

    .line 3564
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mStoppedPackagesFilename:Ljava/io/File;

    invoke-virtual {v1}, Ljava/io/File;->delete()Z

    .line 3566
    invoke-virtual {p0, v6, v2}, Lcom/android/server/pm/Settings;->writePackageRestrictionsLPr(IZ)V

    .line 3573
    :cond_b
    invoke-interface {p2}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_4
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v3

    if-eqz v3, :cond_c

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Landroid/content/pm/UserInfo;

    .line 3574
    .restart local v3    # "user":Landroid/content/pm/UserInfo;
    iget-object v5, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    iget v6, v3, Landroid/content/pm/UserInfo;->id:I

    invoke-virtual {p0}, Lcom/android/server/pm/Settings;->getInternalVersion()Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v7

    iget-object v8, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v9, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    iget v10, v3, Landroid/content/pm/UserInfo;->id:I

    .line 3575
    invoke-direct {p0, v10}, Lcom/android/server/pm/Settings;->getUserRuntimePermissionsFile(I)Ljava/io/File;

    move-result-object v10

    .line 3574
    invoke-virtual/range {v5 .. v10}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;->readStateForUserSync(ILcom/android/server/pm/Settings$VersionInfo;Lcom/android/server/utils/WatchedArrayMap;Lcom/android/server/utils/WatchedArrayMap;Ljava/io/File;)V

    .line 3576
    .end local v3    # "user":Landroid/content/pm/UserInfo;
    goto :goto_4

    .line 3582
    :cond_c
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v1

    invoke-interface {v1}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_5
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v3

    if-eqz v3, :cond_e

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Lcom/android/server/pm/PackageSetting;

    .line 3583
    .local v3, "disabledPs":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v5

    invoke-virtual {p0, v5}, Lcom/android/server/pm/Settings;->getSettingLPr(I)Lcom/android/server/pm/SettingBase;

    move-result-object v5

    .line 3584
    .local v5, "id":Ljava/lang/Object;
    instance-of v6, v5, Lcom/android/server/pm/SharedUserSetting;

    if-eqz v6, :cond_d

    .line 3585
    move-object v6, v5

    check-cast v6, Lcom/android/server/pm/SharedUserSetting;

    .line 3586
    .local v6, "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    iget-object v7, v6, Lcom/android/server/pm/SharedUserSetting;->mDisabledPackages:Lcom/android/server/utils/WatchedArraySet;

    invoke-virtual {v7, v3}, Lcom/android/server/utils/WatchedArraySet;->add(Ljava/lang/Object;)Z

    .line 3587
    iget v7, v6, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-virtual {v3, v7}, Lcom/android/server/pm/PackageSetting;->setSharedUserAppId(I)Lcom/android/server/pm/PackageSetting;

    .line 3589
    .end local v3    # "disabledPs":Lcom/android/server/pm/PackageSetting;
    .end local v5    # "id":Ljava/lang/Object;
    .end local v6    # "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    :cond_d
    goto :goto_5

    .line 3591
    :cond_e
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    const-string v3, "Read completed successfully: "

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object v3, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v3}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v3

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    .line 3592
    const-string v3, " packages, "

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object v3, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v3}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v3

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    const-string v3, " shared uids\n"

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3594
    invoke-virtual {p0}, Lcom/android/server/pm/Settings;->writeKernelMappingLPr()V

    .line 3596
    return v2

    .line 3521
    .end local v0    # "N":I
    :catchall_0
    move-exception v5

    iget-object v6, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    sget-object v7, Landroid/os/storage/StorageManager;->UUID_PRIVATE_INTERNAL:Ljava/lang/String;

    invoke-virtual {v6, v7}, Lcom/android/server/utils/WatchedArrayMap;->containsKey(Ljava/lang/Object;)Z

    move-result v6

    if-nez v6, :cond_f

    .line 3522
    invoke-static {v3, v1}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 3524
    sget-object v1, Landroid/os/storage/StorageManager;->UUID_PRIVATE_INTERNAL:Ljava/lang/String;

    invoke-virtual {p0, v1}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v1

    invoke-virtual {v1}, Lcom/android/server/pm/Settings$VersionInfo;->forceCurrent()V

    .line 3526
    :cond_f
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v1, v2}, Lcom/android/server/utils/WatchedArrayMap;->containsKey(Ljava/lang/Object;)Z

    move-result v1

    if-nez v1, :cond_10

    .line 3527
    invoke-static {v3, v0}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 3529
    invoke-virtual {p0, v2}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v0

    invoke-virtual {v0}, Lcom/android/server/pm/Settings$VersionInfo;->forceCurrent()V

    .line 3531
    :cond_10
    throw v5
.end method

.method readPackageRestrictionsLPr(ILandroid/util/ArrayMap;)V
    .locals 60
    .param p1, "userId"    # I
    .param p2    # Landroid/util/ArrayMap;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(I",
            "Landroid/util/ArrayMap<",
            "Ljava/lang/String;",
            "Ljava/lang/Long;",
            ">;)V"
        }
    .end annotation

    .line 1849
    .local p2, "origFirstInstallTimes":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Ljava/lang/String;Ljava/lang/Long;>;"
    move-object/from16 v1, p0

    move/from16 v6, p1

    invoke-direct/range {p0 .. p1}, Lcom/android/server/pm/Settings;->getUserPackagesStateFile(I)Lcom/android/server/pm/ResilientAtomicFile;

    move-result-object v7

    .line 1850
    .local v7, "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    const/4 v2, 0x0

    .line 1852
    .local v2, "str":Ljava/io/FileInputStream;
    :try_start_0
    iget-object v4, v1, Lcom/android/server/pm/Settings;->mPackageRestrictionsLock:Ljava/lang/Object;

    monitor-enter v4
    :try_end_0
    .catch Ljava/io/IOException; {:try_start_0 .. :try_end_0} :catch_9
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_0 .. :try_end_0} :catch_9
    .catchall {:try_start_0 .. :try_end_0} :catchall_d

    .line 1853
    :try_start_1
    invoke-virtual {v7}, Lcom/android/server/pm/ResilientAtomicFile;->openRead()Ljava/io/FileInputStream;

    move-result-object v3
    :try_end_1
    .catchall {:try_start_1 .. :try_end_1} :catchall_b

    move-object/from16 v28, v3

    .line 1854
    .end local v2    # "str":Ljava/io/FileInputStream;
    .local v28, "str":Ljava/io/FileInputStream;
    if-nez v28, :cond_1

    .line 1859
    :try_start_2
    iget-object v2, v1, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v2

    invoke-interface {v2}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v29

    :goto_0
    invoke-interface/range {v29 .. v29}, Ljava/util/Iterator;->hasNext()Z

    move-result v2

    if-eqz v2, :cond_0

    invoke-interface/range {v29 .. v29}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/server/pm/PackageSetting;

    move-object v5, v2

    .line 1860
    .local v5, "pkg":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v5, v6}, Lcom/android/server/pm/PackageSetting;->getCeDataInode(I)J

    move-result-wide v30

    .line 1861
    invoke-virtual {v5, v6}, Lcom/android/server/pm/PackageSetting;->getDeDataInode(I)J

    move-result-wide v32
    :try_end_2
    .catchall {:try_start_2 .. :try_end_2} :catchall_1

    .line 1860
    const/4 v8, 0x0

    const/4 v9, 0x1

    const/4 v10, 0x0

    const/4 v11, 0x0

    const/4 v12, 0x0

    const/4 v13, 0x0

    const/4 v14, 0x0

    const/4 v15, 0x0

    const/16 v16, 0x0

    const/16 v17, 0x0

    const/16 v18, 0x0

    const/16 v19, 0x0

    const/16 v20, 0x0

    const/16 v21, 0x0

    const/16 v22, 0x0

    const/16 v23, 0x0

    const-wide/16 v24, 0x0

    const/16 v26, 0x0

    const/16 v27, 0x0

    move-object v2, v5

    move/from16 v3, p1

    move-object/from16 v34, v4

    move-object/from16 v35, v5

    .end local v5    # "pkg":Lcom/android/server/pm/PackageSetting;
    .local v35, "pkg":Lcom/android/server/pm/PackageSetting;
    move-wide/from16 v4, v30

    move-object/from16 v30, v7

    .end local v7    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .local v30, "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    move-wide/from16 v6, v32

    :try_start_3
    invoke-virtual/range {v2 .. v27}, Lcom/android/server/pm/PackageSetting;->setUserState(IJJIZZZZILandroid/util/ArrayMap;ZZLjava/lang/String;Landroid/util/ArraySet;Landroid/util/ArraySet;IILjava/lang/String;Ljava/lang/String;JILcom/android/server/pm/pkg/ArchiveState;)V

    .line 1881
    .end local v35    # "pkg":Lcom/android/server/pm/PackageSetting;
    move/from16 v6, p1

    move-object/from16 v7, v30

    move-object/from16 v4, v34

    goto :goto_0

    .line 1884
    :catchall_0
    move-exception v0

    move-object v4, v0

    move-object v3, v1

    move-object/from16 v2, v28

    move/from16 v1, p1

    goto/16 :goto_1d

    .end local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v7    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :catchall_1
    move-exception v0

    move-object/from16 v34, v4

    move-object/from16 v30, v7

    move-object v4, v0

    move-object v3, v1

    move-object/from16 v2, v28

    move/from16 v1, p1

    .end local v7    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    goto/16 :goto_1d

    .line 1882
    .end local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v7    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :cond_0
    move-object/from16 v34, v4

    move-object/from16 v30, v7

    .end local v7    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    monitor-exit v34
    :try_end_3
    .catchall {:try_start_3 .. :try_end_3} :catchall_0

    .line 2088
    invoke-virtual/range {v30 .. v30}, Lcom/android/server/pm/ResilientAtomicFile;->close()V

    .line 1882
    return-void

    .line 1884
    .end local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v7    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :cond_1
    move-object/from16 v34, v4

    move-object/from16 v30, v7

    .end local v7    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :try_start_4
    monitor-exit v34
    :try_end_4
    .catchall {:try_start_4 .. :try_end_4} :catchall_a

    .line 1886
    :try_start_5
    invoke-static/range {v28 .. v28}, Landroid/util/Xml;->resolvePullParser(Ljava/io/InputStream;)Lcom/android/modules/utils/TypedXmlPullParser;

    move-result-object v2

    move-object v14, v2

    .line 1889
    .local v14, "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    :goto_1
    invoke-interface {v14}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v2
    :try_end_5
    .catch Ljava/io/IOException; {:try_start_5 .. :try_end_5} :catch_7
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_5 .. :try_end_5} :catch_7
    .catchall {:try_start_5 .. :try_end_5} :catchall_9

    move v3, v2

    .local v3, "type":I
    const/4 v12, 0x2

    const/4 v8, 0x1

    if-eq v2, v12, :cond_2

    if-eq v3, v8, :cond_2

    goto :goto_1

    .line 1894
    :cond_2
    const/4 v2, 0x5

    if-eq v3, v12, :cond_3

    .line 1895
    :try_start_6
    iget-object v4, v1, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    const-string v5, "No start tag found in package restrictions file\n"

    invoke-virtual {v4, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1896
    const-string v4, "No start tag found in package manager package restrictions file"

    invoke-static {v2, v4}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V
    :try_end_6
    .catch Ljava/io/IOException; {:try_start_6 .. :try_end_6} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_6 .. :try_end_6} :catch_0
    .catchall {:try_start_6 .. :try_end_6} :catchall_2

    .line 2088
    invoke-virtual/range {v30 .. v30}, Lcom/android/server/pm/ResilientAtomicFile;->close()V

    .line 1898
    return-void

    .line 1849
    .end local v3    # "type":I
    .end local v14    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v28    # "str":Ljava/io/FileInputStream;
    :catchall_2
    move-exception v0

    move-object v2, v0

    move-object v3, v1

    move-object/from16 v5, v30

    move/from16 v1, p1

    goto/16 :goto_20

    .line 2082
    .restart local v28    # "str":Ljava/io/FileInputStream;
    :catch_0
    move-exception v0

    move-object v4, v0

    move-object v3, v1

    move-object/from16 v2, v28

    move/from16 v1, p1

    goto/16 :goto_1e

    .line 1901
    .restart local v3    # "type":I
    .restart local v14    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    :cond_3
    :try_start_7
    invoke-interface {v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v4

    move v15, v4

    .line 1902
    .local v15, "outerDepth":I
    const/4 v4, 0x0

    .line 1903
    .local v4, "ps":Lcom/android/server/pm/PackageSetting;
    :goto_2
    invoke-interface {v14}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v5
    :try_end_7
    .catch Ljava/io/IOException; {:try_start_7 .. :try_end_7} :catch_7
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_7 .. :try_end_7} :catch_7
    .catchall {:try_start_7 .. :try_end_7} :catchall_9

    move v3, v5

    if-eq v5, v8, :cond_1e

    const/4 v13, 0x3

    if-ne v3, v13, :cond_5

    .line 1905
    :try_start_8
    invoke-interface {v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v5
    :try_end_8
    .catch Ljava/io/IOException; {:try_start_8 .. :try_end_8} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_8 .. :try_end_8} :catch_0
    .catchall {:try_start_8 .. :try_end_8} :catchall_2

    if-le v5, v15, :cond_4

    goto :goto_3

    :cond_4
    move-object v3, v1

    move/from16 v1, p1

    goto/16 :goto_1c

    .line 1906
    :cond_5
    :goto_3
    if-eq v3, v13, :cond_1d

    const/4 v11, 0x4

    if-ne v3, v11, :cond_6

    .line 1908
    move/from16 v36, v2

    move/from16 v19, v3

    move/from16 v32, v8

    move/from16 v42, v12

    move-object v2, v14

    move/from16 v39, v15

    move-object v3, v1

    move/from16 v1, p1

    goto/16 :goto_1b

    .line 1911
    :cond_6
    :try_start_9
    invoke-interface {v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v5

    move-object v10, v5

    .line 1912
    .local v10, "tagName":Ljava/lang/String;
    const-string/jumbo v5, "pkg"

    invoke-virtual {v10, v5}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v5

    if-eqz v5, :cond_16

    .line 1913
    const-string/jumbo v5, "name"

    const/4 v9, 0x0

    invoke-interface {v14, v9, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v5

    move-object v6, v5

    .line 1914
    .local v6, "name":Ljava/lang/String;
    iget-object v5, v1, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v5, v6}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Lcom/android/server/pm/PackageSetting;
    :try_end_9
    .catch Ljava/io/IOException; {:try_start_9 .. :try_end_9} :catch_7
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_9 .. :try_end_9} :catch_7
    .catchall {:try_start_9 .. :try_end_9} :catchall_9

    move-object/from16 v29, v5

    .line 1915
    .end local v4    # "ps":Lcom/android/server/pm/PackageSetting;
    .local v29, "ps":Lcom/android/server/pm/PackageSetting;
    if-nez v29, :cond_7

    .line 1916
    :try_start_a
    const-string v4, "PackageManager"

    new-instance v5, Ljava/lang/StringBuilder;

    invoke-direct {v5}, Ljava/lang/StringBuilder;-><init>()V

    const-string v7, "No package known for package restrictions "

    invoke-virtual {v5, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v5}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v5

    invoke-static {v4, v5}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 1918
    invoke-static {v14}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V
    :try_end_a
    .catch Ljava/io/IOException; {:try_start_a .. :try_end_a} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_a .. :try_end_a} :catch_0
    .catchall {:try_start_a .. :try_end_a} :catchall_2

    .line 1919
    move-object/from16 v4, v29

    goto :goto_2

    .line 1922
    :cond_7
    :try_start_b
    const-string v4, "ceDataInode"

    .line 1923
    move/from16 v19, v3

    .end local v3    # "type":I
    .local v19, "type":I
    const-wide/16 v2, 0x0

    invoke-interface {v14, v9, v4, v2, v3}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLong(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v4

    .line 1924
    .local v4, "ceDataInode":J
    const-string v7, "deDataInode"

    .line 1925
    invoke-interface {v14, v9, v7, v2, v3}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLong(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v16

    move-object/from16 v36, v6

    .end local v6    # "name":Ljava/lang/String;
    .local v36, "name":Ljava/lang/String;
    move-wide/from16 v6, v16

    .line 1926
    .local v6, "deDataInode":J
    const-string/jumbo v11, "inst"

    .line 1927
    invoke-interface {v14, v9, v11, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v11

    move-object v12, v9

    move v9, v11

    .line 1928
    .local v9, "installed":Z
    const-string/jumbo v11, "stopped"

    .line 1929
    const/4 v2, 0x0

    invoke-interface {v14, v12, v11, v2}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v3

    move-object v11, v10

    .end local v10    # "tagName":Ljava/lang/String;
    .local v11, "tagName":Ljava/lang/String;
    move v10, v3

    .line 1930
    .local v10, "stopped":Z
    const-string/jumbo v3, "nl"

    .line 1931
    invoke-interface {v14, v12, v3, v2}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v3

    move-object/from16 v38, v11

    .end local v11    # "tagName":Ljava/lang/String;
    .local v38, "tagName":Ljava/lang/String;
    move v11, v3

    .line 1935
    .local v11, "notLaunched":Z
    const-string/jumbo v3, "hidden"

    invoke-interface {v14, v12, v3, v2}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v3
    :try_end_b
    .catch Ljava/io/IOException; {:try_start_b .. :try_end_b} :catch_7
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_b .. :try_end_b} :catch_7
    .catchall {:try_start_b .. :try_end_b} :catchall_9

    .line 1936
    .local v3, "hidden":Z
    if-nez v3, :cond_8

    .line 1937
    :try_start_c
    const-string v8, "blocked"

    invoke-interface {v14, v12, v8, v2}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v8
    :try_end_c
    .catch Ljava/io/IOException; {:try_start_c .. :try_end_c} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_c .. :try_end_c} :catch_0
    .catchall {:try_start_c .. :try_end_c} :catchall_2

    move v3, v8

    move/from16 v33, v3

    goto :goto_4

    .line 1936
    :cond_8
    move/from16 v33, v3

    .line 1940
    .end local v3    # "hidden":Z
    .local v33, "hidden":Z
    :goto_4
    :try_start_d
    const-string v3, "distraction_flags"

    invoke-interface {v14, v12, v3, v2}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v3

    move v8, v13

    move v13, v3

    .line 1942
    .local v13, "distractionFlags":I
    const-string/jumbo v3, "suspended"

    invoke-interface {v14, v12, v3, v2}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v3

    move/from16 v34, v3

    .line 1944
    .local v34, "suspended":Z
    const-string/jumbo v3, "suspending-package"

    invoke-interface {v14, v12, v3}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v3

    .line 1946
    .local v3, "oldSuspendingPackage":Ljava/lang/String;
    const-string/jumbo v8, "suspend_dialog_message"

    invoke-interface {v14, v12, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v8
    :try_end_d
    .catch Ljava/io/IOException; {:try_start_d .. :try_end_d} :catch_7
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_d .. :try_end_d} :catch_7
    .catchall {:try_start_d .. :try_end_d} :catchall_9

    .line 1948
    .local v8, "dialogMessage":Ljava/lang/String;
    if-eqz v34, :cond_9

    if-nez v3, :cond_9

    .line 1949
    :try_start_e
    const-string v16, "android"
    :try_end_e
    .catch Ljava/io/IOException; {:try_start_e .. :try_end_e} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_e .. :try_end_e} :catch_0
    .catchall {:try_start_e .. :try_end_e} :catchall_2

    move-object/from16 v3, v16

    .line 1952
    :cond_9
    :try_start_f
    const-string v2, "blockUninstall"

    .line 1953
    move-object/from16 v21, v8

    const/4 v8, 0x0

    .end local v8    # "dialogMessage":Ljava/lang/String;
    .local v21, "dialogMessage":Ljava/lang/String;
    invoke-interface {v14, v12, v2, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v2

    move/from16 v35, v2

    .line 1954
    .local v35, "blockUninstall":Z
    const-string/jumbo v2, "instant-app"

    .line 1955
    invoke-interface {v14, v12, v2, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v2

    move/from16 v39, v15

    .end local v15    # "outerDepth":I
    .local v39, "outerDepth":I
    move v15, v2

    .line 1956
    .local v15, "instantApp":Z
    const-string/jumbo v2, "virtual-preload"

    .line 1957
    invoke-interface {v14, v12, v2, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v16

    .line 1958
    .local v16, "virtualPreload":Z
    const-string v2, "enabled"

    invoke-interface {v14, v12, v2, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v2

    move-object/from16 v42, v21

    .end local v21    # "dialogMessage":Ljava/lang/String;
    .local v42, "dialogMessage":Ljava/lang/String;
    move v8, v2

    .line 1960
    .local v8, "enabled":I
    const-string v2, "enabledCaller"

    invoke-interface {v14, v12, v2}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v17

    .line 1962
    .local v17, "enabledCaller":Ljava/lang/String;
    const-string/jumbo v2, "harmful-app-warning"

    .line 1963
    invoke-interface {v14, v12, v2}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v22

    .line 1964
    .local v22, "harmfulAppWarning":Ljava/lang/String;
    const-string v2, "domainVerificationStatus"

    move-wide/from16 v43, v4

    const/4 v4, 0x0

    .end local v4    # "ceDataInode":J
    .local v43, "ceDataInode":J
    invoke-interface {v14, v12, v2, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v2

    move v5, v2

    .line 1967
    .local v5, "verifState":I
    const-string/jumbo v2, "install-reason"

    invoke-interface {v14, v12, v2, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v20

    .line 1969
    .local v20, "installReason":I
    const-string/jumbo v2, "uninstall-reason"

    invoke-interface {v14, v12, v2, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v21

    .line 1972
    .local v21, "uninstallReason":I
    const-string/jumbo v2, "splash-screen-theme"

    invoke-interface {v14, v12, v2}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v23

    .line 1974
    .local v23, "splashScreenTheme":Ljava/lang/String;
    const-string v2, "first-install-time"

    move/from16 v45, v5

    const-wide/16 v4, 0x0

    .end local v5    # "verifState":I
    .local v45, "verifState":I
    invoke-interface {v14, v12, v2, v4, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLongHex(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v26

    move-wide/from16 v46, v26

    .line 1976
    .local v46, "firstInstallTime":J
    const-string/jumbo v2, "min-aspect-ratio"

    const/4 v4, 0x0

    invoke-interface {v14, v12, v2, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v26

    .line 1980
    .local v26, "minAspectRatio":I
    const/4 v2, 0x0

    .line 1981
    .local v2, "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    const/4 v4, 0x0

    .line 1982
    .local v4, "disabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    const/4 v5, 0x0

    .line 1983
    .local v5, "oldSuspendDialogInfo":Landroid/content/pm/SuspendDialogInfo;
    const/4 v12, 0x0

    .line 1984
    .local v12, "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    const/16 v27, 0x0

    .line 1985
    .local v27, "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    const/16 v48, 0x0

    .line 1987
    .local v48, "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    invoke-interface {v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v49

    move/from16 v50, v49

    .line 1988
    .local v50, "packageDepth":I
    const/16 v49, 0x0

    move-object/from16 v51, v48

    move-object/from16 v48, v2

    move-object/from16 v2, v49

    move-object/from16 v49, v4

    move-object v4, v12

    move-object/from16 v12, v27

    .line 1989
    .end local v27    # "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    .local v2, "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .local v4, "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    .local v12, "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    .local v48, "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .local v49, "disabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .local v51, "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    :goto_5
    move-wide/from16 v52, v6

    .end local v6    # "deDataInode":J
    .local v52, "deDataInode":J
    invoke-interface {v14}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v6
    :try_end_f
    .catch Ljava/io/IOException; {:try_start_f .. :try_end_f} :catch_7
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_f .. :try_end_f} :catch_7
    .catchall {:try_start_f .. :try_end_f} :catchall_9

    move v7, v6

    move/from16 v54, v8

    const/4 v8, 0x1

    .end local v8    # "enabled":I
    .end local v19    # "type":I
    .local v7, "type":I
    .local v54, "enabled":I
    if-eq v6, v8, :cond_11

    const/4 v6, 0x3

    if-ne v7, v6, :cond_b

    .line 1991
    :try_start_10
    invoke-interface {v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v8
    :try_end_10
    .catch Ljava/io/IOException; {:try_start_10 .. :try_end_10} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_10 .. :try_end_10} :catch_0
    .catchall {:try_start_10 .. :try_end_10} :catchall_2

    move/from16 v6, v50

    .end local v50    # "packageDepth":I
    .local v6, "packageDepth":I
    if-le v8, v6, :cond_a

    goto :goto_6

    :cond_a
    move/from16 v50, v6

    move/from16 v55, v7

    move/from16 v6, p1

    goto/16 :goto_10

    .line 1989
    .end local v6    # "packageDepth":I
    .restart local v50    # "packageDepth":I
    :cond_b
    move/from16 v6, v50

    .line 1992
    .end local v50    # "packageDepth":I
    .restart local v6    # "packageDepth":I
    :goto_6
    const/4 v8, 0x3

    if-eq v7, v8, :cond_10

    const/4 v8, 0x4

    if-ne v7, v8, :cond_c

    .line 1994
    move/from16 v50, v6

    move/from16 v55, v7

    move/from16 v6, p1

    goto/16 :goto_f

    .line 1996
    :cond_c
    :try_start_11
    invoke-interface {v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v8

    invoke-virtual {v8}, Ljava/lang/Object;->hashCode()I

    move-result v19
    :try_end_11
    .catch Ljava/io/IOException; {:try_start_11 .. :try_end_11} :catch_2
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_11 .. :try_end_11} :catch_2
    .catchall {:try_start_11 .. :try_end_11} :catchall_4

    sparse-switch v19, :sswitch_data_0

    move/from16 v50, v6

    goto :goto_7

    :sswitch_0
    move/from16 v50, v6

    .end local v6    # "packageDepth":I
    .restart local v50    # "packageDepth":I
    :try_start_12
    const-string/jumbo v6, "suspended-dialog-info"

    invoke-virtual {v8, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6

    if-eqz v6, :cond_d

    const/4 v8, 0x2

    goto :goto_8

    .end local v50    # "packageDepth":I
    .restart local v6    # "packageDepth":I
    :sswitch_1
    move/from16 v50, v6

    .end local v6    # "packageDepth":I
    .restart local v50    # "packageDepth":I
    const-string/jumbo v6, "suspend-params"

    invoke-virtual {v8, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6

    if-eqz v6, :cond_d

    const/4 v8, 0x5

    goto :goto_8

    .end local v50    # "packageDepth":I
    .restart local v6    # "packageDepth":I
    :sswitch_2
    move/from16 v50, v6

    .end local v6    # "packageDepth":I
    .restart local v50    # "packageDepth":I
    const-string/jumbo v6, "suspended-launcher-extras"

    invoke-virtual {v8, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6

    if-eqz v6, :cond_d

    const/4 v8, 0x4

    goto :goto_8

    .end local v50    # "packageDepth":I
    .restart local v6    # "packageDepth":I
    :sswitch_3
    move/from16 v50, v6

    .end local v6    # "packageDepth":I
    .restart local v50    # "packageDepth":I
    const-string/jumbo v6, "suspended-app-extras"

    invoke-virtual {v8, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6

    if-eqz v6, :cond_d

    const/4 v8, 0x3

    goto :goto_8

    .end local v50    # "packageDepth":I
    .restart local v6    # "packageDepth":I
    :sswitch_4
    move/from16 v50, v6

    .end local v6    # "packageDepth":I
    .restart local v50    # "packageDepth":I
    const-string v6, "enabled-components"

    invoke-virtual {v8, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6

    if-eqz v6, :cond_d

    const/4 v8, 0x0

    goto :goto_8

    .end local v50    # "packageDepth":I
    .restart local v6    # "packageDepth":I
    :sswitch_5
    move/from16 v50, v6

    .end local v6    # "packageDepth":I
    .restart local v50    # "packageDepth":I
    const-string v6, "disabled-components"

    invoke-virtual {v8, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6
    :try_end_12
    .catch Ljava/io/IOException; {:try_start_12 .. :try_end_12} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_12 .. :try_end_12} :catch_0
    .catchall {:try_start_12 .. :try_end_12} :catchall_2

    if-eqz v6, :cond_d

    const/4 v8, 0x1

    goto :goto_8

    .end local v50    # "packageDepth":I
    .restart local v6    # "packageDepth":I
    :sswitch_6
    move/from16 v50, v6

    .end local v6    # "packageDepth":I
    .restart local v50    # "packageDepth":I
    :try_start_13
    const-string v6, "archive-state"

    invoke-virtual {v8, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6
    :try_end_13
    .catch Ljava/io/IOException; {:try_start_13 .. :try_end_13} :catch_2
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_13 .. :try_end_13} :catch_2
    .catchall {:try_start_13 .. :try_end_13} :catchall_4

    if-eqz v6, :cond_d

    const/4 v8, 0x6

    goto :goto_8

    :cond_d
    :goto_7
    const/4 v8, -0x1

    :goto_8
    packed-switch v8, :pswitch_data_0

    .line 2029
    :try_start_14
    const-string v6, "PackageSettings"

    new-instance v8, Ljava/lang/StringBuilder;

    invoke-direct {v8}, Ljava/lang/StringBuilder;-><init>()V

    move/from16 v55, v7

    .end local v7    # "type":I
    .local v55, "type":I
    const-string v7, "Unknown tag "

    invoke-virtual {v8, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-interface {v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v7

    invoke-virtual {v8, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v7, " under tag "

    invoke-virtual {v8, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string/jumbo v7, "pkg"

    invoke-virtual {v8, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v8}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v7

    invoke-static {v6, v7}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    move/from16 v6, p1

    goto/16 :goto_e

    .line 2026
    .end local v55    # "type":I
    .restart local v7    # "type":I
    :pswitch_0
    move/from16 v55, v7

    .end local v7    # "type":I
    .restart local v55    # "type":I
    invoke-static {v14}, Lcom/android/server/pm/Settings;->parseArchiveState(Lcom/android/modules/utils/TypedXmlPullParser;)Lcom/android/server/pm/pkg/ArchiveState;

    move-result-object v6
    :try_end_14
    .catch Ljava/io/IOException; {:try_start_14 .. :try_end_14} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_14 .. :try_end_14} :catch_0
    .catchall {:try_start_14 .. :try_end_14} :catchall_2

    .line 2027
    .end local v51    # "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    .local v6, "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    move-object/from16 v51, v6

    move/from16 v6, p1

    goto/16 :goto_e

    .line 2015
    .end local v6    # "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    .end local v55    # "type":I
    .restart local v7    # "type":I
    .restart local v51    # "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    :pswitch_1
    move/from16 v55, v7

    .line 2016
    .end local v7    # "type":I
    .restart local v55    # "type":I
    move/from16 v6, p1

    :try_start_15
    invoke-static {v6, v14}, Lcom/android/server/pm/Settings;->readSuspensionParamsLPr(ILcom/android/modules/utils/TypedXmlPullParser;)Ljava/util/Map$Entry;

    move-result-object v7

    .line 2017
    .local v7, "entry":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    if-nez v7, :cond_e

    .line 2018
    goto/16 :goto_f

    .line 2020
    :cond_e
    if-nez v2, :cond_f

    .line 2021
    new-instance v8, Landroid/util/ArrayMap;

    invoke-direct {v8}, Landroid/util/ArrayMap;-><init>()V

    move-object v2, v8

    goto :goto_d

    .line 1849
    .end local v2    # "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .end local v3    # "oldSuspendingPackage":Ljava/lang/String;
    .end local v4    # "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    .end local v5    # "oldSuspendDialogInfo":Landroid/content/pm/SuspendDialogInfo;
    .end local v7    # "entry":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .end local v9    # "installed":Z
    .end local v10    # "stopped":Z
    .end local v11    # "notLaunched":Z
    .end local v12    # "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    .end local v13    # "distractionFlags":I
    .end local v14    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v15    # "instantApp":Z
    .end local v16    # "virtualPreload":Z
    .end local v17    # "enabledCaller":Ljava/lang/String;
    .end local v20    # "installReason":I
    .end local v21    # "uninstallReason":I
    .end local v22    # "harmfulAppWarning":Ljava/lang/String;
    .end local v23    # "splashScreenTheme":Ljava/lang/String;
    .end local v26    # "minAspectRatio":I
    .end local v28    # "str":Ljava/io/FileInputStream;
    .end local v29    # "ps":Lcom/android/server/pm/PackageSetting;
    .end local v33    # "hidden":Z
    .end local v34    # "suspended":Z
    .end local v35    # "blockUninstall":Z
    .end local v36    # "name":Ljava/lang/String;
    .end local v38    # "tagName":Ljava/lang/String;
    .end local v39    # "outerDepth":I
    .end local v42    # "dialogMessage":Ljava/lang/String;
    .end local v43    # "ceDataInode":J
    .end local v45    # "verifState":I
    .end local v46    # "firstInstallTime":J
    .end local v48    # "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .end local v49    # "disabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .end local v50    # "packageDepth":I
    .end local v51    # "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    .end local v52    # "deDataInode":J
    .end local v54    # "enabled":I
    .end local v55    # "type":I
    :catchall_3
    move-exception v0

    :goto_9
    move-object v2, v0

    move-object v3, v1

    move v1, v6

    :goto_a
    move-object/from16 v5, v30

    goto/16 :goto_20

    .line 2082
    .restart local v28    # "str":Ljava/io/FileInputStream;
    :catch_1
    move-exception v0

    :goto_b
    move-object v4, v0

    move-object v3, v1

    move v1, v6

    :goto_c
    move-object/from16 v2, v28

    goto/16 :goto_1e

    .line 2023
    .restart local v2    # "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .restart local v3    # "oldSuspendingPackage":Ljava/lang/String;
    .restart local v4    # "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    .restart local v5    # "oldSuspendDialogInfo":Landroid/content/pm/SuspendDialogInfo;
    .restart local v7    # "entry":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .restart local v9    # "installed":Z
    .restart local v10    # "stopped":Z
    .restart local v11    # "notLaunched":Z
    .restart local v12    # "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    .restart local v13    # "distractionFlags":I
    .restart local v14    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v15    # "instantApp":Z
    .restart local v16    # "virtualPreload":Z
    .restart local v17    # "enabledCaller":Ljava/lang/String;
    .restart local v20    # "installReason":I
    .restart local v21    # "uninstallReason":I
    .restart local v22    # "harmfulAppWarning":Ljava/lang/String;
    .restart local v23    # "splashScreenTheme":Ljava/lang/String;
    .restart local v26    # "minAspectRatio":I
    .restart local v29    # "ps":Lcom/android/server/pm/PackageSetting;
    .restart local v33    # "hidden":Z
    .restart local v34    # "suspended":Z
    .restart local v35    # "blockUninstall":Z
    .restart local v36    # "name":Ljava/lang/String;
    .restart local v38    # "tagName":Ljava/lang/String;
    .restart local v39    # "outerDepth":I
    .restart local v42    # "dialogMessage":Ljava/lang/String;
    .restart local v43    # "ceDataInode":J
    .restart local v45    # "verifState":I
    .restart local v46    # "firstInstallTime":J
    .restart local v48    # "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .restart local v49    # "disabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .restart local v50    # "packageDepth":I
    .restart local v51    # "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    .restart local v52    # "deDataInode":J
    .restart local v54    # "enabled":I
    .restart local v55    # "type":I
    :cond_f
    :goto_d
    invoke-interface {v7}, Ljava/util/Map$Entry;->getKey()Ljava/lang/Object;

    move-result-object v8

    check-cast v8, Landroid/content/pm/UserPackage;

    invoke-interface {v7}, Ljava/util/Map$Entry;->getValue()Ljava/lang/Object;

    move-result-object v19

    move-object/from16 v27, v7

    .end local v7    # "entry":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .local v27, "entry":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    move-object/from16 v7, v19

    check-cast v7, Lcom/android/server/pm/pkg/SuspendParams;

    invoke-virtual {v2, v8, v7}, Landroid/util/ArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 2024
    goto :goto_e

    .line 2011
    .end local v27    # "entry":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .end local v55    # "type":I
    .local v7, "type":I
    :pswitch_2
    move/from16 v6, p1

    move/from16 v55, v7

    .end local v7    # "type":I
    .restart local v55    # "type":I
    invoke-static {v14}, Landroid/os/PersistableBundle;->restoreFromXml(Lcom/android/modules/utils/TypedXmlPullParser;)Landroid/os/PersistableBundle;

    move-result-object v7

    .line 2013
    .end local v12    # "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    .local v7, "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    move-object v12, v7

    goto :goto_e

    .line 2007
    .end local v55    # "type":I
    .local v7, "type":I
    .restart local v12    # "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    :pswitch_3
    move/from16 v6, p1

    move/from16 v55, v7

    .end local v7    # "type":I
    .restart local v55    # "type":I
    invoke-static {v14}, Landroid/os/PersistableBundle;->restoreFromXml(Lcom/android/modules/utils/TypedXmlPullParser;)Landroid/os/PersistableBundle;

    move-result-object v7

    move-object v4, v7

    .line 2009
    goto :goto_e

    .line 2004
    .end local v55    # "type":I
    .restart local v7    # "type":I
    :pswitch_4
    move/from16 v6, p1

    move/from16 v55, v7

    .end local v7    # "type":I
    .restart local v55    # "type":I
    invoke-static {v14}, Landroid/content/pm/SuspendDialogInfo;->restoreFromXml(Lcom/android/modules/utils/TypedXmlPullParser;)Landroid/content/pm/SuspendDialogInfo;

    move-result-object v7

    move-object v5, v7

    .line 2005
    goto :goto_e

    .line 2001
    .end local v55    # "type":I
    .restart local v7    # "type":I
    :pswitch_5
    move/from16 v6, p1

    move/from16 v55, v7

    .end local v7    # "type":I
    .restart local v55    # "type":I
    invoke-direct {v1, v14}, Lcom/android/server/pm/Settings;->readComponentsLPr(Lcom/android/modules/utils/TypedXmlPullParser;)Landroid/util/ArraySet;

    move-result-object v7

    .line 2002
    .end local v49    # "disabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .local v7, "disabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    move-object/from16 v49, v7

    goto :goto_e

    .line 1998
    .end local v55    # "type":I
    .local v7, "type":I
    .restart local v49    # "disabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    :pswitch_6
    move/from16 v6, p1

    move/from16 v55, v7

    .end local v7    # "type":I
    .restart local v55    # "type":I
    invoke-direct {v1, v14}, Lcom/android/server/pm/Settings;->readComponentsLPr(Lcom/android/modules/utils/TypedXmlPullParser;)Landroid/util/ArraySet;

    move-result-object v7

    .line 1999
    .end local v48    # "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .local v7, "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    move-object/from16 v48, v7

    .line 2031
    .end local v7    # "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .restart local v48    # "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    :goto_e
    move-wide/from16 v6, v52

    move/from16 v8, v54

    move/from16 v19, v55

    goto/16 :goto_5

    .line 1849
    .end local v2    # "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .end local v3    # "oldSuspendingPackage":Ljava/lang/String;
    .end local v4    # "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    .end local v5    # "oldSuspendDialogInfo":Landroid/content/pm/SuspendDialogInfo;
    .end local v9    # "installed":Z
    .end local v10    # "stopped":Z
    .end local v11    # "notLaunched":Z
    .end local v12    # "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    .end local v13    # "distractionFlags":I
    .end local v14    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v15    # "instantApp":Z
    .end local v16    # "virtualPreload":Z
    .end local v17    # "enabledCaller":Ljava/lang/String;
    .end local v20    # "installReason":I
    .end local v21    # "uninstallReason":I
    .end local v22    # "harmfulAppWarning":Ljava/lang/String;
    .end local v23    # "splashScreenTheme":Ljava/lang/String;
    .end local v26    # "minAspectRatio":I
    .end local v28    # "str":Ljava/io/FileInputStream;
    .end local v29    # "ps":Lcom/android/server/pm/PackageSetting;
    .end local v33    # "hidden":Z
    .end local v34    # "suspended":Z
    .end local v35    # "blockUninstall":Z
    .end local v36    # "name":Ljava/lang/String;
    .end local v38    # "tagName":Ljava/lang/String;
    .end local v39    # "outerDepth":I
    .end local v42    # "dialogMessage":Ljava/lang/String;
    .end local v43    # "ceDataInode":J
    .end local v45    # "verifState":I
    .end local v46    # "firstInstallTime":J
    .end local v48    # "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .end local v49    # "disabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .end local v50    # "packageDepth":I
    .end local v51    # "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    .end local v52    # "deDataInode":J
    .end local v54    # "enabled":I
    .end local v55    # "type":I
    :catchall_4
    move-exception v0

    move/from16 v6, p1

    goto :goto_9

    .line 2082
    .restart local v28    # "str":Ljava/io/FileInputStream;
    :catch_2
    move-exception v0

    move/from16 v6, p1

    goto :goto_b

    .line 1992
    .restart local v2    # "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .restart local v3    # "oldSuspendingPackage":Ljava/lang/String;
    .restart local v4    # "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    .restart local v5    # "oldSuspendDialogInfo":Landroid/content/pm/SuspendDialogInfo;
    .local v6, "packageDepth":I
    .local v7, "type":I
    .restart local v9    # "installed":Z
    .restart local v10    # "stopped":Z
    .restart local v11    # "notLaunched":Z
    .restart local v12    # "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    .restart local v13    # "distractionFlags":I
    .restart local v14    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v15    # "instantApp":Z
    .restart local v16    # "virtualPreload":Z
    .restart local v17    # "enabledCaller":Ljava/lang/String;
    .restart local v20    # "installReason":I
    .restart local v21    # "uninstallReason":I
    .restart local v22    # "harmfulAppWarning":Ljava/lang/String;
    .restart local v23    # "splashScreenTheme":Ljava/lang/String;
    .restart local v26    # "minAspectRatio":I
    .restart local v29    # "ps":Lcom/android/server/pm/PackageSetting;
    .restart local v33    # "hidden":Z
    .restart local v34    # "suspended":Z
    .restart local v35    # "blockUninstall":Z
    .restart local v36    # "name":Ljava/lang/String;
    .restart local v38    # "tagName":Ljava/lang/String;
    .restart local v39    # "outerDepth":I
    .restart local v42    # "dialogMessage":Ljava/lang/String;
    .restart local v43    # "ceDataInode":J
    .restart local v45    # "verifState":I
    .restart local v46    # "firstInstallTime":J
    .restart local v48    # "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .restart local v49    # "disabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .restart local v51    # "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    .restart local v52    # "deDataInode":J
    .restart local v54    # "enabled":I
    :cond_10
    move/from16 v50, v6

    move/from16 v55, v7

    move/from16 v6, p1

    .line 1989
    :goto_f
    move-wide/from16 v6, v52

    move/from16 v8, v54

    move/from16 v19, v55

    .end local v6    # "packageDepth":I
    .end local v7    # "type":I
    .restart local v50    # "packageDepth":I
    .restart local v55    # "type":I
    goto/16 :goto_5

    .end local v55    # "type":I
    .restart local v7    # "type":I
    :cond_11
    move/from16 v6, p1

    move/from16 v55, v7

    .line 2033
    .end local v7    # "type":I
    .restart local v55    # "type":I
    :goto_10
    if-nez v5, :cond_12

    invoke-static/range {v42 .. v42}, Landroid/text/TextUtils;->isEmpty(Ljava/lang/CharSequence;)Z

    move-result v7

    if-nez v7, :cond_12

    .line 2034
    new-instance v7, Landroid/content/pm/SuspendDialogInfo$Builder;

    invoke-direct {v7}, Landroid/content/pm/SuspendDialogInfo$Builder;-><init>()V

    .line 2035
    move-object/from16 v8, v42

    .end local v42    # "dialogMessage":Ljava/lang/String;
    .local v8, "dialogMessage":Ljava/lang/String;
    invoke-virtual {v7, v8}, Landroid/content/pm/SuspendDialogInfo$Builder;->setMessage(Ljava/lang/String;)Landroid/content/pm/SuspendDialogInfo$Builder;

    move-result-object v7

    .line 2036
    invoke-virtual {v7}, Landroid/content/pm/SuspendDialogInfo$Builder;->build()Landroid/content/pm/SuspendDialogInfo;

    move-result-object v7

    move-object v5, v7

    goto :goto_11

    .line 2033
    .end local v8    # "dialogMessage":Ljava/lang/String;
    .restart local v42    # "dialogMessage":Ljava/lang/String;
    :cond_12
    move-object/from16 v8, v42

    .line 2038
    .end local v42    # "dialogMessage":Ljava/lang/String;
    .restart local v8    # "dialogMessage":Ljava/lang/String;
    :goto_11
    if-eqz v34, :cond_13

    if-nez v2, :cond_13

    .line 2039
    new-instance v7, Lcom/android/server/pm/pkg/SuspendParams;

    move-object/from16 v19, v2

    const/4 v2, 0x0

    .end local v2    # "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .local v19, "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    invoke-direct {v7, v5, v4, v12, v2}, Lcom/android/server/pm/pkg/SuspendParams;-><init>(Landroid/content/pm/SuspendDialogInfo;Landroid/os/PersistableBundle;Landroid/os/PersistableBundle;Z)V

    move-object v2, v7

    .line 2044
    .local v2, "suspendParams":Lcom/android/server/pm/pkg/SuspendParams;
    new-instance v7, Landroid/util/ArrayMap;

    invoke-direct {v7}, Landroid/util/ArrayMap;-><init>()V

    .line 2045
    .end local v19    # "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .local v7, "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    nop

    .line 2046
    move-object/from16 v37, v4

    .end local v4    # "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    .local v37, "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    invoke-static {v6, v3}, Landroid/content/pm/UserPackage;->of(ILjava/lang/String;)Landroid/content/pm/UserPackage;

    move-result-object v4

    .line 2045
    invoke-virtual {v7, v4, v2}, Landroid/util/ArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    move-object/from16 v41, v7

    goto :goto_12

    .line 2038
    .end local v7    # "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .end local v37    # "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    .local v2, "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .restart local v4    # "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    :cond_13
    move-object/from16 v19, v2

    move-object/from16 v37, v4

    .line 2049
    .end local v2    # "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .end local v4    # "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    .restart local v19    # "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .restart local v37    # "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    move-object/from16 v41, v19

    .end local v19    # "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .local v41, "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    :goto_12
    if-eqz v35, :cond_14

    .line 2050
    move-object/from16 v7, v36

    const/4 v4, 0x1

    .end local v36    # "name":Ljava/lang/String;
    .local v7, "name":Ljava/lang/String;
    invoke-virtual {v1, v6, v7, v4}, Lcom/android/server/pm/Settings;->setBlockUninstallLPw(ILjava/lang/String;Z)V
    :try_end_15
    .catch Ljava/io/IOException; {:try_start_15 .. :try_end_15} :catch_1
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_15 .. :try_end_15} :catch_1
    .catchall {:try_start_15 .. :try_end_15} :catchall_3

    goto :goto_13

    .line 2049
    .end local v7    # "name":Ljava/lang/String;
    .restart local v36    # "name":Ljava/lang/String;
    :cond_14
    move-object/from16 v7, v36

    const/4 v4, 0x1

    .line 2052
    .end local v36    # "name":Ljava/lang/String;
    .restart local v7    # "name":Ljava/lang/String;
    :goto_13
    nop

    .line 2058
    const-wide/16 v31, 0x0

    cmp-long v2, v46, v31

    if-eqz v2, :cond_15

    move-object/from16 v1, p2

    move-wide/from16 v31, v46

    goto :goto_14

    .line 2059
    :cond_15
    :try_start_16
    invoke-static/range {v31 .. v32}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v2
    :try_end_16
    .catch Ljava/io/IOException; {:try_start_16 .. :try_end_16} :catch_6
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_16 .. :try_end_16} :catch_6
    .catchall {:try_start_16 .. :try_end_16} :catchall_8

    move-object/from16 v1, p2

    :try_start_17
    invoke-virtual {v1, v7, v2}, Landroid/util/ArrayMap;->getOrDefault(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Ljava/lang/Long;

    invoke-virtual {v2}, Ljava/lang/Long;->longValue()J

    move-result-wide v31
    :try_end_17
    .catch Ljava/io/IOException; {:try_start_17 .. :try_end_17} :catch_5
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_17 .. :try_end_17} :catch_5
    .catchall {:try_start_17 .. :try_end_17} :catchall_7

    .line 2052
    :goto_14
    const/16 v36, 0x5

    move-object/from16 v2, v29

    move-object/from16 v40, v3

    .end local v3    # "oldSuspendingPackage":Ljava/lang/String;
    .local v40, "oldSuspendingPackage":Ljava/lang/String;
    move/from16 v3, p1

    move-object/from16 v56, v12

    const/16 v42, 0x2

    .end local v12    # "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    .local v56, "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    move/from16 v12, v33

    move-object v1, v14

    .end local v14    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .local v1, "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    move-object/from16 v14, v41

    move-object/from16 v18, v48

    move-object/from16 v19, v49

    move-wide/from16 v24, v31

    move-object/from16 v27, v51

    move-object/from16 v31, v1

    move/from16 v32, v4

    move v1, v6

    move-object/from16 v57, v7

    move/from16 v58, v45

    move-wide/from16 v6, v52

    move/from16 v45, v55

    move/from16 v59, v50

    move-object/from16 v50, v5

    move-wide/from16 v4, v43

    move/from16 v43, v59

    move-object/from16 v44, v37

    move-object/from16 v37, v8

    move/from16 v8, v54

    .end local v1    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v5    # "oldSuspendDialogInfo":Landroid/content/pm/SuspendDialogInfo;
    .end local v7    # "name":Ljava/lang/String;
    .end local v52    # "deDataInode":J
    .end local v54    # "enabled":I
    .end local v55    # "type":I
    .local v4, "ceDataInode":J
    .local v6, "deDataInode":J
    .local v8, "enabled":I
    .local v31, "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .local v37, "dialogMessage":Ljava/lang/String;
    .local v43, "packageDepth":I
    .local v44, "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    .local v45, "type":I
    .local v50, "oldSuspendDialogInfo":Landroid/content/pm/SuspendDialogInfo;
    .local v57, "name":Ljava/lang/String;
    .local v58, "verifState":I
    :try_start_18
    invoke-virtual/range {v2 .. v27}, Lcom/android/server/pm/PackageSetting;->setUserState(IJJIZZZZILandroid/util/ArrayMap;ZZLjava/lang/String;Landroid/util/ArraySet;Landroid/util/ArraySet;IILjava/lang/String;Ljava/lang/String;JILcom/android/server/pm/pkg/ArchiveState;)V
    :try_end_18
    .catch Ljava/io/IOException; {:try_start_18 .. :try_end_18} :catch_4
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_18 .. :try_end_18} :catch_4
    .catchall {:try_start_18 .. :try_end_18} :catchall_6

    .line 2061
    move-object/from16 v3, p0

    :try_start_19
    iget-object v2, v3, Lcom/android/server/pm/Settings;->mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;

    move-object/from16 v12, v57

    move/from16 v14, v58

    .end local v57    # "name":Ljava/lang/String;
    .end local v58    # "verifState":I
    .local v12, "name":Ljava/lang/String;
    .local v14, "verifState":I
    invoke-interface {v2, v12, v1, v14}, Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;->setLegacyUserState(Ljava/lang/String;II)Z

    .line 2062
    move-object/from16 v4, v29

    move-object/from16 v2, v31

    .end local v4    # "ceDataInode":J
    .end local v6    # "deDataInode":J
    .end local v8    # "enabled":I
    .end local v9    # "installed":Z
    .end local v10    # "stopped":Z
    .end local v11    # "notLaunched":Z
    .end local v12    # "name":Ljava/lang/String;
    .end local v13    # "distractionFlags":I
    .end local v14    # "verifState":I
    .end local v15    # "instantApp":Z
    .end local v16    # "virtualPreload":Z
    .end local v17    # "enabledCaller":Ljava/lang/String;
    .end local v20    # "installReason":I
    .end local v21    # "uninstallReason":I
    .end local v22    # "harmfulAppWarning":Ljava/lang/String;
    .end local v23    # "splashScreenTheme":Ljava/lang/String;
    .end local v26    # "minAspectRatio":I
    .end local v33    # "hidden":Z
    .end local v34    # "suspended":Z
    .end local v35    # "blockUninstall":Z
    .end local v37    # "dialogMessage":Ljava/lang/String;
    .end local v40    # "oldSuspendingPackage":Ljava/lang/String;
    .end local v41    # "suspendParamsMap":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Landroid/content/pm/UserPackage;Lcom/android/server/pm/pkg/SuspendParams;>;"
    .end local v43    # "packageDepth":I
    .end local v44    # "oldSuspendedAppExtras":Landroid/os/PersistableBundle;
    .end local v46    # "firstInstallTime":J
    .end local v48    # "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .end local v49    # "disabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .end local v50    # "oldSuspendDialogInfo":Landroid/content/pm/SuspendDialogInfo;
    .end local v51    # "archiveState":Lcom/android/server/pm/pkg/ArchiveState;
    .end local v56    # "oldSuspendedLauncherExtras":Landroid/os/PersistableBundle;
    goto/16 :goto_1a

    .line 1849
    .end local v28    # "str":Ljava/io/FileInputStream;
    .end local v29    # "ps":Lcom/android/server/pm/PackageSetting;
    .end local v31    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v38    # "tagName":Ljava/lang/String;
    .end local v39    # "outerDepth":I
    .end local v45    # "type":I
    :catchall_5
    move-exception v0

    :goto_15
    move-object v2, v0

    goto/16 :goto_a

    .line 2082
    .restart local v28    # "str":Ljava/io/FileInputStream;
    :catch_3
    move-exception v0

    :goto_16
    move-object v4, v0

    goto/16 :goto_c

    .line 1849
    .end local v28    # "str":Ljava/io/FileInputStream;
    :catchall_6
    move-exception v0

    move-object/from16 v3, p0

    goto :goto_15

    .line 2082
    .restart local v28    # "str":Ljava/io/FileInputStream;
    :catch_4
    move-exception v0

    move-object/from16 v3, p0

    goto :goto_16

    .line 1849
    .end local v28    # "str":Ljava/io/FileInputStream;
    :catchall_7
    move-exception v0

    move-object/from16 v3, p0

    :goto_17
    move v1, v6

    goto :goto_15

    .line 2082
    .restart local v28    # "str":Ljava/io/FileInputStream;
    :catch_5
    move-exception v0

    move-object/from16 v3, p0

    :goto_18
    move v1, v6

    goto :goto_16

    .line 1849
    .end local v28    # "str":Ljava/io/FileInputStream;
    :catchall_8
    move-exception v0

    move-object v3, v1

    goto :goto_17

    .line 2082
    .restart local v28    # "str":Ljava/io/FileInputStream;
    :catch_6
    move-exception v0

    move-object v3, v1

    goto :goto_18

    .line 1849
    .end local v28    # "str":Ljava/io/FileInputStream;
    :catchall_9
    move-exception v0

    move-object v3, v1

    move/from16 v1, p1

    goto :goto_15

    .line 2082
    .restart local v28    # "str":Ljava/io/FileInputStream;
    :catch_7
    move-exception v0

    move-object v3, v1

    move/from16 v1, p1

    goto :goto_16

    .line 2062
    .local v3, "type":I
    .local v4, "ps":Lcom/android/server/pm/PackageSetting;
    .local v10, "tagName":Ljava/lang/String;
    .local v14, "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .local v15, "outerDepth":I
    :cond_16
    move/from16 v36, v2

    move/from16 v19, v3

    move/from16 v32, v8

    move-object/from16 v38, v10

    move/from16 v42, v12

    move-object/from16 v31, v14

    move/from16 v39, v15

    move-object v3, v1

    move/from16 v1, p1

    .end local v3    # "type":I
    .end local v10    # "tagName":Ljava/lang/String;
    .end local v14    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v15    # "outerDepth":I
    .local v19, "type":I
    .restart local v31    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v38    # "tagName":Ljava/lang/String;
    .restart local v39    # "outerDepth":I
    const-string/jumbo v2, "preferred-activities"

    move-object/from16 v5, v38

    .end local v38    # "tagName":Ljava/lang/String;
    .local v5, "tagName":Ljava/lang/String;
    invoke-virtual {v5, v2}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v2

    if-eqz v2, :cond_17

    .line 2063
    move-object/from16 v2, v31

    .end local v31    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .local v2, "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    invoke-virtual {v3, v2, v1}, Lcom/android/server/pm/Settings;->readPreferredActivitiesLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V

    goto :goto_19

    .line 2064
    .end local v2    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v31    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    :cond_17
    move-object/from16 v2, v31

    .end local v31    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v2    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    const-string/jumbo v6, "persistent-preferred-activities"

    invoke-virtual {v5, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6

    if-eqz v6, :cond_18

    .line 2065
    invoke-direct {v3, v2, v1}, Lcom/android/server/pm/Settings;->readPersistentPreferredActivitiesLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V

    goto :goto_19

    .line 2066
    :cond_18
    const-string v6, "crossProfile-intent-filters"

    invoke-virtual {v5, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6

    if-eqz v6, :cond_19

    .line 2067
    invoke-direct {v3, v2, v1}, Lcom/android/server/pm/Settings;->readCrossProfileIntentFiltersLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V

    goto :goto_19

    .line 2068
    :cond_19
    const-string v6, "default-apps"

    invoke-virtual {v5, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6

    if-eqz v6, :cond_1a

    .line 2069
    invoke-virtual {v3, v2, v1}, Lcom/android/server/pm/Settings;->readDefaultAppsLPw(Lorg/xmlpull/v1/XmlPullParser;I)V

    goto :goto_19

    .line 2070
    :cond_1a
    const-string v6, "block-uninstall-packages"

    invoke-virtual {v5, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6

    if-eqz v6, :cond_1b

    .line 2071
    invoke-virtual {v3, v2, v1}, Lcom/android/server/pm/Settings;->readBlockUninstallPackagesLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V

    goto :goto_19

    .line 2072
    :cond_1b
    const-string/jumbo v6, "taskpersist-packages"

    invoke-virtual {v5, v6}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v6

    if-eqz v6, :cond_1c

    .line 2073
    const-string v6, "PackageSettings"

    const-string v7, "findstr taskpersist-packages!"

    invoke-static {v6, v7}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 2074
    invoke-static {}, Lcom/android/server/pm/TaskPersistUtil;->getInstance()Lcom/android/server/pm/TaskPersistUtil;

    move-result-object v6

    invoke-virtual {v6, v3, v2, v1}, Lcom/android/server/pm/TaskPersistUtil;->readTaskPersistPackageLPr(Lcom/android/server/pm/Settings;Lorg/xmlpull/v1/XmlPullParser;I)V

    goto :goto_19

    .line 2076
    :cond_1c
    const-string v6, "PackageManager"

    new-instance v7, Ljava/lang/StringBuilder;

    invoke-direct {v7}, Ljava/lang/StringBuilder;-><init>()V

    const-string v8, "Unknown element under <stopped-packages>: "

    invoke-virtual {v7, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 2078
    invoke-interface {v2}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v8

    invoke-virtual {v7, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v7}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v7

    .line 2076
    invoke-static {v6, v7}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 2079
    invoke-static {v2}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V
    :try_end_19
    .catch Ljava/io/IOException; {:try_start_19 .. :try_end_19} :catch_3
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_19 .. :try_end_19} :catch_3
    .catchall {:try_start_19 .. :try_end_19} :catchall_5

    .line 2081
    .end local v5    # "tagName":Ljava/lang/String;
    :goto_19
    move/from16 v45, v19

    .end local v19    # "type":I
    .restart local v45    # "type":I
    :goto_1a
    move-object v14, v2

    move-object v1, v3

    move/from16 v8, v32

    move/from16 v2, v36

    move/from16 v15, v39

    move/from16 v12, v42

    move/from16 v3, v45

    goto/16 :goto_2

    .line 1906
    .end local v2    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v39    # "outerDepth":I
    .end local v45    # "type":I
    .restart local v3    # "type":I
    .restart local v14    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v15    # "outerDepth":I
    :cond_1d
    move/from16 v36, v2

    move/from16 v19, v3

    move/from16 v32, v8

    move/from16 v42, v12

    move-object v2, v14

    move/from16 v39, v15

    move-object v3, v1

    move/from16 v1, p1

    .line 1903
    :goto_1b
    move-object v14, v2

    move-object v1, v3

    move/from16 v3, v19

    move/from16 v8, v32

    move/from16 v2, v36

    move/from16 v15, v39

    move/from16 v12, v42

    .end local v3    # "type":I
    .end local v14    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v15    # "outerDepth":I
    .restart local v2    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v19    # "type":I
    .restart local v39    # "outerDepth":I
    goto/16 :goto_2

    .end local v2    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v19    # "type":I
    .end local v39    # "outerDepth":I
    .restart local v3    # "type":I
    .restart local v14    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v15    # "outerDepth":I
    :cond_1e
    move/from16 v19, v3

    move-object v2, v14

    move/from16 v39, v15

    move-object v3, v1

    move/from16 v1, p1

    .line 2087
    .end local v3    # "type":I
    .end local v4    # "ps":Lcom/android/server/pm/PackageSetting;
    .end local v14    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v15    # "outerDepth":I
    :goto_1c
    move-object/from16 v5, v30

    goto :goto_1f

    .line 1884
    :catchall_a
    move-exception v0

    move-object v3, v1

    move/from16 v1, p1

    move-object v4, v0

    move-object/from16 v2, v28

    goto :goto_1d

    .end local v28    # "str":Ljava/io/FileInputStream;
    .end local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .local v2, "str":Ljava/io/FileInputStream;
    .local v7, "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :catchall_b
    move-exception v0

    move-object v3, v1

    move-object/from16 v34, v4

    move v1, v6

    move-object/from16 v30, v7

    move-object v4, v0

    .end local v7    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :goto_1d
    :try_start_1a
    monitor-exit v34
    :try_end_1a
    .catchall {:try_start_1a .. :try_end_1a} :catchall_c

    .end local v2    # "str":Ljava/io/FileInputStream;
    .end local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .end local p0    # "this":Lcom/android/server/pm/Settings;
    .end local p1    # "userId":I
    .end local p2    # "origFirstInstallTimes":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Ljava/lang/String;Ljava/lang/Long;>;"
    :try_start_1b
    throw v4
    :try_end_1b
    .catch Ljava/io/IOException; {:try_start_1b .. :try_end_1b} :catch_8
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_1b .. :try_end_1b} :catch_8
    .catchall {:try_start_1b .. :try_end_1b} :catchall_5

    .line 2082
    .restart local v2    # "str":Ljava/io/FileInputStream;
    .restart local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local p0    # "this":Lcom/android/server/pm/Settings;
    .restart local p1    # "userId":I
    .restart local p2    # "origFirstInstallTimes":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Ljava/lang/String;Ljava/lang/Long;>;"
    :catch_8
    move-exception v0

    move-object v4, v0

    goto :goto_1e

    .line 1884
    :catchall_c
    move-exception v0

    move-object v4, v0

    goto :goto_1d

    .line 1849
    .end local v2    # "str":Ljava/io/FileInputStream;
    .end local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v7    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :catchall_d
    move-exception v0

    move-object v3, v1

    move v1, v6

    move-object/from16 v30, v7

    move-object v2, v0

    move-object/from16 v5, v30

    .end local v7    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    goto :goto_20

    .line 2082
    .end local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v2    # "str":Ljava/io/FileInputStream;
    .restart local v7    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :catch_9
    move-exception v0

    move-object v3, v1

    move v1, v6

    move-object/from16 v30, v7

    move-object v4, v0

    .end local v7    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :goto_1e
    nop

    .line 2084
    .local v4, "e":Ljava/lang/Exception;
    move-object/from16 v5, v30

    .end local v30    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .local v5, "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :try_start_1c
    invoke-virtual {v5, v2, v4}, Lcom/android/server/pm/ResilientAtomicFile;->failRead(Ljava/io/FileInputStream;Ljava/lang/Exception;)V

    .line 2086
    invoke-virtual/range {p0 .. p2}, Lcom/android/server/pm/Settings;->readPackageRestrictionsLPr(ILandroid/util/ArrayMap;)V
    :try_end_1c
    .catchall {:try_start_1c .. :try_end_1c} :catchall_e

    .line 2088
    .end local v2    # "str":Ljava/io/FileInputStream;
    .end local v4    # "e":Ljava/lang/Exception;
    :goto_1f
    if-eqz v5, :cond_1f

    invoke-virtual {v5}, Lcom/android/server/pm/ResilientAtomicFile;->close()V

    .line 2089
    .end local v5    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :cond_1f
    return-void

    .line 1849
    .restart local v5    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :catchall_e
    move-exception v0

    move-object v2, v0

    :goto_20
    if-eqz v5, :cond_20

    :try_start_1d
    invoke-virtual {v5}, Lcom/android/server/pm/ResilientAtomicFile;->close()V
    :try_end_1d
    .catchall {:try_start_1d .. :try_end_1d} :catchall_f

    goto :goto_21

    :catchall_f
    move-exception v0

    move-object v4, v0

    invoke-virtual {v2, v4}, Ljava/lang/Throwable;->addSuppressed(Ljava/lang/Throwable;)V

    :cond_20
    :goto_21
    throw v2

    nop

    :sswitch_data_0
    .sparse-switch
        -0x7cf1603a -> :sswitch_6
        -0x78da70f9 -> :sswitch_5
        -0x75017ede -> :sswitch_4
        -0x5ee8613f -> :sswitch_3
        -0x54ce12c2 -> :sswitch_2
        -0x3326b7c9 -> :sswitch_1
        0x62ff4521 -> :sswitch_0
    .end sparse-switch

    :pswitch_data_0
    .packed-switch 0x0
        :pswitch_6
        :pswitch_5
        :pswitch_4
        :pswitch_3
        :pswitch_2
        :pswitch_1
        :pswitch_0
    .end packed-switch
.end method

.method readPermissionStateForUserSyncLPr(I)V
    .locals 6
    .param p1, "userId"    # I

    .line 3600
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    invoke-virtual {p0}, Lcom/android/server/pm/Settings;->getInternalVersion()Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v2

    iget-object v3, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v4, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    .line 3601
    invoke-direct {p0, p1}, Lcom/android/server/pm/Settings;->getUserRuntimePermissionsFile(I)Ljava/io/File;

    move-result-object v5

    .line 3600
    move v1, p1

    invoke-virtual/range {v0 .. v5}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;->readStateForUserSync(ILcom/android/server/pm/Settings$VersionInfo;Lcom/android/server/utils/WatchedArrayMap;Lcom/android/server/utils/WatchedArrayMap;Ljava/io/File;)V

    .line 3602
    return-void
.end method

.method readPreferredActivitiesLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V
    .locals 7
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .param p2, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lorg/xmlpull/v1/XmlPullParserException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 1697
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v0

    .line 1699
    .local v0, "outerDepth":I
    :cond_0
    :goto_0
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v1

    move v2, v1

    .local v2, "type":I
    const/4 v3, 0x1

    nop

    if-eq v1, v3, :cond_6

    const/4 v1, 0x3

    if-ne v2, v1, :cond_1

    .line 1700
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v3

    if-le v3, v0, :cond_6

    .line 1701
    :cond_1
    nop

    nop

    if-eq v2, v1, :cond_0

    const/4 v1, 0x4

    if-ne v2, v1, :cond_2

    .line 1702
    goto :goto_0

    .line 1705
    :cond_2
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v1

    .line 1706
    .local v1, "tagName":Ljava/lang/String;
    const-string/jumbo v3, "item"

    invoke-virtual {v1, v3}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v3

    const/4 v4, 0x5

    if-eqz v3, :cond_5

    .line 1707
    new-instance v3, Lcom/android/server/pm/PreferredActivity;

    invoke-direct {v3, p1}, Lcom/android/server/pm/PreferredActivity;-><init>(Lcom/android/modules/utils/TypedXmlPullParser;)V

    .line 1708
    .local v3, "pa":Lcom/android/server/pm/PreferredActivity;
    iget-object v5, v3, Lcom/android/server/pm/PreferredActivity;->mPref:Lcom/android/server/pm/PreferredComponent;

    invoke-virtual {v5}, Lcom/android/server/pm/PreferredComponent;->getParseError()Ljava/lang/String;

    move-result-object v5

    if-nez v5, :cond_4

    .line 1709
    invoke-virtual {p0, p2}, Lcom/android/server/pm/Settings;->editPreferredActivitiesLPw(I)Lcom/android/server/pm/PreferredIntentResolver;

    move-result-object v4

    .line 1710
    .local v4, "resolver":Lcom/android/server/pm/PreferredIntentResolver;
    invoke-virtual {v4, v3}, Lcom/android/server/pm/PreferredIntentResolver;->shouldAddPreferredActivity(Lcom/android/server/pm/PreferredActivity;)Z

    move-result v5

    if-eqz v5, :cond_3

    .line 1711
    const/4 v5, 0x0

    invoke-virtual {v4, v5, v3}, Lcom/android/server/pm/WatchedIntentResolver;->addFilter(Lcom/android/server/pm/snapshot/PackageDataSnapshot;Lcom/android/server/pm/WatchedIntentFilter;)V

    .line 1713
    .end local v4    # "resolver":Lcom/android/server/pm/PreferredIntentResolver;
    :cond_3
    goto :goto_1

    .line 1714
    :cond_4
    new-instance v5, Ljava/lang/StringBuilder;

    invoke-direct {v5}, Ljava/lang/StringBuilder;-><init>()V

    const-string v6, "Error in package manager settings: <preferred-activity> "

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object v6, v3, Lcom/android/server/pm/PreferredActivity;->mPref:Lcom/android/server/pm/PreferredComponent;

    .line 1716
    invoke-virtual {v6}, Lcom/android/server/pm/PreferredComponent;->getParseError()Ljava/lang/String;

    move-result-object v6

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v6, " at "

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1717
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getPositionDescription()Ljava/lang/String;

    move-result-object v6

    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v5}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v5

    .line 1714
    invoke-static {v4, v5}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 1719
    .end local v3    # "pa":Lcom/android/server/pm/PreferredActivity;
    :goto_1
    goto :goto_2

    .line 1720
    :cond_5
    new-instance v3, Ljava/lang/StringBuilder;

    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V

    const-string v5, "Unknown element under <preferred-activities>: "

    invoke-virtual {v3, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1721
    invoke-interface {p1}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v5

    invoke-virtual {v3, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    .line 1720
    invoke-static {v4, v3}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 1722
    invoke-static {p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 1724
    .end local v1    # "tagName":Ljava/lang/String;
    :goto_2
    goto/16 :goto_0

    .line 1725
    :cond_6
    return-void
.end method

.method readSettingsLPw(Lcom/android/server/pm/Computer;Ljava/util/List;Landroid/util/ArrayMap;)Z
    .locals 21
    .param p1, "computer"    # Lcom/android/server/pm/Computer;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p2    # Ljava/util/List;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/server/pm/Computer;",
            "Ljava/util/List<",
            "Landroid/content/pm/UserInfo;",
            ">;",
            "Landroid/util/ArrayMap<",
            "Ljava/lang/String;",
            "Ljava/lang/Long;",
            ">;)Z"
        }
    .end annotation

    .line 3365
    .local p2, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    .local p3, "originalFirstInstallTimes":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Ljava/lang/String;Ljava/lang/Long;>;"
    move-object/from16 v7, p0

    move-object/from16 v8, p2

    const-string v1, "No start tag found in package manager settings"

    iget-object v2, v7, Lcom/android/server/pm/Settings;->mPendingPackages:Lcom/android/server/utils/WatchedArrayList;

    invoke-virtual {v2}, Lcom/android/server/utils/WatchedArrayList;->clear()V

    .line 3366
    iget-object v2, v7, Lcom/android/server/pm/Settings;->mInstallerPackages:Lcom/android/server/utils/WatchedArraySet;

    invoke-virtual {v2}, Lcom/android/server/utils/WatchedArraySet;->clear()V

    .line 3367
    invoke-virtual/range {p3 .. p3}, Landroid/util/ArrayMap;->clear()V

    .line 3369
    new-instance v2, Landroid/util/ArrayMap;

    invoke-direct {v2}, Landroid/util/ArrayMap;-><init>()V

    move-object v9, v2

    .line 3370
    .local v9, "keySetRefs":Landroid/util/ArrayMap;, "Landroid/util/ArrayMap<Ljava/lang/Long;Ljava/lang/Integer;>;"
    new-instance v2, Ljava/util/ArrayList;

    invoke-direct {v2}, Ljava/util/ArrayList;-><init>()V

    move-object v10, v2

    .line 3372
    .local v10, "readSignatures":Ljava/util/ArrayList;, "Ljava/util/ArrayList<Landroid/content/pm/Signature;>;"
    invoke-direct/range {p0 .. p0}, Lcom/android/server/pm/Settings;->getSettingsFile()Lcom/android/server/pm/ResilientAtomicFile;

    move-result-object v11

    .line 3373
    .local v11, "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    const/4 v2, 0x0

    .line 3375
    .local v2, "str":Ljava/io/FileInputStream;
    const/4 v12, 0x1

    :try_start_0
    invoke-virtual {v11}, Lcom/android/server/pm/ResilientAtomicFile;->openRead()Ljava/io/FileInputStream;

    move-result-object v3
    :try_end_0
    .catch Ljava/io/IOException; {:try_start_0 .. :try_end_0} :catch_2
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_0 .. :try_end_0} :catch_2
    .catch Ljava/lang/ArrayIndexOutOfBoundsException; {:try_start_0 .. :try_end_0} :catch_2
    .catch Ljava/lang/IllegalArgumentException; {:try_start_0 .. :try_end_0} :catch_2
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    move-object v13, v3

    .line 3376
    .end local v2    # "str":Ljava/io/FileInputStream;
    .local v13, "str":Ljava/io/FileInputStream;
    const-string/jumbo v14, "primary_physical"

    const/4 v15, 0x0

    if-nez v13, :cond_0

    .line 3378
    :try_start_1
    sget-object v1, Landroid/os/storage/StorageManager;->UUID_PRIVATE_INTERNAL:Ljava/lang/String;

    invoke-virtual {v7, v1}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v1

    invoke-virtual {v1}, Lcom/android/server/pm/Settings$VersionInfo;->forceCurrent()V

    .line 3379
    invoke-virtual {v7, v14}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v1

    invoke-virtual {v1}, Lcom/android/server/pm/Settings$VersionInfo;->forceCurrent()V
    :try_end_1
    .catch Ljava/io/IOException; {:try_start_1 .. :try_end_1} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_1 .. :try_end_1} :catch_0
    .catch Ljava/lang/ArrayIndexOutOfBoundsException; {:try_start_1 .. :try_end_1} :catch_0
    .catch Ljava/lang/IllegalArgumentException; {:try_start_1 .. :try_end_1} :catch_0
    .catchall {:try_start_1 .. :try_end_1} :catchall_0

    .line 3380
    nop

    .line 3502
    invoke-virtual {v11}, Lcom/android/server/pm/ResilientAtomicFile;->close()V

    .line 3380
    return v15

    .line 3372
    .end local v13    # "str":Ljava/io/FileInputStream;
    :catchall_0
    move-exception v0

    move-object/from16 v3, p1

    :goto_0
    move-object v1, v0

    goto/16 :goto_b

    .line 3494
    .restart local v13    # "str":Ljava/io/FileInputStream;
    :catch_0
    move-exception v0

    move-object/from16 v3, p1

    :goto_1
    move-object v1, v0

    move-object v2, v13

    goto/16 :goto_9

    .line 3382
    :cond_0
    :try_start_2
    invoke-static {v13}, Landroid/util/Xml;->resolvePullParser(Ljava/io/InputStream;)Lcom/android/modules/utils/TypedXmlPullParser;

    move-result-object v2

    move-object v6, v2

    .line 3385
    .local v6, "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    :goto_2
    invoke-interface {v6}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v2
    :try_end_2
    .catch Ljava/io/IOException; {:try_start_2 .. :try_end_2} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_2 .. :try_end_2} :catch_0
    .catch Ljava/lang/ArrayIndexOutOfBoundsException; {:try_start_2 .. :try_end_2} :catch_0
    .catch Ljava/lang/IllegalArgumentException; {:try_start_2 .. :try_end_2} :catch_0
    .catchall {:try_start_2 .. :try_end_2} :catchall_0

    move v3, v2

    .local v3, "type":I
    const/4 v4, 0x2

    if-eq v2, v4, :cond_1

    if-eq v3, v12, :cond_1

    goto :goto_2

    .line 3390
    :cond_1
    const-string v5, "PackageManager"

    if-eq v3, v4, :cond_2

    .line 3391
    :try_start_3
    iget-object v2, v7, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    const-string v4, "No start tag found in settings file\n"

    invoke-virtual {v2, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3392
    const/4 v2, 0x5

    invoke-static {v2, v1}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 3394
    invoke-static {v5, v1}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I
    :try_end_3
    .catch Ljava/io/IOException; {:try_start_3 .. :try_end_3} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_3 .. :try_end_3} :catch_0
    .catch Ljava/lang/ArrayIndexOutOfBoundsException; {:try_start_3 .. :try_end_3} :catch_0
    .catch Ljava/lang/IllegalArgumentException; {:try_start_3 .. :try_end_3} :catch_0
    .catchall {:try_start_3 .. :try_end_3} :catchall_0

    .line 3396
    nop

    .line 3502
    invoke-virtual {v11}, Lcom/android/server/pm/ResilientAtomicFile;->close()V

    .line 3396
    return v15

    .line 3399
    :cond_2
    :try_start_4
    invoke-interface {v6}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v1

    move v4, v1

    .line 3400
    .local v4, "outerDepth":I
    :goto_3
    invoke-interface {v6}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v1

    move v3, v1

    if-eq v1, v12, :cond_1b

    const/4 v1, 0x3

    if-ne v3, v1, :cond_4

    .line 3401
    invoke-interface {v6}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v2

    if-le v2, v4, :cond_3

    goto :goto_4

    :cond_3
    move/from16 v16, v3

    move/from16 v17, v4

    move-object v15, v6

    move-object/from16 v3, p1

    goto/16 :goto_8

    .line 3402
    :cond_4
    :goto_4
    if-eq v3, v1, :cond_1a

    const/4 v1, 0x4

    if-ne v3, v1, :cond_5

    .line 3403
    move/from16 v16, v3

    move/from16 v17, v4

    move-object v2, v5

    move v8, v15

    move-object/from16 v3, p1

    move-object v15, v6

    goto/16 :goto_7

    .line 3406
    :cond_5
    invoke-interface {v6}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v1

    move-object v2, v1

    .line 3407
    .local v2, "tagName":Ljava/lang/String;
    const-string/jumbo v1, "package"

    invoke-virtual {v2, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_6

    .line 3408
    move-object/from16 v1, p0

    move-object v12, v2

    .end local v2    # "tagName":Ljava/lang/String;
    .local v12, "tagName":Ljava/lang/String;
    move-object v2, v6

    move/from16 v16, v3

    .end local v3    # "type":I
    .local v16, "type":I
    move-object v3, v10

    move/from16 v17, v4

    .end local v4    # "outerDepth":I
    .local v17, "outerDepth":I
    move-object v4, v9

    move-object/from16 v18, v5

    move-object/from16 v5, p2

    move-object v15, v6

    .end local v6    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .local v15, "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    move-object/from16 v6, p3

    invoke-direct/range {v1 .. v6}, Lcom/android/server/pm/Settings;->readPackageLPw(Lcom/android/modules/utils/TypedXmlPullParser;Ljava/util/ArrayList;Landroid/util/ArrayMap;Ljava/util/List;Landroid/util/ArrayMap;)V

    move-object/from16 v3, p1

    move-object/from16 v2, v18

    const/4 v8, 0x0

    goto/16 :goto_6

    .line 3410
    .end local v12    # "tagName":Ljava/lang/String;
    .end local v15    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v16    # "type":I
    .end local v17    # "outerDepth":I
    .restart local v2    # "tagName":Ljava/lang/String;
    .restart local v3    # "type":I
    .restart local v4    # "outerDepth":I
    .restart local v6    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    :cond_6
    move-object v12, v2

    move/from16 v16, v3

    move/from16 v17, v4

    move-object/from16 v18, v5

    move-object v15, v6

    .end local v2    # "tagName":Ljava/lang/String;
    .end local v3    # "type":I
    .end local v4    # "outerDepth":I
    .end local v6    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v12    # "tagName":Ljava/lang/String;
    .restart local v15    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v16    # "type":I
    .restart local v17    # "outerDepth":I
    const-string/jumbo v1, "permissions"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_7

    .line 3411
    iget-object v1, v7, Lcom/android/server/pm/Settings;->mPermissions:Lcom/android/server/pm/permission/LegacyPermissionSettings;

    invoke-virtual {v1, v15}, Lcom/android/server/pm/permission/LegacyPermissionSettings;->readPermissions(Lcom/android/modules/utils/TypedXmlPullParser;)V

    move-object/from16 v3, p1

    move-object/from16 v2, v18

    const/4 v8, 0x0

    goto/16 :goto_6

    .line 3412
    :cond_7
    const-string/jumbo v1, "permission-trees"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_8

    .line 3413
    iget-object v1, v7, Lcom/android/server/pm/Settings;->mPermissions:Lcom/android/server/pm/permission/LegacyPermissionSettings;

    invoke-virtual {v1, v15}, Lcom/android/server/pm/permission/LegacyPermissionSettings;->readPermissionTrees(Lcom/android/modules/utils/TypedXmlPullParser;)V

    move-object/from16 v3, p1

    move-object/from16 v2, v18

    const/4 v8, 0x0

    goto/16 :goto_6

    .line 3414
    :cond_8
    const-string/jumbo v1, "shared-user"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_9

    .line 3415
    invoke-direct {v7, v15, v10, v8}, Lcom/android/server/pm/Settings;->readSharedUserLPw(Lcom/android/modules/utils/TypedXmlPullParser;Ljava/util/ArrayList;Ljava/util/List;)V

    move-object/from16 v3, p1

    move-object/from16 v2, v18

    const/4 v8, 0x0

    goto/16 :goto_6

    .line 3416
    :cond_9
    const-string/jumbo v1, "preferred-packages"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_a

    move-object/from16 v3, p1

    move-object/from16 v2, v18

    const/4 v8, 0x0

    goto/16 :goto_6

    .line 3418
    :cond_a
    const-string/jumbo v1, "preferred-activities"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_b

    .line 3421
    const/4 v1, 0x0

    invoke-virtual {v7, v15, v1}, Lcom/android/server/pm/Settings;->readPreferredActivitiesLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V

    move-object/from16 v3, p1

    move-object/from16 v2, v18

    const/4 v8, 0x0

    goto/16 :goto_6

    .line 3422
    :cond_b
    const-string/jumbo v1, "persistent-preferred-activities"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_c

    .line 3425
    const/4 v1, 0x0

    invoke-direct {v7, v15, v1}, Lcom/android/server/pm/Settings;->readPersistentPreferredActivitiesLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V

    move-object/from16 v3, p1

    move-object/from16 v2, v18

    const/4 v8, 0x0

    goto/16 :goto_6

    .line 3426
    :cond_c
    const-string v1, "crossProfile-intent-filters"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_d

    .line 3429
    const/4 v1, 0x0

    invoke-direct {v7, v15, v1}, Lcom/android/server/pm/Settings;->readCrossProfileIntentFiltersLPw(Lcom/android/modules/utils/TypedXmlPullParser;I)V

    move-object/from16 v3, p1

    move-object/from16 v2, v18

    const/4 v8, 0x0

    goto/16 :goto_6

    .line 3430
    :cond_d
    const-string v1, "default-browser"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_e

    .line 3431
    const/4 v1, 0x0

    invoke-virtual {v7, v15, v1}, Lcom/android/server/pm/Settings;->readDefaultAppsLPw(Lorg/xmlpull/v1/XmlPullParser;I)V

    move-object/from16 v3, p1

    move-object/from16 v2, v18

    const/4 v8, 0x0

    goto/16 :goto_6

    .line 3432
    :cond_e
    const-string/jumbo v1, "updated-package"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_f

    .line 3433
    invoke-direct {v7, v15, v8}, Lcom/android/server/pm/Settings;->readDisabledSysPackageLPw(Lcom/android/modules/utils/TypedXmlPullParser;Ljava/util/List;)V

    move-object/from16 v3, p1

    move-object/from16 v2, v18

    const/4 v8, 0x0

    goto/16 :goto_6

    .line 3434
    :cond_f
    const-string/jumbo v1, "renamed-package"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    const/4 v2, 0x0

    if-eqz v1, :cond_11

    .line 3435
    const-string/jumbo v1, "new"

    invoke-interface {v15, v2, v1}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v1

    .line 3436
    .local v1, "nname":Ljava/lang/String;
    const-string/jumbo v3, "old"

    invoke-interface {v15, v2, v3}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v2

    .line 3437
    .local v2, "oname":Ljava/lang/String;
    if-eqz v1, :cond_10

    if-eqz v2, :cond_10

    .line 3438
    iget-object v3, v7, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v3, v1, v2}, Lcom/android/server/utils/WatchedArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 3440
    .end local v1    # "nname":Ljava/lang/String;
    .end local v2    # "oname":Ljava/lang/String;
    :cond_10
    move-object/from16 v3, p1

    move-object/from16 v2, v18

    const/4 v8, 0x0

    goto/16 :goto_6

    :cond_11
    const-string/jumbo v1, "last-platform-version"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1
    :try_end_4
    .catch Ljava/io/IOException; {:try_start_4 .. :try_end_4} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_4 .. :try_end_4} :catch_0
    .catch Ljava/lang/ArrayIndexOutOfBoundsException; {:try_start_4 .. :try_end_4} :catch_0
    .catch Ljava/lang/IllegalArgumentException; {:try_start_4 .. :try_end_4} :catch_0
    .catchall {:try_start_4 .. :try_end_4} :catchall_0

    const-string v3, "fingerprint"

    const-string v4, "buildFingerprint"

    const-string v5, "external"

    const-string/jumbo v6, "internal"

    if-eqz v1, :cond_12

    .line 3442
    :try_start_5
    sget-object v1, Landroid/os/storage/StorageManager;->UUID_PRIVATE_INTERNAL:Ljava/lang/String;

    invoke-virtual {v7, v1}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v1

    .line 3444
    .local v1, "internal":Lcom/android/server/pm/Settings$VersionInfo;
    invoke-virtual {v7, v14}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v19

    move-object/from16 v20, v19

    .line 3447
    .local v20, "external":Lcom/android/server/pm/Settings$VersionInfo;
    const/4 v8, 0x0

    invoke-interface {v15, v2, v6, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v6

    iput v6, v1, Lcom/android/server/pm/Settings$VersionInfo;->sdkVersion:I

    .line 3448
    invoke-interface {v15, v2, v5, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v2

    move-object/from16 v5, v20

    .end local v20    # "external":Lcom/android/server/pm/Settings$VersionInfo;
    .local v5, "external":Lcom/android/server/pm/Settings$VersionInfo;
    iput v2, v5, Lcom/android/server/pm/Settings$VersionInfo;->sdkVersion:I

    .line 3449
    nop

    .line 3450
    invoke-static {v15, v4}, Lcom/android/internal/util/XmlUtils;->readStringAttribute(Lorg/xmlpull/v1/XmlPullParser;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v2

    iput-object v2, v5, Lcom/android/server/pm/Settings$VersionInfo;->buildFingerprint:Ljava/lang/String;

    iput-object v2, v1, Lcom/android/server/pm/Settings$VersionInfo;->buildFingerprint:Ljava/lang/String;

    .line 3451
    nop

    .line 3452
    invoke-static {v15, v3}, Lcom/android/internal/util/XmlUtils;->readStringAttribute(Lorg/xmlpull/v1/XmlPullParser;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v2

    iput-object v2, v5, Lcom/android/server/pm/Settings$VersionInfo;->fingerprint:Ljava/lang/String;

    iput-object v2, v1, Lcom/android/server/pm/Settings$VersionInfo;->fingerprint:Ljava/lang/String;

    .line 3454
    .end local v1    # "internal":Lcom/android/server/pm/Settings$VersionInfo;
    .end local v5    # "external":Lcom/android/server/pm/Settings$VersionInfo;
    move-object/from16 v3, p1

    move-object/from16 v2, v18

    const/4 v8, 0x0

    goto/16 :goto_6

    :cond_12
    const-string v1, "database-version"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_13

    .line 3456
    sget-object v1, Landroid/os/storage/StorageManager;->UUID_PRIVATE_INTERNAL:Ljava/lang/String;

    invoke-virtual {v7, v1}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v1

    .line 3458
    .restart local v1    # "internal":Lcom/android/server/pm/Settings$VersionInfo;
    invoke-virtual {v7, v14}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v3

    .line 3461
    .local v3, "external":Lcom/android/server/pm/Settings$VersionInfo;
    const/4 v8, 0x0

    invoke-interface {v15, v2, v6, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v4

    iput v4, v1, Lcom/android/server/pm/Settings$VersionInfo;->databaseVersion:I

    .line 3462
    invoke-interface {v15, v2, v5, v8}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;I)I

    move-result v2

    iput v2, v3, Lcom/android/server/pm/Settings$VersionInfo;->databaseVersion:I

    .line 3464
    .end local v1    # "internal":Lcom/android/server/pm/Settings$VersionInfo;
    .end local v3    # "external":Lcom/android/server/pm/Settings$VersionInfo;
    move-object/from16 v3, p1

    move-object/from16 v2, v18

    goto/16 :goto_6

    :cond_13
    const/4 v8, 0x0

    const-string/jumbo v1, "verifier"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_14

    .line 3465
    const-string v1, "device"

    invoke-interface {v15, v2, v1}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v1

    .line 3466
    .local v1, "deviceIdentity":Ljava/lang/String;
    invoke-static {v1}, Landroid/content/pm/VerifierDeviceIdentity;->parse(Ljava/lang/String;)Landroid/content/pm/VerifierDeviceIdentity;

    move-result-object v2

    iput-object v2, v7, Lcom/android/server/pm/Settings;->mVerifierDeviceIdentity:Landroid/content/pm/VerifierDeviceIdentity;

    .line 3467
    .end local v1    # "deviceIdentity":Ljava/lang/String;
    :goto_5
    move-object/from16 v3, p1

    move-object/from16 v2, v18

    goto/16 :goto_6

    :cond_14
    const-string/jumbo v1, "read-external-storage"

    invoke-virtual {v1, v12}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_15

    goto :goto_5

    .line 3469
    :cond_15
    const-string/jumbo v1, "keyset-settings"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_16

    .line 3470
    iget-object v1, v7, Lcom/android/server/pm/Settings;->mKeySetManagerService:Lcom/android/server/pm/KeySetManagerService;

    invoke-virtual {v1, v15, v9}, Lcom/android/server/pm/KeySetManagerService;->readKeySetsLPw(Lcom/android/modules/utils/TypedXmlPullParser;Landroid/util/ArrayMap;)V

    move-object/from16 v3, p1

    move-object/from16 v2, v18

    goto/16 :goto_6

    .line 3471
    :cond_16
    const-string/jumbo v1, "version"

    invoke-virtual {v1, v12}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_17

    .line 3472
    const-string/jumbo v1, "volumeUuid"

    invoke-static {v15, v1}, Lcom/android/internal/util/XmlUtils;->readStringAttribute(Lorg/xmlpull/v1/XmlPullParser;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v1

    .line 3474
    .local v1, "volumeUuid":Ljava/lang/String;
    invoke-virtual {v7, v1}, Lcom/android/server/pm/Settings;->findOrCreateVersion(Ljava/lang/String;)Lcom/android/server/pm/Settings$VersionInfo;

    move-result-object v5

    .line 3475
    .local v5, "ver":Lcom/android/server/pm/Settings$VersionInfo;
    const-string/jumbo v6, "sdkVersion"

    invoke-interface {v15, v2, v6}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;)I

    move-result v6

    iput v6, v5, Lcom/android/server/pm/Settings$VersionInfo;->sdkVersion:I

    .line 3476
    const-string v6, "databaseVersion"

    invoke-interface {v15, v2, v6}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeInt(Ljava/lang/String;Ljava/lang/String;)I

    move-result v2

    iput v2, v5, Lcom/android/server/pm/Settings$VersionInfo;->databaseVersion:I

    .line 3477
    invoke-static {v15, v4}, Lcom/android/internal/util/XmlUtils;->readStringAttribute(Lorg/xmlpull/v1/XmlPullParser;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v2

    iput-object v2, v5, Lcom/android/server/pm/Settings$VersionInfo;->buildFingerprint:Ljava/lang/String;

    .line 3479
    invoke-static {v15, v3}, Lcom/android/internal/util/XmlUtils;->readStringAttribute(Lorg/xmlpull/v1/XmlPullParser;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v2

    iput-object v2, v5, Lcom/android/server/pm/Settings$VersionInfo;->fingerprint:Ljava/lang/String;

    .line 3480
    .end local v1    # "volumeUuid":Ljava/lang/String;
    .end local v5    # "ver":Lcom/android/server/pm/Settings$VersionInfo;
    move-object/from16 v3, p1

    move-object/from16 v2, v18

    goto :goto_6

    :cond_17
    const-string v1, "domain-verifications"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_18

    .line 3482
    iget-object v1, v7, Lcom/android/server/pm/Settings;->mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;
    :try_end_5
    .catch Ljava/io/IOException; {:try_start_5 .. :try_end_5} :catch_0
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_5 .. :try_end_5} :catch_0
    .catch Ljava/lang/ArrayIndexOutOfBoundsException; {:try_start_5 .. :try_end_5} :catch_0
    .catch Ljava/lang/IllegalArgumentException; {:try_start_5 .. :try_end_5} :catch_0
    .catchall {:try_start_5 .. :try_end_5} :catchall_0

    move-object/from16 v3, p1

    :try_start_6
    invoke-interface {v1, v3, v15}, Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;->readSettings(Lcom/android/server/pm/Computer;Lcom/android/modules/utils/TypedXmlPullParser;)V

    move-object/from16 v2, v18

    goto :goto_6

    .line 3372
    .end local v12    # "tagName":Ljava/lang/String;
    .end local v13    # "str":Ljava/io/FileInputStream;
    .end local v15    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v16    # "type":I
    .end local v17    # "outerDepth":I
    :catchall_1
    move-exception v0

    goto/16 :goto_0

    .line 3494
    .restart local v13    # "str":Ljava/io/FileInputStream;
    :catch_1
    move-exception v0

    goto/16 :goto_1

    .line 3483
    .restart local v12    # "tagName":Ljava/lang/String;
    .restart local v15    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v16    # "type":I
    .restart local v17    # "outerDepth":I
    :cond_18
    move-object/from16 v3, p1

    const-string v1, "domain-verifications-legacy"

    invoke-virtual {v12, v1}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v1

    if-eqz v1, :cond_19

    .line 3485
    iget-object v1, v7, Lcom/android/server/pm/Settings;->mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;

    invoke-interface {v1, v15}, Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;->readLegacySettings(Lcom/android/modules/utils/TypedXmlPullParser;)V

    move-object/from16 v2, v18

    goto :goto_6

    .line 3487
    :cond_19
    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "Unknown element under <packages>: "

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3488
    invoke-interface {v15}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    .line 3487
    move-object/from16 v2, v18

    invoke-static {v2, v1}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 3489
    invoke-static {v15}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 3491
    .end local v12    # "tagName":Ljava/lang/String;
    :goto_6
    goto :goto_7

    .line 3402
    .end local v15    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v16    # "type":I
    .end local v17    # "outerDepth":I
    .local v3, "type":I
    .restart local v4    # "outerDepth":I
    .restart local v6    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    :cond_1a
    move/from16 v16, v3

    move/from16 v17, v4

    move-object v2, v5

    move v8, v15

    move-object/from16 v3, p1

    move-object v15, v6

    .line 3400
    :goto_7
    move-object v5, v2

    move-object v6, v15

    move/from16 v3, v16

    move/from16 v4, v17

    const/4 v12, 0x1

    move v15, v8

    move-object/from16 v8, p2

    .end local v3    # "type":I
    .end local v4    # "outerDepth":I
    .end local v6    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v15    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v16    # "type":I
    .restart local v17    # "outerDepth":I
    goto/16 :goto_3

    .end local v15    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v16    # "type":I
    .end local v17    # "outerDepth":I
    .restart local v3    # "type":I
    .restart local v4    # "outerDepth":I
    .restart local v6    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    :cond_1b
    move/from16 v16, v3

    move/from16 v17, v4

    move-object v15, v6

    move-object/from16 v3, p1

    .line 3493
    .end local v3    # "type":I
    .end local v4    # "outerDepth":I
    .end local v6    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v15    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .restart local v16    # "type":I
    .restart local v17    # "outerDepth":I
    :goto_8
    invoke-virtual {v13}, Ljava/io/FileInputStream;->close()V
    :try_end_6
    .catch Ljava/io/IOException; {:try_start_6 .. :try_end_6} :catch_1
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_6 .. :try_end_6} :catch_1
    .catch Ljava/lang/ArrayIndexOutOfBoundsException; {:try_start_6 .. :try_end_6} :catch_1
    .catch Ljava/lang/IllegalArgumentException; {:try_start_6 .. :try_end_6} :catch_1
    .catchall {:try_start_6 .. :try_end_6} :catchall_1

    .line 3501
    .end local v15    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v16    # "type":I
    .end local v17    # "outerDepth":I
    goto :goto_a

    .line 3494
    .end local v13    # "str":Ljava/io/FileInputStream;
    .local v2, "str":Ljava/io/FileInputStream;
    :catch_2
    move-exception v0

    move-object/from16 v3, p1

    move-object v1, v0

    .line 3497
    .local v1, "e":Ljava/lang/Exception;
    :goto_9
    :try_start_7
    invoke-virtual {v11, v2, v1}, Lcom/android/server/pm/ResilientAtomicFile;->failRead(Ljava/io/FileInputStream;Ljava/lang/Exception;)V

    .line 3500
    invoke-virtual/range {p0 .. p3}, Lcom/android/server/pm/Settings;->readSettingsLPw(Lcom/android/server/pm/Computer;Ljava/util/List;Landroid/util/ArrayMap;)Z
    :try_end_7
    .catchall {:try_start_7 .. :try_end_7} :catchall_1

    .line 3502
    .end local v1    # "e":Ljava/lang/Exception;
    .end local v2    # "str":Ljava/io/FileInputStream;
    :goto_a
    if-eqz v11, :cond_1c

    invoke-virtual {v11}, Lcom/android/server/pm/ResilientAtomicFile;->close()V

    .line 3504
    .end local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :cond_1c
    const/4 v1, 0x1

    return v1

    .line 3372
    .restart local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :goto_b
    if-eqz v11, :cond_1d

    :try_start_8
    invoke-virtual {v11}, Lcom/android/server/pm/ResilientAtomicFile;->close()V
    :try_end_8
    .catchall {:try_start_8 .. :try_end_8} :catchall_2

    goto :goto_c

    :catchall_2
    move-exception v0

    move-object v2, v0

    invoke-virtual {v1, v2}, Ljava/lang/Throwable;->addSuppressed(Ljava/lang/Throwable;)V

    :cond_1d
    :goto_c
    throw v1
.end method

.method readStoppedLPw()V
    .locals 16

    .line 2693
    move-object/from16 v1, p0

    const/4 v2, 0x0

    .line 2694
    .local v2, "str":Ljava/io/FileInputStream;
    iget-object v0, v1, Lcom/android/server/pm/Settings;->mBackupStoppedPackagesFilename:Ljava/io/File;

    invoke-virtual {v0}, Ljava/io/File;->exists()Z

    move-result v0

    const/4 v3, 0x4

    const-string v4, "PackageManager"

    if-eqz v0, :cond_1

    .line 2696
    :try_start_0
    new-instance v0, Ljava/io/FileInputStream;

    iget-object v5, v1, Lcom/android/server/pm/Settings;->mBackupStoppedPackagesFilename:Ljava/io/File;

    invoke-direct {v0, v5}, Ljava/io/FileInputStream;-><init>(Ljava/io/File;)V

    move-object v2, v0

    .line 2697
    iget-object v0, v1, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    const-string v5, "Reading from backup stopped packages file\n"

    invoke-virtual {v0, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 2698
    const-string v0, "Need to read from backup stopped packages file"

    invoke-static {v3, v0}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 2700
    iget-object v0, v1, Lcom/android/server/pm/Settings;->mStoppedPackagesFilename:Ljava/io/File;

    invoke-virtual {v0}, Ljava/io/File;->exists()Z

    move-result v0

    if-eqz v0, :cond_0

    .line 2704
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string v5, "Cleaning up stopped packages file "

    invoke-virtual {v0, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object v5, v1, Lcom/android/server/pm/Settings;->mStoppedPackagesFilename:Ljava/io/File;

    invoke-virtual {v0, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v4, v0}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 2706
    iget-object v0, v1, Lcom/android/server/pm/Settings;->mStoppedPackagesFilename:Ljava/io/File;

    invoke-virtual {v0}, Ljava/io/File;->delete()Z
    :try_end_0
    .catch Ljava/io/IOException; {:try_start_0 .. :try_end_0} :catch_0

    goto :goto_0

    .line 2708
    :catch_0
    move-exception v0

    goto :goto_1

    .line 2710
    :cond_0
    :goto_0
    nop

    .line 2714
    :cond_1
    :goto_1
    const-string v5, "Error reading package manager stopped packages"

    const-string v6, "Error reading stopped packages: "

    const-string v8, "Error reading: "

    const/4 v0, 0x0

    if-nez v2, :cond_4

    .line 2715
    :try_start_1
    iget-object v9, v1, Lcom/android/server/pm/Settings;->mStoppedPackagesFilename:Ljava/io/File;

    invoke-virtual {v9}, Ljava/io/File;->exists()Z

    move-result v9

    if-nez v9, :cond_3

    .line 2716
    iget-object v9, v1, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    const-string v10, "No stopped packages file found\n"

    invoke-virtual {v9, v10}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 2717
    const-string v9, "No stopped packages file file; assuming all started"

    invoke-static {v3, v9}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 2722
    iget-object v3, v1, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v3}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v3

    invoke-interface {v3}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v3

    :goto_2
    invoke-interface {v3}, Ljava/util/Iterator;->hasNext()Z

    move-result v9

    if-eqz v9, :cond_2

    invoke-interface {v3}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v9

    check-cast v9, Lcom/android/server/pm/PackageSetting;

    .line 2723
    .local v9, "pkg":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v9, v0, v0}, Lcom/android/server/pm/PackageSetting;->setStopped(ZI)V

    .line 2724
    invoke-virtual {v9, v0, v0}, Lcom/android/server/pm/PackageSetting;->setNotLaunched(ZI)V

    .line 2725
    .end local v9    # "pkg":Lcom/android/server/pm/PackageSetting;
    goto :goto_2

    .line 2784
    :catch_1
    move-exception v0

    goto/16 :goto_9

    .line 2777
    :catch_2
    move-exception v0

    goto/16 :goto_a

    .line 2726
    :cond_2
    return-void

    .line 2728
    :cond_3
    new-instance v9, Ljava/io/FileInputStream;

    iget-object v10, v1, Lcom/android/server/pm/Settings;->mStoppedPackagesFilename:Ljava/io/File;

    invoke-direct {v9, v10}, Ljava/io/FileInputStream;-><init>(Ljava/io/File;)V

    move-object v2, v9

    .line 2730
    :cond_4
    invoke-static {v2}, Landroid/util/Xml;->resolvePullParser(Ljava/io/InputStream;)Lcom/android/modules/utils/TypedXmlPullParser;

    move-result-object v9

    .line 2733
    .local v9, "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    :goto_3
    invoke-interface {v9}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v10

    move v11, v10

    .local v11, "type":I
    const/4 v12, 0x2

    const/4 v13, 0x1

    if-eq v10, v12, :cond_5

    if-eq v11, v13, :cond_5

    goto :goto_3

    .line 2738
    :cond_5
    if-eq v11, v12, :cond_6

    .line 2739
    iget-object v0, v1, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    const-string v3, "No start tag found in stopped packages file\n"

    invoke-virtual {v0, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 2740
    const-string v0, "No start tag found in package manager stopped packages"

    const/4 v3, 0x5

    invoke-static {v3, v0}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 2742
    return-void

    .line 2745
    :cond_6
    invoke-interface {v9}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v10

    .line 2746
    .local v10, "outerDepth":I
    :goto_4
    invoke-interface {v9}, Lcom/android/modules/utils/TypedXmlPullParser;->next()I

    move-result v12

    move v11, v12

    nop

    if-eq v12, v13, :cond_d

    const/4 v12, 0x3

    if-ne v11, v12, :cond_7

    .line 2748
    invoke-interface {v9}, Lcom/android/modules/utils/TypedXmlPullParser;->getDepth()I

    move-result v14

    if-le v14, v10, :cond_d

    .line 2749
    :cond_7
    nop

    nop

    if-eq v11, v12, :cond_c

    if-ne v11, v3, :cond_8

    .line 2751
    goto :goto_7

    .line 2754
    :cond_8
    invoke-interface {v9}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v12

    .line 2755
    .local v12, "tagName":Ljava/lang/String;
    const-string/jumbo v14, "pkg"

    invoke-virtual {v12, v14}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v14

    if-eqz v14, :cond_b

    .line 2756
    const-string/jumbo v14, "name"

    const/4 v15, 0x0

    invoke-interface {v9, v15, v14}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v14

    .line 2757
    .local v14, "name":Ljava/lang/String;
    iget-object v3, v1, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v3, v14}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Lcom/android/server/pm/PackageSetting;

    .line 2758
    .local v3, "ps":Lcom/android/server/pm/PackageSetting;
    if-eqz v3, :cond_a

    .line 2759
    invoke-virtual {v3, v13, v0}, Lcom/android/server/pm/PackageSetting;->setStopped(ZI)V

    .line 2760
    const-string v7, "1"

    const-string/jumbo v0, "nl"

    invoke-interface {v9, v15, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v7, v0}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_9

    .line 2761
    const/4 v0, 0x0

    invoke-virtual {v3, v13, v0}, Lcom/android/server/pm/PackageSetting;->setNotLaunched(ZI)V

    goto :goto_5

    .line 2760
    :cond_9
    const/4 v0, 0x0

    goto :goto_5

    .line 2764
    :cond_a
    new-instance v7, Ljava/lang/StringBuilder;

    invoke-direct {v7}, Ljava/lang/StringBuilder;-><init>()V

    const-string v15, "No package known for stopped package "

    invoke-virtual {v7, v15}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v7, v14}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v7}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v7

    invoke-static {v4, v7}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 2767
    :goto_5
    invoke-static {v9}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 2768
    .end local v3    # "ps":Lcom/android/server/pm/PackageSetting;
    .end local v14    # "name":Ljava/lang/String;
    goto :goto_6

    .line 2769
    :cond_b
    new-instance v3, Ljava/lang/StringBuilder;

    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V

    const-string v7, "Unknown element under <stopped-packages>: "

    invoke-virtual {v3, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 2770
    invoke-interface {v9}, Lcom/android/modules/utils/TypedXmlPullParser;->getName()Ljava/lang/String;

    move-result-object v7

    invoke-virtual {v3, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    .line 2769
    invoke-static {v4, v3}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 2771
    invoke-static {v9}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 2773
    .end local v12    # "tagName":Ljava/lang/String;
    :goto_6
    nop

    .line 2746
    :cond_c
    :goto_7
    const/4 v3, 0x4

    goto/16 :goto_4

    .line 2775
    :cond_d
    invoke-virtual {v2}, Ljava/io/FileInputStream;->close()V
    :try_end_1
    .catch Lorg/xmlpull/v1/XmlPullParserException; {:try_start_1 .. :try_end_1} :catch_2
    .catch Ljava/io/IOException; {:try_start_1 .. :try_end_1} :catch_1

    .line 2791
    .end local v9    # "parser":Lcom/android/modules/utils/TypedXmlPullParser;
    .end local v10    # "outerDepth":I
    .end local v11    # "type":I
    :goto_8
    goto :goto_b

    .line 2784
    :goto_9
    nop

    .line 2785
    .local v0, "e":Ljava/io/IOException;
    iget-object v3, v1, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    new-instance v7, Ljava/lang/StringBuilder;

    invoke-direct {v7}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v7, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/Object;->toString()Ljava/lang/String;

    move-result-object v8

    invoke-virtual {v7, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v7}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v7

    invoke-virtual {v3, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 2786
    new-instance v3, Ljava/lang/StringBuilder;

    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v3, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    const/4 v6, 0x6

    invoke-static {v6, v3}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 2788
    invoke-static {v4, v5, v0}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I

    goto :goto_b

    .line 2777
    .end local v0    # "e":Ljava/io/IOException;
    :goto_a
    nop

    .line 2778
    .local v0, "e":Lorg/xmlpull/v1/XmlPullParserException;
    iget-object v3, v1, Lcom/android/server/pm/Settings;->mReadMessages:Ljava/lang/StringBuilder;

    new-instance v7, Ljava/lang/StringBuilder;

    invoke-direct {v7}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v7, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/Object;->toString()Ljava/lang/String;

    move-result-object v8

    invoke-virtual {v7, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v7}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v7

    invoke-virtual {v3, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 2779
    new-instance v3, Ljava/lang/StringBuilder;

    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v3, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    const/4 v6, 0x6

    invoke-static {v6, v3}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 2781
    invoke-static {v4, v5, v0}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I

    .end local v0    # "e":Lorg/xmlpull/v1/XmlPullParserException;
    goto :goto_8

    .line 2792
    :goto_b
    return-void
.end method

.method readUsesSdkLibLPw(Lcom/android/modules/utils/TypedXmlPullParser;Lcom/android/server/pm/PackageSetting;)V
    .locals 6
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .param p2, "outPs"    # Lcom/android/server/pm/PackageSetting;
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;,
            Lorg/xmlpull/v1/XmlPullParserException;
        }
    .end annotation

    .line 2623
    const-string/jumbo v0, "name"

    const/4 v1, 0x0

    invoke-interface {p1, v1, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    .line 2624
    .local v0, "libName":Ljava/lang/String;
    const-string/jumbo v2, "version"

    const-wide/16 v3, -0x1

    invoke-interface {p1, v1, v2, v3, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLong(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v2

    .line 2625
    .local v2, "libVersion":J
    const-string/jumbo v4, "optional"

    const/4 v5, 0x1

    invoke-interface {p1, v1, v4, v5}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Z

    move-result v1

    .line 2627
    .local v1, "optional":Z
    if-eqz v0, :cond_0

    const-wide/16 v4, 0x0

    cmp-long v4, v2, v4

    if-ltz v4, :cond_0

    .line 2628
    nop

    .line 2629
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getUsesSdkLibraries()[Ljava/lang/String;

    move-result-object v4

    .line 2628
    const-class v5, Ljava/lang/String;

    invoke-static {v5, v4, v0}, Lcom/android/internal/util/ArrayUtils;->appendElement(Ljava/lang/Class;[Ljava/lang/Object;Ljava/lang/Object;)[Ljava/lang/Object;

    move-result-object v4

    check-cast v4, [Ljava/lang/String;

    invoke-virtual {p2, v4}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibraries([Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 2630
    nop

    .line 2631
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getUsesSdkLibrariesVersionsMajor()[J

    move-result-object v4

    .line 2630
    invoke-static {v4, v2, v3}, Lcom/android/internal/util/ArrayUtils;->appendLong([JJ)[J

    move-result-object v4

    invoke-virtual {p2, v4}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibrariesVersionsMajor([J)Lcom/android/server/pm/PackageSetting;

    .line 2632
    nop

    .line 2633
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getUsesSdkLibrariesOptional()[Z

    move-result-object v4

    .line 2632
    invoke-static {v4, v1}, Lcom/android/internal/util/ArrayUtils;->appendBoolean([ZZ)[Z

    move-result-object v4

    invoke-virtual {p2, v4}, Lcom/android/server/pm/PackageSetting;->setUsesSdkLibrariesOptional([Z)Lcom/android/server/pm/PackageSetting;

    .line 2636
    :cond_0
    invoke-static {p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 2637
    return-void
.end method

.method readUsesStaticLibLPw(Lcom/android/modules/utils/TypedXmlPullParser;Lcom/android/server/pm/PackageSetting;)V
    .locals 5
    .param p1, "parser"    # Lcom/android/modules/utils/TypedXmlPullParser;
    .param p2, "outPs"    # Lcom/android/server/pm/PackageSetting;
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;,
            Lorg/xmlpull/v1/XmlPullParserException;
        }
    .end annotation

    .line 2641
    const-string/jumbo v0, "name"

    const/4 v1, 0x0

    invoke-interface {p1, v1, v0}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeValue(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    .line 2642
    .local v0, "libName":Ljava/lang/String;
    const-string/jumbo v2, "version"

    const-wide/16 v3, -0x1

    invoke-interface {p1, v1, v2, v3, v4}, Lcom/android/modules/utils/TypedXmlPullParser;->getAttributeLong(Ljava/lang/String;Ljava/lang/String;J)J

    move-result-wide v1

    .line 2644
    .local v1, "libVersion":J
    if-eqz v0, :cond_0

    const-wide/16 v3, 0x0

    cmp-long v3, v1, v3

    if-ltz v3, :cond_0

    .line 2645
    nop

    .line 2646
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getUsesStaticLibraries()[Ljava/lang/String;

    move-result-object v3

    .line 2645
    const-class v4, Ljava/lang/String;

    invoke-static {v4, v3, v0}, Lcom/android/internal/util/ArrayUtils;->appendElement(Ljava/lang/Class;[Ljava/lang/Object;Ljava/lang/Object;)[Ljava/lang/Object;

    move-result-object v3

    check-cast v3, [Ljava/lang/String;

    invoke-virtual {p2, v3}, Lcom/android/server/pm/PackageSetting;->setUsesStaticLibraries([Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    .line 2647
    nop

    .line 2648
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getUsesStaticLibrariesVersions()[J

    move-result-object v3

    .line 2647
    invoke-static {v3, v1, v2}, Lcom/android/internal/util/ArrayUtils;->appendLong([JJ)[J

    move-result-object v3

    invoke-virtual {p2, v3}, Lcom/android/server/pm/PackageSetting;->setUsesStaticLibrariesVersions([J)Lcom/android/server/pm/PackageSetting;

    .line 2651
    :cond_0
    invoke-static {p1}, Lcom/android/internal/util/XmlUtils;->skipCurrentTag(Lorg/xmlpull/v1/XmlPullParser;)V

    .line 2652
    return-void
.end method

.method registerAppIdLPw(Lcom/android/server/pm/PackageSetting;Z)Z
    .locals 5
    .param p1, "p"    # Lcom/android/server/pm/PackageSetting;
    .param p2, "forceNew"    # Z
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Lcom/android/server/pm/PackageManagerException;
        }
    .end annotation

    .line 1361
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v0

    if-eqz v0, :cond_0

    if-eqz p2, :cond_1

    :cond_0
    goto :goto_0

    .line 1367
    :cond_1
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v1

    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v1, p1, v2}, Lcom/android/server/pm/AppIdSettingMap;->registerExistingAppId(ILcom/android/server/pm/SettingBase;Ljava/lang/Object;)Z

    move-result v0

    .local v0, "createdNew":Z
    goto :goto_1

    .line 1363
    .end local v0    # "createdNew":Z
    :goto_0
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    invoke-virtual {v0, p1}, Lcom/android/server/pm/AppIdSettingMap;->acquireAndRegisterNewAppId(Lcom/android/server/pm/SettingBase;)I

    move-result v0

    invoke-virtual {p1, v0}, Lcom/android/server/pm/PackageSetting;->setAppId(I)Lcom/android/server/pm/PackageSetting;

    .line 1364
    const/4 v0, 0x1

    .line 1369
    .restart local v0    # "createdNew":Z
    :goto_1
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v1

    if-ltz v1, :cond_2

    .line 1375
    return v0

    .line 1370
    :cond_2
    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "Package "

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1371
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v3

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v3, " could not be assigned a valid UID"

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    .line 1370
    const/4 v4, 0x5

    invoke-static {v4, v1}, Lcom/android/server/pm/PackageManagerService;->reportSettingsProblem(ILjava/lang/String;)V

    .line 1372
    new-instance v1, Lcom/android/server/pm/PackageManagerException;

    new-instance v4, Ljava/lang/StringBuilder;

    invoke-direct {v4}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 1373
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v4, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    const/4 v3, -0x4

    invoke-direct {v1, v3, v2}, Lcom/android/server/pm/PackageManagerException;-><init>(ILjava/lang/String;)V

    throw v1
.end method

.method public registerObserver(Lcom/android/server/utils/Watcher;)V
    .locals 1
    .param p1, "observer"    # Lcom/android/server/utils/Watcher;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param

    .line 200
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mWatchable:Lcom/android/server/utils/WatchableImpl;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchableImpl;->registerObserver(Lcom/android/server/utils/Watcher;)V

    .line 201
    return-void
.end method

.method removeAppIdLPw(I)V
    .locals 1
    .param p1, "appId"    # I

    .line 1523
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mAppIds:Lcom/android/server/pm/AppIdSettingMap;

    invoke-virtual {v0, p1}, Lcom/android/server/pm/AppIdSettingMap;->removeSetting(I)V

    .line 1524
    return-void
.end method

.method removeCrossProfileIntentFiltersLPw(I)V
    .locals 10
    .param p1, "userId"    # I

    .line 4753
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    monitor-enter v0

    .line 4755
    :try_start_0
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, p1}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v1

    if-eqz v1, :cond_0

    .line 4756
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, p1}, Lcom/android/server/utils/WatchedSparseArray;->remove(I)V

    .line 4757
    invoke-virtual {p0, p1}, Lcom/android/server/pm/Settings;->writePackageRestrictionsLPr(I)V

    goto :goto_0

    .line 4777
    :catchall_0
    move-exception v1

    goto :goto_3

    .line 4760
    :cond_0
    :goto_0
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1}, Lcom/android/server/utils/WatchedSparseArray;->size()I

    move-result v1

    .line 4761
    .local v1, "count":I
    const/4 v2, 0x0

    .local v2, "i":I
    :goto_1
    if-ge v2, v1, :cond_4

    .line 4762
    iget-object v3, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v3, v2}, Lcom/android/server/utils/WatchedSparseArray;->keyAt(I)I

    move-result v3

    .line 4763
    .local v3, "sourceUserId":I
    iget-object v4, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v4, v3}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/android/server/pm/CrossProfileIntentResolver;

    .line 4764
    .local v4, "cpir":Lcom/android/server/pm/CrossProfileIntentResolver;
    const/4 v5, 0x0

    .line 4765
    .local v5, "needsWriting":Z
    new-instance v6, Landroid/util/ArraySet;

    .line 4766
    invoke-virtual {v4}, Lcom/android/server/IntentResolver;->filterSet()Ljava/util/Set;

    move-result-object v7

    invoke-direct {v6, v7}, Landroid/util/ArraySet;-><init>(Ljava/util/Collection;)V

    .line 4767
    .local v6, "cpifs":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Lcom/android/server/pm/CrossProfileIntentFilter;>;"
    invoke-virtual {v6}, Landroid/util/ArraySet;->iterator()Ljava/util/Iterator;

    move-result-object v7

    :goto_2
    invoke-interface {v7}, Ljava/util/Iterator;->hasNext()Z

    move-result v8

    if-eqz v8, :cond_2

    invoke-interface {v7}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v8

    check-cast v8, Lcom/android/server/pm/CrossProfileIntentFilter;

    .line 4768
    .local v8, "cpif":Lcom/android/server/pm/CrossProfileIntentFilter;
    invoke-virtual {v8}, Lcom/android/server/pm/CrossProfileIntentFilter;->getTargetUserId()I

    move-result v9

    if-ne v9, p1, :cond_1

    .line 4769
    const/4 v5, 0x1

    .line 4770
    invoke-virtual {v4, v8}, Lcom/android/server/pm/WatchedIntentResolver;->removeFilter(Lcom/android/server/pm/WatchedIntentFilter;)V

    .line 4772
    .end local v8    # "cpif":Lcom/android/server/pm/CrossProfileIntentFilter;
    :cond_1
    goto :goto_2

    .line 4773
    :cond_2
    if-eqz v5, :cond_3

    .line 4774
    invoke-virtual {p0, v3}, Lcom/android/server/pm/Settings;->writePackageRestrictionsLPr(I)V

    .line 4761
    .end local v3    # "sourceUserId":I
    .end local v4    # "cpir":Lcom/android/server/pm/CrossProfileIntentResolver;
    .end local v5    # "needsWriting":Z
    .end local v6    # "cpifs":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Lcom/android/server/pm/CrossProfileIntentFilter;>;"
    :cond_3
    add-int/lit8 v2, v2, 0x1

    goto :goto_1

    :cond_4
    nop

    .line 4777
    .end local v1    # "count":I
    .end local v2    # "i":I
    monitor-exit v0

    .line 4778
    return-void

    .line 4777
    :goto_3
    monitor-exit v0
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    throw v1
.end method

.method removeDisabledSystemPackageLPw(Ljava/lang/String;)V
    .locals 3
    .param p1, "name"    # Ljava/lang/String;

    .line 974
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->remove(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PackageSetting;

    .line 975
    .local v0, "p":Lcom/android/server/pm/PackageSetting;
    if-eqz v0, :cond_0

    .line 976
    invoke-virtual {p0, v0}, Lcom/android/server/pm/Settings;->getSharedUserSettingLPr(Lcom/android/server/pm/PackageSetting;)Lcom/android/server/pm/SharedUserSetting;

    move-result-object v1

    .line 977
    .local v1, "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    if-eqz v1, :cond_0

    .line 978
    iget-object v2, v1, Lcom/android/server/pm/SharedUserSetting;->mDisabledPackages:Lcom/android/server/utils/WatchedArraySet;

    invoke-virtual {v2, v0}, Lcom/android/server/utils/WatchedArraySet;->remove(Ljava/lang/Object;)Z

    .line 979
    const/4 v2, 0x0

    invoke-virtual {p0, v1, v2}, Lcom/android/server/pm/Settings;->checkAndPruneSharedUserLPw(Lcom/android/server/pm/SharedUserSetting;Z)Z

    .line 982
    .end local v1    # "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    :cond_0
    return-void
.end method

.method removePackageAndAppIdLPw(Ljava/lang/String;)Z
    .locals 3
    .param p1, "name"    # Ljava/lang/String;

    .line 1486
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->remove(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/PackageSetting;

    .line 1487
    .local v0, "p":Lcom/android/server/pm/PackageSetting;
    const/4 v1, 0x0

    if-eqz v0, :cond_1

    .line 1488
    invoke-direct {p0, p1}, Lcom/android/server/pm/Settings;->removeInstallerPackageStatus(Ljava/lang/String;)V

    .line 1489
    invoke-virtual {p0, v0}, Lcom/android/server/pm/Settings;->getSharedUserSettingLPr(Lcom/android/server/pm/PackageSetting;)Lcom/android/server/pm/SharedUserSetting;

    move-result-object v2

    .line 1490
    .local v2, "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    if-eqz v2, :cond_0

    .line 1491
    invoke-virtual {v2, v0}, Lcom/android/server/pm/SharedUserSetting;->removePackage(Lcom/android/server/pm/PackageSetting;)Z

    .line 1492
    invoke-virtual {p0, v2, v1}, Lcom/android/server/pm/Settings;->checkAndPruneSharedUserLPw(Lcom/android/server/pm/SharedUserSetting;Z)Z

    move-result v1

    return v1

    .line 1494
    :cond_0
    invoke-virtual {v0}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v1

    invoke-virtual {p0, v1}, Lcom/android/server/pm/Settings;->removeAppIdLPw(I)V

    .line 1495
    const/4 v1, 0x1

    return v1

    .line 1498
    .end local v2    # "sharedUserSetting":Lcom/android/server/pm/SharedUserSetting;
    :cond_1
    return v1
.end method

.method removePendingDefaultBrowserLPw(I)Ljava/lang/String;
    .locals 1
    .param p1, "userId"    # I

    .line 1590
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPendingDefaultBrowser:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedSparseArray;->removeReturnOld(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Ljava/lang/String;

    return-object v0
.end method

.method removeRenamedPackageLPw(Ljava/lang/String;)V
    .locals 1
    .param p1, "pkgName"    # Ljava/lang/String;

    .line 861
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->remove(Ljava/lang/Object;)Ljava/lang/Object;

    .line 862
    return-void
.end method

.method removeUserLPw(I)V
    .locals 4
    .param p1, "userId"    # I

    .line 4729
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0}, Lcom/android/server/utils/WatchedArrayMap;->entrySet()Ljava/util/Set;

    move-result-object v0

    .line 4730
    .local v0, "entries":Ljava/util/Set;, "Ljava/util/Set<Ljava/util/Map$Entry<Ljava/lang/String;Lcom/android/server/pm/PackageSetting;>;>;"
    invoke-interface {v0}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_0
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v2

    if-eqz v2, :cond_0

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Ljava/util/Map$Entry;

    .line 4731
    .local v2, "entry":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Ljava/lang/String;Lcom/android/server/pm/PackageSetting;>;"
    invoke-interface {v2}, Ljava/util/Map$Entry;->getValue()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Lcom/android/server/pm/PackageSetting;

    invoke-virtual {v3, p1}, Lcom/android/server/pm/PackageSetting;->removeUser(I)V

    .line 4732
    .end local v2    # "entry":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Ljava/lang/String;Lcom/android/server/pm/PackageSetting;>;"
    goto :goto_0

    .line 4733
    :cond_0
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, p1}, Lcom/android/server/utils/WatchedSparseArray;->remove(I)V

    .line 4735
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackageRestrictionsLock:Ljava/lang/Object;

    monitor-enter v1

    .line 4736
    :try_start_0
    invoke-direct {p0, p1}, Lcom/android/server/pm/Settings;->getUserPackagesStateFile(I)Lcom/android/server/pm/ResilientAtomicFile;

    move-result-object v2

    invoke-virtual {v2}, Lcom/android/server/pm/ResilientAtomicFile;->delete()V

    .line 4737
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPendingAsyncPackageRestrictionsWrites:Landroid/util/SparseIntArray;

    invoke-virtual {v2, p1}, Landroid/util/SparseIntArray;->delete(I)V

    .line 4738
    monitor-exit v1
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    .line 4740
    invoke-virtual {p0, p1}, Lcom/android/server/pm/Settings;->removeCrossProfileIntentFiltersLPw(I)V

    .line 4742
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    invoke-static {v1, p1}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;->-$$Nest$monUserRemoved(Lcom/android/server/pm/Settings$RuntimePermissionPersistence;I)V

    .line 4743
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;

    invoke-interface {v1, p1}, Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;->clearUser(I)V

    .line 4745
    invoke-virtual {p0}, Lcom/android/server/pm/Settings;->writePackageListLPr()V

    .line 4749
    invoke-direct {p0, p1}, Lcom/android/server/pm/Settings;->writeKernelRemoveUserLPr(I)V

    .line 4750
    return-void

    .line 4738
    :catchall_0
    move-exception v2

    :try_start_1
    monitor-exit v1
    :try_end_1
    .catchall {:try_start_1 .. :try_end_1} :catchall_0

    throw v2
.end method

.method setBlockUninstallLPw(ILjava/lang/String;Z)V
    .locals 2
    .param p1, "userId"    # I
    .param p2, "packageName"    # Ljava/lang/String;
    .param p3, "blockUninstall"    # Z

    .line 2201
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Landroid/util/ArraySet;

    .line 2202
    .local v0, "packages":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    if-eqz p3, :cond_1

    .line 2203
    if-nez v0, :cond_0

    .line 2204
    new-instance v1, Landroid/util/ArraySet;

    invoke-direct {v1}, Landroid/util/ArraySet;-><init>()V

    move-object v0, v1

    .line 2205
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, p1, v0}, Lcom/android/server/utils/WatchedSparseArray;->put(ILjava/lang/Object;)V

    .line 2207
    :cond_0
    invoke-virtual {v0, p2}, Landroid/util/ArraySet;->add(Ljava/lang/Object;)Z

    goto :goto_0

    .line 2208
    :cond_1
    if-eqz v0, :cond_2

    .line 2209
    invoke-virtual {v0, p2}, Landroid/util/ArraySet;->remove(Ljava/lang/Object;)Z

    .line 2210
    invoke-virtual {v0}, Landroid/util/ArraySet;->isEmpty()Z

    move-result v1

    if-eqz v1, :cond_2

    .line 2211
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v1, p1}, Lcom/android/server/utils/WatchedSparseArray;->remove(I)V

    .line 2214
    :cond_2
    :goto_0
    return-void
.end method

.method setDefaultRuntimePermissionsVersion(II)V
    .locals 1
    .param p1, "version"    # I
    .param p2, "userId"    # I

    .line 1661
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    invoke-virtual {v0, p1, p2}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;->setVersion(II)V

    .line 1662
    return-void
.end method

.method setPendingDefaultBrowserLPw(Ljava/lang/String;I)V
    .locals 1
    .param p1, "defaultBrowser"    # Ljava/lang/String;
    .param p2, "userId"    # I

    .line 1586
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPendingDefaultBrowser:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p2, p1}, Lcom/android/server/utils/WatchedSparseArray;->put(ILjava/lang/Object;)V

    .line 1587
    return-void
.end method

.method setPermissionControllerVersion(J)V
    .locals 1
    .param p1, "version"    # J

    .line 1665
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    invoke-virtual {v0, p1, p2}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;->setPermissionControllerVersion(J)V

    .line 1666
    return-void
.end method

.method public snapshot()Lcom/android/server/pm/Settings;
    .locals 1

    .line 827
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mSnapshot:Lcom/android/server/utils/SnapshotCache;

    invoke-virtual {v0}, Lcom/android/server/utils/SnapshotCache;->snapshot()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/Settings;

    return-object v0
.end method

.method public bridge synthetic snapshot()Ljava/lang/Object;
    .locals 1

    .line 185
    invoke-virtual {p0}, Lcom/android/server/pm/Settings;->snapshot()Lcom/android/server/pm/Settings;

    move-result-object v0

    return-object v0
.end method

.method systemReady(Lcom/android/server/pm/resolution/ComponentResolver;)Ljava/util/ArrayList;
    .locals 8
    .param p1, "resolver"    # Lcom/android/server/pm/resolution/ComponentResolver;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/server/pm/resolution/ComponentResolver;",
            ")",
            "Ljava/util/ArrayList<",
            "Ljava/lang/Integer;",
            ">;"
        }
    .end annotation

    .line 6691
    new-instance v0, Ljava/util/ArrayList;

    invoke-direct {v0}, Ljava/util/ArrayList;-><init>()V

    .line 6692
    .local v0, "changed":Ljava/util/ArrayList;, "Ljava/util/ArrayList<Ljava/lang/Integer;>;"
    new-instance v1, Ljava/util/ArrayList;

    invoke-direct {v1}, Ljava/util/ArrayList;-><init>()V

    .line 6693
    .local v1, "removed":Ljava/util/ArrayList;, "Ljava/util/ArrayList<Lcom/android/server/pm/PreferredActivity;>;"
    const/4 v2, 0x0

    .local v2, "i":I
    :goto_0
    iget-object v3, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v3}, Lcom/android/server/utils/WatchedSparseArray;->size()I

    move-result v3

    if-ge v2, v3, :cond_4

    .line 6694
    iget-object v3, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v3, v2}, Lcom/android/server/utils/WatchedSparseArray;->valueAt(I)Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Lcom/android/server/pm/PreferredIntentResolver;

    .line 6695
    .local v3, "pir":Lcom/android/server/pm/PreferredIntentResolver;
    invoke-virtual {v1}, Ljava/util/ArrayList;->clear()V

    .line 6696
    invoke-virtual {v3}, Lcom/android/server/IntentResolver;->filterSet()Ljava/util/Set;

    move-result-object v4

    invoke-interface {v4}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v4

    :goto_1
    invoke-interface {v4}, Ljava/util/Iterator;->hasNext()Z

    move-result v5

    if-eqz v5, :cond_1

    invoke-interface {v4}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Lcom/android/server/pm/PreferredActivity;

    .line 6697
    .local v5, "pa":Lcom/android/server/pm/PreferredActivity;
    iget-object v6, v5, Lcom/android/server/pm/PreferredActivity;->mPref:Lcom/android/server/pm/PreferredComponent;

    iget-object v6, v6, Lcom/android/server/pm/PreferredComponent;->mComponent:Landroid/content/ComponentName;

    invoke-virtual {p1, v6}, Lcom/android/server/pm/resolution/ComponentResolverLocked;->isActivityDefined(Landroid/content/ComponentName;)Z

    move-result v6

    if-nez v6, :cond_0

    .line 6698
    invoke-virtual {v1, v5}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z

    .line 6700
    .end local v5    # "pa":Lcom/android/server/pm/PreferredActivity;
    :cond_0
    goto :goto_1

    .line 6701
    :cond_1
    invoke-virtual {v1}, Ljava/util/ArrayList;->size()I

    move-result v4

    if-lez v4, :cond_3

    .line 6702
    const/4 v4, 0x0

    .local v4, "r":I
    :goto_2
    invoke-virtual {v1}, Ljava/util/ArrayList;->size()I

    move-result v5

    if-ge v4, v5, :cond_2

    .line 6703
    invoke-virtual {v1, v4}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Lcom/android/server/pm/PreferredActivity;

    .line 6704
    .restart local v5    # "pa":Lcom/android/server/pm/PreferredActivity;
    new-instance v6, Ljava/lang/StringBuilder;

    invoke-direct {v6}, Ljava/lang/StringBuilder;-><init>()V

    const-string v7, "Removing dangling preferred activity: "

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object v7, v5, Lcom/android/server/pm/PreferredActivity;->mPref:Lcom/android/server/pm/PreferredComponent;

    iget-object v7, v7, Lcom/android/server/pm/PreferredComponent;->mComponent:Landroid/content/ComponentName;

    invoke-virtual {v6, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v6}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v6

    const-string v7, "PackageSettings"

    invoke-static {v7, v6}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 6706
    invoke-virtual {v3, v5}, Lcom/android/server/pm/WatchedIntentResolver;->removeFilter(Lcom/android/server/pm/WatchedIntentFilter;)V

    .line 6702
    .end local v5    # "pa":Lcom/android/server/pm/PreferredActivity;
    add-int/lit8 v4, v4, 0x1

    goto :goto_2

    :cond_2
    nop

    .line 6708
    .end local v4    # "r":I
    iget-object v4, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v4, v2}, Lcom/android/server/utils/WatchedSparseArray;->keyAt(I)I

    move-result v4

    invoke-static {v4}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v4

    invoke-virtual {v0, v4}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z

    .line 6693
    .end local v3    # "pir":Lcom/android/server/pm/PreferredIntentResolver;
    :cond_3
    add-int/lit8 v2, v2, 0x1

    goto :goto_0

    :cond_4
    nop

    .line 6711
    .end local v2    # "i":I
    invoke-virtual {p0}, Lcom/android/server/pm/Settings;->onChanged()V

    .line 6712
    return-object v0
.end method

.method public unregisterObserver(Lcom/android/server/utils/Watcher;)V
    .locals 1
    .param p1, "observer"    # Lcom/android/server/utils/Watcher;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param

    .line 210
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mWatchable:Lcom/android/server/utils/WatchableImpl;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchableImpl;->unregisterObserver(Lcom/android/server/utils/Watcher;)V

    .line 211
    return-void
.end method

.method updateRuntimePermissionsFingerprint(I)V
    .locals 1
    .param p1, "userId"    # I

    .line 1653
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    invoke-virtual {v0, p1}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;->updateRuntimePermissionsFingerprint(I)V

    .line 1654
    return-void
.end method

.method writeAllRuntimePermissionsLPr()V
    .locals 5

    .line 1643
    invoke-static {}, Lcom/android/server/pm/UserManagerService;->getInstance()Lcom/android/server/pm/UserManagerService;

    move-result-object v0

    invoke-virtual {v0}, Lcom/android/server/pm/UserManagerService;->getUserIds()[I

    move-result-object v0

    array-length v1, v0

    const/4 v2, 0x0

    :goto_0
    if-ge v2, v1, :cond_0

    aget v3, v0, v2

    .line 1644
    .local v3, "userId":I
    iget-object v4, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    invoke-virtual {v4, v3}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;->writeStateForUserAsync(I)V

    .line 1643
    .end local v3    # "userId":I
    add-int/lit8 v2, v2, 0x1

    goto :goto_0

    .line 1646
    :cond_0
    return-void
.end method

.method writeAllUsersPackageRestrictionsLPr()V
    .locals 1

    .line 1622
    const/4 v0, 0x0

    invoke-virtual {p0, v0}, Lcom/android/server/pm/Settings;->writeAllUsersPackageRestrictionsLPr(Z)V

    .line 1623
    return-void
.end method

.method writeAllUsersPackageRestrictionsLPr(Z)V
    .locals 4
    .param p1, "sync"    # Z

    .line 1626
    invoke-static {}, Lcom/android/server/pm/UserManagerService;->getInstance()Lcom/android/server/pm/UserManagerService;

    move-result-object v0

    invoke-static {v0}, Lcom/android/server/pm/Settings;->getAllUsers(Lcom/android/server/pm/UserManagerService;)Ljava/util/List;

    move-result-object v0

    .line 1627
    .local v0, "users":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    if-nez v0, :cond_0

    return-void

    .line 1629
    :cond_0
    if-eqz p1, :cond_1

    .line 1631
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPackageRestrictionsLock:Ljava/lang/Object;

    monitor-enter v1

    .line 1632
    :try_start_0
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPendingAsyncPackageRestrictionsWrites:Landroid/util/SparseIntArray;

    invoke-virtual {v2}, Landroid/util/SparseIntArray;->clear()V

    .line 1633
    monitor-exit v1
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    .line 1634
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mHandler:Landroid/os/Handler;

    const/16 v2, 0x1e

    invoke-virtual {v1, v2}, Landroid/os/Handler;->removeMessages(I)V

    goto :goto_0

    .line 1633
    :catchall_0
    move-exception v2

    :try_start_1
    monitor-exit v1
    :try_end_1
    .catchall {:try_start_1 .. :try_end_1} :catchall_0

    throw v2

    .line 1637
    :cond_1
    :goto_0
    invoke-interface {v0}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_1
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v2

    if-eqz v2, :cond_2

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Landroid/content/pm/UserInfo;

    .line 1638
    .local v2, "user":Landroid/content/pm/UserInfo;
    iget v3, v2, Landroid/content/pm/UserInfo;->id:I

    invoke-virtual {p0, v3, p1}, Lcom/android/server/pm/Settings;->writePackageRestrictionsLPr(IZ)V

    .line 1639
    .end local v2    # "user":Landroid/content/pm/UserInfo;
    goto :goto_1

    .line 1640
    :cond_2
    return-void
.end method

.method writeBlockUninstallPackagesLPr(Lcom/android/modules/utils/TypedXmlSerializer;I)V
    .locals 7
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .param p2, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;
        }
    .end annotation

    .line 2321
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mBlockUninstallPackages:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p2}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Landroid/util/ArraySet;

    .line 2322
    .local v0, "packages":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    if-eqz v0, :cond_1

    .line 2323
    const/4 v1, 0x0

    const-string v2, "block-uninstall-packages"

    invoke-interface {p1, v1, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2324
    const/4 v3, 0x0

    .local v3, "i":I
    :goto_0
    invoke-virtual {v0}, Landroid/util/ArraySet;->size()I

    move-result v4

    if-ge v3, v4, :cond_0

    .line 2325
    const-string v4, "block-uninstall"

    invoke-interface {p1, v1, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2326
    invoke-virtual {v0, v3}, Landroid/util/ArraySet;->valueAt(I)Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Ljava/lang/String;

    const-string/jumbo v6, "packageName"

    invoke-interface {p1, v1, v6, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2327
    invoke-interface {p1, v1, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2324
    add-int/lit8 v3, v3, 0x1

    goto :goto_0

    :cond_0
    nop

    .line 2329
    .end local v3    # "i":I
    invoke-interface {p1, v1, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2331
    :cond_1
    return-void
.end method

.method writeCrossProfileIntentFiltersLPr(Lcom/android/modules/utils/TypedXmlSerializer;I)V
    .locals 6
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .param p2, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/lang/IllegalArgumentException;,
            Ljava/lang/IllegalStateException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 2290
    const/4 v0, 0x0

    const-string v1, "crossProfile-intent-filters"

    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2291
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mCrossProfileIntentResolvers:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v2, p2}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/server/pm/CrossProfileIntentResolver;

    .line 2292
    .local v2, "cpir":Lcom/android/server/pm/CrossProfileIntentResolver;
    if-eqz v2, :cond_0

    .line 2293
    invoke-virtual {v2}, Lcom/android/server/IntentResolver;->filterSet()Ljava/util/Set;

    move-result-object v3

    invoke-interface {v3}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v3

    :goto_0
    invoke-interface {v3}, Ljava/util/Iterator;->hasNext()Z

    move-result v4

    nop

    if-eqz v4, :cond_0

    invoke-interface {v3}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/android/server/pm/CrossProfileIntentFilter;

    .line 2294
    .local v4, "cpif":Lcom/android/server/pm/CrossProfileIntentFilter;
    const-string/jumbo v5, "item"

    invoke-interface {p1, v0, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2295
    invoke-virtual {v4, p1}, Lcom/android/server/pm/CrossProfileIntentFilter;->writeToXml(Lcom/android/modules/utils/TypedXmlSerializer;)V

    .line 2296
    invoke-interface {p1, v0, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2297
    .end local v4    # "cpif":Lcom/android/server/pm/CrossProfileIntentFilter;
    goto :goto_0

    .line 2299
    :cond_0
    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2300
    return-void
.end method

.method writeDefaultAppsLPr(Lorg/xmlpull/v1/XmlSerializer;I)V
    .locals 1
    .param p1, "serializer"    # Lorg/xmlpull/v1/XmlSerializer;
    .param p2, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/lang/IllegalArgumentException;,
            Ljava/lang/IllegalStateException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 2304
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPendingDefaultBrowser:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v0, p2}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Ljava/lang/String;

    .line 2305
    .local v0, "defaultBrowser":Ljava/lang/String;
    invoke-static {p1, v0}, Lcom/android/server/pm/Settings;->writeDefaultApps(Lorg/xmlpull/v1/XmlSerializer;Ljava/lang/String;)V

    .line 2306
    return-void
.end method

.method writeDisabledSysPackageLPr(Lcom/android/modules/utils/TypedXmlSerializer;Lcom/android/server/pm/PackageSetting;)V
    .locals 5
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .param p2, "pkg"    # Lcom/android/server/pm/PackageSetting;
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;
        }
    .end annotation

    .line 3157
    const/4 v0, 0x0

    const-string/jumbo v1, "updated-package"

    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3158
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v2

    const-string/jumbo v3, "name"

    invoke-interface {p1, v0, v3, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3159
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getRealName()Ljava/lang/String;

    move-result-object v2

    if-eqz v2, :cond_0

    .line 3160
    const-string/jumbo v2, "realName"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getRealName()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3162
    :cond_0
    const-string v2, "codePath"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getPathString()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3163
    const-string v2, "ft"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getLastModifiedTime()J

    move-result-wide v3

    invoke-interface {p1, v0, v2, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLongHex(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 3164
    const-string/jumbo v2, "ut"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getLastUpdateTime()J

    move-result-wide v3

    invoke-interface {p1, v0, v2, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLongHex(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 3165
    const-string/jumbo v2, "version"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getVersionCode()J

    move-result-wide v3

    invoke-interface {p1, v0, v2, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLong(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 3166
    const-string/jumbo v2, "targetSdkVersion"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getTargetSdkVersion()I

    move-result v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 3167
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getRestrictUpdateHash()[B

    move-result-object v2

    if-eqz v2, :cond_1

    .line 3168
    nop

    .line 3169
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getRestrictUpdateHash()[B

    move-result-object v2

    .line 3168
    const-string/jumbo v3, "restrictUpdateHash"

    invoke-interface {p1, v0, v3, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBytesBase64(Ljava/lang/String;Ljava/lang/String;[B)Lorg/xmlpull/v1/XmlSerializer;

    .line 3171
    :cond_1
    nop

    .line 3172
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->isScannedAsStoppedSystemApp()Z

    move-result v2

    .line 3171
    const-string/jumbo v3, "scannedAsStoppedSystemApp"

    invoke-interface {p1, v0, v3, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 3173
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getLegacyNativeLibraryPath()Ljava/lang/String;

    move-result-object v2

    if-eqz v2, :cond_2

    .line 3174
    const-string/jumbo v2, "nativeLibraryPath"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getLegacyNativeLibraryPath()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3176
    :cond_2
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getPrimaryCpuAbiLegacy()Ljava/lang/String;

    move-result-object v2

    if-eqz v2, :cond_3

    .line 3177
    const-string/jumbo v2, "primaryCpuAbi"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getPrimaryCpuAbiLegacy()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3179
    :cond_3
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getSecondaryCpuAbiLegacy()Ljava/lang/String;

    move-result-object v2

    if-eqz v2, :cond_4

    .line 3180
    const-string/jumbo v2, "secondaryCpuAbi"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getSecondaryCpuAbiLegacy()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3182
    :cond_4
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getCpuAbiOverride()Ljava/lang/String;

    move-result-object v2

    if-eqz v2, :cond_5

    .line 3183
    const-string v2, "cpuAbiOverride"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getCpuAbiOverride()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3186
    :cond_5
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->hasSharedUser()Z

    move-result v2

    if-nez v2, :cond_6

    .line 3187
    const-string/jumbo v2, "userId"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    goto :goto_0

    .line 3189
    :cond_6
    const-string/jumbo v2, "sharedUserId"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 3191
    :goto_0
    const-string/jumbo v2, "loadingProgress"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getLoadingProgress()F

    move-result v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeFloat(Ljava/lang/String;Ljava/lang/String;F)Lorg/xmlpull/v1/XmlSerializer;

    .line 3192
    nop

    .line 3193
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getLoadingCompletedTime()J

    move-result-wide v2

    .line 3192
    const-string/jumbo v4, "loadingCompletedTime"

    invoke-interface {p1, v0, v4, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLongHex(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 3195
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getAppMetadataFilePath()Ljava/lang/String;

    move-result-object v2

    if-eqz v2, :cond_7

    .line 3196
    nop

    .line 3197
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getAppMetadataFilePath()Ljava/lang/String;

    move-result-object v2

    .line 3196
    const-string v3, "appMetadataFilePath"

    invoke-interface {p1, v0, v3, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3200
    :cond_7
    nop

    .line 3201
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getAppMetadataSource()I

    move-result v2

    .line 3200
    const-string v3, "appMetadataSource"

    invoke-interface {p1, v0, v3, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 3203
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getUsesSdkLibraries()[Ljava/lang/String;

    move-result-object v2

    .line 3204
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getUsesSdkLibrariesVersionsMajor()[J

    move-result-object v3

    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getUsesSdkLibrariesOptional()[Z

    move-result-object v4

    .line 3203
    invoke-virtual {p0, p1, v2, v3, v4}, Lcom/android/server/pm/Settings;->writeUsesSdkLibLPw(Lcom/android/modules/utils/TypedXmlSerializer;[Ljava/lang/String;[J[Z)V

    .line 3207
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getUsesStaticLibraries()[Ljava/lang/String;

    move-result-object v2

    .line 3208
    invoke-virtual {p2}, Lcom/android/server/pm/PackageSetting;->getUsesStaticLibrariesVersions()[J

    move-result-object v3

    .line 3207
    invoke-virtual {p0, p1, v2, v3}, Lcom/android/server/pm/Settings;->writeUsesStaticLibLPw(Lcom/android/modules/utils/TypedXmlSerializer;[Ljava/lang/String;[J)V

    .line 3210
    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3211
    return-void
.end method

.method writeKernelMappingLPr()V
    .locals 6

    .line 2923
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMappingFilename:Ljava/io/File;

    if-nez v0, :cond_0

    return-void

    .line 2925
    :cond_0
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMappingFilename:Ljava/io/File;

    invoke-virtual {v0}, Ljava/io/File;->list()[Ljava/lang/String;

    move-result-object v0

    .line 2926
    .local v0, "known":[Ljava/lang/String;
    new-instance v1, Landroid/util/ArraySet;

    array-length v2, v0

    invoke-direct {v1, v2}, Landroid/util/ArraySet;-><init>(I)V

    .line 2927
    .local v1, "knownSet":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    array-length v2, v0

    const/4 v3, 0x0

    :goto_0
    if-ge v3, v2, :cond_1

    aget-object v4, v0, v3

    .line 2928
    .local v4, "name":Ljava/lang/String;
    invoke-virtual {v1, v4}, Landroid/util/ArraySet;->add(Ljava/lang/Object;)Z

    .line 2927
    .end local v4    # "name":Ljava/lang/String;
    add-int/lit8 v3, v3, 0x1

    goto :goto_0

    .line 2931
    :cond_1
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v2

    invoke-interface {v2}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v2

    :goto_1
    invoke-interface {v2}, Ljava/util/Iterator;->hasNext()Z

    move-result v3

    if-eqz v3, :cond_2

    invoke-interface {v2}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Lcom/android/server/pm/PackageSetting;

    .line 2933
    .local v3, "ps":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v3}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v4

    invoke-virtual {v1, v4}, Landroid/util/ArraySet;->remove(Ljava/lang/Object;)Z

    .line 2934
    invoke-virtual {p0, v3}, Lcom/android/server/pm/Settings;->writeKernelMappingLPr(Lcom/android/server/pm/PackageSetting;)V

    .line 2935
    .end local v3    # "ps":Lcom/android/server/pm/PackageSetting;
    goto :goto_1

    .line 2938
    :cond_2
    const/4 v2, 0x0

    .local v2, "i":I
    :goto_2
    invoke-virtual {v1}, Landroid/util/ArraySet;->size()I

    move-result v3

    if-ge v2, v3, :cond_3

    .line 2939
    invoke-virtual {v1, v2}, Landroid/util/ArraySet;->valueAt(I)Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Ljava/lang/String;

    .line 2942
    .local v3, "name":Ljava/lang/String;
    iget-object v4, p0, Lcom/android/server/pm/Settings;->mKernelMapping:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v4, v3}, Lcom/android/server/utils/WatchedArrayMap;->remove(Ljava/lang/Object;)Ljava/lang/Object;

    .line 2943
    new-instance v4, Ljava/io/File;

    iget-object v5, p0, Lcom/android/server/pm/Settings;->mKernelMappingFilename:Ljava/io/File;

    invoke-direct {v4, v5, v3}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    invoke-virtual {v4}, Ljava/io/File;->delete()Z

    .line 2938
    .end local v3    # "name":Ljava/lang/String;
    add-int/lit8 v2, v2, 0x1

    goto :goto_2

    :cond_3
    nop

    .line 2945
    .end local v2    # "i":I
    return-void
.end method

.method writeKernelMappingLPr(Lcom/android/server/pm/PackageSetting;)V
    .locals 3
    .param p1, "ps"    # Lcom/android/server/pm/PackageSetting;

    .line 2948
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMappingFilename:Ljava/io/File;

    if-eqz v0, :cond_0

    if-eqz p1, :cond_0

    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v0

    if-nez v0, :cond_1

    :cond_0
    goto :goto_0

    .line 2950
    :cond_1
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v1

    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getNotInstalledUserIds()[I

    move-result-object v2

    invoke-virtual {p0, v0, v1, v2}, Lcom/android/server/pm/Settings;->writeKernelMappingLPr(Ljava/lang/String;I[I)V

    .line 2951
    return-void

    .line 2948
    :goto_0
    return-void
.end method

.method writeKernelMappingLPr(Ljava/lang/String;I[I)V
    .locals 7
    .param p1, "name"    # Ljava/lang/String;
    .param p2, "appId"    # I
    .param p3, "excludedUserIds"    # [I

    .line 2954
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mKernelMapping:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v0, p1}, Lcom/android/server/utils/WatchedArrayMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Lcom/android/server/pm/Settings$KernelPackageState;

    .line 2955
    .local v0, "cur":Lcom/android/server/pm/Settings$KernelPackageState;
    const/4 v1, 0x0

    const/4 v2, 0x1

    if-nez v0, :cond_0

    move v3, v2

    goto :goto_0

    :cond_0
    move v3, v1

    .line 2956
    .local v3, "firstTime":Z
    :goto_0
    nop

    nop

    if-nez v3, :cond_1

    iget-object v4, v0, Lcom/android/server/pm/Settings$KernelPackageState;->excludedUserIds:[I

    .line 2957
    invoke-static {p3, v4}, Ljava/util/Arrays;->equals([I[I)Z

    move-result v4

    if-nez v4, :cond_2

    :cond_1
    move v1, v2

    .line 2960
    .local v1, "userIdsChanged":Z
    :cond_2
    new-instance v2, Ljava/io/File;

    iget-object v4, p0, Lcom/android/server/pm/Settings;->mKernelMappingFilename:Ljava/io/File;

    invoke-direct {v2, v4, p1}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    .line 2962
    .local v2, "dir":Ljava/io/File;
    if-eqz v3, :cond_3

    .line 2963
    invoke-virtual {v2}, Ljava/io/File;->mkdir()Z

    .line 2965
    new-instance v4, Lcom/android/server/pm/Settings$KernelPackageState;

    const/4 v5, 0x0

    invoke-direct {v4, v5}, Lcom/android/server/pm/Settings$KernelPackageState;-><init>(Lcom/android/server/pm/Settings$KernelPackageState-IA;)V

    move-object v0, v4

    .line 2966
    iget-object v4, p0, Lcom/android/server/pm/Settings;->mKernelMapping:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v4, p1, v0}, Lcom/android/server/utils/WatchedArrayMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 2970
    :cond_3
    iget v4, v0, Lcom/android/server/pm/Settings$KernelPackageState;->appId:I

    if-eq v4, p2, :cond_4

    .line 2971
    new-instance v4, Ljava/io/File;

    const-string v5, "appid"

    invoke-direct {v4, v2, v5}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    .line 2972
    .local v4, "appIdFile":Ljava/io/File;
    invoke-direct {p0, v4, p2}, Lcom/android/server/pm/Settings;->writeIntToFile(Ljava/io/File;I)V

    .line 2976
    .end local v4    # "appIdFile":Ljava/io/File;
    :cond_4
    if-eqz v1, :cond_a

    .line 2978
    const/4 v4, 0x0

    .local v4, "i":I
    :goto_1
    array-length v5, p3

    if-ge v4, v5, :cond_7

    .line 2979
    iget-object v5, v0, Lcom/android/server/pm/Settings$KernelPackageState;->excludedUserIds:[I

    if-eqz v5, :cond_5

    iget-object v5, v0, Lcom/android/server/pm/Settings$KernelPackageState;->excludedUserIds:[I

    aget v6, p3, v4

    invoke-static {v5, v6}, Lcom/android/internal/util/ArrayUtils;->contains([II)Z

    move-result v5

    if-nez v5, :cond_6

    .line 2981
    :cond_5
    new-instance v5, Ljava/io/File;

    const-string v6, "excluded_userids"

    invoke-direct {v5, v2, v6}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    aget v6, p3, v4

    invoke-direct {p0, v5, v6}, Lcom/android/server/pm/Settings;->writeIntToFile(Ljava/io/File;I)V

    .line 2978
    :cond_6
    add-int/lit8 v4, v4, 0x1

    goto :goto_1

    :cond_7
    nop

    .line 2987
    .end local v4    # "i":I
    iget-object v4, v0, Lcom/android/server/pm/Settings$KernelPackageState;->excludedUserIds:[I

    if-eqz v4, :cond_9

    .line 2988
    const/4 v4, 0x0

    .restart local v4    # "i":I
    :goto_2
    iget-object v5, v0, Lcom/android/server/pm/Settings$KernelPackageState;->excludedUserIds:[I

    array-length v5, v5

    if-ge v4, v5, :cond_9

    .line 2989
    iget-object v5, v0, Lcom/android/server/pm/Settings$KernelPackageState;->excludedUserIds:[I

    aget v5, v5, v4

    invoke-static {p3, v5}, Lcom/android/internal/util/ArrayUtils;->contains([II)Z

    move-result v5

    if-nez v5, :cond_8

    .line 2990
    new-instance v5, Ljava/io/File;

    const-string v6, "clear_userid"

    invoke-direct {v5, v2, v6}, Ljava/io/File;-><init>(Ljava/io/File;Ljava/lang/String;)V

    iget-object v6, v0, Lcom/android/server/pm/Settings$KernelPackageState;->excludedUserIds:[I

    aget v6, v6, v4

    invoke-direct {p0, v5, v6}, Lcom/android/server/pm/Settings;->writeIntToFile(Ljava/io/File;I)V

    .line 2988
    :cond_8
    add-int/lit8 v4, v4, 0x1

    goto :goto_2

    .line 2998
    .end local v4    # "i":I
    :cond_9
    iput-object p3, v0, Lcom/android/server/pm/Settings$KernelPackageState;->excludedUserIds:[I

    .line 3000
    :cond_a
    return-void
.end method

.method writeKeySetAliasesLPr(Lcom/android/modules/utils/TypedXmlSerializer;Lcom/android/server/pm/PackageKeySetData;)V
    .locals 7
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .param p2, "data"    # Lcom/android/server/pm/PackageKeySetData;
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;
        }
    .end annotation

    .line 3355
    invoke-virtual {p2}, Lcom/android/server/pm/PackageKeySetData;->getAliases()Landroid/util/ArrayMap;

    move-result-object v0

    invoke-virtual {v0}, Landroid/util/ArrayMap;->entrySet()Ljava/util/Set;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v0

    :goto_0
    invoke-interface {v0}, Ljava/util/Iterator;->hasNext()Z

    move-result v1

    if-eqz v1, :cond_0

    invoke-interface {v0}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Ljava/util/Map$Entry;

    .line 3356
    .local v1, "e":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Ljava/lang/String;Ljava/lang/Long;>;"
    const/4 v2, 0x0

    const-string v3, "defined-keyset"

    invoke-interface {p1, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3357
    invoke-interface {v1}, Ljava/util/Map$Entry;->getKey()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Ljava/lang/String;

    const-string v5, "alias"

    invoke-interface {p1, v2, v5, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3358
    invoke-interface {v1}, Ljava/util/Map$Entry;->getValue()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Ljava/lang/Long;

    invoke-virtual {v4}, Ljava/lang/Long;->longValue()J

    move-result-wide v4

    const-string/jumbo v6, "identifier"

    invoke-interface {p1, v2, v6, v4, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLong(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 3359
    invoke-interface {p1, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3360
    .end local v1    # "e":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Ljava/lang/String;Ljava/lang/Long;>;"
    goto :goto_0

    .line 3361
    :cond_0
    return-void
.end method

.method writeLPr(Lcom/android/server/pm/Computer;Z)V
    .locals 20
    .param p1, "computer"    # Lcom/android/server/pm/Computer;
        .annotation build Landroid/annotation/NonNull;
        .end annotation
    .end param
    .param p2, "sync"    # Z

    .line 2797
    move-object/from16 v1, p0

    const-string/jumbo v0, "renamed-package"

    const-string/jumbo v2, "shared-user"

    const-string/jumbo v3, "permissions"

    const-string/jumbo v4, "permission-trees"

    const-string/jumbo v5, "verifier"

    const-string/jumbo v6, "version"

    const-string/jumbo v7, "packages"

    invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J

    move-result-wide v8

    .line 2803
    .local v8, "startTime":J
    invoke-direct/range {p0 .. p0}, Lcom/android/server/pm/Settings;->invalidatePackageCache()V

    .line 2805
    new-instance v10, Ljava/util/ArrayList;

    invoke-direct {v10}, Ljava/util/ArrayList;-><init>()V

    .line 2807
    .local v10, "writtenSignatures":Ljava/util/ArrayList;, "Ljava/util/ArrayList<Landroid/content/pm/Signature;>;"
    invoke-direct/range {p0 .. p0}, Lcom/android/server/pm/Settings;->getSettingsFile()Lcom/android/server/pm/ResilientAtomicFile;

    move-result-object v11

    .line 2808
    .local v11, "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    const/4 v12, 0x0

    .line 2810
    .local v12, "str":Ljava/io/FileOutputStream;
    :try_start_0
    invoke-virtual {v11}, Lcom/android/server/pm/ResilientAtomicFile;->startWrite()Ljava/io/FileOutputStream;

    move-result-object v13

    move-object v12, v13

    .line 2812
    invoke-static {v12}, Landroid/util/Xml;->resolveSerializer(Ljava/io/OutputStream;)Lcom/android/modules/utils/TypedXmlSerializer;

    move-result-object v13

    .line 2813
    .local v13, "serializer":Lcom/android/modules/utils/TypedXmlSerializer;
    const/4 v14, 0x1

    invoke-static {v14}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v15

    const/4 v14, 0x0

    invoke-interface {v13, v14, v15}, Lcom/android/modules/utils/TypedXmlSerializer;->startDocument(Ljava/lang/String;Ljava/lang/Boolean;)V

    .line 2814
    const-string/jumbo v15, "http://xmlpull.org/v1/doc/features.html#indent-output"

    const/4 v14, 0x1

    invoke-interface {v13, v15, v14}, Lcom/android/modules/utils/TypedXmlSerializer;->setFeature(Ljava/lang/String;Z)V

    .line 2817
    const/4 v14, 0x0

    invoke-interface {v13, v14, v7}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2819
    const/4 v14, 0x0

    .local v14, "i":I
    :goto_0
    iget-object v15, v1, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v15}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v15
    :try_end_0
    .catch Ljava/io/IOException; {:try_start_0 .. :try_end_0} :catch_7
    .catchall {:try_start_0 .. :try_end_0} :catchall_7

    if-ge v14, v15, :cond_0

    .line 2820
    :try_start_1
    iget-object v15, v1, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v15, v14}, Lcom/android/server/utils/WatchedArrayMap;->keyAt(I)Ljava/lang/Object;

    move-result-object v15

    check-cast v15, Ljava/lang/String;
    :try_end_1
    .catch Ljava/io/IOException; {:try_start_1 .. :try_end_1} :catch_2
    .catchall {:try_start_1 .. :try_end_1} :catchall_2

    .line 2821
    .local v15, "volumeUuid":Ljava/lang/String;
    move-wide/from16 v17, v8

    .end local v8    # "startTime":J
    .local v17, "startTime":J
    :try_start_2
    iget-object v8, v1, Lcom/android/server/pm/Settings;->mVersion:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v8, v14}, Lcom/android/server/utils/WatchedArrayMap;->valueAt(I)Ljava/lang/Object;

    move-result-object v8

    check-cast v8, Lcom/android/server/pm/Settings$VersionInfo;

    .line 2823
    .local v8, "ver":Lcom/android/server/pm/Settings$VersionInfo;
    const/4 v9, 0x0

    invoke-interface {v13, v9, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2824
    const-string/jumbo v9, "volumeUuid"

    invoke-static {v13, v9, v15}, Lcom/android/internal/util/XmlUtils;->writeStringAttribute(Lorg/xmlpull/v1/XmlSerializer;Ljava/lang/String;Ljava/lang/CharSequence;)V

    .line 2825
    const-string/jumbo v9, "sdkVersion"

    move-object/from16 v16, v15

    .end local v15    # "volumeUuid":Ljava/lang/String;
    .local v16, "volumeUuid":Ljava/lang/String;
    iget v15, v8, Lcom/android/server/pm/Settings$VersionInfo;->sdkVersion:I
    :try_end_2
    .catch Ljava/io/IOException; {:try_start_2 .. :try_end_2} :catch_1
    .catchall {:try_start_2 .. :try_end_2} :catchall_1

    move-object/from16 v19, v11

    const/4 v11, 0x0

    .end local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .local v19, "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :try_start_3
    invoke-interface {v13, v11, v9, v15}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 2826
    const-string v9, "databaseVersion"

    iget v15, v8, Lcom/android/server/pm/Settings$VersionInfo;->databaseVersion:I

    invoke-interface {v13, v11, v9, v15}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 2827
    const-string v9, "buildFingerprint"

    iget-object v11, v8, Lcom/android/server/pm/Settings$VersionInfo;->buildFingerprint:Ljava/lang/String;

    invoke-static {v13, v9, v11}, Lcom/android/internal/util/XmlUtils;->writeStringAttribute(Lorg/xmlpull/v1/XmlSerializer;Ljava/lang/String;Ljava/lang/CharSequence;)V

    .line 2829
    const-string v9, "fingerprint"

    iget-object v11, v8, Lcom/android/server/pm/Settings$VersionInfo;->fingerprint:Ljava/lang/String;

    invoke-static {v13, v9, v11}, Lcom/android/internal/util/XmlUtils;->writeStringAttribute(Lorg/xmlpull/v1/XmlSerializer;Ljava/lang/String;Ljava/lang/CharSequence;)V

    .line 2830
    const/4 v9, 0x0

    invoke-interface {v13, v9, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;
    :try_end_3
    .catch Ljava/io/IOException; {:try_start_3 .. :try_end_3} :catch_0
    .catchall {:try_start_3 .. :try_end_3} :catchall_0

    .line 2819
    nop

    .end local v8    # "ver":Lcom/android/server/pm/Settings$VersionInfo;
    .end local v16    # "volumeUuid":Ljava/lang/String;
    add-int/lit8 v14, v14, 0x1

    move-wide/from16 v8, v17

    move-object/from16 v11, v19

    goto :goto_0

    .line 2807
    .end local v12    # "str":Ljava/io/FileOutputStream;
    .end local v13    # "serializer":Lcom/android/modules/utils/TypedXmlSerializer;
    .end local v14    # "i":I
    :catchall_0
    move-exception v0

    move-object/from16 v4, p1

    move/from16 v3, p2

    move-object v5, v0

    move-object/from16 v2, v19

    goto/16 :goto_9

    .line 2901
    .restart local v12    # "str":Ljava/io/FileOutputStream;
    :catch_0
    move-exception v0

    move-object/from16 v4, p1

    move/from16 v3, p2

    move-object/from16 v2, v19

    goto/16 :goto_8

    .line 2807
    .end local v12    # "str":Ljava/io/FileOutputStream;
    .end local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :catchall_1
    move-exception v0

    move-object/from16 v19, v11

    move-object/from16 v4, p1

    move/from16 v3, p2

    move-object v5, v0

    move-object/from16 v2, v19

    .end local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    goto/16 :goto_9

    .line 2901
    .end local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v12    # "str":Ljava/io/FileOutputStream;
    :catch_1
    move-exception v0

    move-object/from16 v19, v11

    move-object/from16 v4, p1

    move/from16 v3, p2

    move-object/from16 v2, v19

    .end local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    goto/16 :goto_8

    .line 2807
    .end local v12    # "str":Ljava/io/FileOutputStream;
    .end local v17    # "startTime":J
    .end local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .local v8, "startTime":J
    .restart local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :catchall_2
    move-exception v0

    move-wide/from16 v17, v8

    move-object/from16 v19, v11

    move-object/from16 v4, p1

    move/from16 v3, p2

    move-object v5, v0

    move-object/from16 v2, v19

    .end local v8    # "startTime":J
    .end local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v17    # "startTime":J
    .restart local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    goto/16 :goto_9

    .line 2901
    .end local v17    # "startTime":J
    .end local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v8    # "startTime":J
    .restart local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v12    # "str":Ljava/io/FileOutputStream;
    :catch_2
    move-exception v0

    move-wide/from16 v17, v8

    move-object/from16 v19, v11

    move-object/from16 v4, p1

    move/from16 v3, p2

    move-object/from16 v2, v19

    .end local v8    # "startTime":J
    .end local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v17    # "startTime":J
    .restart local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    goto/16 :goto_8

    .line 2819
    .end local v17    # "startTime":J
    .end local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v8    # "startTime":J
    .restart local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v13    # "serializer":Lcom/android/modules/utils/TypedXmlSerializer;
    .restart local v14    # "i":I
    :cond_0
    move-wide/from16 v17, v8

    move-object/from16 v19, v11

    .line 2833
    .end local v8    # "startTime":J
    .end local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .end local v14    # "i":I
    .restart local v17    # "startTime":J
    .restart local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :try_start_4
    iget-object v6, v1, Lcom/android/server/pm/Settings;->mVerifierDeviceIdentity:Landroid/content/pm/VerifierDeviceIdentity;
    :try_end_4
    .catch Ljava/io/IOException; {:try_start_4 .. :try_end_4} :catch_6
    .catchall {:try_start_4 .. :try_end_4} :catchall_6

    if-eqz v6, :cond_1

    .line 2834
    const/4 v6, 0x0

    :try_start_5
    invoke-interface {v13, v6, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2835
    const-string v6, "device"

    iget-object v8, v1, Lcom/android/server/pm/Settings;->mVerifierDeviceIdentity:Landroid/content/pm/VerifierDeviceIdentity;

    invoke-virtual {v8}, Landroid/content/pm/VerifierDeviceIdentity;->toString()Ljava/lang/String;

    move-result-object v8

    const/4 v9, 0x0

    invoke-interface {v13, v9, v6, v8}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2836
    invoke-interface {v13, v9, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;
    :try_end_5
    .catch Ljava/io/IOException; {:try_start_5 .. :try_end_5} :catch_0
    .catchall {:try_start_5 .. :try_end_5} :catchall_0

    .line 2839
    :cond_1
    const/4 v5, 0x0

    :try_start_6
    invoke-interface {v13, v5, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2840
    iget-object v6, v1, Lcom/android/server/pm/Settings;->mPermissions:Lcom/android/server/pm/permission/LegacyPermissionSettings;

    invoke-virtual {v6, v13}, Lcom/android/server/pm/permission/LegacyPermissionSettings;->writePermissionTrees(Lcom/android/modules/utils/TypedXmlSerializer;)V

    .line 2841
    invoke-interface {v13, v5, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2843
    invoke-interface {v13, v5, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2844
    iget-object v4, v1, Lcom/android/server/pm/Settings;->mPermissions:Lcom/android/server/pm/permission/LegacyPermissionSettings;

    invoke-virtual {v4, v13}, Lcom/android/server/pm/permission/LegacyPermissionSettings;->writePermissions(Lcom/android/modules/utils/TypedXmlSerializer;)V

    .line 2845
    invoke-interface {v13, v5, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2847
    iget-object v3, v1, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v3}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v3

    invoke-interface {v3}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v3

    :goto_1
    invoke-interface {v3}, Ljava/util/Iterator;->hasNext()Z

    move-result v4
    :try_end_6
    .catch Ljava/io/IOException; {:try_start_6 .. :try_end_6} :catch_6
    .catchall {:try_start_6 .. :try_end_6} :catchall_6

    if-eqz v4, :cond_3

    :try_start_7
    invoke-interface {v3}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/android/server/pm/PackageSetting;

    .line 2848
    .local v4, "pkg":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v4}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v5

    if-eqz v5, :cond_2

    invoke-virtual {v4}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v5

    invoke-interface {v5}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->isApex()Z

    move-result v5

    if-eqz v5, :cond_2

    .line 2851
    goto :goto_1

    .line 2853
    :cond_2
    invoke-virtual {v1, v13, v10, v4}, Lcom/android/server/pm/Settings;->writePackageLPr(Lcom/android/modules/utils/TypedXmlSerializer;Ljava/util/ArrayList;Lcom/android/server/pm/PackageSetting;)V
    :try_end_7
    .catch Ljava/io/IOException; {:try_start_7 .. :try_end_7} :catch_0
    .catchall {:try_start_7 .. :try_end_7} :catchall_0

    .line 2854
    .end local v4    # "pkg":Lcom/android/server/pm/PackageSetting;
    goto :goto_1

    .line 2856
    :cond_3
    :try_start_8
    iget-object v3, v1, Lcom/android/server/pm/Settings;->mDisabledSysPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v3}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v3

    invoke-interface {v3}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v3

    :goto_2
    invoke-interface {v3}, Ljava/util/Iterator;->hasNext()Z

    move-result v4
    :try_end_8
    .catch Ljava/io/IOException; {:try_start_8 .. :try_end_8} :catch_6
    .catchall {:try_start_8 .. :try_end_8} :catchall_6

    if-eqz v4, :cond_5

    :try_start_9
    invoke-interface {v3}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/android/server/pm/PackageSetting;

    .line 2857
    .restart local v4    # "pkg":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v4}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v5

    if-eqz v5, :cond_4

    invoke-virtual {v4}, Lcom/android/server/pm/PackageSetting;->getPkg()Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;

    move-result-object v5

    invoke-interface {v5}, Lcom/android/internal/pm/parsing/pkg/AndroidPackageInternal;->isApex()Z

    move-result v5

    if-eqz v5, :cond_4

    .line 2860
    goto :goto_2

    .line 2862
    :cond_4
    invoke-virtual {v1, v13, v4}, Lcom/android/server/pm/Settings;->writeDisabledSysPackageLPr(Lcom/android/modules/utils/TypedXmlSerializer;Lcom/android/server/pm/PackageSetting;)V
    :try_end_9
    .catch Ljava/io/IOException; {:try_start_9 .. :try_end_9} :catch_0
    .catchall {:try_start_9 .. :try_end_9} :catchall_0

    .line 2863
    .end local v4    # "pkg":Lcom/android/server/pm/PackageSetting;
    goto :goto_2

    .line 2865
    :cond_5
    :try_start_a
    iget-object v3, v1, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v3}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v3

    invoke-interface {v3}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v3

    :goto_3
    invoke-interface {v3}, Ljava/util/Iterator;->hasNext()Z

    move-result v4
    :try_end_a
    .catch Ljava/io/IOException; {:try_start_a .. :try_end_a} :catch_6
    .catchall {:try_start_a .. :try_end_a} :catchall_6

    if-eqz v4, :cond_6

    :try_start_b
    invoke-interface {v3}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/android/server/pm/SharedUserSetting;

    .line 2866
    .local v4, "usr":Lcom/android/server/pm/SharedUserSetting;
    const/4 v5, 0x0

    invoke-interface {v13, v5, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2867
    const-string/jumbo v6, "name"

    iget-object v8, v4, Lcom/android/server/pm/SharedUserSetting;->name:Ljava/lang/String;

    invoke-interface {v13, v5, v6, v8}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2868
    const-string/jumbo v6, "userId"

    iget v8, v4, Lcom/android/server/pm/SharedUserSetting;->mAppId:I

    invoke-interface {v13, v5, v6, v8}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 2869
    iget-object v5, v4, Lcom/android/server/pm/SharedUserSetting;->signatures:Lcom/android/server/pm/PackageSignatures;

    const-string/jumbo v6, "sigs"

    invoke-virtual {v5, v13, v6, v10}, Lcom/android/server/pm/PackageSignatures;->writeXml(Lcom/android/modules/utils/TypedXmlSerializer;Ljava/lang/String;Ljava/util/ArrayList;)V

    .line 2870
    const/4 v5, 0x0

    invoke-interface {v13, v5, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;
    :try_end_b
    .catch Ljava/io/IOException; {:try_start_b .. :try_end_b} :catch_0
    .catchall {:try_start_b .. :try_end_b} :catchall_0

    .line 2871
    nop

    .end local v4    # "usr":Lcom/android/server/pm/SharedUserSetting;
    goto :goto_3

    .line 2873
    :cond_6
    :try_start_c
    iget-object v2, v1, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v2
    :try_end_c
    .catch Ljava/io/IOException; {:try_start_c .. :try_end_c} :catch_6
    .catchall {:try_start_c .. :try_end_c} :catchall_6

    if-lez v2, :cond_7

    .line 2874
    :try_start_d
    iget-object v2, v1, Lcom/android/server/pm/Settings;->mRenamedPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v2}, Lcom/android/server/utils/WatchedArrayMap;->entrySet()Ljava/util/Set;

    move-result-object v2

    invoke-interface {v2}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v2

    :goto_4
    invoke-interface {v2}, Ljava/util/Iterator;->hasNext()Z

    move-result v3

    if-eqz v3, :cond_7

    invoke-interface {v2}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Ljava/util/Map$Entry;

    .line 2875
    .local v3, "e":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Ljava/lang/String;Ljava/lang/String;>;"
    const/4 v4, 0x0

    invoke-interface {v13, v4, v0}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2876
    const-string/jumbo v4, "new"

    invoke-interface {v3}, Ljava/util/Map$Entry;->getKey()Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Ljava/lang/String;

    const/4 v6, 0x0

    invoke-interface {v13, v6, v4, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2877
    const-string/jumbo v4, "old"

    invoke-interface {v3}, Ljava/util/Map$Entry;->getValue()Ljava/lang/Object;

    move-result-object v5

    check-cast v5, Ljava/lang/String;

    const/4 v6, 0x0

    invoke-interface {v13, v6, v4, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2878
    invoke-interface {v13, v6, v0}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;
    :try_end_d
    .catch Ljava/io/IOException; {:try_start_d .. :try_end_d} :catch_0
    .catchall {:try_start_d .. :try_end_d} :catchall_0

    .line 2879
    nop

    .end local v3    # "e":Ljava/util/Map$Entry;, "Ljava/util/Map$Entry<Ljava/lang/String;Ljava/lang/String;>;"
    goto :goto_4

    .line 2882
    :cond_7
    :try_start_e
    iget-object v0, v1, Lcom/android/server/pm/Settings;->mDomainVerificationManager:Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;
    :try_end_e
    .catch Ljava/io/IOException; {:try_start_e .. :try_end_e} :catch_6
    .catchall {:try_start_e .. :try_end_e} :catchall_6

    const/4 v2, 0x0

    const/4 v3, -0x1

    move-object/from16 v4, p1

    :try_start_f
    invoke-interface {v0, v4, v13, v2, v3}, Lcom/android/server/pm/verify/domain/DomainVerificationManagerInternal;->writeSettings(Lcom/android/server/pm/Computer;Lcom/android/modules/utils/TypedXmlSerializer;ZI)V

    .line 2885
    iget-object v0, v1, Lcom/android/server/pm/Settings;->mKeySetManagerService:Lcom/android/server/pm/KeySetManagerService;

    invoke-virtual {v0, v13}, Lcom/android/server/pm/KeySetManagerService;->writeKeySetManagerServiceLPr(Lcom/android/modules/utils/TypedXmlSerializer;)V

    .line 2887
    const/4 v0, 0x0

    invoke-interface {v13, v0, v7}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2889
    invoke-interface {v13}, Lcom/android/modules/utils/TypedXmlSerializer;->endDocument()V
    :try_end_f
    .catch Ljava/io/IOException; {:try_start_f .. :try_end_f} :catch_5
    .catchall {:try_start_f .. :try_end_f} :catchall_5

    .line 2891
    move-object/from16 v2, v19

    .end local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .local v2, "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :try_start_10
    invoke-virtual {v2, v12}, Lcom/android/server/pm/ResilientAtomicFile;->finishWrite(Ljava/io/FileOutputStream;)V

    .line 2893
    invoke-virtual/range {p0 .. p0}, Lcom/android/server/pm/Settings;->writeKernelMappingLPr()V

    .line 2894
    invoke-virtual/range {p0 .. p0}, Lcom/android/server/pm/Settings;->writePackageListLPr()V
    :try_end_10
    .catch Ljava/io/IOException; {:try_start_10 .. :try_end_10} :catch_4
    .catchall {:try_start_10 .. :try_end_10} :catchall_4

    .line 2895
    move/from16 v3, p2

    :try_start_11
    invoke-virtual {v1, v3}, Lcom/android/server/pm/Settings;->writeAllUsersPackageRestrictionsLPr(Z)V

    .line 2896
    invoke-virtual/range {p0 .. p0}, Lcom/android/server/pm/Settings;->writeAllRuntimePermissionsLPr()V

    .line 2897
    const-string/jumbo v0, "package"

    .line 2898
    invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J

    move-result-wide v5

    sub-long v5, v5, v17

    .line 2897
    invoke-static {v0, v5, v6}, Lcom/android/internal/logging/EventLogTags;->writeCommitSysConfigFile(Ljava/lang/String;J)V
    :try_end_11
    .catch Ljava/io/IOException; {:try_start_11 .. :try_end_11} :catch_3
    .catchall {:try_start_11 .. :try_end_11} :catchall_3

    .line 2908
    invoke-virtual {v2}, Lcom/android/server/pm/ResilientAtomicFile;->close()V

    .line 2899
    return-void

    .line 2807
    .end local v12    # "str":Ljava/io/FileOutputStream;
    .end local v13    # "serializer":Lcom/android/modules/utils/TypedXmlSerializer;
    :catchall_3
    move-exception v0

    :goto_5
    move-object v5, v0

    goto :goto_9

    .line 2901
    .restart local v12    # "str":Ljava/io/FileOutputStream;
    :catch_3
    move-exception v0

    goto :goto_8

    .line 2807
    .end local v12    # "str":Ljava/io/FileOutputStream;
    :catchall_4
    move-exception v0

    move/from16 v3, p2

    goto :goto_5

    .line 2901
    .restart local v12    # "str":Ljava/io/FileOutputStream;
    :catch_4
    move-exception v0

    move/from16 v3, p2

    goto :goto_8

    .line 2807
    .end local v2    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .end local v12    # "str":Ljava/io/FileOutputStream;
    .restart local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :catchall_5
    move-exception v0

    :goto_6
    move/from16 v3, p2

    move-object/from16 v2, v19

    move-object v5, v0

    .end local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v2    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    goto :goto_9

    .line 2901
    .end local v2    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v12    # "str":Ljava/io/FileOutputStream;
    .restart local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :catch_5
    move-exception v0

    :goto_7
    move/from16 v3, p2

    move-object/from16 v2, v19

    .end local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v2    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    goto :goto_8

    .line 2807
    .end local v2    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .end local v12    # "str":Ljava/io/FileOutputStream;
    .restart local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :catchall_6
    move-exception v0

    move-object/from16 v4, p1

    goto :goto_6

    .line 2901
    .restart local v12    # "str":Ljava/io/FileOutputStream;
    :catch_6
    move-exception v0

    move-object/from16 v4, p1

    goto :goto_7

    .line 2807
    .end local v12    # "str":Ljava/io/FileOutputStream;
    .end local v17    # "startTime":J
    .end local v19    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v8    # "startTime":J
    .restart local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :catchall_7
    move-exception v0

    move-object/from16 v4, p1

    move/from16 v3, p2

    move-wide/from16 v17, v8

    move-object v2, v11

    move-object v5, v0

    .end local v8    # "startTime":J
    .end local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v2    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v17    # "startTime":J
    goto :goto_9

    .line 2901
    .end local v2    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .end local v17    # "startTime":J
    .restart local v8    # "startTime":J
    .restart local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v12    # "str":Ljava/io/FileOutputStream;
    :catch_7
    move-exception v0

    move-object/from16 v4, p1

    move/from16 v3, p2

    move-wide/from16 v17, v8

    move-object v2, v11

    .end local v8    # "startTime":J
    .end local v11    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v2    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local v17    # "startTime":J
    :goto_8
    nop

    .line 2902
    .local v0, "e":Ljava/io/IOException;
    :try_start_12
    const-string v5, "PackageManager"

    const-string v6, "Unable to write package manager settings, current changes will be lost at reboot"

    invoke-static {v5, v6, v0}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I

    .line 2904
    if-eqz v12, :cond_8

    .line 2905
    invoke-virtual {v2, v12}, Lcom/android/server/pm/ResilientAtomicFile;->failWrite(Ljava/io/FileOutputStream;)V
    :try_end_12
    .catchall {:try_start_12 .. :try_end_12} :catchall_3

    .line 2908
    .end local v0    # "e":Ljava/io/IOException;
    .end local v12    # "str":Ljava/io/FileOutputStream;
    :cond_8
    if-eqz v2, :cond_9

    invoke-virtual {v2}, Lcom/android/server/pm/ResilientAtomicFile;->close()V

    .line 2911
    .end local v2    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :cond_9
    return-void

    .line 2807
    .restart local v2    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :goto_9
    if-eqz v2, :cond_a

    :try_start_13
    invoke-virtual {v2}, Lcom/android/server/pm/ResilientAtomicFile;->close()V
    :try_end_13
    .catchall {:try_start_13 .. :try_end_13} :catchall_8

    goto :goto_a

    :catchall_8
    move-exception v0

    move-object v6, v0

    invoke-virtual {v5, v6}, Ljava/lang/Throwable;->addSuppressed(Ljava/lang/Throwable;)V

    :cond_a
    :goto_a
    throw v5
.end method

.method writePackageLPr(Lcom/android/modules/utils/TypedXmlSerializer;Ljava/util/ArrayList;Lcom/android/server/pm/PackageSetting;)V
    .locals 7
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .param p3, "pkg"    # Lcom/android/server/pm/PackageSetting;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Lcom/android/modules/utils/TypedXmlSerializer;",
            "Ljava/util/ArrayList<",
            "Landroid/content/pm/Signature;",
            ">;",
            "Lcom/android/server/pm/PackageSetting;",
            ")V"
        }
    .end annotation

    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;
        }
    .end annotation

    .line 3216
    .local p2, "writtenSignatures":Ljava/util/ArrayList;, "Ljava/util/ArrayList<Landroid/content/pm/Signature;>;"
    const/4 v0, 0x0

    const-string/jumbo v1, "package"

    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3217
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v2

    const-string/jumbo v3, "name"

    invoke-interface {p1, v0, v3, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3218
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getRealName()Ljava/lang/String;

    move-result-object v2

    if-eqz v2, :cond_0

    .line 3219
    const-string/jumbo v2, "realName"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getRealName()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3221
    :cond_0
    const-string v2, "codePath"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getPathString()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3223
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getLegacyNativeLibraryPath()Ljava/lang/String;

    move-result-object v2

    if-eqz v2, :cond_1

    .line 3224
    const-string/jumbo v2, "nativeLibraryPath"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getLegacyNativeLibraryPath()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3226
    :cond_1
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getPrimaryCpuAbiLegacy()Ljava/lang/String;

    move-result-object v2

    if-eqz v2, :cond_2

    .line 3227
    const-string/jumbo v2, "primaryCpuAbi"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getPrimaryCpuAbiLegacy()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3229
    :cond_2
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getSecondaryCpuAbiLegacy()Ljava/lang/String;

    move-result-object v2

    if-eqz v2, :cond_3

    .line 3230
    const-string/jumbo v2, "secondaryCpuAbi"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getSecondaryCpuAbiLegacy()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3232
    :cond_3
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getCpuAbiOverride()Ljava/lang/String;

    move-result-object v2

    if-eqz v2, :cond_4

    .line 3233
    const-string v2, "cpuAbiOverride"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getCpuAbiOverride()Ljava/lang/String;

    move-result-object v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3236
    :cond_4
    const-string/jumbo v2, "publicFlags"

    invoke-virtual {p3}, Lcom/android/server/pm/SettingBase;->getFlags()I

    move-result v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 3237
    const-string/jumbo v2, "privateFlags"

    invoke-virtual {p3}, Lcom/android/server/pm/SettingBase;->getPrivateFlags()I

    move-result v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 3238
    const-string v2, "ft"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getLastModifiedTime()J

    move-result-wide v3

    invoke-interface {p1, v0, v2, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLongHex(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 3239
    const-string/jumbo v2, "ut"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getLastUpdateTime()J

    move-result-wide v3

    invoke-interface {p1, v0, v2, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLongHex(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 3240
    const-string/jumbo v2, "version"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getVersionCode()J

    move-result-wide v3

    invoke-interface {p1, v0, v2, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLong(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 3241
    const-string/jumbo v2, "targetSdkVersion"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getTargetSdkVersion()I

    move-result v3

    invoke-interface {p1, v0, v2, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 3242
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getRestrictUpdateHash()[B

    move-result-object v2

    if-eqz v2, :cond_5

    .line 3243
    nop

    .line 3244
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getRestrictUpdateHash()[B

    move-result-object v2

    .line 3243
    const-string/jumbo v3, "restrictUpdateHash"

    invoke-interface {p1, v0, v3, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBytesBase64(Ljava/lang/String;Ljava/lang/String;[B)Lorg/xmlpull/v1/XmlSerializer;

    .line 3246
    :cond_5
    nop

    .line 3247
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->isScannedAsStoppedSystemApp()Z

    move-result v2

    .line 3246
    const-string/jumbo v3, "scannedAsStoppedSystemApp"

    invoke-interface {p1, v0, v3, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 3248
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->hasSharedUser()Z

    move-result v2

    const/4 v3, 0x1

    if-nez v2, :cond_7

    .line 3249
    const-string/jumbo v2, "userId"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v4

    invoke-interface {p1, v0, v2, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 3251
    nop

    .line 3252
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getAndroidPackage()Lcom/android/server/pm/pkg/AndroidPackage;

    move-result-object v2

    if-eqz v2, :cond_6

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getAndroidPackage()Lcom/android/server/pm/pkg/AndroidPackage;

    move-result-object v2

    invoke-interface {v2}, Lcom/android/server/pm/pkg/AndroidPackage;->isSdkLibrary()Z

    move-result v2

    if-eqz v2, :cond_6

    move v2, v3

    goto :goto_0

    :cond_6
    const/4 v2, 0x0

    .line 3251
    :goto_0
    const-string/jumbo v4, "isSdkLibrary"

    invoke-interface {p1, v0, v4, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    goto :goto_1

    .line 3254
    :cond_7
    const-string/jumbo v2, "sharedUserId"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getAppId()I

    move-result v4

    invoke-interface {p1, v0, v2, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 3256
    :goto_1
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getInstallSource()Lcom/android/server/pm/InstallSource;

    move-result-object v2

    .line 3257
    .local v2, "installSource":Lcom/android/server/pm/InstallSource;
    iget-object v4, v2, Lcom/android/server/pm/InstallSource;->mInstallerPackageName:Ljava/lang/String;

    if-eqz v4, :cond_8

    .line 3258
    const-string/jumbo v4, "installer"

    iget-object v5, v2, Lcom/android/server/pm/InstallSource;->mInstallerPackageName:Ljava/lang/String;

    invoke-interface {p1, v0, v4, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3260
    :cond_8
    iget v4, v2, Lcom/android/server/pm/InstallSource;->mInstallerPackageUid:I

    const/4 v5, -0x1

    if-eq v4, v5, :cond_9

    .line 3261
    const-string/jumbo v4, "installerUid"

    iget v6, v2, Lcom/android/server/pm/InstallSource;->mInstallerPackageUid:I

    invoke-interface {p1, v0, v4, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 3263
    :cond_9
    iget-object v4, v2, Lcom/android/server/pm/InstallSource;->mUpdateOwnerPackageName:Ljava/lang/String;

    if-eqz v4, :cond_a

    .line 3264
    const-string/jumbo v4, "updateOwner"

    iget-object v6, v2, Lcom/android/server/pm/InstallSource;->mUpdateOwnerPackageName:Ljava/lang/String;

    invoke-interface {p1, v0, v4, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3266
    :cond_a
    iget-object v4, v2, Lcom/android/server/pm/InstallSource;->mInstallerAttributionTag:Ljava/lang/String;

    if-eqz v4, :cond_b

    .line 3267
    const-string/jumbo v4, "installerAttributionTag"

    iget-object v6, v2, Lcom/android/server/pm/InstallSource;->mInstallerAttributionTag:Ljava/lang/String;

    invoke-interface {p1, v0, v4, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3270
    :cond_b
    const-string/jumbo v4, "packageSource"

    iget v6, v2, Lcom/android/server/pm/InstallSource;->mPackageSource:I

    invoke-interface {p1, v0, v4, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 3272
    iget-boolean v4, v2, Lcom/android/server/pm/InstallSource;->mIsOrphaned:Z

    if-eqz v4, :cond_c

    .line 3273
    const-string/jumbo v4, "isOrphaned"

    invoke-interface {p1, v0, v4, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 3275
    :cond_c
    iget-object v4, v2, Lcom/android/server/pm/InstallSource;->mInitiatingPackageName:Ljava/lang/String;

    if-eqz v4, :cond_d

    .line 3276
    const-string/jumbo v4, "installInitiator"

    iget-object v6, v2, Lcom/android/server/pm/InstallSource;->mInitiatingPackageName:Ljava/lang/String;

    invoke-interface {p1, v0, v4, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3278
    :cond_d
    iget-boolean v4, v2, Lcom/android/server/pm/InstallSource;->mIsInitiatingPackageUninstalled:Z

    if-eqz v4, :cond_e

    .line 3279
    const-string/jumbo v4, "installInitiatorUninstalled"

    invoke-interface {p1, v0, v4, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 3281
    :cond_e
    iget-object v4, v2, Lcom/android/server/pm/InstallSource;->mOriginatingPackageName:Ljava/lang/String;

    if-eqz v4, :cond_f

    .line 3282
    const-string/jumbo v4, "installOriginator"

    iget-object v6, v2, Lcom/android/server/pm/InstallSource;->mOriginatingPackageName:Ljava/lang/String;

    invoke-interface {p1, v0, v4, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3284
    :cond_f
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getVolumeUuid()Ljava/lang/String;

    move-result-object v4

    if-eqz v4, :cond_10

    .line 3285
    const-string/jumbo v4, "volumeUuid"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getVolumeUuid()Ljava/lang/String;

    move-result-object v6

    invoke-interface {p1, v0, v4, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3287
    :cond_10
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getCategoryOverride()I

    move-result v4

    if-eq v4, v5, :cond_11

    .line 3288
    const-string v4, "categoryHint"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getCategoryOverride()I

    move-result v5

    invoke-interface {p1, v0, v4, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 3290
    :cond_11
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->isUpdateAvailable()Z

    move-result v4

    if-eqz v4, :cond_12

    .line 3291
    const-string/jumbo v4, "updateAvailable"

    invoke-interface {p1, v0, v4, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 3293
    :cond_12
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->isForceQueryableOverride()Z

    move-result v4

    if-eqz v4, :cond_13

    .line 3294
    const-string v4, "forceQueryable"

    invoke-interface {p1, v0, v4, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 3296
    :cond_13
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->isPendingRestore()Z

    move-result v4

    if-eqz v4, :cond_14

    .line 3297
    const-string/jumbo v4, "pendingRestore"

    invoke-interface {p1, v0, v4, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 3299
    :cond_14
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->isLoading()Z

    move-result v4

    if-eqz v4, :cond_15

    .line 3300
    const-string/jumbo v4, "isLoading"

    invoke-interface {p1, v0, v4, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 3302
    :cond_15
    const-string/jumbo v3, "loadingProgress"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getLoadingProgress()F

    move-result v4

    invoke-interface {p1, v0, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeFloat(Ljava/lang/String;Ljava/lang/String;F)Lorg/xmlpull/v1/XmlSerializer;

    .line 3303
    const-string/jumbo v3, "loadingCompletedTime"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getLoadingCompletedTime()J

    move-result-wide v4

    invoke-interface {p1, v0, v3, v4, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLongHex(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 3305
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getDomainSetId()Ljava/util/UUID;

    move-result-object v3

    invoke-virtual {v3}, Ljava/lang/Object;->toString()Ljava/lang/String;

    move-result-object v3

    const-string v4, "domainSetId"

    invoke-interface {p1, v0, v4, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3307
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getAppMetadataFilePath()Ljava/lang/String;

    move-result-object v3

    if-eqz v3, :cond_16

    .line 3308
    const-string v3, "appMetadataFilePath"

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getAppMetadataFilePath()Ljava/lang/String;

    move-result-object v4

    invoke-interface {p1, v0, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3310
    :cond_16
    nop

    .line 3311
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getAppMetadataSource()I

    move-result v3

    .line 3310
    const-string v4, "appMetadataSource"

    invoke-interface {p1, v0, v4, v3}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 3314
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getUsesSdkLibraries()[Ljava/lang/String;

    move-result-object v3

    .line 3315
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getUsesSdkLibrariesVersionsMajor()[J

    move-result-object v4

    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getUsesSdkLibrariesOptional()[Z

    move-result-object v5

    .line 3314
    invoke-virtual {p0, p1, v3, v4, v5}, Lcom/android/server/pm/Settings;->writeUsesSdkLibLPw(Lcom/android/modules/utils/TypedXmlSerializer;[Ljava/lang/String;[J[Z)V

    .line 3317
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getUsesStaticLibraries()[Ljava/lang/String;

    move-result-object v3

    .line 3318
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getUsesStaticLibrariesVersions()[J

    move-result-object v4

    .line 3317
    invoke-virtual {p0, p1, v3, v4}, Lcom/android/server/pm/Settings;->writeUsesStaticLibLPw(Lcom/android/modules/utils/TypedXmlSerializer;[Ljava/lang/String;[J)V

    .line 3320
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getSignatures()Lcom/android/server/pm/PackageSignatures;

    move-result-object v3

    const-string/jumbo v4, "sigs"

    invoke-virtual {v3, p1, v4, p2}, Lcom/android/server/pm/PackageSignatures;->writeXml(Lcom/android/modules/utils/TypedXmlSerializer;Ljava/lang/String;Ljava/util/ArrayList;)V

    .line 3322
    iget-object v3, v2, Lcom/android/server/pm/InstallSource;->mInitiatingPackageSignatures:Lcom/android/server/pm/PackageSignatures;

    if-eqz v3, :cond_17

    .line 3323
    iget-object v3, v2, Lcom/android/server/pm/InstallSource;->mInitiatingPackageSignatures:Lcom/android/server/pm/PackageSignatures;

    const-string/jumbo v4, "install-initiator-sigs"

    invoke-virtual {v3, p1, v4, p2}, Lcom/android/server/pm/PackageSignatures;->writeXml(Lcom/android/modules/utils/TypedXmlSerializer;Ljava/lang/String;Ljava/util/ArrayList;)V

    .line 3327
    :cond_17
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getKeySetData()Lcom/android/server/pm/PackageKeySetData;

    move-result-object v3

    invoke-virtual {p0, p1, v3}, Lcom/android/server/pm/Settings;->writeSigningKeySetLPr(Lcom/android/modules/utils/TypedXmlSerializer;Lcom/android/server/pm/PackageKeySetData;)V

    .line 3328
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getKeySetData()Lcom/android/server/pm/PackageKeySetData;

    move-result-object v3

    invoke-virtual {p0, p1, v3}, Lcom/android/server/pm/Settings;->writeUpgradeKeySetsLPr(Lcom/android/modules/utils/TypedXmlSerializer;Lcom/android/server/pm/PackageKeySetData;)V

    .line 3329
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getKeySetData()Lcom/android/server/pm/PackageKeySetData;

    move-result-object v3

    invoke-virtual {p0, p1, v3}, Lcom/android/server/pm/Settings;->writeKeySetAliasesLPr(Lcom/android/modules/utils/TypedXmlSerializer;Lcom/android/server/pm/PackageKeySetData;)V

    .line 3330
    invoke-virtual {p3}, Lcom/android/server/pm/PackageSetting;->getMimeGroups()Ljava/util/Map;

    move-result-object v3

    invoke-direct {p0, p1, v3}, Lcom/android/server/pm/Settings;->writeMimeGroupLPr(Lcom/android/modules/utils/TypedXmlSerializer;Ljava/util/Map;)V

    .line 3332
    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3333
    return-void
.end method

.method writePackageListLPr()V
    .locals 1

    .line 3012
    const/4 v0, -0x1

    invoke-virtual {p0, v0}, Lcom/android/server/pm/Settings;->writePackageListLPr(I)V

    .line 3013
    return-void
.end method

.method writePackageListLPr(I)V
    .locals 5
    .param p1, "creatingUserId"    # I

    .line 3016
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackageListFilename:Ljava/io/File;

    invoke-virtual {v0}, Ljava/io/File;->getAbsolutePath()Ljava/lang/String;

    move-result-object v0

    .line 3017
    .local v0, "filename":Ljava/lang/String;
    invoke-static {v0}, Landroid/os/SELinux;->fileSelabelLookup(Ljava/lang/String;)Ljava/lang/String;

    move-result-object v1

    .line 3018
    .local v1, "ctx":Ljava/lang/String;
    const-string v2, "PackageSettings"

    if-nez v1, :cond_0

    .line 3019
    new-instance v3, Ljava/lang/StringBuilder;

    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V

    const-string v4, "Failed to get SELinux context for "

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object v4, p0, Lcom/android/server/pm/Settings;->mPackageListFilename:Ljava/io/File;

    .line 3020
    invoke-virtual {v4}, Ljava/io/File;->getAbsolutePath()Ljava/lang/String;

    move-result-object v4

    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v3

    .line 3019
    invoke-static {v2, v3}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 3023
    :cond_0
    invoke-static {v1}, Landroid/os/SELinux;->setFSCreateContext(Ljava/lang/String;)Z

    move-result v3

    if-nez v3, :cond_1

    .line 3024
    const-string v3, "Failed to set packages.list SELinux context"

    invoke-static {v2, v3}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I

    .line 3027
    :cond_1
    const/4 v2, 0x0

    :try_start_0
    invoke-direct {p0, p1}, Lcom/android/server/pm/Settings;->writePackageListLPrInternal(I)V
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    .line 3029
    invoke-static {v2}, Landroid/os/SELinux;->setFSCreateContext(Ljava/lang/String;)Z

    .line 3030
    nop

    .line 3031
    return-void

    .line 3029
    :catchall_0
    move-exception v3

    invoke-static {v2}, Landroid/os/SELinux;->setFSCreateContext(Ljava/lang/String;)Z

    .line 3030
    throw v3
.end method

.method writePackageRestrictions(IJZ)V
    .locals 16
    .param p1, "userId"    # I
    .param p2, "startTime"    # J
    .param p4, "sync"    # Z

    .line 2371
    move-object/from16 v1, p0

    move/from16 v2, p1

    const/4 v3, 0x0

    .line 2372
    .local v3, "str":Ljava/io/FileOutputStream;
    invoke-direct/range {p0 .. p1}, Lcom/android/server/pm/Settings;->getUserPackagesStateFile(I)Lcom/android/server/pm/ResilientAtomicFile;

    move-result-object v4

    .line 2374
    .local v4, "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :try_start_0
    iget-object v5, v1, Lcom/android/server/pm/Settings;->mPackageRestrictionsLock:Ljava/lang/Object;

    monitor-enter v5
    :try_end_0
    .catch Ljava/io/IOException; {:try_start_0 .. :try_end_0} :catch_1
    .catchall {:try_start_0 .. :try_end_0} :catchall_5

    .line 2375
    const/4 v0, 0x0

    const/4 v6, 0x1

    if-nez p4, :cond_2

    .line 2376
    :try_start_1
    iget-object v7, v1, Lcom/android/server/pm/Settings;->mPendingAsyncPackageRestrictionsWrites:Landroid/util/SparseIntArray;

    invoke-virtual {v7, v2, v0}, Landroid/util/SparseIntArray;->get(II)I

    move-result v7

    sub-int/2addr v7, v6

    .line 2377
    .local v7, "pending":I
    if-gez v7, :cond_1

    .line 2378
    const-string v0, "PackageSettings"

    new-instance v6, Ljava/lang/StringBuilder;

    invoke-direct {v6}, Ljava/lang/StringBuilder;-><init>()V

    const-string v8, "Cancel writing package restrictions for user="

    invoke-virtual {v6, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v6, v2}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v6}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v6

    invoke-static {v0, v6}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I

    .line 2379
    monitor-exit v5
    :try_end_1
    .catchall {:try_start_1 .. :try_end_1} :catchall_0

    .line 2560
    if-eqz v4, :cond_0

    invoke-virtual {v4}, Lcom/android/server/pm/ResilientAtomicFile;->close()V

    .line 2379
    :cond_0
    return-void

    .line 2392
    .end local v7    # "pending":I
    :catchall_0
    move-exception v0

    move-object v14, v1

    goto/16 :goto_8

    .line 2381
    .restart local v7    # "pending":I
    :cond_1
    :try_start_2
    iget-object v8, v1, Lcom/android/server/pm/Settings;->mPendingAsyncPackageRestrictionsWrites:Landroid/util/SparseIntArray;

    invoke-virtual {v8, v2, v7}, Landroid/util/SparseIntArray;->put(II)V
    :try_end_2
    .catchall {:try_start_2 .. :try_end_2} :catchall_0

    .line 2385
    .end local v7    # "pending":I
    :cond_2
    :try_start_3
    invoke-virtual {v4}, Lcom/android/server/pm/ResilientAtomicFile;->startWrite()Ljava/io/FileOutputStream;

    move-result-object v7
    :try_end_3
    .catch Ljava/io/IOException; {:try_start_3 .. :try_end_3} :catch_2
    .catchall {:try_start_3 .. :try_end_3} :catchall_0

    move-object v3, v7

    .line 2391
    nop

    .line 2392
    :try_start_4
    monitor-exit v5
    :try_end_4
    .catchall {:try_start_4 .. :try_end_4} :catchall_0

    .line 2394
    :try_start_5
    iget-object v5, v1, Lcom/android/server/pm/Settings;->mLock:Lcom/android/server/pm/PackageManagerTracedLock;

    invoke-static {}, Lcom/android/server/pm/PackageManagerService;->boostPriorityForPackageManagerTracedLockedSection()V

    monitor-enter v5
    :try_end_5
    .catch Ljava/io/IOException; {:try_start_5 .. :try_end_5} :catch_1
    .catchall {:try_start_5 .. :try_end_5} :catchall_5

    .line 2395
    :try_start_6
    invoke-static {v3}, Landroid/util/Xml;->resolveSerializer(Ljava/io/OutputStream;)Lcom/android/modules/utils/TypedXmlSerializer;

    move-result-object v7

    .line 2396
    .local v7, "serializer":Lcom/android/modules/utils/TypedXmlSerializer;
    invoke-static {v6}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v8

    const/4 v9, 0x0

    invoke-interface {v7, v9, v8}, Lcom/android/modules/utils/TypedXmlSerializer;->startDocument(Ljava/lang/String;Ljava/lang/Boolean;)V

    .line 2397
    const-string/jumbo v8, "http://xmlpull.org/v1/doc/features.html#indent-output"

    invoke-interface {v7, v8, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->setFeature(Ljava/lang/String;Z)V

    .line 2400
    const-string/jumbo v8, "package-restrictions"

    invoke-interface {v7, v9, v8}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2406
    iget-object v8, v1, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    invoke-virtual {v8}, Lcom/android/server/utils/WatchedArrayMap;->values()Ljava/util/Collection;

    move-result-object v8

    invoke-interface {v8}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v8

    :goto_0
    invoke-interface {v8}, Ljava/util/Iterator;->hasNext()Z

    move-result v10

    if-eqz v10, :cond_1b

    invoke-interface {v8}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v10

    check-cast v10, Lcom/android/server/pm/PackageSetting;

    .line 2407
    .local v10, "pkg":Lcom/android/server/pm/PackageSetting;
    invoke-virtual {v10, v2}, Lcom/android/server/pm/PackageSetting;->readUserState(I)Lcom/android/server/pm/pkg/PackageUserStateInternal;

    move-result-object v11

    .line 2414
    .local v11, "ustate":Lcom/android/server/pm/pkg/PackageUserStateInternal;
    const-string/jumbo v12, "pkg"

    invoke-interface {v7, v9, v12}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2415
    const-string/jumbo v12, "name"

    invoke-virtual {v10}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v13

    invoke-interface {v7, v9, v12, v13}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2416
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getCeDataInode()J

    move-result-wide v12
    :try_end_6
    .catchall {:try_start_6 .. :try_end_6} :catchall_3

    const-wide/16 v14, 0x0

    cmp-long v12, v12, v14

    if-eqz v12, :cond_3

    .line 2417
    :try_start_7
    const-string v12, "ceDataInode"

    .line 2418
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getCeDataInode()J

    move-result-wide v0

    .line 2417
    invoke-interface {v7, v9, v12, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLong(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    goto :goto_1

    .line 2538
    .end local v7    # "serializer":Lcom/android/modules/utils/TypedXmlSerializer;
    .end local v10    # "pkg":Lcom/android/server/pm/PackageSetting;
    .end local v11    # "ustate":Lcom/android/server/pm/pkg/PackageUserStateInternal;
    :catchall_1
    move-exception v0

    move-object/from16 v14, p0

    goto/16 :goto_7

    .line 2420
    .restart local v7    # "serializer":Lcom/android/modules/utils/TypedXmlSerializer;
    .restart local v10    # "pkg":Lcom/android/server/pm/PackageSetting;
    .restart local v11    # "ustate":Lcom/android/server/pm/pkg/PackageUserStateInternal;
    :cond_3
    :goto_1
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getDeDataInode()J

    move-result-wide v0

    cmp-long v0, v0, v14

    if-eqz v0, :cond_4

    .line 2421
    const-string v0, "deDataInode"

    .line 2422
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getDeDataInode()J

    move-result-wide v14

    .line 2421
    invoke-interface {v7, v9, v0, v14, v15}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLong(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 2424
    :cond_4
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->isInstalled()Z

    move-result v0

    if-nez v0, :cond_5

    .line 2425
    const-string/jumbo v0, "inst"

    const/4 v1, 0x0

    invoke-interface {v7, v9, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    goto :goto_2

    .line 2424
    :cond_5
    const/4 v1, 0x0

    .line 2427
    :goto_2
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->isStopped()Z

    move-result v0

    if-eqz v0, :cond_6

    .line 2428
    const-string/jumbo v0, "stopped"

    invoke-interface {v7, v9, v0, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 2430
    :cond_6
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->isNotLaunched()Z

    move-result v0

    if-eqz v0, :cond_7

    .line 2431
    const-string/jumbo v0, "nl"

    invoke-interface {v7, v9, v0, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 2433
    :cond_7
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->isHidden()Z

    move-result v0

    if-eqz v0, :cond_8

    .line 2434
    const-string/jumbo v0, "hidden"

    invoke-interface {v7, v9, v0, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 2436
    :cond_8
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getDistractionFlags()I

    move-result v0

    if-eqz v0, :cond_9

    .line 2437
    const-string v0, "distraction_flags"

    .line 2438
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getDistractionFlags()I

    move-result v12

    .line 2437
    invoke-interface {v7, v9, v0, v12}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 2440
    :cond_9
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->isSuspended()Z

    move-result v0

    if-eqz v0, :cond_a

    .line 2441
    const-string/jumbo v0, "suspended"

    invoke-interface {v7, v9, v0, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 2443
    :cond_a
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->isInstantApp()Z

    move-result v0

    if-eqz v0, :cond_b

    .line 2444
    const-string/jumbo v0, "instant-app"

    invoke-interface {v7, v9, v0, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 2446
    :cond_b
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->isVirtualPreload()Z

    move-result v0

    if-eqz v0, :cond_c

    .line 2447
    const-string/jumbo v0, "virtual-preload"

    invoke-interface {v7, v9, v0, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 2449
    :cond_c
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getEnabledState()I

    move-result v0

    if-eqz v0, :cond_d

    .line 2450
    const-string v0, "enabled"

    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getEnabledState()I

    move-result v12

    invoke-interface {v7, v9, v0, v12}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 2452
    :cond_d
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getLastDisableAppCaller()Ljava/lang/String;

    move-result-object v0

    if-eqz v0, :cond_e

    .line 2453
    const-string v0, "enabledCaller"

    .line 2454
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getLastDisableAppCaller()Ljava/lang/String;

    move-result-object v12

    .line 2453
    invoke-interface {v7, v9, v0, v12}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2456
    :cond_e
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getInstallReason()I

    move-result v0

    if-eqz v0, :cond_f

    .line 2457
    const-string/jumbo v0, "install-reason"

    .line 2458
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getInstallReason()I

    move-result v12

    .line 2457
    invoke-interface {v7, v9, v0, v12}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 2460
    :cond_f
    const-string v0, "first-install-time"

    .line 2461
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getFirstInstallTimeMillis()J

    move-result-wide v12

    .line 2460
    invoke-interface {v7, v9, v0, v12, v13}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLongHex(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 2462
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getUninstallReason()I

    move-result v0

    if-eqz v0, :cond_10

    .line 2464
    const-string/jumbo v0, "uninstall-reason"

    .line 2465
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getUninstallReason()I

    move-result v12

    .line 2464
    invoke-interface {v7, v9, v0, v12}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 2467
    :cond_10
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getHarmfulAppWarning()Ljava/lang/String;

    move-result-object v0

    if-eqz v0, :cond_11

    .line 2468
    const-string/jumbo v0, "harmful-app-warning"

    .line 2469
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getHarmfulAppWarning()Ljava/lang/String;

    move-result-object v12

    .line 2468
    invoke-interface {v7, v9, v0, v12}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2471
    :cond_11
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getSplashScreenTheme()Ljava/lang/String;

    move-result-object v0

    if-eqz v0, :cond_12

    .line 2472
    const-string/jumbo v0, "splash-screen-theme"

    .line 2473
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getSplashScreenTheme()Ljava/lang/String;

    move-result-object v12

    .line 2472
    invoke-interface {v7, v9, v0, v12}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2475
    :cond_12
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getMinAspectRatio()I

    move-result v0

    if-eqz v0, :cond_13

    .line 2477
    const-string/jumbo v0, "min-aspect-ratio"

    .line 2478
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getMinAspectRatio()I

    move-result v12

    .line 2477
    invoke-interface {v7, v9, v0, v12}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 2480
    :cond_13
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->isSuspended()Z

    move-result v0

    if-eqz v0, :cond_16

    .line 2481
    const/4 v0, 0x0

    .local v0, "i":I
    :goto_3
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserStateInternal;->getSuspendParams()Lcom/android/server/utils/WatchedArrayMap;

    move-result-object v12

    invoke-virtual {v12}, Lcom/android/server/utils/WatchedArrayMap;->size()I

    move-result v12

    if-ge v0, v12, :cond_16

    .line 2482
    nop

    .line 2483
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserStateInternal;->getSuspendParams()Lcom/android/server/utils/WatchedArrayMap;

    move-result-object v12

    invoke-virtual {v12, v0}, Lcom/android/server/utils/WatchedArrayMap;->keyAt(I)Ljava/lang/Object;

    move-result-object v12

    check-cast v12, Landroid/content/pm/UserPackage;

    .line 2484
    .local v12, "suspendingPackage":Landroid/content/pm/UserPackage;
    const-string/jumbo v13, "suspend-params"

    invoke-interface {v7, v9, v13}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2485
    const-string/jumbo v13, "suspending-package"

    iget-object v14, v12, Landroid/content/pm/UserPackage;->packageName:Ljava/lang/String;

    invoke-interface {v7, v9, v13, v14}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2487
    invoke-static {}, Landroid/app/admin/flags/Flags;->crossUserSuspensionEnabledRo()Z

    move-result v13

    if-eqz v13, :cond_14

    .line 2488
    const-string/jumbo v13, "suspending-user"

    iget v14, v12, Landroid/content/pm/UserPackage;->userId:I

    invoke-interface {v7, v9, v13, v14}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeInt(Ljava/lang/String;Ljava/lang/String;I)Lorg/xmlpull/v1/XmlSerializer;

    .line 2491
    :cond_14
    nop

    .line 2492
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserStateInternal;->getSuspendParams()Lcom/android/server/utils/WatchedArrayMap;

    move-result-object v13

    invoke-virtual {v13, v0}, Lcom/android/server/utils/WatchedArrayMap;->valueAt(I)Ljava/lang/Object;

    move-result-object v13

    check-cast v13, Lcom/android/server/pm/pkg/SuspendParams;

    .line 2493
    .local v13, "params":Lcom/android/server/pm/pkg/SuspendParams;
    if-eqz v13, :cond_15

    .line 2494
    invoke-virtual {v13, v7}, Lcom/android/server/pm/pkg/SuspendParams;->saveToXml(Lcom/android/modules/utils/TypedXmlSerializer;)V

    .line 2496
    :cond_15
    const-string/jumbo v14, "suspend-params"

    invoke-interface {v7, v9, v14}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2481
    nop

    .end local v12    # "suspendingPackage":Landroid/content/pm/UserPackage;
    .end local v13    # "params":Lcom/android/server/pm/pkg/SuspendParams;
    add-int/lit8 v0, v0, 0x1

    goto :goto_3

    .line 2499
    .end local v0    # "i":I
    :cond_16
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getEnabledComponents()Landroid/util/ArraySet;

    move-result-object v0

    .line 2500
    .local v0, "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    if-eqz v0, :cond_18

    invoke-virtual {v0}, Landroid/util/ArraySet;->size()I

    move-result v12

    if-lez v12, :cond_18

    .line 2501
    const-string v12, "enabled-components"

    invoke-interface {v7, v9, v12}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2502
    const/4 v12, 0x0

    .local v12, "i":I
    :goto_4
    invoke-virtual {v0}, Landroid/util/ArraySet;->size()I

    move-result v13

    if-ge v12, v13, :cond_17

    .line 2503
    const-string/jumbo v13, "item"

    invoke-interface {v7, v9, v13}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2504
    const-string/jumbo v13, "name"

    .line 2505
    invoke-virtual {v0, v12}, Landroid/util/ArraySet;->valueAt(I)Ljava/lang/Object;

    move-result-object v14

    check-cast v14, Ljava/lang/String;

    .line 2504
    invoke-interface {v7, v9, v13, v14}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2506
    const-string/jumbo v13, "item"

    invoke-interface {v7, v9, v13}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2502
    add-int/lit8 v12, v12, 0x1

    goto :goto_4

    :cond_17
    nop

    .line 2508
    .end local v12    # "i":I
    const-string v12, "enabled-components"

    invoke-interface {v7, v9, v12}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2510
    :cond_18
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getDisabledComponents()Landroid/util/ArraySet;

    move-result-object v12

    .line 2511
    .local v12, "disabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    if-eqz v12, :cond_1a

    invoke-virtual {v12}, Landroid/util/ArraySet;->size()I

    move-result v13

    if-lez v13, :cond_1a

    .line 2512
    const-string v13, "disabled-components"

    invoke-interface {v7, v9, v13}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2513
    const/4 v13, 0x0

    .local v13, "i":I
    :goto_5
    invoke-virtual {v12}, Landroid/util/ArraySet;->size()I

    move-result v14

    if-ge v13, v14, :cond_19

    .line 2514
    const-string/jumbo v14, "item"

    invoke-interface {v7, v9, v14}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2515
    const-string/jumbo v14, "name"

    .line 2516
    invoke-virtual {v12, v13}, Landroid/util/ArraySet;->valueAt(I)Ljava/lang/Object;

    move-result-object v15

    check-cast v15, Ljava/lang/String;

    .line 2515
    invoke-interface {v7, v9, v14, v15}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2517
    const-string/jumbo v14, "item"

    invoke-interface {v7, v9, v14}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2513
    add-int/lit8 v13, v13, 0x1

    goto :goto_5

    :cond_19
    nop

    .line 2519
    .end local v13    # "i":I
    const-string v13, "disabled-components"

    invoke-interface {v7, v9, v13}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2521
    :cond_1a
    invoke-interface {v11}, Lcom/android/server/pm/pkg/PackageUserState;->getArchiveState()Lcom/android/server/pm/pkg/ArchiveState;

    move-result-object v13
    :try_end_7
    .catchall {:try_start_7 .. :try_end_7} :catchall_1

    move-object/from16 v14, p0

    :try_start_8
    invoke-direct {v14, v7, v13}, Lcom/android/server/pm/Settings;->writeArchiveStateLPr(Lcom/android/modules/utils/TypedXmlSerializer;Lcom/android/server/pm/pkg/ArchiveState;)V

    .line 2523
    const-string/jumbo v13, "pkg"

    invoke-interface {v7, v9, v13}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2524
    move v0, v1

    move-object v1, v14

    .end local v0    # "enabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    .end local v10    # "pkg":Lcom/android/server/pm/PackageSetting;
    .end local v11    # "ustate":Lcom/android/server/pm/pkg/PackageUserStateInternal;
    .end local v12    # "disabledComponents":Landroid/util/ArraySet;, "Landroid/util/ArraySet<Ljava/lang/String;>;"
    goto/16 :goto_0

    .line 2538
    .end local v7    # "serializer":Lcom/android/modules/utils/TypedXmlSerializer;
    :catchall_2
    move-exception v0

    goto :goto_7

    :catchall_3
    move-exception v0

    move-object v14, v1

    goto :goto_7

    .line 2526
    .restart local v7    # "serializer":Lcom/android/modules/utils/TypedXmlSerializer;
    :cond_1b
    move-object v14, v1

    invoke-virtual {v14, v7, v2, v6}, Lcom/android/server/pm/Settings;->writePreferredActivitiesLPr(Lcom/android/modules/utils/TypedXmlSerializer;IZ)V

    .line 2527
    invoke-virtual {v14, v7, v2}, Lcom/android/server/pm/Settings;->writePersistentPreferredActivitiesLPr(Lcom/android/modules/utils/TypedXmlSerializer;I)V

    .line 2528
    invoke-virtual {v14, v7, v2}, Lcom/android/server/pm/Settings;->writeCrossProfileIntentFiltersLPr(Lcom/android/modules/utils/TypedXmlSerializer;I)V

    .line 2529
    invoke-virtual {v14, v7, v2}, Lcom/android/server/pm/Settings;->writeDefaultAppsLPr(Lorg/xmlpull/v1/XmlSerializer;I)V

    .line 2530
    invoke-virtual {v14, v7, v2}, Lcom/android/server/pm/Settings;->writeBlockUninstallPackagesLPr(Lcom/android/modules/utils/TypedXmlSerializer;I)V

    .line 2532
    invoke-static {}, Lcom/android/server/pm/TaskPersistUtil;->getInstance()Lcom/android/server/pm/TaskPersistUtil;

    move-result-object v0

    invoke-virtual {v0, v7, v2}, Lcom/android/server/pm/TaskPersistUtil;->writeTaskPersistPackageLPr(Lorg/xmlpull/v1/XmlSerializer;I)V

    .line 2535
    const-string/jumbo v0, "package-restrictions"

    invoke-interface {v7, v9, v0}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2537
    invoke-interface {v7}, Lcom/android/modules/utils/TypedXmlSerializer;->endDocument()V

    .line 2538
    .end local v7    # "serializer":Lcom/android/modules/utils/TypedXmlSerializer;
    monitor-exit v5
    :try_end_8
    .catchall {:try_start_8 .. :try_end_8} :catchall_2

    :try_start_9
    invoke-static {}, Lcom/android/server/pm/PackageManagerService;->resetPriorityAfterPackageManagerTracedLockedSection()V

    .line 2540
    invoke-virtual {v4, v3}, Lcom/android/server/pm/ResilientAtomicFile;->finishWrite(Ljava/io/FileOutputStream;)V

    .line 2547
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string/jumbo v1, "package-user-"

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 2548
    invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J

    move-result-wide v5

    sub-long v5, v5, p2

    .line 2547
    invoke-static {v0, v5, v6}, Lcom/android/internal/logging/EventLogTags;->writeCommitSysConfigFile(Ljava/lang/String;J)V
    :try_end_9
    .catch Ljava/io/IOException; {:try_start_9 .. :try_end_9} :catch_0
    .catchall {:try_start_9 .. :try_end_9} :catchall_4

    .line 2560
    invoke-virtual {v4}, Lcom/android/server/pm/ResilientAtomicFile;->close()V

    .line 2551
    return-void

    .line 2372
    :catchall_4
    move-exception v0

    :goto_6
    move-object v1, v0

    goto :goto_a

    .line 2552
    :catch_0
    move-exception v0

    goto :goto_9

    .line 2538
    :goto_7
    :try_start_a
    monitor-exit v5
    :try_end_a
    .catchall {:try_start_a .. :try_end_a} :catchall_2

    :try_start_b
    invoke-static {}, Lcom/android/server/pm/PackageManagerService;->resetPriorityAfterPackageManagerTracedLockedSection()V

    .end local v3    # "str":Ljava/io/FileOutputStream;
    .end local v4    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .end local p0    # "this":Lcom/android/server/pm/Settings;
    .end local p1    # "userId":I
    .end local p2    # "startTime":J
    .end local p4    # "sync":Z
    throw v0
    :try_end_b
    .catch Ljava/io/IOException; {:try_start_b .. :try_end_b} :catch_0
    .catchall {:try_start_b .. :try_end_b} :catchall_4

    .line 2372
    .restart local v3    # "str":Ljava/io/FileOutputStream;
    .restart local v4    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local p0    # "this":Lcom/android/server/pm/Settings;
    .restart local p1    # "userId":I
    .restart local p2    # "startTime":J
    .restart local p4    # "sync":Z
    :catchall_5
    move-exception v0

    move-object v14, v1

    goto :goto_6

    .line 2552
    :catch_1
    move-exception v0

    move-object v14, v1

    goto :goto_9

    .line 2386
    :catch_2
    move-exception v0

    move-object v14, v1

    move-object v1, v0

    move-object v0, v1

    .line 2387
    .local v0, "e":Ljava/io/IOException;
    :try_start_c
    const-string v1, "PackageManager"

    const-string v6, "Unable to write package manager package restrictions,  current changes will be lost at reboot"

    invoke-static {v1, v6, v0}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I

    .line 2390
    monitor-exit v5
    :try_end_c
    .catchall {:try_start_c .. :try_end_c} :catchall_6

    .line 2560
    if-eqz v4, :cond_1c

    invoke-virtual {v4}, Lcom/android/server/pm/ResilientAtomicFile;->close()V

    .line 2390
    :cond_1c
    return-void

    .line 2392
    .end local v0    # "e":Ljava/io/IOException;
    :catchall_6
    move-exception v0

    :goto_8
    :try_start_d
    monitor-exit v5
    :try_end_d
    .catchall {:try_start_d .. :try_end_d} :catchall_6

    .end local v3    # "str":Ljava/io/FileOutputStream;
    .end local v4    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .end local p0    # "this":Lcom/android/server/pm/Settings;
    .end local p1    # "userId":I
    .end local p2    # "startTime":J
    .end local p4    # "sync":Z
    :try_start_e
    throw v0
    :try_end_e
    .catch Ljava/io/IOException; {:try_start_e .. :try_end_e} :catch_0
    .catchall {:try_start_e .. :try_end_e} :catchall_4

    .line 2552
    .restart local v3    # "str":Ljava/io/FileOutputStream;
    .restart local v4    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    .restart local p0    # "this":Lcom/android/server/pm/Settings;
    .restart local p1    # "userId":I
    .restart local p2    # "startTime":J
    .restart local p4    # "sync":Z
    :goto_9
    nop

    .line 2553
    .restart local v0    # "e":Ljava/io/IOException;
    :try_start_f
    const-string v1, "PackageManager"

    const-string v5, "Unable to write package manager package restrictions,  current changes will be lost at reboot"

    invoke-static {v1, v5, v0}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I

    .line 2556
    if-eqz v3, :cond_1d

    .line 2557
    invoke-virtual {v4, v3}, Lcom/android/server/pm/ResilientAtomicFile;->failWrite(Ljava/io/FileOutputStream;)V
    :try_end_f
    .catchall {:try_start_f .. :try_end_f} :catchall_4

    .line 2560
    .end local v0    # "e":Ljava/io/IOException;
    :cond_1d
    if-eqz v4, :cond_1e

    invoke-virtual {v4}, Lcom/android/server/pm/ResilientAtomicFile;->close()V

    .line 2561
    .end local v4    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :cond_1e
    return-void

    .line 2372
    .restart local v4    # "atomicFile":Lcom/android/server/pm/ResilientAtomicFile;
    :goto_a
    if-eqz v4, :cond_1f

    :try_start_10
    invoke-virtual {v4}, Lcom/android/server/pm/ResilientAtomicFile;->close()V
    :try_end_10
    .catchall {:try_start_10 .. :try_end_10} :catchall_7

    goto :goto_b

    :catchall_7
    move-exception v0

    move-object v5, v0

    invoke-virtual {v1, v5}, Ljava/lang/Throwable;->addSuppressed(Ljava/lang/Throwable;)V

    :cond_1f
    :goto_b
    throw v1
.end method

.method writePackageRestrictions([Ljava/lang/Integer;)V
    .locals 6
    .param p1, "userIds"    # [Ljava/lang/Integer;

    .line 2359
    invoke-direct {p0}, Lcom/android/server/pm/Settings;->invalidatePackageCache()V

    .line 2360
    invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J

    move-result-wide v0

    .line 2361
    .local v0, "startTime":J
    array-length v2, p1

    const/4 v3, 0x0

    :goto_0
    if-ge v3, v2, :cond_0

    aget-object v4, p1, v3

    invoke-virtual {v4}, Ljava/lang/Integer;->intValue()I

    move-result v4

    .line 2362
    .local v4, "userId":I
    const/4 v5, 0x1

    invoke-virtual {p0, v4, v0, v1, v5}, Lcom/android/server/pm/Settings;->writePackageRestrictions(IJZ)V

    .line 2361
    .end local v4    # "userId":I
    add-int/lit8 v3, v3, 0x1

    goto :goto_0

    .line 2364
    :cond_0
    return-void
.end method

.method writePackageRestrictionsLPr(I)V
    .locals 1
    .param p1, "userId"    # I

    .line 2335
    const/4 v0, 0x0

    invoke-virtual {p0, p1, v0}, Lcom/android/server/pm/Settings;->writePackageRestrictionsLPr(IZ)V

    .line 2336
    return-void
.end method

.method writePackageRestrictionsLPr(IZ)V
    .locals 9
    .param p1, "userId"    # I
    .param p2, "sync"    # Z

    .line 2339
    invoke-direct {p0}, Lcom/android/server/pm/Settings;->invalidatePackageCache()V

    .line 2341
    invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J

    move-result-wide v6

    .line 2343
    .local v6, "startTime":J
    if-eqz p2, :cond_0

    .line 2344
    invoke-virtual {p0, p1, v6, v7, p2}, Lcom/android/server/pm/Settings;->writePackageRestrictions(IJZ)V

    goto :goto_0

    .line 2349
    :cond_0
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mPackageRestrictionsLock:Ljava/lang/Object;

    monitor-enter v0

    .line 2350
    :try_start_0
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mPendingAsyncPackageRestrictionsWrites:Landroid/util/SparseIntArray;

    const/4 v2, 0x0

    invoke-virtual {v1, p1, v2}, Landroid/util/SparseIntArray;->get(II)I

    move-result v1

    add-int/lit8 v1, v1, 0x1

    .line 2351
    .local v1, "pending":I
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPendingAsyncPackageRestrictionsWrites:Landroid/util/SparseIntArray;

    invoke-virtual {v2, p1, v1}, Landroid/util/SparseIntArray;->put(II)V

    .line 2352
    .end local v1    # "pending":I
    monitor-exit v0
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    .line 2353
    new-instance v8, Lcom/android/server/pm/Settings$$ExternalSyntheticLambda2;

    move-object v0, v8

    move-object v1, p0

    move v2, p1

    move-wide v3, v6

    move v5, p2

    invoke-direct/range {v0 .. v5}, Lcom/android/server/pm/Settings$$ExternalSyntheticLambda2;-><init>(Lcom/android/server/pm/Settings;IJZ)V

    .line 2354
    .local v0, "r":Ljava/lang/Runnable;
    iget-object v1, p0, Lcom/android/server/pm/Settings;->mHandler:Landroid/os/Handler;

    const/16 v2, 0x1e

    invoke-virtual {v1, v2, v0}, Landroid/os/Handler;->obtainMessage(ILjava/lang/Object;)Landroid/os/Message;

    move-result-object v1

    invoke-virtual {v1}, Landroid/os/Message;->sendToTarget()V

    .line 2356
    .end local v0    # "r":Ljava/lang/Runnable;
    :goto_0
    return-void

    .line 2352
    :catchall_0
    move-exception v1

    :try_start_1
    monitor-exit v0
    :try_end_1
    .catchall {:try_start_1 .. :try_end_1} :catchall_0

    throw v1
.end method

.method public writePermissionStateForUserLPr(IZ)V
    .locals 8
    .param p1, "userId"    # I
    .param p2, "sync"    # Z

    .line 5928
    if-eqz p2, :cond_0

    .line 5929
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPermissionDataProvider:Lcom/android/server/pm/permission/LegacyPermissionDataProvider;

    iget-object v3, p0, Lcom/android/server/pm/Settings;->mPackages:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v4, p0, Lcom/android/server/pm/Settings;->mSharedUsers:Lcom/android/server/utils/WatchedArrayMap;

    iget-object v6, p0, Lcom/android/server/pm/Settings;->mLock:Lcom/android/server/pm/PackageManagerTracedLock;

    const/4 v7, 0x1

    const/4 v5, 0x0

    move v1, p1

    invoke-virtual/range {v0 .. v7}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;->writeStateForUser(ILcom/android/server/pm/permission/LegacyPermissionDataProvider;Lcom/android/server/utils/WatchedArrayMap;Lcom/android/server/utils/WatchedArrayMap;Landroid/os/Handler;Lcom/android/server/pm/PackageManagerTracedLock;Z)V

    goto :goto_0

    .line 5932
    :cond_0
    iget-object v0, p0, Lcom/android/server/pm/Settings;->mRuntimePermissionsPersistence:Lcom/android/server/pm/Settings$RuntimePermissionPersistence;

    invoke-virtual {v0, p1}, Lcom/android/server/pm/Settings$RuntimePermissionPersistence;->writeStateForUserAsync(I)V

    .line 5934
    :goto_0
    return-void
.end method

.method writePersistentPreferredActivitiesLPr(Lcom/android/modules/utils/TypedXmlSerializer;I)V
    .locals 6
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .param p2, "userId"    # I
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/lang/IllegalArgumentException;,
            Ljava/lang/IllegalStateException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 2276
    const/4 v0, 0x0

    const-string/jumbo v1, "persistent-preferred-activities"

    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2277
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPersistentPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v2, p2}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/server/pm/PersistentPreferredIntentResolver;

    .line 2278
    .local v2, "ppir":Lcom/android/server/pm/PersistentPreferredIntentResolver;
    if-eqz v2, :cond_0

    .line 2279
    invoke-virtual {v2}, Lcom/android/server/IntentResolver;->filterSet()Ljava/util/Set;

    move-result-object v3

    invoke-interface {v3}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v3

    :goto_0
    invoke-interface {v3}, Ljava/util/Iterator;->hasNext()Z

    move-result v4

    nop

    if-eqz v4, :cond_0

    invoke-interface {v3}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/android/server/pm/PersistentPreferredActivity;

    .line 2280
    .local v4, "ppa":Lcom/android/server/pm/PersistentPreferredActivity;
    const-string/jumbo v5, "item"

    invoke-interface {p1, v0, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2281
    invoke-virtual {v4, p1}, Lcom/android/server/pm/PersistentPreferredActivity;->writeToXml(Lcom/android/modules/utils/TypedXmlSerializer;)V

    .line 2282
    invoke-interface {p1, v0, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2283
    .end local v4    # "ppa":Lcom/android/server/pm/PersistentPreferredActivity;
    goto :goto_0

    .line 2285
    :cond_0
    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2286
    return-void
.end method

.method writePreferredActivitiesLPr(Lcom/android/modules/utils/TypedXmlSerializer;IZ)V
    .locals 6
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .param p2, "userId"    # I
    .param p3, "full"    # Z
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/lang/IllegalArgumentException;,
            Ljava/lang/IllegalStateException;,
            Ljava/io/IOException;
        }
    .end annotation

    .line 2262
    const/4 v0, 0x0

    const-string/jumbo v1, "preferred-activities"

    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2263
    iget-object v2, p0, Lcom/android/server/pm/Settings;->mPreferredActivities:Lcom/android/server/utils/WatchedSparseArray;

    invoke-virtual {v2, p2}, Lcom/android/server/utils/WatchedSparseArray;->get(I)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Lcom/android/server/pm/PreferredIntentResolver;

    .line 2264
    .local v2, "pir":Lcom/android/server/pm/PreferredIntentResolver;
    if-eqz v2, :cond_0

    .line 2265
    invoke-virtual {v2}, Lcom/android/server/IntentResolver;->filterSet()Ljava/util/Set;

    move-result-object v3

    invoke-interface {v3}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v3

    :goto_0
    invoke-interface {v3}, Ljava/util/Iterator;->hasNext()Z

    move-result v4

    nop

    if-eqz v4, :cond_0

    invoke-interface {v3}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/android/server/pm/PreferredActivity;

    .line 2266
    .local v4, "pa":Lcom/android/server/pm/PreferredActivity;
    const-string/jumbo v5, "item"

    invoke-interface {p1, v0, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2267
    invoke-virtual {v4, p1, p3}, Lcom/android/server/pm/PreferredActivity;->writeToXml(Lcom/android/modules/utils/TypedXmlSerializer;Z)V

    .line 2268
    invoke-interface {p1, v0, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2269
    .end local v4    # "pa":Lcom/android/server/pm/PreferredActivity;
    goto :goto_0

    .line 2271
    :cond_0
    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2272
    return-void
.end method

.method writeSigningKeySetLPr(Lcom/android/modules/utils/TypedXmlSerializer;Lcom/android/server/pm/PackageKeySetData;)V
    .locals 5
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .param p2, "data"    # Lcom/android/server/pm/PackageKeySetData;
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;
        }
    .end annotation

    .line 3337
    const/4 v0, 0x0

    const-string/jumbo v1, "proper-signing-keyset"

    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3338
    const-string/jumbo v2, "identifier"

    invoke-virtual {p2}, Lcom/android/server/pm/PackageKeySetData;->getProperSigningKeySet()J

    move-result-wide v3

    invoke-interface {p1, v0, v2, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLong(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 3339
    invoke-interface {p1, v0, v1}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3340
    return-void
.end method

.method writeUpgradeKeySetsLPr(Lcom/android/modules/utils/TypedXmlSerializer;Lcom/android/server/pm/PackageKeySetData;)V
    .locals 8
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .param p2, "data"    # Lcom/android/server/pm/PackageKeySetData;
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;
        }
    .end annotation

    .line 3344
    invoke-virtual {p2}, Lcom/android/server/pm/PackageKeySetData;->isUsingUpgradeKeySets()Z

    move-result v0

    if-eqz v0, :cond_0

    .line 3345
    invoke-virtual {p2}, Lcom/android/server/pm/PackageKeySetData;->getUpgradeKeySets()[J

    move-result-object v0

    array-length v1, v0

    const/4 v2, 0x0

    :goto_0
    nop

    if-ge v2, v1, :cond_0

    aget-wide v3, v0, v2

    .line 3346
    .local v3, "id":J
    const/4 v5, 0x0

    const-string/jumbo v6, "upgrade-keyset"

    invoke-interface {p1, v5, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3347
    const-string/jumbo v7, "identifier"

    invoke-interface {p1, v5, v7, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLong(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 3348
    invoke-interface {p1, v5, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 3345
    .end local v3    # "id":J
    add-int/lit8 v2, v2, 0x1

    goto :goto_0

    .line 3351
    :cond_0
    return-void
.end method

.method writeUserRestrictionsLPw(Lcom/android/server/pm/PackageSetting;Lcom/android/server/pm/PackageSetting;)V
    .locals 5
    .param p1, "newPackage"    # Lcom/android/server/pm/PackageSetting;
    .param p2, "oldPackage"    # Lcom/android/server/pm/PackageSetting;

    .line 1384
    invoke-virtual {p1}, Lcom/android/server/pm/PackageSetting;->getPackageName()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {p0, v0}, Lcom/android/server/pm/Settings;->getPackageLPr(Ljava/lang/String;)Lcom/android/server/pm/PackageSetting;

    move-result-object v0

    if-nez v0, :cond_0

    .line 1385
    return-void

    .line 1388
    :cond_0
    invoke-static {}, Lcom/android/server/pm/UserManagerService;->getInstance()Lcom/android/server/pm/UserManagerService;

    move-result-object v0

    invoke-static {v0}, Lcom/android/server/pm/Settings;->getAllUsers(Lcom/android/server/pm/UserManagerService;)Ljava/util/List;

    move-result-object v0

    .line 1389
    .local v0, "allUsers":Ljava/util/List;, "Ljava/util/List<Landroid/content/pm/UserInfo;>;"
    if-nez v0, :cond_1

    .line 1390
    return-void

    .line 1392
    :cond_1
    invoke-interface {v0}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_0
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v2

    if-eqz v2, :cond_4

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Landroid/content/pm/UserInfo;

    .line 1393
    .local v2, "user":Landroid/content/pm/UserInfo;
    if-nez p2, :cond_2

    .line 1394
    sget-object v3, Lcom/android/server/pm/pkg/PackageUserState;->DEFAULT:Lcom/android/server/pm/pkg/PackageUserState;

    goto :goto_1

    .line 1395
    :cond_2
    iget v3, v2, Landroid/content/pm/UserInfo;->id:I

    invoke-virtual {p2, v3}, Lcom/android/server/pm/PackageSetting;->readUserState(I)Lcom/android/server/pm/pkg/PackageUserStateInternal;

    move-result-object v3

    :goto_1
    nop

    .line 1396
    .local v3, "oldUserState":Lcom/android/server/pm/pkg/PackageUserState;
    iget v4, v2, Landroid/content/pm/UserInfo;->id:I

    invoke-virtual {p1, v4}, Lcom/android/server/pm/PackageSetting;->readUserState(I)Lcom/android/server/pm/pkg/PackageUserStateInternal;

    move-result-object v4

    invoke-virtual {v3, v4}, Ljava/lang/Object;->equals(Ljava/lang/Object;)Z

    move-result v4

    if-nez v4, :cond_3

    .line 1397
    iget v4, v2, Landroid/content/pm/UserInfo;->id:I

    invoke-virtual {p0, v4}, Lcom/android/server/pm/Settings;->writePackageRestrictionsLPr(I)V

    .line 1399
    .end local v2    # "user":Landroid/content/pm/UserInfo;
    .end local v3    # "oldUserState":Lcom/android/server/pm/pkg/PackageUserState;
    :cond_3
    goto :goto_0

    .line 1400
    :cond_4
    return-void
.end method

.method writeUsesSdkLibLPw(Lcom/android/modules/utils/TypedXmlSerializer;[Ljava/lang/String;[J[Z)V
    .locals 9
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .param p2, "usesSdkLibraries"    # [Ljava/lang/String;
    .param p3, "usesSdkLibraryVersions"    # [J
    .param p4, "usesSdkLibrariesOptional"    # [Z
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;
        }
    .end annotation

    .line 2656
    invoke-static {p2}, Lcom/android/internal/util/ArrayUtils;->isEmpty([Ljava/lang/Object;)Z

    move-result v0

    if-nez v0, :cond_0

    invoke-static {p3}, Lcom/android/internal/util/ArrayUtils;->isEmpty([J)Z

    move-result v0

    if-nez v0, :cond_0

    array-length v0, p2

    array-length v1, p3

    if-eq v0, v1, :cond_1

    :cond_0
    goto :goto_1

    .line 2660
    :cond_1
    array-length v0, p2

    .line 2661
    .local v0, "libCount":I
    const/4 v1, 0x0

    .local v1, "i":I
    :goto_0
    if-ge v1, v0, :cond_2

    .line 2662
    aget-object v2, p2, v1

    .line 2663
    .local v2, "libName":Ljava/lang/String;
    aget-wide v3, p3, v1

    .line 2664
    .local v3, "libVersion":J
    aget-boolean v5, p4, v1

    .line 2665
    .local v5, "libOptional":Z
    const/4 v6, 0x0

    const-string/jumbo v7, "uses-sdk-lib"

    invoke-interface {p1, v6, v7}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2666
    const-string/jumbo v8, "name"

    invoke-interface {p1, v6, v8, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2667
    const-string/jumbo v8, "version"

    invoke-interface {p1, v6, v8, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLong(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 2668
    const-string/jumbo v8, "optional"

    invoke-interface {p1, v6, v8, v5}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeBoolean(Ljava/lang/String;Ljava/lang/String;Z)Lorg/xmlpull/v1/XmlSerializer;

    .line 2669
    invoke-interface {p1, v6, v7}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2661
    .end local v2    # "libName":Ljava/lang/String;
    .end local v3    # "libVersion":J
    .end local v5    # "libOptional":Z
    add-int/lit8 v1, v1, 0x1

    goto :goto_0

    :cond_2
    nop

    .line 2671
    .end local v1    # "i":I
    return-void

    .line 2658
    .end local v0    # "libCount":I
    :goto_1
    return-void
.end method

.method writeUsesStaticLibLPw(Lcom/android/modules/utils/TypedXmlSerializer;[Ljava/lang/String;[J)V
    .locals 8
    .param p1, "serializer"    # Lcom/android/modules/utils/TypedXmlSerializer;
    .param p2, "usesStaticLibraries"    # [Ljava/lang/String;
    .param p3, "usesStaticLibraryVersions"    # [J
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/io/IOException;
        }
    .end annotation

    .line 2675
    invoke-static {p2}, Lcom/android/internal/util/ArrayUtils;->isEmpty([Ljava/lang/Object;)Z

    move-result v0

    if-nez v0, :cond_0

    invoke-static {p3}, Lcom/android/internal/util/ArrayUtils;->isEmpty([J)Z

    move-result v0

    if-nez v0, :cond_0

    array-length v0, p2

    array-length v1, p3

    if-eq v0, v1, :cond_1

    :cond_0
    goto :goto_1

    .line 2679
    :cond_1
    array-length v0, p2

    .line 2680
    .local v0, "libCount":I
    const/4 v1, 0x0

    .local v1, "i":I
    :goto_0
    if-ge v1, v0, :cond_2

    .line 2681
    aget-object v2, p2, v1

    .line 2682
    .local v2, "libName":Ljava/lang/String;
    aget-wide v3, p3, v1

    .line 2683
    .local v3, "libVersion":J
    const/4 v5, 0x0

    const-string/jumbo v6, "uses-static-lib"

    invoke-interface {p1, v5, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->startTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2684
    const-string/jumbo v7, "name"

    invoke-interface {p1, v5, v7, v2}, Lcom/android/modules/utils/TypedXmlSerializer;->attribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2685
    const-string/jumbo v7, "version"

    invoke-interface {p1, v5, v7, v3, v4}, Lcom/android/modules/utils/TypedXmlSerializer;->attributeLong(Ljava/lang/String;Ljava/lang/String;J)Lorg/xmlpull/v1/XmlSerializer;

    .line 2686
    invoke-interface {p1, v5, v6}, Lcom/android/modules/utils/TypedXmlSerializer;->endTag(Ljava/lang/String;Ljava/lang/String;)Lorg/xmlpull/v1/XmlSerializer;

    .line 2680
    .end local v2    # "libName":Ljava/lang/String;
    .end local v3    # "libVersion":J
    add-int/lit8 v1, v1, 0x1

    goto :goto_0

    :cond_2
    nop

    .line 2688
    .end local v1    # "i":I
    return-void

    .line 2677
    .end local v0    # "libCount":I
    :goto_1
    return-void
.end method
